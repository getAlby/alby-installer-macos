/*! For license information please see background.bundle.js.LICENSE.txt */
(()=>{var e,t,n,r,i={77235:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer,r=n(45826),i=n(42514),o=n(53583);function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s=a(r);s.utils.hmacSha256Sync=(e,...t)=>i.hmac(o.sha256,e,s.utils.concatBytes(...t)),s.utils.sha256Sync=(...e)=>o.sha256(s.utils.concatBytes(...e));const c=s.utils._normalizePrivateKey,u=32,l=32,f=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),h=32;function d(e,t){for(let n=0;n<32;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function p(e){return e instanceof Uint8Array&&e.length===l&&!(d(e,f)>=0)}function y(e){return e instanceof Uint8Array&&64===e.length&&d(e.subarray(0,32),f)<0&&d(e.subarray(32,64),f)<0}function g(e){return e instanceof Uint8Array&&e.length===u}function b(e){return void 0===e||e instanceof Uint8Array&&e.length===h}function m(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function w(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>=0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private scalar");t=m(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private scalar");if(32!==e.length)throw new Error("Expected 32 bytes of private scalar");n=e,t=m(s.utils.bytesToHex(n))}var n;if(t<0)throw new Error("Expected private scalar >= 0");return t}const v=(e,t,n)=>{const r=s.Point.fromHex(e),i=w(t),o=s.Point.BASE.multiplyAndAddUnsafe(r,i,1n);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(n)};function _(e,t){return void 0===e?void 0===t||A(t):!!e}function E(e){try{return e()}catch(e){return null}}function S(e,t){if(32===e.length!==t)return!1;try{return!!s.Point.fromHex(e)}catch(e){return!1}}function k(e){return S(e,!1)}function A(e){return S(e,!1)&&33===e.length}function O(e){return s.utils.isValidPrivateKey(e)}function P(e){return S(e,!0)}function I(e){if(!k(e))throw new Error("Expected Point");return e.slice(1,33)}function T(e,t){if(!O(e))throw new Error("Expected Private");return E((()=>s.getPublicKey(e,_(t))))}t.isPoint=k,t.isPointCompressed=A,t.isPrivate=O,t.isXOnlyPoint=P,t.pointAdd=function(e,t,n){if(!k(e)||!k(t))throw new Error("Expected Point");return E((()=>{const r=s.Point.fromHex(e),i=s.Point.fromHex(t);return r.equals(i.negate())?null:r.add(i).toRawBytes(_(n,e))}))},t.pointAddScalar=function(e,t,n){if(!k(e))throw new Error("Expected Point");if(!p(t))throw new Error("Expected Tweak");return E((()=>v(e,t,_(n,e))))},t.pointCompress=function(e,t){if(!k(e))throw new Error("Expected Point");return s.Point.fromHex(e).toRawBytes(_(t,e))},t.pointFromScalar=T,t.pointMultiply=function(e,t,n){if(!k(e))throw new Error("Expected Point");if(!p(t))throw new Error("Expected Tweak");return E((()=>((e,t,n)=>{const r=s.Point.fromHex(e),i="string"==typeof t?t:s.utils.bytesToHex(t),o=BigInt(`0x${i}`);return r.multiply(o).toRawBytes(n)})(e,t,_(n,e))))},t.privateAdd=function(e,t){if(!1===O(e))throw new Error("Expected Private");if(!1===p(t))throw new Error("Expected Tweak");return E((()=>((e,t)=>{const n=c(e),r=w(t),i=s.utils._bigintTo32Bytes(s.utils.mod(n+r,s.CURVE.n));return s.utils.isValidPrivateKey(i)?i:null})(e,t)))},t.privateNegate=function(e){if(!1===O(e))throw new Error("Expected Private");return(e=>{const t=c(e),n=s.utils._bigintTo32Bytes(s.CURVE.n-t);return s.utils.isValidPrivateKey(n)?n:null})(e)},t.privateSub=function(e,t){if(!1===O(e))throw new Error("Expected Private");if(!1===p(t))throw new Error("Expected Tweak");return E((()=>((e,t)=>{const n=c(e),r=w(t),i=s.utils._bigintTo32Bytes(s.utils.mod(n-r,s.CURVE.n));return s.utils.isValidPrivateKey(i)?i:null})(e,t)))},t.sign=function(e,t,n){if(!O(t))throw new Error("Expected Private");if(!g(e))throw new Error("Expected Scalar");if(!b(n))throw new Error("Expected Extra Data (32 bytes)");return s.signSync(e,t,{der:!1,extraEntropy:n})},t.signSchnorr=function(e,t,n=Buffer.alloc(32,0)){if(!O(t))throw new Error("Expected Private");if(!g(e))throw new Error("Expected Scalar");if(!b(n))throw new Error("Expected Extra Data (32 bytes)");return s.schnorr.signSync(e,t,n)},t.verify=function(e,t,n,r){if(!k(t))throw new Error("Expected Point");if(!y(n))throw new Error("Expected Signature");if(!g(e))throw new Error("Expected Scalar");return s.verify(n,e,t,{strict:r})},t.verifySchnorr=function(e,t,n){if(!P(t))throw new Error("Expected Point");if(!y(n))throw new Error("Expected Signature");if(!g(e))throw new Error("Expected Scalar");return s.schnorr.verifySync(n,e,t)},t.xOnlyPointAddTweak=function(e,t){if(!P(e))throw new Error("Expected Point");if(!p(t))throw new Error("Expected Tweak");return E((()=>{const n=v(e,t,!0);return{parity:n[0]%2==1?1:0,xOnlyPubkey:n.slice(1)}}))},t.xOnlyPointFromPoint=I,t.xOnlyPointFromScalar=function(e){if(!O(e))throw new Error("Expected Private");return I(T(e))}},7973:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function s(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=i,t.hash=o,t.exists=a,t.output=s;const c={number:n,bool:r,bytes:i,hash:o,exists:a,output:s};t.default=c},23449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;const r=n(7973),i=n(82450);class o extends i.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,r.exists)(this);const{view:t,buffer,blockLen:n}=this,o=(e=(0,i.toBytes)(e)).length;for(let r=0;r<o;){const a=Math.min(n-this.pos,o-r);if(a!==n)buffer.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;n<=o-r;r+=n)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.exists)(this),(0,r.output)(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:o}=this;let{pos:a}=this;buffer[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(t,0),a=0);for(let e=a;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),o),this.process(t,0);const s=(0,i.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,l[e],o)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}t.SHA2=o},99610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},42514:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const r=n(7973),i=n(82450);class o extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.hash)(e);const n=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,a=new Uint8Array(o);a.set(n.length>o?e.create().update(n).digest():n);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,r.exists)(this),this.iHash.update(e),this}digestInto(e){(0,r.exists)(this),(0,r.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=o;t.hmac=(e,t,n)=>new o(e,t).update(n).digest(),t.hmac.create=(e,t)=>new o(e,t)},53583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const r=n(23449),i=n(82450),o=(e,t,n)=>e&t^e&n^t&n,a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends r.SHA2{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],n=c[e-2],r=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,o=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;c[e]=o+c[e-7]+r+c[e-16]|0}let{A:n,B:r,C:s,D:u,E:l,F:f,G:h,H:d}=this;for(let e=0;e<64;e++){const t=d+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+((p=l)&f^~p&h)+a[e]+c[e]|0,y=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+o(n,r,s)|0;d=h,h=f,f=l,l=u+t|0,u=s,s=r,r=n,n=t+y|0}var p;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,u=u+this.D|0,l=l+this.E|0,f=f+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(n,r,s,u,l,f,h,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)((()=>new u)),t.sha224=(0,i.wrapConstructor)((()=>new l))},82450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const r=n(99610),i=e=>e instanceof Uint8Array;t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=o[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n};function a(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function s(e){if("string"==typeof e&&(e=a(e)),!i(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let i=Date.now();for(let o=0;o<e;o++){r(o);const e=Date.now()-i;e>=0&&e<n||(await(0,t.nextTick)(),i+=e)}},t.utf8ToBytes=a,t.toBytes=s,t.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t};t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(s(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(s(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},45826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.schnorr=t.verify=t.signSync=t.sign=t.getSharedSecret=t.recoverPublicKey=t.getPublicKey=t.Signature=t.Point=t.CURVE=void 0;const r=n(26996),i=BigInt(0),o=BigInt(1),a=BigInt(2),s=BigInt(3),c=BigInt(8),u=Object.freeze({a:i,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});t.CURVE=u;const l=(e,t)=>(e+t/a)/t,f={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=u,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,s=BigInt("0x100000000000000000000000000000000"),c=l(a*e,t),f=l(-r*e,t);let h=M(e-c*n-f*i,t),d=M(-c*r-f*a,t);const p=h>s,y=d>s;if(p&&(h=t-h),y&&(d=t-d),h>s||d>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:p,k1:h,k2neg:y,k2:d}}},h=32,d=32,p=h+1,y=2*h+1;function g(e){const{a:t,b:n}=u,r=M(e*e),i=M(r*e);return M(i+t*e+n)}const b=u.a===i;class m extends Error{constructor(e){super(e)}}function w(e){if(!(e instanceof v))throw new TypeError("JacobianPoint expected")}class v{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof S))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(S.ZERO)?v.ZERO:new v(e.x,e.y,o)}static toAffineBatch(e){const t=function(e,t=u.P){const n=new Array(e.length),r=F(e.reduce(((e,r,o)=>r===i?e:(n[o]=e,M(e*r,t))),o),t);return e.reduceRight(((e,r,o)=>r===i?e:(n[o]=M(e*n[o],t),M(e*r,t))),r),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return v.toAffineBatch(e).map(v.fromAffine)}equals(e){w(e);const{x:t,y:n,z:r}=this,{x:i,y:o,z:a}=e,s=M(r*r),c=M(a*a),u=M(t*c),l=M(i*s),f=M(M(n*a)*c),h=M(M(o*r)*s);return u===l&&f===h}negate(){return new v(this.x,M(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,r=M(e*e),i=M(t*t),o=M(i*i),u=e+i,l=M(a*(M(u*u)-r-o)),f=M(s*r),h=M(f*f),d=M(h-a*l),p=M(f*(l-d)-c*o),y=M(a*t*n);return new v(d,p,y)}add(e){w(e);const{x:t,y:n,z:r}=this,{x:o,y:s,z:c}=e;if(o===i||s===i)return this;if(t===i||n===i)return e;const u=M(r*r),l=M(c*c),f=M(t*l),h=M(o*u),d=M(M(n*c)*l),p=M(M(s*r)*u),y=M(h-f),g=M(p-d);if(y===i)return g===i?this.double():v.ZERO;const b=M(y*y),m=M(y*b),_=M(f*b),E=M(g*g-m-a*_),S=M(g*(_-E)-d*m),k=M(r*c*y);return new v(E,S,k)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=v.ZERO;if("bigint"==typeof e&&e===i)return t;let n=D(e);if(n===o)return this;if(!b){let e=t,r=this;for(;n>i;)n&o&&(e=e.add(r)),r=r.double(),n>>=o;return e}let{k1neg:r,k1:a,k2neg:s,k2:c}=f.splitScalar(n),u=t,l=t,h=this;for(;a>i||c>i;)a&o&&(u=u.add(h)),c&o&&(l=l.add(h)),h=h.double(),a>>=o,c>>=o;return r&&(u=u.negate()),s&&(l=l.negate()),l=new v(M(l.x*f.beta),l.y,l.z),u.add(l)}precomputeWindow(e){const t=b?128/e+1:256/e+1,n=[];let r=this,i=r;for(let o=0;o<t;o++){i=r,n.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(r),n.push(i);r=i.double()}return n}wNAF(e,t){!t&&this.equals(v.BASE)&&(t=S.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&E.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=v.normalizeZ(r),E.set(t,r)));let i=v.ZERO,a=v.BASE;const s=1+(b?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),l=2**n,f=BigInt(n);for(let t=0;t<s;t++){const n=t*c;let s=Number(e&u);e>>=f,s>c&&(s-=l,e+=o);const h=n,d=n+Math.abs(s)-1,p=t%2!=0,y=s<0;0===s?a=a.add(_(p,r[h])):i=i.add(_(y,r[d]))}return{p:i,f:a}}multiply(e,t){let n,r,i=D(e);if(b){const{k1neg:e,k1:o,k2neg:a,k2:s}=f.splitScalar(i);let{p:c,f:u}=this.wNAF(o,t),{p:l,f:h}=this.wNAF(s,t);c=_(e,c),l=_(a,l),l=new v(M(l.x*f.beta),l.y,l.z),n=c.add(l),r=u.add(h)}else{const{p:e,f:o}=this.wNAF(i,t);n=e,r=o}return v.normalizeZ([n,r])[0]}toAffine(e){const{x:t,y:n,z:r}=this,i=this.equals(v.ZERO);null==e&&(e=i?c:F(r));const a=e,s=M(a*a),u=M(s*a),l=M(t*s),f=M(n*u),h=M(r*a);if(i)return S.ZERO;if(h!==o)throw new Error("invZ was invalid");return new S(l,f)}}function _(e,t){const n=t.negate();return e?n:t}v.BASE=new v(u.Gx,u.Gy,o),v.ZERO=new v(i,o,i);const E=new WeakMap;class S{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,E.delete(this)}hasEvenY(){return this.y%a===i}static fromCompressedHex(e){const t=32===e.length,n=U(t?e:e.subarray(1));if(!G(n))throw new Error("Point is not on curve");let r=function(e){const{P:t}=u,n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),l=BigInt(88),f=e*e*e%t,h=f*f*e%t,d=H(h,s)*h%t,p=H(d,s)*h%t,y=H(p,a)*f%t,g=H(y,r)*y%t,b=H(g,i)*g%t,m=H(b,c)*b%t,w=H(m,l)*m%t,v=H(w,c)*b%t,_=H(v,s)*h%t,E=H(_,o)*g%t,S=H(E,n)*f%t,k=H(S,a);if(k*k%t!==e)throw new Error("Cannot find square root");return k}(g(n));const i=(r&o)===o;if(t)i&&(r=M(-r));else{1==(1&e[0])!==i&&(r=M(-r))}const c=new S(n,r);return c.assertValidity(),c}static fromUncompressedHex(e){const t=U(e.subarray(1,h+1)),n=U(e.subarray(h+1,2*h+1)),r=new S(t,n);return r.assertValidity(),r}static fromHex(e){const t=j(e),n=t.length,r=t[0];if(n===h)return this.fromCompressedHex(t);if(n===p&&(2===r||3===r))return this.fromCompressedHex(t);if(n===y&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${p} compressed bytes or ${y} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return S.BASE.multiply(Y(e))}static fromSignature(e,t,n){const{r,s:i}=X(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const o=z(j(e)),{n:a}=u,s=2===n||3===n?r+a:r,c=F(s,a),l=M(-o*c,a),f=M(i*c,a),h=1&n?"03":"02",d=S.fromHex(h+N(s)),p=S.BASE.multiplyAndAddUnsafe(d,l,f);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return L(this.toHex(e))}toHex(e=!1){const t=N(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${N(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!G(t)||!G(n))throw new Error(e);const r=M(n*n);if(M(r-g(t))!==i)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new S(this.x,M(-this.y))}double(){return v.fromAffine(this).double().toAffine()}add(e){return v.fromAffine(this).add(v.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return v.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const r=v.fromAffine(this),a=t===i||t===o||this!==S.BASE?r.multiplyUnsafe(t):r.multiply(t),s=v.fromAffine(e).multiplyUnsafe(n),c=a.add(s);return c.equals(v.ZERO)?void 0:c.toAffine()}}function k(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function A(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${T(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:U(n),left:e.subarray(t+2)}}t.Point=S,S.BASE=new S(u.Gx,u.Gy),S.ZERO=new S(i,i);class O{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=t?T(e):e;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new O(B(r.slice(0,64)),B(r.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${T(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=A(e.subarray(2)),{data:r,left:i}=A(n);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${T(i)}`);return{r:t,s:r}}(t?e:L(e));return new O(n,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!W(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!W(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=u.n>>o;return this.s>e}normalizeS(){return this.hasHighS()?new O(this.r,M(-this.s,u.n)):this}toDERRawBytes(){return L(this.toDERHex())}toDERHex(){const e=k(C(this.s)),t=k(C(this.r)),n=e.length/2,r=t.length/2,i=C(n),o=C(r);return`30${C(r+n+4)}02${o}${t}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return L(this.toCompactHex())}toCompactHex(){return N(this.r)+N(this.s)}}function P(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}t.Signature=O;const I=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function T(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=I[e[n]];return t}const x=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function N(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(i<=e&&e<x))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function R(e){const t=L(N(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function C(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function B(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function L(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function U(e){return B(T(e))}function j(e){return e instanceof Uint8Array?Uint8Array.from(e):L(e)}function D(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&W(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function M(e,t=u.P){const n=e%t;return n>=i?n:t+n}function H(e,t){const{P:n}=u;let r=e;for(;t-- >i;)r*=r,r%=n;return r}function F(e,t=u.P){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=M(e,t),r=t,a=i,s=o,c=o,l=i;for(;n!==i;){const e=r/n,t=r%n,i=a-c*e,o=s-l*e;r=n,n=t,a=c,s=l,c=i,l=o}if(r!==o)throw new Error("invert: does not exist");return M(a,t)}function z(e,t=!1){const n=function(e){const t=8*e.length-8*d,n=U(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:r}=u;return n>=r?n-r:n}let K,q;class V{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return t.utils.hmacSha256(this.k,...e)}hmacSync(...e){return q(this.k,...e)}checkSync(){if("function"!=typeof q)throw new m("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return P(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return P(...t)}}function W(e){return i<e&&e<u.n}function G(e){return i<e&&e<u.P}function $(e,t,n,r=!0){const{n:a}=u,s=z(e,!0);if(!W(s))return;const c=F(s,a),l=S.BASE.multiply(s),f=M(l.x,a);if(f===i)return;const h=M(c*M(t+n*f,a),a);if(h===i)return;let d=new O(f,h),p=(l.x===d.r?0:2)|Number(l.y&o);return r&&d.hasHighS()&&(d=d.normalizeS(),p^=1),{sig:d,recovery:p}}function Y(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*d)throw new Error("Expected 32 bytes of private key");t=B(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==d)throw new Error("Expected 32 bytes of private key");t=U(e)}if(!W(t))throw new Error("Expected private key: 0 < key < n");return t}function Z(e){return e instanceof S?(e.assertValidity(),e):S.fromHex(e)}function X(e){if(e instanceof O)return e.assertValidity(),e;try{return O.fromDER(e)}catch(t){return O.fromCompact(e)}}function J(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===p||r===y:n?r===2*p||r===2*y:e instanceof S}function Q(e){return U(e.length>h?e.slice(0,h):e)}function ee(e){const t=Q(e),n=M(t,u.n);return te(n<i?t:n)}function te(e){return R(e)}function ne(e,n,r){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const i=j(e),o=Y(n),a=[te(o),ee(i)];if(null!=r){!0===r&&(r=t.utils.randomBytes(h));const e=j(r);if(e.length!==h)throw new Error(`sign: Expected ${h} bytes of extra data`);a.push(e)}return{seed:P(...a),m:Q(i),d:o}}function re(e,t){const{sig:n,recovery:r}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),a=i?n.toDERRawBytes():n.toCompactRawBytes();return o?[a,r]:a}t.getPublicKey=function(e,t=!1){return S.fromPrivateKey(e).toRawBytes(t)},t.recoverPublicKey=function(e,t,n,r=!1){return S.fromSignature(e,t,n).toRawBytes(r)},t.getSharedSecret=function(e,t,n=!1){if(J(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!J(t))throw new TypeError("getSharedSecret: second arg must be public key");const r=Z(t);return r.assertValidity(),r.multiply(Y(e)).toRawBytes(n)},t.sign=async function(e,t,n={}){const{seed:r,m:i,d:o}=ne(e,t,n.extraEntropy),a=new V(32,d);let s;for(await a.reseed(r);!(s=$(await a.generate(),i,o,n.canonical));)await a.reseed();return re(s,n)},t.signSync=function(e,t,n={}){const{seed:r,m:i,d:o}=ne(e,t,n.extraEntropy),a=new V(32,d);let s;for(a.reseedSync(r);!(s=$(a.generateSync(),i,o,n.canonical));)a.reseedSync();return re(s,n)};const ie={strict:!0};function oe(e){return M(U(e),u.n)}t.verify=function(e,t,n,r=ie){let i;try{i=X(e),t=j(t)}catch(e){return!1}const{r:o,s:a}=i;if(r.strict&&i.hasHighS())return!1;const s=z(t);let c;try{c=Z(n)}catch(e){return!1}const{n:l}=u,f=F(a,l),h=M(s*f,l),d=M(o*f,l),p=S.BASE.multiplyAndAddUnsafe(c,h,d);return!!p&&M(p.x,l)===o};class ae{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=j(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const n=U(t.subarray(0,32)),r=U(t.subarray(32,64));return new ae(n,r)}assertValidity(){const{r:e,s:t}=this;if(!G(e)||!W(t))throw new Error("Invalid signature")}toHex(){return N(this.r)+N(this.s)}toRawBytes(){return L(this.toHex())}}class se{constructor(e,n,r=t.utils.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=j(e);const{x:i,scalar:o}=this.getScalar(Y(n));if(this.px=i,this.d=o,this.rand=j(r),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const t=S.fromPrivateKey(e),n=t.hasEvenY()?e:u.n-e;return{point:t,scalar:n,x:t.toRawX()}}initNonce(e,t){return R(e^U(t))}finalizeNonce(e){const t=M(U(e),u.n);if(t===i)throw new Error("sign: Creation of signature failed. k is zero");const{point:n,x:r,scalar:o}=this.getScalar(t);return{R:n,rx:r,k:o}}finalizeSig(e,t,n,r){return new ae(e.x,M(t+n*r,u.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:n,px:r,rand:i}=this,o=t.utils.taggedHash,a=this.initNonce(n,await o(de.aux,i)),{R:s,rx:c,k:u}=this.finalizeNonce(await o(de.nonce,a,r,e)),l=oe(await o(de.challenge,c,r,e)),f=this.finalizeSig(s,u,l,n);return await le(f,e,r)||this.error(),f}calcSync(){const{m:e,d:n,px:r,rand:i}=this,o=t.utils.taggedHashSync,a=this.initNonce(n,o(de.aux,i)),{R:s,rx:c,k:u}=this.finalizeNonce(o(de.nonce,a,r,e)),l=oe(o(de.challenge,c,r,e)),f=this.finalizeSig(s,u,l,n);return fe(f,e,r)||this.error(),f}}function ce(e,t,n){const r=e instanceof ae,i=r?e:ae.fromHex(e);return r&&i.assertValidity(),{...i,m:j(t),P:Z(n)}}function ue(e,t,n,r){const i=S.BASE.multiplyAndAddUnsafe(t,Y(n),M(-r,u.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function le(e,n,r){try{const{r:i,s:o,m:a,P:s}=ce(e,n,r),c=oe(await t.utils.taggedHash(de.challenge,R(i),s.toRawX(),a));return ue(i,s,o,c)}catch(e){return!1}}function fe(e,n,r){try{const{r:i,s:o,m:a,P:s}=ce(e,n,r),c=oe(t.utils.taggedHashSync(de.challenge,R(i),s.toRawX(),a));return ue(i,s,o,c)}catch(e){if(e instanceof m)throw e;return!1}}t.schnorr={Signature:ae,getPublicKey:function(e){return S.fromPrivateKey(e).toRawX()},sign:async function(e,t,n){return new se(e,t,n).calc()},verify:le,signSync:function(e,t,n){return new se(e,t,n).calcSync()},verifySync:fe},S.BASE._setWindowSize(8);const he={node:r,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},de={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},pe={};t.utils={bytesToHex:T,hexToBytes:L,concatBytes:P,mod:M,invert:F,isValidPrivateKey(e){try{return Y(e),!0}catch(e){return!1}},_bigintTo32Bytes:R,_normalizePrivateKey:Y,hashToPrivateKey:e=>{e=j(e);const t=d+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return R(M(U(e),u.n-o)+o)},randomBytes:(e=32)=>{if(he.web)return he.web.getRandomValues(new Uint8Array(e));if(he.node){const{randomBytes:t}=he.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>t.utils.hashToPrivateKey(t.utils.randomBytes(d+8)),precompute(e=8,t=S.BASE){const n=t===S.BASE?t:new S(t.x,t.y);return n._setWindowSize(e),n.multiply(s),n},sha256:async(...e)=>{if(he.web){const buffer=await he.web.subtle.digest("SHA-256",P(...e));return new Uint8Array(buffer)}if(he.node){const{createHash:t}=he.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(he.web){const n=await he.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=P(...t),buffer=await he.web.subtle.sign("HMAC",n,r);return new Uint8Array(buffer)}if(he.node){const{createHmac:n}=he.node,r=n("sha256",e);return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...n)=>{let r=pe[e];if(void 0===r){const n=await t.utils.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=P(n,n),pe[e]=r}return t.utils.sha256(r,...n)},taggedHashSync:(e,...t)=>{if("function"!=typeof K)throw new m("sha256Sync is undefined, you need to set it");let n=pe[e];if(void 0===n){const t=K(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=P(t,t),pe[e]=n}return K(n,...t)},_JacobianPoint:v},Object.defineProperties(t.utils,{sha256Sync:{configurable:!1,get:()=>K,set(e){K||(K=e)}},hmacSha256Sync:{configurable:!1,get:()=>q,set(e){q||(q=e)}}})},34503:function(e){e.exports=(()=>{var e={8831:(e,t,n)=>{e=n.nmd(e);var r=n(5108),i=n(4155);(()=>{if(void 0!==n.g);else if("undefined"!=typeof window)window.global=window;else{if("undefined"==typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}if(n.g.require||(n.g.require=n(5049)),!n.g.fs&&n.g.require){const e=n(2203);"object"==typeof e&&null!==e&&0!==Object.keys(e).length&&(n.g.fs=e)}const t=()=>{const e=new Error("not implemented");return e.code="ENOSYS",e};if(!n.g.fs){let e="";n.g.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(t,n){e+=a.decode(n);const i=e.lastIndexOf("\n");return-1!=i&&(r.log(e.substr(0,i)),e=e.substr(i+1)),n.length},write(e,n,r,i,o,a){0===r&&i===n.length&&null===o?a(null,this.writeSync(e,n)):a(t())},chmod(e,n,r){r(t())},chown(e,n,r,i){i(t())},close(e,n){n(t())},fchmod(e,n,r){r(t())},fchown(e,n,r,i){i(t())},fstat(e,n){n(t())},fsync(e,t){t(null)},ftruncate(e,n,r){r(t())},lchown(e,n,r,i){i(t())},link(e,n,r){r(t())},lstat(e,n){n(t())},mkdir(e,n,r){r(t())},open(e,n,r,i){i(t())},read(e,n,r,i,o,a){a(t())},readdir(e,n){n(t())},readlink(e,n){n(t())},rename(e,n,r){r(t())},rmdir(e,n){n(t())},stat(e,n){n(t())},symlink(e,n,r){r(t())},truncate(e,n,r){r(t())},unlink(e,n){n(t())},utimes(e,n,r,i){i(t())}}}if(n.g.process||(n.g.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw t()},pid:-1,ppid:-1,umask(){throw t()},cwd(){throw t()},chdir(){throw t()}}),!n.g.crypto&&n.g.require){const e=n(4229);n.g.crypto={getRandomValues(t){e.randomFillSync(t)}}}if(!n.g.crypto)throw new Error("global.crypto is not available, polyfill required (getRandomValues only)");if(n.g.performance||(n.g.performance={now(){const[e,t]=i.hrtime();return 1e3*e+t/1e6}}),!n.g.TextEncoder&&n.g.require&&(n.g.TextEncoder=n(9539).TextEncoder),!n.g.TextEncoder)throw new Error("global.TextEncoder is not available, polyfill required");if(!n.g.TextDecoder&&n.g.require&&(n.g.TextDecoder=n(9539).TextDecoder),!n.g.TextDecoder)throw new Error("global.TextDecoder is not available, polyfill required");const o=new TextEncoder("utf-8"),a=new TextDecoder("utf-8");if(n.g.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{0!==e&&r.warn("exit code:",e)},this._exitPromise=new Promise((e=>{this._resolveExitPromise=e})),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const e=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},t=e=>this.mem.getUint32(e+0,!0)+4294967296*this.mem.getInt32(e+4,!0),n=e=>{const t=this.mem.getFloat64(e,!0);if(0===t)return;if(!isNaN(t))return t;const n=this.mem.getUint32(e,!0);return this._values[n]},i=(e,t)=>{const n=2146959360;if("number"==typeof t&&0!==t)return isNaN(t)?(this.mem.setUint32(e+4,n,!0),void this.mem.setUint32(e,0,!0)):void this.mem.setFloat64(e,t,!0);if(void 0===t)return void this.mem.setFloat64(e,0,!0);let r=this._ids.get(t);void 0===r&&(r=this._idPool.pop(),void 0===r&&(r=this._values.length),this._values[r]=t,this._goRefCounts[r]=0,this._ids.set(t,r)),this._goRefCounts[r]++;let i=0;switch(typeof t){case"object":null!==t&&(i=1);break;case"string":i=2;break;case"symbol":i=3;break;case"function":i=4}this.mem.setUint32(e+4,n|i,!0),this.mem.setUint32(e,r,!0)},s=e=>{const n=t(e+0),r=t(e+8);return new Uint8Array(this._inst.exports.mem.buffer,n,r)},c=e=>{const r=t(e+0),i=t(e+8),o=new Array(i);for(let e=0;e<i;e++)o[e]=n(r+8*e);return o},u=e=>{const n=t(e+0),r=t(e+8);return a.decode(new DataView(this._inst.exports.mem.buffer,n,r))},l=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{const n=t(8+(e>>>=0)),r=t(e+16),i=this.mem.getInt32(e+24,!0);fs.writeSync(n,new Uint8Array(this._inst.exports.mem.buffer,r,i))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{e(8+(t>>>=0),1e6*(l+performance.now()))},"runtime.walltime":t=>{t>>>=0;const n=(new Date).getTime();e(t+8,n/1e3),this.mem.setInt32(t+16,n%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const n=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(n,setTimeout((()=>{for(this._resume();this._scheduledTimeouts.has(n);)r.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()}),t(e+8)+1)),this.mem.setInt32(e+16,n,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(s(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,0===this._goRefCounts[t]){const e=this._values[t];this._values[t]=null,this._ids.delete(e),this._idPool.push(t)}},"syscall/js.stringVal":e=>{i(24+(e>>>=0),u(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(n(e+8),u(e+16));e=this._inst.exports.getsp()>>>0,i(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(n(e+8),u(e+16),n(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(n(e+8),u(e+16))},"syscall/js.valueIndex":e=>{i(24+(e>>>=0),Reflect.get(n(e+8),t(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(n(e+8),t(e+16),n(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=n(e+8),r=Reflect.get(t,u(e+16)),o=c(e+32),a=Reflect.apply(r,t,o);e=this._inst.exports.getsp()>>>0,i(e+56,a),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=n(e+8),r=c(e+16),o=Reflect.apply(t,void 0,r);e=this._inst.exports.getsp()>>>0,i(e+40,o),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=n(e+8),r=c(e+16),o=Reflect.construct(t,r);e=this._inst.exports.getsp()>>>0,i(e+40,o),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":t=>{e(16+(t>>>=0),parseInt(n(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const r=o.encode(String(n(t+8)));i(t+16,r),e(t+24,r.length)},"syscall/js.valueLoadString":e=>{const t=n(8+(e>>>=0));s(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,n(e+8)instanceof n(e+16)?1:0)},"syscall/js.copyBytesToGo":t=>{const r=s(8+(t>>>=0)),i=n(t+32);if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const o=i.subarray(0,r.length);r.set(o),e(t+40,o.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{const r=n(8+(t>>>=0)),i=s(t+16);if(!(r instanceof Uint8Array||r instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const o=i.subarray(0,r.length);r.set(o),e(t+40,o.length),this.mem.setUint8(t+48,1)},debug:e=>{r.log(e)}}}}async run(e){if(!(e instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=e,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,n.g,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[n.g,5],[this,6]]),this._idPool=[],this.exited=!1;let t=4096;const r=e=>{const n=t,r=o.encode(e+"\0");return new Uint8Array(this.mem.buffer,t,r.length).set(r),t+=r.length,t%8!=0&&(t+=8-t%8),n},i=this.argv.length,a=[];this.argv.forEach((e=>{a.push(r(e))})),a.push(0),Object.keys(this.env).sort().forEach((e=>{a.push(r(`${e}=${this.env[e]}`))})),a.push(0);const s=t;if(a.forEach((e=>{this.mem.setUint32(t,e,!0),this.mem.setUint32(t+4,0,!0),t+=8})),t>=8192)throw new Error("command line too long");this._inst.exports.run(i,s),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){const t=this;return function(){const n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}},n.g.require&&n.g.require.main===e&&n.g.process&&n.g.process.versions&&!n.g.process.versions.electron){i.argv.length<3&&(r.error("usage: go_js_wasm_exec [wasm binary] [arguments]"),i.exit(1));const e=new Go;e.argv=i.argv.slice(2),e.env=Object.assign({TMPDIR:n(5381).tmpdir()},i.env),e.exit=i.exit,WebAssembly.instantiate(fs.readFileSync(i.argv[2]),e.importObject).then((t=>(i.on("exit",(t=>{0!==t||e.exited||(e._pendingEvent={id:0},e._resume())})),e.run(t.instance)))).catch((e=>{r.error(e),i.exit(1)}))}})()},5049:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5049,e.exports=t},7923:function(e){e.exports=(()=>{"use strict";var e={877:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(644);t.default=function(e,t){this.faradayServer=e(r.serviceNames.frdrpc.FaradayServer,t)}},382:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LitApi=t.FaradayApi=t.PoolApi=t.LoopApi=t.LndApi=void 0;var i=n(152);Object.defineProperty(t,"LndApi",{enumerable:!0,get:function(){return r(i).default}});var o=n(343);Object.defineProperty(t,"LoopApi",{enumerable:!0,get:function(){return r(o).default}});var a=n(146);Object.defineProperty(t,"PoolApi",{enumerable:!0,get:function(){return r(a).default}});var s=n(877);Object.defineProperty(t,"FaradayApi",{enumerable:!0,get:function(){return r(s).default}});var c=n(929);Object.defineProperty(t,"LitApi",{enumerable:!0,get:function(){return r(c).default}})},929:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(644);t.default=function(e,t){this.autopilot=e(r.serviceNames.litrpc.Autopilot,t),this.firewall=e(r.serviceNames.litrpc.Firewall,t),this.sessions=e(r.serviceNames.litrpc.Sessions,t)}},152:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(644);t.default=function(e,t){this.autopilot=e(r.serviceNames.autopilotrpc.Autopilot,t),this.chainNotifier=e(r.serviceNames.chainrpc.ChainNotifier,t),this.invoices=e(r.serviceNames.invoicesrpc.Invoices,t),this.lightning=e(r.serviceNames.lnrpc.Lightning,t),this.router=e(r.serviceNames.routerrpc.Router,t),this.signer=e(r.serviceNames.signrpc.Signer,t),this.walletKit=e(r.serviceNames.walletrpc.WalletKit,t),this.walletUnlocker=e(r.serviceNames.lnrpc.WalletUnlocker,t),this.watchtower=e(r.serviceNames.watchtowerrpc.Watchtower,t),this.watchtowerClient=e(r.serviceNames.wtclientrpc.WatchtowerClient,t)}},343:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(644);t.default=function(e,t){this.swapClient=e(r.serviceNames.looprpc.SwapClient,t),this.debug=e(r.serviceNames.looprpc.Debug,t)}},146:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(644);t.default=function(e,t){this.trader=e(r.serviceNames.poolrpc.Trader,t),this.channelAuctioneer=e(r.serviceNames.poolrpc.ChannelAuctioneer,t),this.hashmail=e(r.serviceNames.poolrpc.HashMail,t)}},713:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionMethods=t.LitApi=t.FaradayApi=t.PoolApi=t.LoopApi=t.LndApi=t.snakeKeysToCamel=t.isObject=t.camelKeysToSnake=void 0,i(n(894),t);var o=n(848);Object.defineProperty(t,"camelKeysToSnake",{enumerable:!0,get:function(){return o.camelKeysToSnake}}),Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return o.isObject}}),Object.defineProperty(t,"snakeKeysToCamel",{enumerable:!0,get:function(){return o.snakeKeysToCamel}});var a=n(382);Object.defineProperty(t,"LndApi",{enumerable:!0,get:function(){return a.LndApi}}),Object.defineProperty(t,"LoopApi",{enumerable:!0,get:function(){return a.LoopApi}}),Object.defineProperty(t,"PoolApi",{enumerable:!0,get:function(){return a.PoolApi}}),Object.defineProperty(t,"FaradayApi",{enumerable:!0,get:function(){return a.FaradayApi}}),Object.defineProperty(t,"LitApi",{enumerable:!0,get:function(){return a.LitApi}});var s=n(644);Object.defineProperty(t,"subscriptionMethods",{enumerable:!0,get:function(){return s.subscriptionMethods}})},273:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(726),t)},71:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(374),t)},76:(e,t)=>{var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.CloseRecommendationRequest_Metric=t.EntryType=t.FiatBackend=t.Granularity=void 0,(o=t.Granularity||(t.Granularity={})).UNKNOWN_GRANULARITY="UNKNOWN_GRANULARITY",o.MINUTE="MINUTE",o.FIVE_MINUTES="FIVE_MINUTES",o.FIFTEEN_MINUTES="FIFTEEN_MINUTES",o.THIRTY_MINUTES="THIRTY_MINUTES",o.HOUR="HOUR",o.SIX_HOURS="SIX_HOURS",o.TWELVE_HOURS="TWELVE_HOURS",o.DAY="DAY",o.UNRECOGNIZED="UNRECOGNIZED",(i=t.FiatBackend||(t.FiatBackend={})).UNKNOWN_FIATBACKEND="UNKNOWN_FIATBACKEND",i.COINCAP="COINCAP",i.COINDESK="COINDESK",i.CUSTOM="CUSTOM",i.COINGECKO="COINGECKO",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.EntryType||(t.EntryType={})).UNKNOWN="UNKNOWN",r.LOCAL_CHANNEL_OPEN="LOCAL_CHANNEL_OPEN",r.REMOTE_CHANNEL_OPEN="REMOTE_CHANNEL_OPEN",r.CHANNEL_OPEN_FEE="CHANNEL_OPEN_FEE",r.CHANNEL_CLOSE="CHANNEL_CLOSE",r.RECEIPT="RECEIPT",r.PAYMENT="PAYMENT",r.FEE="FEE",r.CIRCULAR_RECEIPT="CIRCULAR_RECEIPT",r.FORWARD="FORWARD",r.FORWARD_FEE="FORWARD_FEE",r.CIRCULAR_PAYMENT="CIRCULAR_PAYMENT",r.CIRCULAR_FEE="CIRCULAR_FEE",r.SWEEP="SWEEP",r.SWEEP_FEE="SWEEP_FEE",r.CHANNEL_CLOSE_FEE="CHANNEL_CLOSE_FEE",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.CloseRecommendationRequest_Metric||(t.CloseRecommendationRequest_Metric={})).UNKNOWN="UNKNOWN",n.UPTIME="UPTIME",n.REVENUE="REVENUE",n.INCOMING_VOLUME="INCOMING_VOLUME",n.OUTGOING_VOLUME="OUTGOING_VOLUME",n.TOTAL_VOLUME="TOTAL_VOLUME",n.UNRECOGNIZED="UNRECOGNIZED"},915:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(76),t)},894:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.poolrpc=t.looprpc=t.wtclientrpc=t.watchtowerrpc=t.walletrpc=t.signrpc=t.routerrpc=t.lnrpc=t.invoicesrpc=t.chainrpc=t.autopilotrpc=t.litrpc=t.frdrpc=void 0;var a=o(n(915));t.frdrpc=a;var s=o(n(903));t.litrpc=s;var c=o(n(273));t.autopilotrpc=c;var u=o(n(71));t.chainrpc=u;var l=o(n(312));t.invoicesrpc=l;var f=o(n(452));t.lnrpc=f;var h=o(n(226));t.routerrpc=h;var d=o(n(207));t.signrpc=d;var p=o(n(367));t.walletrpc=p;var y=o(n(412));t.watchtowerrpc=y;var g=o(n(946));t.wtclientrpc=g;var b=o(n(11));t.looprpc=b;var m=o(n(377));t.poolrpc=m},312:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(212),t)},481:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionState=void 0,(n=t.ActionState||(t.ActionState={})).STATE_UNKNOWN="STATE_UNKNOWN",n.STATE_PENDING="STATE_PENDING",n.STATE_DONE="STATE_DONE",n.STATE_ERROR="STATE_ERROR",n.UNRECOGNIZED="UNRECOGNIZED"},166:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},199:(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionState=t.SessionType=void 0,(r=t.SessionType||(t.SessionType={})).TYPE_MACAROON_READONLY="TYPE_MACAROON_READONLY",r.TYPE_MACAROON_ADMIN="TYPE_MACAROON_ADMIN",r.TYPE_MACAROON_CUSTOM="TYPE_MACAROON_CUSTOM",r.TYPE_UI_PASSWORD="TYPE_UI_PASSWORD",r.TYPE_AUTOPILOT="TYPE_AUTOPILOT",r.TYPE_MACAROON_ACCOUNT="TYPE_MACAROON_ACCOUNT",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.SessionState||(t.SessionState={})).STATE_CREATED="STATE_CREATED",n.STATE_IN_USE="STATE_IN_USE",n.STATE_REVOKED="STATE_REVOKED",n.STATE_EXPIRED="STATE_EXPIRED",n.UNRECOGNIZED="UNRECOGNIZED"},903:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(481),t),i(n(166),t),i(n(199),t)},726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},374:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},212:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LookupModifier=void 0,(n=t.LookupModifier||(t.LookupModifier={})).DEFAULT="DEFAULT",n.HTLC_SET_ONLY="HTLC_SET_ONLY",n.HTLC_SET_BLANK="HTLC_SET_BLANK",n.UNRECOGNIZED="UNRECOGNIZED"},21:(e,t)=>{var n,r,i,o,a,s,c,u,l,f,h,d,p,y,g,b,m,w,v,_;Object.defineProperty(t,"__esModule",{value:!0}),t.Failure_FailureCode=t.HTLCAttempt_HTLCStatus=t.Payment_PaymentStatus=t.Invoice_InvoiceState=t.ChannelEventUpdate_UpdateType=t.PendingChannelsResponse_ForceClosedChannel_AnchorState=t.PeerEvent_EventType=t.Peer_SyncType=t.ChannelCloseSummary_ClosureType=t.UpdateFailure=t.FeatureBit=t.PaymentFailureReason=t.InvoiceHTLCState=t.NodeMetricType=t.ResolutionOutcome=t.ResolutionType=t.Initiator=t.CommitmentType=t.AddressType=t.OutputScriptType=void 0,(_=t.OutputScriptType||(t.OutputScriptType={})).SCRIPT_TYPE_PUBKEY_HASH="SCRIPT_TYPE_PUBKEY_HASH",_.SCRIPT_TYPE_SCRIPT_HASH="SCRIPT_TYPE_SCRIPT_HASH",_.SCRIPT_TYPE_WITNESS_V0_PUBKEY_HASH="SCRIPT_TYPE_WITNESS_V0_PUBKEY_HASH",_.SCRIPT_TYPE_WITNESS_V0_SCRIPT_HASH="SCRIPT_TYPE_WITNESS_V0_SCRIPT_HASH",_.SCRIPT_TYPE_PUBKEY="SCRIPT_TYPE_PUBKEY",_.SCRIPT_TYPE_MULTISIG="SCRIPT_TYPE_MULTISIG",_.SCRIPT_TYPE_NULLDATA="SCRIPT_TYPE_NULLDATA",_.SCRIPT_TYPE_NON_STANDARD="SCRIPT_TYPE_NON_STANDARD",_.SCRIPT_TYPE_WITNESS_UNKNOWN="SCRIPT_TYPE_WITNESS_UNKNOWN",_.SCRIPT_TYPE_WITNESS_V1_TAPROOT="SCRIPT_TYPE_WITNESS_V1_TAPROOT",_.UNRECOGNIZED="UNRECOGNIZED",(v=t.AddressType||(t.AddressType={})).WITNESS_PUBKEY_HASH="WITNESS_PUBKEY_HASH",v.NESTED_PUBKEY_HASH="NESTED_PUBKEY_HASH",v.UNUSED_WITNESS_PUBKEY_HASH="UNUSED_WITNESS_PUBKEY_HASH",v.UNUSED_NESTED_PUBKEY_HASH="UNUSED_NESTED_PUBKEY_HASH",v.TAPROOT_PUBKEY="TAPROOT_PUBKEY",v.UNUSED_TAPROOT_PUBKEY="UNUSED_TAPROOT_PUBKEY",v.UNRECOGNIZED="UNRECOGNIZED",(w=t.CommitmentType||(t.CommitmentType={})).UNKNOWN_COMMITMENT_TYPE="UNKNOWN_COMMITMENT_TYPE",w.LEGACY="LEGACY",w.STATIC_REMOTE_KEY="STATIC_REMOTE_KEY",w.ANCHORS="ANCHORS",w.SCRIPT_ENFORCED_LEASE="SCRIPT_ENFORCED_LEASE",w.UNRECOGNIZED="UNRECOGNIZED",(m=t.Initiator||(t.Initiator={})).INITIATOR_UNKNOWN="INITIATOR_UNKNOWN",m.INITIATOR_LOCAL="INITIATOR_LOCAL",m.INITIATOR_REMOTE="INITIATOR_REMOTE",m.INITIATOR_BOTH="INITIATOR_BOTH",m.UNRECOGNIZED="UNRECOGNIZED",(b=t.ResolutionType||(t.ResolutionType={})).TYPE_UNKNOWN="TYPE_UNKNOWN",b.ANCHOR="ANCHOR",b.INCOMING_HTLC="INCOMING_HTLC",b.OUTGOING_HTLC="OUTGOING_HTLC",b.COMMIT="COMMIT",b.UNRECOGNIZED="UNRECOGNIZED",(g=t.ResolutionOutcome||(t.ResolutionOutcome={})).OUTCOME_UNKNOWN="OUTCOME_UNKNOWN",g.CLAIMED="CLAIMED",g.UNCLAIMED="UNCLAIMED",g.ABANDONED="ABANDONED",g.FIRST_STAGE="FIRST_STAGE",g.TIMEOUT="TIMEOUT",g.UNRECOGNIZED="UNRECOGNIZED",(y=t.NodeMetricType||(t.NodeMetricType={})).UNKNOWN="UNKNOWN",y.BETWEENNESS_CENTRALITY="BETWEENNESS_CENTRALITY",y.UNRECOGNIZED="UNRECOGNIZED",(p=t.InvoiceHTLCState||(t.InvoiceHTLCState={})).ACCEPTED="ACCEPTED",p.SETTLED="SETTLED",p.CANCELED="CANCELED",p.UNRECOGNIZED="UNRECOGNIZED",(d=t.PaymentFailureReason||(t.PaymentFailureReason={})).FAILURE_REASON_NONE="FAILURE_REASON_NONE",d.FAILURE_REASON_TIMEOUT="FAILURE_REASON_TIMEOUT",d.FAILURE_REASON_NO_ROUTE="FAILURE_REASON_NO_ROUTE",d.FAILURE_REASON_ERROR="FAILURE_REASON_ERROR",d.FAILURE_REASON_INCORRECT_PAYMENT_DETAILS="FAILURE_REASON_INCORRECT_PAYMENT_DETAILS",d.FAILURE_REASON_INSUFFICIENT_BALANCE="FAILURE_REASON_INSUFFICIENT_BALANCE",d.UNRECOGNIZED="UNRECOGNIZED",(h=t.FeatureBit||(t.FeatureBit={})).DATALOSS_PROTECT_REQ="DATALOSS_PROTECT_REQ",h.DATALOSS_PROTECT_OPT="DATALOSS_PROTECT_OPT",h.INITIAL_ROUING_SYNC="INITIAL_ROUING_SYNC",h.UPFRONT_SHUTDOWN_SCRIPT_REQ="UPFRONT_SHUTDOWN_SCRIPT_REQ",h.UPFRONT_SHUTDOWN_SCRIPT_OPT="UPFRONT_SHUTDOWN_SCRIPT_OPT",h.GOSSIP_QUERIES_REQ="GOSSIP_QUERIES_REQ",h.GOSSIP_QUERIES_OPT="GOSSIP_QUERIES_OPT",h.TLV_ONION_REQ="TLV_ONION_REQ",h.TLV_ONION_OPT="TLV_ONION_OPT",h.EXT_GOSSIP_QUERIES_REQ="EXT_GOSSIP_QUERIES_REQ",h.EXT_GOSSIP_QUERIES_OPT="EXT_GOSSIP_QUERIES_OPT",h.STATIC_REMOTE_KEY_REQ="STATIC_REMOTE_KEY_REQ",h.STATIC_REMOTE_KEY_OPT="STATIC_REMOTE_KEY_OPT",h.PAYMENT_ADDR_REQ="PAYMENT_ADDR_REQ",h.PAYMENT_ADDR_OPT="PAYMENT_ADDR_OPT",h.MPP_REQ="MPP_REQ",h.MPP_OPT="MPP_OPT",h.WUMBO_CHANNELS_REQ="WUMBO_CHANNELS_REQ",h.WUMBO_CHANNELS_OPT="WUMBO_CHANNELS_OPT",h.ANCHORS_REQ="ANCHORS_REQ",h.ANCHORS_OPT="ANCHORS_OPT",h.ANCHORS_ZERO_FEE_HTLC_REQ="ANCHORS_ZERO_FEE_HTLC_REQ",h.ANCHORS_ZERO_FEE_HTLC_OPT="ANCHORS_ZERO_FEE_HTLC_OPT",h.AMP_REQ="AMP_REQ",h.AMP_OPT="AMP_OPT",h.UNRECOGNIZED="UNRECOGNIZED",(f=t.UpdateFailure||(t.UpdateFailure={})).UPDATE_FAILURE_UNKNOWN="UPDATE_FAILURE_UNKNOWN",f.UPDATE_FAILURE_PENDING="UPDATE_FAILURE_PENDING",f.UPDATE_FAILURE_NOT_FOUND="UPDATE_FAILURE_NOT_FOUND",f.UPDATE_FAILURE_INTERNAL_ERR="UPDATE_FAILURE_INTERNAL_ERR",f.UPDATE_FAILURE_INVALID_PARAMETER="UPDATE_FAILURE_INVALID_PARAMETER",f.UNRECOGNIZED="UNRECOGNIZED",(l=t.ChannelCloseSummary_ClosureType||(t.ChannelCloseSummary_ClosureType={})).COOPERATIVE_CLOSE="COOPERATIVE_CLOSE",l.LOCAL_FORCE_CLOSE="LOCAL_FORCE_CLOSE",l.REMOTE_FORCE_CLOSE="REMOTE_FORCE_CLOSE",l.BREACH_CLOSE="BREACH_CLOSE",l.FUNDING_CANCELED="FUNDING_CANCELED",l.ABANDONED="ABANDONED",l.UNRECOGNIZED="UNRECOGNIZED",(u=t.Peer_SyncType||(t.Peer_SyncType={})).UNKNOWN_SYNC="UNKNOWN_SYNC",u.ACTIVE_SYNC="ACTIVE_SYNC",u.PASSIVE_SYNC="PASSIVE_SYNC",u.PINNED_SYNC="PINNED_SYNC",u.UNRECOGNIZED="UNRECOGNIZED",(c=t.PeerEvent_EventType||(t.PeerEvent_EventType={})).PEER_ONLINE="PEER_ONLINE",c.PEER_OFFLINE="PEER_OFFLINE",c.UNRECOGNIZED="UNRECOGNIZED",(s=t.PendingChannelsResponse_ForceClosedChannel_AnchorState||(t.PendingChannelsResponse_ForceClosedChannel_AnchorState={})).LIMBO="LIMBO",s.RECOVERED="RECOVERED",s.LOST="LOST",s.UNRECOGNIZED="UNRECOGNIZED",(a=t.ChannelEventUpdate_UpdateType||(t.ChannelEventUpdate_UpdateType={})).OPEN_CHANNEL="OPEN_CHANNEL",a.CLOSED_CHANNEL="CLOSED_CHANNEL",a.ACTIVE_CHANNEL="ACTIVE_CHANNEL",a.INACTIVE_CHANNEL="INACTIVE_CHANNEL",a.PENDING_OPEN_CHANNEL="PENDING_OPEN_CHANNEL",a.FULLY_RESOLVED_CHANNEL="FULLY_RESOLVED_CHANNEL",a.UNRECOGNIZED="UNRECOGNIZED",(o=t.Invoice_InvoiceState||(t.Invoice_InvoiceState={})).OPEN="OPEN",o.SETTLED="SETTLED",o.CANCELED="CANCELED",o.ACCEPTED="ACCEPTED",o.UNRECOGNIZED="UNRECOGNIZED",(i=t.Payment_PaymentStatus||(t.Payment_PaymentStatus={})).UNKNOWN="UNKNOWN",i.IN_FLIGHT="IN_FLIGHT",i.SUCCEEDED="SUCCEEDED",i.FAILED="FAILED",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.HTLCAttempt_HTLCStatus||(t.HTLCAttempt_HTLCStatus={})).IN_FLIGHT="IN_FLIGHT",r.SUCCEEDED="SUCCEEDED",r.FAILED="FAILED",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.Failure_FailureCode||(t.Failure_FailureCode={})).RESERVED="RESERVED",n.INCORRECT_OR_UNKNOWN_PAYMENT_DETAILS="INCORRECT_OR_UNKNOWN_PAYMENT_DETAILS",n.INCORRECT_PAYMENT_AMOUNT="INCORRECT_PAYMENT_AMOUNT",n.FINAL_INCORRECT_CLTV_EXPIRY="FINAL_INCORRECT_CLTV_EXPIRY",n.FINAL_INCORRECT_HTLC_AMOUNT="FINAL_INCORRECT_HTLC_AMOUNT",n.FINAL_EXPIRY_TOO_SOON="FINAL_EXPIRY_TOO_SOON",n.INVALID_REALM="INVALID_REALM",n.EXPIRY_TOO_SOON="EXPIRY_TOO_SOON",n.INVALID_ONION_VERSION="INVALID_ONION_VERSION",n.INVALID_ONION_HMAC="INVALID_ONION_HMAC",n.INVALID_ONION_KEY="INVALID_ONION_KEY",n.AMOUNT_BELOW_MINIMUM="AMOUNT_BELOW_MINIMUM",n.FEE_INSUFFICIENT="FEE_INSUFFICIENT",n.INCORRECT_CLTV_EXPIRY="INCORRECT_CLTV_EXPIRY",n.CHANNEL_DISABLED="CHANNEL_DISABLED",n.TEMPORARY_CHANNEL_FAILURE="TEMPORARY_CHANNEL_FAILURE",n.REQUIRED_NODE_FEATURE_MISSING="REQUIRED_NODE_FEATURE_MISSING",n.REQUIRED_CHANNEL_FEATURE_MISSING="REQUIRED_CHANNEL_FEATURE_MISSING",n.UNKNOWN_NEXT_PEER="UNKNOWN_NEXT_PEER",n.TEMPORARY_NODE_FAILURE="TEMPORARY_NODE_FAILURE",n.PERMANENT_NODE_FAILURE="PERMANENT_NODE_FAILURE",n.PERMANENT_CHANNEL_FAILURE="PERMANENT_CHANNEL_FAILURE",n.EXPIRY_TOO_FAR="EXPIRY_TOO_FAR",n.MPP_TIMEOUT="MPP_TIMEOUT",n.INVALID_ONION_PAYLOAD="INVALID_ONION_PAYLOAD",n.INTERNAL_FAILURE="INTERNAL_FAILURE",n.UNKNOWN_FAILURE="UNKNOWN_FAILURE",n.UNREADABLE_FAILURE="UNREADABLE_FAILURE",n.UNRECOGNIZED="UNRECOGNIZED"},288:(e,t)=>{var n,r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.HtlcEvent_EventType=t.MissionControlConfig_ProbabilityModel=t.ChanStatusAction=t.ResolveHoldForwardAction=t.PaymentState=t.FailureDetail=void 0,(s=t.FailureDetail||(t.FailureDetail={})).UNKNOWN="UNKNOWN",s.NO_DETAIL="NO_DETAIL",s.ONION_DECODE="ONION_DECODE",s.LINK_NOT_ELIGIBLE="LINK_NOT_ELIGIBLE",s.ON_CHAIN_TIMEOUT="ON_CHAIN_TIMEOUT",s.HTLC_EXCEEDS_MAX="HTLC_EXCEEDS_MAX",s.INSUFFICIENT_BALANCE="INSUFFICIENT_BALANCE",s.INCOMPLETE_FORWARD="INCOMPLETE_FORWARD",s.HTLC_ADD_FAILED="HTLC_ADD_FAILED",s.FORWARDS_DISABLED="FORWARDS_DISABLED",s.INVOICE_CANCELED="INVOICE_CANCELED",s.INVOICE_UNDERPAID="INVOICE_UNDERPAID",s.INVOICE_EXPIRY_TOO_SOON="INVOICE_EXPIRY_TOO_SOON",s.INVOICE_NOT_OPEN="INVOICE_NOT_OPEN",s.MPP_INVOICE_TIMEOUT="MPP_INVOICE_TIMEOUT",s.ADDRESS_MISMATCH="ADDRESS_MISMATCH",s.SET_TOTAL_MISMATCH="SET_TOTAL_MISMATCH",s.SET_TOTAL_TOO_LOW="SET_TOTAL_TOO_LOW",s.SET_OVERPAID="SET_OVERPAID",s.UNKNOWN_INVOICE="UNKNOWN_INVOICE",s.INVALID_KEYSEND="INVALID_KEYSEND",s.MPP_IN_PROGRESS="MPP_IN_PROGRESS",s.CIRCULAR_ROUTE="CIRCULAR_ROUTE",s.UNRECOGNIZED="UNRECOGNIZED",(a=t.PaymentState||(t.PaymentState={})).IN_FLIGHT="IN_FLIGHT",a.SUCCEEDED="SUCCEEDED",a.FAILED_TIMEOUT="FAILED_TIMEOUT",a.FAILED_NO_ROUTE="FAILED_NO_ROUTE",a.FAILED_ERROR="FAILED_ERROR",a.FAILED_INCORRECT_PAYMENT_DETAILS="FAILED_INCORRECT_PAYMENT_DETAILS",a.FAILED_INSUFFICIENT_BALANCE="FAILED_INSUFFICIENT_BALANCE",a.UNRECOGNIZED="UNRECOGNIZED",(o=t.ResolveHoldForwardAction||(t.ResolveHoldForwardAction={})).SETTLE="SETTLE",o.FAIL="FAIL",o.RESUME="RESUME",o.UNRECOGNIZED="UNRECOGNIZED",(i=t.ChanStatusAction||(t.ChanStatusAction={})).ENABLE="ENABLE",i.DISABLE="DISABLE",i.AUTO="AUTO",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.MissionControlConfig_ProbabilityModel||(t.MissionControlConfig_ProbabilityModel={})).APRIORI="APRIORI",r.BIMODAL="BIMODAL",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.HtlcEvent_EventType||(t.HtlcEvent_EventType={})).UNKNOWN="UNKNOWN",n.SEND="SEND",n.RECEIVE="RECEIVE",n.FORWARD="FORWARD",n.UNRECOGNIZED="UNRECOGNIZED"},885:(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MuSig2Version=t.SignMethod=void 0,(r=t.SignMethod||(t.SignMethod={})).SIGN_METHOD_WITNESS_V0="SIGN_METHOD_WITNESS_V0",r.SIGN_METHOD_TAPROOT_KEY_SPEND_BIP0086="SIGN_METHOD_TAPROOT_KEY_SPEND_BIP0086",r.SIGN_METHOD_TAPROOT_KEY_SPEND="SIGN_METHOD_TAPROOT_KEY_SPEND",r.SIGN_METHOD_TAPROOT_SCRIPT_SPEND="SIGN_METHOD_TAPROOT_SCRIPT_SPEND",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.MuSig2Version||(t.MuSig2Version={})).MUSIG2_VERSION_UNDEFINED="MUSIG2_VERSION_UNDEFINED",n.MUSIG2_VERSION_V040="MUSIG2_VERSION_V040",n.MUSIG2_VERSION_V100RC2="MUSIG2_VERSION_V100RC2",n.UNRECOGNIZED="UNRECOGNIZED"},213:(e,t)=>{var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeAddressType=t.WitnessType=t.AddressType=void 0,(i=t.AddressType||(t.AddressType={})).UNKNOWN="UNKNOWN",i.WITNESS_PUBKEY_HASH="WITNESS_PUBKEY_HASH",i.NESTED_WITNESS_PUBKEY_HASH="NESTED_WITNESS_PUBKEY_HASH",i.HYBRID_NESTED_WITNESS_PUBKEY_HASH="HYBRID_NESTED_WITNESS_PUBKEY_HASH",i.TAPROOT_PUBKEY="TAPROOT_PUBKEY",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.WitnessType||(t.WitnessType={})).UNKNOWN_WITNESS="UNKNOWN_WITNESS",r.COMMITMENT_TIME_LOCK="COMMITMENT_TIME_LOCK",r.COMMITMENT_NO_DELAY="COMMITMENT_NO_DELAY",r.COMMITMENT_REVOKE="COMMITMENT_REVOKE",r.HTLC_OFFERED_REVOKE="HTLC_OFFERED_REVOKE",r.HTLC_ACCEPTED_REVOKE="HTLC_ACCEPTED_REVOKE",r.HTLC_OFFERED_TIMEOUT_SECOND_LEVEL="HTLC_OFFERED_TIMEOUT_SECOND_LEVEL",r.HTLC_ACCEPTED_SUCCESS_SECOND_LEVEL="HTLC_ACCEPTED_SUCCESS_SECOND_LEVEL",r.HTLC_OFFERED_REMOTE_TIMEOUT="HTLC_OFFERED_REMOTE_TIMEOUT",r.HTLC_ACCEPTED_REMOTE_SUCCESS="HTLC_ACCEPTED_REMOTE_SUCCESS",r.HTLC_SECOND_LEVEL_REVOKE="HTLC_SECOND_LEVEL_REVOKE",r.WITNESS_KEY_HASH="WITNESS_KEY_HASH",r.NESTED_WITNESS_KEY_HASH="NESTED_WITNESS_KEY_HASH",r.COMMITMENT_ANCHOR="COMMITMENT_ANCHOR",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.ChangeAddressType||(t.ChangeAddressType={})).CHANGE_ADDRESS_TYPE_UNSPECIFIED="CHANGE_ADDRESS_TYPE_UNSPECIFIED",n.CHANGE_ADDRESS_TYPE_P2TR="CHANGE_ADDRESS_TYPE_P2TR",n.UNRECOGNIZED="UNRECOGNIZED"},939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},921:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyType=void 0,(n=t.PolicyType||(t.PolicyType={})).LEGACY="LEGACY",n.ANCHOR="ANCHOR",n.UNRECOGNIZED="UNRECOGNIZED"},452:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(21),t),i(n(939),t)},598:(e,t)=>{var n,r,i,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoReason=t.LiquidityRuleType=t.FailureReason=t.SwapState=t.SwapType=void 0,(a=t.SwapType||(t.SwapType={})).LOOP_OUT="LOOP_OUT",a.LOOP_IN="LOOP_IN",a.UNRECOGNIZED="UNRECOGNIZED",(o=t.SwapState||(t.SwapState={})).INITIATED="INITIATED",o.PREIMAGE_REVEALED="PREIMAGE_REVEALED",o.HTLC_PUBLISHED="HTLC_PUBLISHED",o.SUCCESS="SUCCESS",o.FAILED="FAILED",o.INVOICE_SETTLED="INVOICE_SETTLED",o.UNRECOGNIZED="UNRECOGNIZED",(i=t.FailureReason||(t.FailureReason={})).FAILURE_REASON_NONE="FAILURE_REASON_NONE",i.FAILURE_REASON_OFFCHAIN="FAILURE_REASON_OFFCHAIN",i.FAILURE_REASON_TIMEOUT="FAILURE_REASON_TIMEOUT",i.FAILURE_REASON_SWEEP_TIMEOUT="FAILURE_REASON_SWEEP_TIMEOUT",i.FAILURE_REASON_INSUFFICIENT_VALUE="FAILURE_REASON_INSUFFICIENT_VALUE",i.FAILURE_REASON_TEMPORARY="FAILURE_REASON_TEMPORARY",i.FAILURE_REASON_INCORRECT_AMOUNT="FAILURE_REASON_INCORRECT_AMOUNT",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.LiquidityRuleType||(t.LiquidityRuleType={})).UNKNOWN="UNKNOWN",r.THRESHOLD="THRESHOLD",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.AutoReason||(t.AutoReason={})).AUTO_REASON_UNKNOWN="AUTO_REASON_UNKNOWN",n.AUTO_REASON_BUDGET_NOT_STARTED="AUTO_REASON_BUDGET_NOT_STARTED",n.AUTO_REASON_SWEEP_FEES="AUTO_REASON_SWEEP_FEES",n.AUTO_REASON_BUDGET_ELAPSED="AUTO_REASON_BUDGET_ELAPSED",n.AUTO_REASON_IN_FLIGHT="AUTO_REASON_IN_FLIGHT",n.AUTO_REASON_SWAP_FEE="AUTO_REASON_SWAP_FEE",n.AUTO_REASON_MINER_FEE="AUTO_REASON_MINER_FEE",n.AUTO_REASON_PREPAY="AUTO_REASON_PREPAY",n.AUTO_REASON_FAILURE_BACKOFF="AUTO_REASON_FAILURE_BACKOFF",n.AUTO_REASON_LOOP_OUT="AUTO_REASON_LOOP_OUT",n.AUTO_REASON_LOOP_IN="AUTO_REASON_LOOP_IN",n.AUTO_REASON_LIQUIDITY_OK="AUTO_REASON_LIQUIDITY_OK",n.AUTO_REASON_BUDGET_INSUFFICIENT="AUTO_REASON_BUDGET_INSUFFICIENT",n.AUTO_REASON_FEE_INSUFFICIENT="AUTO_REASON_FEE_INSUFFICIENT",n.UNRECOGNIZED="UNRECOGNIZED"},283:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},11:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(598),t),i(n(283),t)},927:(e,t)=>{var n,r,i,o,a,s,c,u,l,f,h,d,p,y;Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidOrder_FailReason=t.AccountDiff_AccountState=t.SubscribeError_Error=t.OrderReject_OrderRejectReason=t.OrderMatchReject_RejectReason=t.DurationBucketState=t.OrderState=t.ChannelConfirmationConstraints=t.ChannelAnnouncementConstraints=t.NodeTier=t.AuctionType=t.OrderChannelType=t.AuctionAccountState=t.ChannelType=void 0,(y=t.ChannelType||(t.ChannelType={})).TWEAKLESS="TWEAKLESS",y.ANCHORS="ANCHORS",y.SCRIPT_ENFORCED_LEASE="SCRIPT_ENFORCED_LEASE",y.UNRECOGNIZED="UNRECOGNIZED",(p=t.AuctionAccountState||(t.AuctionAccountState={})).STATE_PENDING_OPEN="STATE_PENDING_OPEN",p.STATE_OPEN="STATE_OPEN",p.STATE_EXPIRED="STATE_EXPIRED",p.STATE_PENDING_UPDATE="STATE_PENDING_UPDATE",p.STATE_CLOSED="STATE_CLOSED",p.STATE_PENDING_BATCH="STATE_PENDING_BATCH",p.STATE_EXPIRED_PENDING_UPDATE="STATE_EXPIRED_PENDING_UPDATE",p.UNRECOGNIZED="UNRECOGNIZED",(d=t.OrderChannelType||(t.OrderChannelType={})).ORDER_CHANNEL_TYPE_UNKNOWN="ORDER_CHANNEL_TYPE_UNKNOWN",d.ORDER_CHANNEL_TYPE_PEER_DEPENDENT="ORDER_CHANNEL_TYPE_PEER_DEPENDENT",d.ORDER_CHANNEL_TYPE_SCRIPT_ENFORCED="ORDER_CHANNEL_TYPE_SCRIPT_ENFORCED",d.UNRECOGNIZED="UNRECOGNIZED",(h=t.AuctionType||(t.AuctionType={})).AUCTION_TYPE_BTC_INBOUND_LIQUIDITY="AUCTION_TYPE_BTC_INBOUND_LIQUIDITY",h.AUCTION_TYPE_BTC_OUTBOUND_LIQUIDITY="AUCTION_TYPE_BTC_OUTBOUND_LIQUIDITY",h.UNRECOGNIZED="UNRECOGNIZED",(f=t.NodeTier||(t.NodeTier={})).TIER_DEFAULT="TIER_DEFAULT",f.TIER_0="TIER_0",f.TIER_1="TIER_1",f.UNRECOGNIZED="UNRECOGNIZED",(l=t.ChannelAnnouncementConstraints||(t.ChannelAnnouncementConstraints={})).ANNOUNCEMENT_NO_PREFERENCE="ANNOUNCEMENT_NO_PREFERENCE",l.ONLY_ANNOUNCED="ONLY_ANNOUNCED",l.ONLY_UNANNOUNCED="ONLY_UNANNOUNCED",l.UNRECOGNIZED="UNRECOGNIZED",(u=t.ChannelConfirmationConstraints||(t.ChannelConfirmationConstraints={})).CONFIRMATION_NO_PREFERENCE="CONFIRMATION_NO_PREFERENCE",u.ONLY_CONFIRMED="ONLY_CONFIRMED",u.ONLY_ZEROCONF="ONLY_ZEROCONF",u.UNRECOGNIZED="UNRECOGNIZED",(c=t.OrderState||(t.OrderState={})).ORDER_SUBMITTED="ORDER_SUBMITTED",c.ORDER_CLEARED="ORDER_CLEARED",c.ORDER_PARTIALLY_FILLED="ORDER_PARTIALLY_FILLED",c.ORDER_EXECUTED="ORDER_EXECUTED",c.ORDER_CANCELED="ORDER_CANCELED",c.ORDER_EXPIRED="ORDER_EXPIRED",c.ORDER_FAILED="ORDER_FAILED",c.UNRECOGNIZED="UNRECOGNIZED",(s=t.DurationBucketState||(t.DurationBucketState={})).NO_MARKET="NO_MARKET",s.MARKET_CLOSED="MARKET_CLOSED",s.ACCEPTING_ORDERS="ACCEPTING_ORDERS",s.MARKET_OPEN="MARKET_OPEN",s.UNRECOGNIZED="UNRECOGNIZED",(a=t.OrderMatchReject_RejectReason||(t.OrderMatchReject_RejectReason={})).UNKNOWN="UNKNOWN",a.SERVER_MISBEHAVIOR="SERVER_MISBEHAVIOR",a.BATCH_VERSION_MISMATCH="BATCH_VERSION_MISMATCH",a.PARTIAL_REJECT="PARTIAL_REJECT",a.UNRECOGNIZED="UNRECOGNIZED",(o=t.OrderReject_OrderRejectReason||(t.OrderReject_OrderRejectReason={})).DUPLICATE_PEER="DUPLICATE_PEER",o.CHANNEL_FUNDING_FAILED="CHANNEL_FUNDING_FAILED",o.UNRECOGNIZED="UNRECOGNIZED",(i=t.SubscribeError_Error||(t.SubscribeError_Error={})).UNKNOWN="UNKNOWN",i.SERVER_SHUTDOWN="SERVER_SHUTDOWN",i.ACCOUNT_DOES_NOT_EXIST="ACCOUNT_DOES_NOT_EXIST",i.INCOMPLETE_ACCOUNT_RESERVATION="INCOMPLETE_ACCOUNT_RESERVATION",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.AccountDiff_AccountState||(t.AccountDiff_AccountState={})).OUTPUT_RECREATED="OUTPUT_RECREATED",r.OUTPUT_DUST_EXTENDED_OFFCHAIN="OUTPUT_DUST_EXTENDED_OFFCHAIN",r.OUTPUT_DUST_ADDED_TO_FEES="OUTPUT_DUST_ADDED_TO_FEES",r.OUTPUT_FULLY_SPENT="OUTPUT_FULLY_SPENT",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.InvalidOrder_FailReason||(t.InvalidOrder_FailReason={})).INVALID_AMT="INVALID_AMT",n.UNRECOGNIZED="UNRECOGNIZED"},961:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},456:(e,t)=>{var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.MatchRejectReason=t.MatchState=t.AccountState=t.AccountVersion=void 0,(o=t.AccountVersion||(t.AccountVersion={})).ACCOUNT_VERSION_LND_DEPENDENT="ACCOUNT_VERSION_LND_DEPENDENT",o.ACCOUNT_VERSION_LEGACY="ACCOUNT_VERSION_LEGACY",o.ACCOUNT_VERSION_TAPROOT="ACCOUNT_VERSION_TAPROOT",o.ACCOUNT_VERSION_TAPROOT_V2="ACCOUNT_VERSION_TAPROOT_V2",o.UNRECOGNIZED="UNRECOGNIZED",(i=t.AccountState||(t.AccountState={})).PENDING_OPEN="PENDING_OPEN",i.PENDING_UPDATE="PENDING_UPDATE",i.OPEN="OPEN",i.EXPIRED="EXPIRED",i.PENDING_CLOSED="PENDING_CLOSED",i.CLOSED="CLOSED",i.RECOVERY_FAILED="RECOVERY_FAILED",i.PENDING_BATCH="PENDING_BATCH",i.UNRECOGNIZED="UNRECOGNIZED",(r=t.MatchState||(t.MatchState={})).PREPARE="PREPARE",r.ACCEPTED="ACCEPTED",r.REJECTED="REJECTED",r.SIGNED="SIGNED",r.FINALIZED="FINALIZED",r.UNRECOGNIZED="UNRECOGNIZED",(n=t.MatchRejectReason||(t.MatchRejectReason={})).NONE="NONE",n.SERVER_MISBEHAVIOR="SERVER_MISBEHAVIOR",n.BATCH_VERSION_MISMATCH="BATCH_VERSION_MISMATCH",n.PARTIAL_REJECT_COLLATERAL="PARTIAL_REJECT_COLLATERAL",n.PARTIAL_REJECT_DUPLICATE_PEER="PARTIAL_REJECT_DUPLICATE_PEER",n.PARTIAL_REJECT_CHANNEL_FUNDING_FAILED="PARTIAL_REJECT_CHANNEL_FUNDING_FAILED",n.UNRECOGNIZED="UNRECOGNIZED"},377:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(927),t),i(n(961),t),i(n(456),t)},226:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(288),t)},644:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionMethods=t.serviceNames=void 0,t.serviceNames={frdrpc:{FaradayServer:"frdrpc.FaradayServer"},litrpc:{Firewall:"litrpc.Firewall",Autopilot:"litrpc.Autopilot",Sessions:"litrpc.Sessions"},autopilotrpc:{Autopilot:"autopilotrpc.Autopilot"},chainrpc:{ChainNotifier:"chainrpc.ChainNotifier"},invoicesrpc:{Invoices:"invoicesrpc.Invoices"},lnrpc:{Lightning:"lnrpc.Lightning",WalletUnlocker:"lnrpc.WalletUnlocker"},routerrpc:{Router:"routerrpc.Router"},signrpc:{Signer:"signrpc.Signer"},walletrpc:{WalletKit:"walletrpc.WalletKit"},watchtowerrpc:{Watchtower:"watchtowerrpc.Watchtower"},wtclientrpc:{WatchtowerClient:"wtclientrpc.WatchtowerClient"},looprpc:{SwapClient:"looprpc.SwapClient",Debug:"looprpc.Debug"},poolrpc:{ChannelAuctioneer:"poolrpc.ChannelAuctioneer",HashMail:"poolrpc.HashMail",Trader:"poolrpc.Trader"}},t.subscriptionMethods=["chainrpc.ChainNotifier.RegisterConfirmationsNtfn","chainrpc.ChainNotifier.RegisterSpendNtfn","chainrpc.ChainNotifier.RegisterBlockEpochNtfn","invoicesrpc.Invoices.SubscribeSingleInvoice","lnrpc.Lightning.SubscribeTransactions","lnrpc.Lightning.SubscribePeerEvents","lnrpc.Lightning.SubscribeChannelEvents","lnrpc.Lightning.OpenChannel","lnrpc.Lightning.ChannelAcceptor","lnrpc.Lightning.CloseChannel","lnrpc.Lightning.SendPayment","lnrpc.Lightning.SendToRoute","lnrpc.Lightning.SubscribeInvoices","lnrpc.Lightning.SubscribeChannelGraph","lnrpc.Lightning.SubscribeChannelBackups","lnrpc.Lightning.RegisterRPCMiddleware","lnrpc.Lightning.SubscribeCustomMessages","routerrpc.Router.SendPaymentV2","routerrpc.Router.TrackPaymentV2","routerrpc.Router.TrackPayments","routerrpc.Router.SubscribeHtlcEvents","routerrpc.Router.SendPayment","routerrpc.Router.TrackPayment","routerrpc.Router.HtlcInterceptor","looprpc.SwapClient.Monitor","poolrpc.ChannelAuctioneer.SubscribeBatchAuction","poolrpc.ChannelAuctioneer.SubscribeSidecar","poolrpc.HashMail.RecvStream"]},207:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(885),t)},367:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(213),t)},412:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(482),t)},946:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(921),t)},848:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.camelKeysToSnake=t.snakeKeysToCamel=t.isObject=void 0;var n=function(e){return Array.isArray(e)};t.isObject=function(e){return e===Object(e)&&!n(e)&&"function"!=typeof e},t.snakeKeysToCamel=function(e){if((0,t.isObject)(e)){var r={};return Object.keys(e).forEach((function(n){var i;r[(i=n,i.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")})))]=(0,t.snakeKeysToCamel)(e[n])})),r}return n(e)?e.map((function(e){return(0,t.snakeKeysToCamel)(e)})):e},t.camelKeysToSnake=function(e){if((0,t.isObject)(e)){var r={};return Object.keys(e).forEach((function(n){var i;r[(i=n,i.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})))]=(0,t.camelKeysToSnake)(e[n])})),r}return n(e)?e.map((function(e){return(0,t.camelKeysToSnake)(e)})):e}}},t={};return function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(713)})()},9282:(e,t,n)=>{"use strict";var r=n(4155),i=n(5108);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,s,c=n(2136).codes,u=c.ERR_AMBIGUOUS_ARGUMENT,l=c.ERR_INVALID_ARG_TYPE,f=c.ERR_INVALID_ARG_VALUE,h=c.ERR_INVALID_RETURN_VALUE,d=c.ERR_MISSING_ARGS,p=n(5961),y=n(9539).inspect,g=n(9539).types,b=g.isPromise,m=g.isRegExp,w=Object.assign?Object.assign:n(8091).assign,v=Object.is?Object.is:n(609);function _(){var e=n(9158);a=e.isDeepEqual,s=e.isDeepStrictEqual}new Map;var E=!1,S=e.exports=P,k={};function A(e){if(e.message instanceof Error)throw e.message;throw new p(e)}function O(e,t,n,r){if(!n){var i=!1;if(0===t)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new p({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.apply(void 0,[P,t.length].concat(t))}S.fail=function e(t,n,o,a,s){var c,u=arguments.length;if(0===u?c="Failed":1===u?(o=t,t=void 0):(!1===E&&(E=!0,(r.emitWarning?r.emitWarning:i.warn.bind(i))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===u&&(a="!=")),o instanceof Error)throw o;var l={actual:t,expected:n,operator:void 0===a?"fail":a,stackStartFn:s||e};void 0!==o&&(l.message=o);var f=new p(l);throw c&&(f.message=c,f.generatedMessage=!0),f},S.AssertionError=p,S.ok=P,S.equal=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");t!=n&&A({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},S.notEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");t==n&&A({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},S.deepEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===a&&_(),a(t,n)||A({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},S.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===a&&_(),a(t,n)&&A({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},S.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===a&&_(),s(t,n)||A({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},S.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");void 0===a&&_(),s(t,n)&&A({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},S.strictEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");v(t,n)||A({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},S.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new d("actual","expected");v(t,n)&&A({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var I=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==r&&"string"==typeof r[e]&&m(t[e])&&t[e].test(r[e])?i[e]=r[e]:i[e]=t[e])}))};function T(e,t,n,r,i,o){if(!(n in e)||!s(e[n],t[n])){if(!r){var a=new I(e,i),c=new I(t,i,e),u=new p({actual:a,expected:c,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=e,u.expected=t,u.operator=o.name,u}A({actual:e,expected:t,message:r,operator:o.name,stackStartFn:o})}}function x(e,t,n,r){if("function"!=typeof t){if(m(t))return t.test(e);if(2===arguments.length)throw new l("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var i=new p({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new f("error",t,"may not be an empty object");return void 0===a&&_(),s.forEach((function(i){"string"==typeof e[i]&&m(t[i])&&t[i].test(e[i])||T(e,t,i,n,s,r)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function N(e){if("function"!=typeof e)throw new l("fn","Function",e);try{e()}catch(e){return e}return k}function R(e){return b(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function C(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!R(t=e()))throw new h("instance of Promise","promiseFn",t)}else{if(!R(e))throw new l("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return k})).catch((function(e){return e}))}))}function B(e,t,n,r){if("string"==typeof n){if(4===arguments.length)throw new l("error",["Object","Error","Function","RegExp"],n);if("object"===o(t)&&null!==t){if(t.message===n)throw new u("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new u("error/message",'The error "'.concat(t,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==o(n)&&"function"!=typeof n)throw new l("error",["Object","Error","Function","RegExp"],n);if(t===k){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var a="rejects"===e.name?"rejection":"exception";A({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(a).concat(i),stackStartFn:e})}if(n&&!x(t,n,r,e))throw t}function L(e,t,n,r){if(t!==k){if("string"==typeof n&&(r=n,n=void 0),!n||x(t,n)){var i=r?": ".concat(r):".",o="doesNotReject"===e.name?"rejection":"exception";A({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.apply(void 0,[U,t.length].concat(t))}S.throws=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];B.apply(void 0,[e,N(t)].concat(r))},S.rejects=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return C(t).then((function(t){return B.apply(void 0,[e,t].concat(r))}))},S.doesNotThrow=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];L.apply(void 0,[e,N(t)].concat(r))},S.doesNotReject=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return C(t).then((function(t){return L.apply(void 0,[e,t].concat(r))}))},S.ifError=function e(t){if(null!=t){var n="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=y(t);var r=new p({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),i=t.stack;if("string"==typeof i){var a=i.split("\n");a.shift();for(var s=r.stack.split("\n"),c=0;c<a.length;c++){var u=s.indexOf(a[c]);if(-1!==u){s=s.slice(0,u);break}}r.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw r}},S.strict=w(U,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict},5961:(e,t,n)=>{"use strict";var r=n(4155);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,h(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},c(e)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,n){return l=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&f(i,n.prototype),i},l.apply(null,arguments)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=n(9539).inspect,y=n(2136).codes.ERR_INVALID_ARG_TYPE;function g(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var b="",m="",w="",v="",_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function E(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function S(e){return p(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var k=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==d(e)||null===e)throw new y("options","Object",e);var i=e.message,o=e.operator,c=e.stackStartFn,u=e.actual,l=e.expected,f=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)n=a(this,h(t).call(this,String(i)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(b="[34m",m="[32m",v="[39m",w="[31m"):(b="",m="",v="",w="")),"object"===d(u)&&null!==u&&"object"===d(l)&&null!==l&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=E(u),l=E(l)),"deepStrictEqual"===o||"strictEqual"===o)n=a(this,h(t).call(this,function(e,t,n){var i="",o="",a=0,s="",c=!1,u=S(e),l=u.split("\n"),f=S(t).split("\n"),h=0,p="";if("strictEqual"===n&&"object"===d(e)&&"object"===d(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===l.length&&1===f.length&&l[0]!==f[0]){var y=l[0].length+f[0].length;if(y<=10){if(!("object"===d(e)&&null!==e||"object"===d(t)&&null!==t||0===e&&0===t))return"".concat(_[n],"\n\n")+"".concat(l[0]," !== ").concat(f[0],"\n")}else if("strictEqualObject"!==n&&y<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;l[0][h]===f[0][h];)h++;h>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",h),"^"),h=0)}}for(var E=l[l.length-1],k=f[f.length-1];E===k&&(h++<2?s="\n  ".concat(E).concat(s):i=E,l.pop(),f.pop(),0!==l.length&&0!==f.length);)E=l[l.length-1],k=f[f.length-1];var A=Math.max(l.length,f.length);if(0===A){var O=u.split("\n");if(O.length>30)for(O[26]="".concat(b,"...").concat(v);O.length>27;)O.pop();return"".concat(_.notIdentical,"\n\n").concat(O.join("\n"),"\n")}h>3&&(s="\n".concat(b,"...").concat(v).concat(s),c=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var P=0,I=_[n]+"\n".concat(m,"+ actual").concat(v," ").concat(w,"- expected").concat(v),T=" ".concat(b,"...").concat(v," Lines skipped");for(h=0;h<A;h++){var x=h-a;if(l.length<h+1)x>1&&h>2&&(x>4?(o+="\n".concat(b,"...").concat(v),c=!0):x>3&&(o+="\n  ".concat(f[h-2]),P++),o+="\n  ".concat(f[h-1]),P++),a=h,i+="\n".concat(w,"-").concat(v," ").concat(f[h]),P++;else if(f.length<h+1)x>1&&h>2&&(x>4?(o+="\n".concat(b,"...").concat(v),c=!0):x>3&&(o+="\n  ".concat(l[h-2]),P++),o+="\n  ".concat(l[h-1]),P++),a=h,o+="\n".concat(m,"+").concat(v," ").concat(l[h]),P++;else{var N=f[h],R=l[h],C=R!==N&&(!g(R,",")||R.slice(0,-1)!==N);C&&g(N,",")&&N.slice(0,-1)===R&&(C=!1,R+=","),C?(x>1&&h>2&&(x>4?(o+="\n".concat(b,"...").concat(v),c=!0):x>3&&(o+="\n  ".concat(l[h-2]),P++),o+="\n  ".concat(l[h-1]),P++),a=h,o+="\n".concat(m,"+").concat(v," ").concat(R),i+="\n".concat(w,"-").concat(v," ").concat(N),P+=2):(o+=i,i="",1!==x&&0!==h||(o+="\n  ".concat(R),P++))}if(P>20&&h<A-2)return"".concat(I).concat(T,"\n").concat(o,"\n").concat(b,"...").concat(v).concat(i,"\n")+"".concat(b,"...").concat(v)}return"".concat(I).concat(c?T:"","\n").concat(o).concat(i).concat(s).concat(p)}(u,l,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var p=_[o],k=S(u).split("\n");if("notStrictEqual"===o&&"object"===d(u)&&null!==u&&(p=_.notStrictEqualObject),k.length>30)for(k[26]="".concat(b,"...").concat(v);k.length>27;)k.pop();n=1===k.length?a(this,h(t).call(this,"".concat(p," ").concat(k[0]))):a(this,h(t).call(this,"".concat(p,"\n\n").concat(k.join("\n"),"\n")))}else{var A=S(u),O="",P=_[o];"notDeepEqual"===o||"notEqual"===o?(A="".concat(_[o],"\n\n").concat(A)).length>1024&&(A="".concat(A.slice(0,1021),"...")):(O="".concat(S(l)),A.length>512&&(A="".concat(A.slice(0,509),"...")),O.length>512&&(O="".concat(O.slice(0,509),"...")),"deepEqual"===o||"equal"===o?A="".concat(P,"\n\n").concat(A,"\n\nshould equal\n\n"):O=" ".concat(o," ").concat(O)),n=a(this,h(t).call(this,"".concat(A).concat(O)))}return Error.stackTraceLimit=f,n.generatedMessage=!i,Object.defineProperty(s(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=u,n.expected=l,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(s(n),c),n.stack,n.name="AssertionError",a(n)}var n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(e,t){return p(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],c&&o(n.prototype,c),t}(c(Error));e.exports=k},2136:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}var a,s,c={};function u(e,t,n){n||(n=Error);var a=function(n){function a(n,o,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),c=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(a).call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,o,s))),c.code=e,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(a,n),a}(n);c[e]=a}function l(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}u("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),u("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,s,c,u,f;if(void 0===a&&(a=n(9282)),a("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(0,s.length)===s)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))c="The ".concat(e," ").concat(o," ").concat(l(t,"type"));else{var h=("number"!=typeof f&&(f=0),f+1>(u=e).length||-1===u.indexOf(".",f)?"argument":"property");c='The "'.concat(e,'" ').concat(h," ").concat(o," ").concat(l(t,"type"))}return c+". Received type ".concat(r(i))}),TypeError),u("ERR_INVALID_ARG_VALUE",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=n(9539));var i=s.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),u("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),u("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===a&&(a=n(9282)),a(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=c},9158:(e,t,n)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},c=Object.is?Object.is:n(609),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},l=Number.isNaN?Number.isNaN:n(360);function f(e){return e.call.bind(e)}var h=f(Object.prototype.hasOwnProperty),d=f(Object.prototype.propertyIsEnumerable),p=f(Object.prototype.toString),y=n(9539).types,g=y.isAnyArrayBuffer,b=y.isArrayBufferView,m=y.isDate,w=y.isMap,v=y.isRegExp,_=y.isSet,E=y.isNativeError,S=y.isBoxedPrimitive,k=y.isNumberObject,A=y.isStringObject,O=y.isBooleanObject,P=y.isBigIntObject,I=y.isSymbolObject,T=y.isFloat32Array,x=y.isFloat64Array;function N(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function R(e){return Object.keys(e).filter(N).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function C(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function B(e,t,n,r){if(e===t)return 0!==e||!n||c(e,t);if(n){if("object"!==i(e))return"number"==typeof e&&l(e)&&l(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var a,s,u,f,h=p(e);if(h!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var d=R(e),y=R(t);return d.length===y.length&&U(e,t,n,r,1,d)}if("[object Object]"===h&&(!w(e)&&w(t)||!_(e)&&_(t)))return!1;if(m(e)){if(!m(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(v(e)){if(!v(t)||(u=e,f=t,!(o?u.source===f.source&&u.flags===f.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(f))))return!1}else if(E(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(b(e)){if(n||!T(e)&&!x(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===C(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var N=R(e),B=R(t);return N.length===B.length&&U(e,t,n,r,0,N)}if(_(e))return!(!_(t)||e.size!==t.size)&&U(e,t,n,r,2);if(w(e))return!(!w(t)||e.size!==t.size)&&U(e,t,n,r,3);if(g(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==C(new Uint8Array(a),new Uint8Array(s)))return!1}else if(S(e)&&!function(e,t){return k(e)?k(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):A(e)?A(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):O(e)?O(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):P(e)?P(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):I(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return U(e,t,n,r,0)}function L(e,t){return t.filter((function(t){return d(e,t)}))}function U(e,t,n,r,i,o){if(5===arguments.length){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!h(t,o[s]))return!1;if(n&&5===arguments.length){var c=u(e);if(0!==c.length){var l=0;for(s=0;s<c.length;s++){var f=c[s];if(d(e,f)){if(!d(t,f))return!1;o.push(f),l++}else if(d(t,f))return!1}var p=u(t);if(c.length!==p.length&&L(t,p).length!==l)return!1}else{var y=u(t);if(0!==y.length&&0!==L(t,y).length)return!1}}if(0===o.length&&(0===i||1===i&&0===e.length||0===e.size))return!0;if(void 0===r)r={val1:new Map,val2:new Map,position:0};else{var g=r.val1.get(e);if(void 0!==g){var b=r.val2.get(t);if(void 0!==b)return g===b}r.position++}r.val1.set(e,r.position),r.val2.set(t,r.position);var m=z(e,t,n,o,r,i);return r.val1.delete(e),r.val2.delete(t),m}function j(e,t,n,r){for(var i=a(e),o=0;o<i.length;o++){var s=i[o];if(B(t,s,n,r))return e.delete(s),!0}return!1}function D(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(l(e))return!1}return!0}function M(e,t,n){var r=D(n);return null!=r?r:t.has(r)&&!e.has(r)}function H(e,t,n,r,i){var o=D(n);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!B(r,a,!1,i))&&!e.has(o)&&B(r,a,!1,i)}function F(e,t,n,r,i,o){for(var s=a(e),c=0;c<s.length;c++){var u=s[c];if(B(n,u,i,o)&&B(r,t.get(u),i,o))return e.delete(u),!0}return!1}function z(e,t,n,o,c,u){var l=0;if(2===u){if(!function(e,t,n,r){for(var o=null,s=a(e),c=0;c<s.length;c++){var u=s[c];if("object"===i(u)&&null!==u)null===o&&(o=new Set),o.add(u);else if(!t.has(u)){if(n)return!1;if(!M(e,t,u))return!1;null===o&&(o=new Set),o.add(u)}}if(null!==o){for(var l=a(t),f=0;f<l.length;f++){var h=l[f];if("object"===i(h)&&null!==h){if(!j(o,h,n,r))return!1}else if(!n&&!e.has(h)&&!j(o,h,n,r))return!1}return 0===o.size}return!0}(e,t,n,c))return!1}else if(3===u){if(!function(e,t,n,o){for(var a=null,c=s(e),u=0;u<c.length;u++){var l=r(c[u],2),f=l[0],h=l[1];if("object"===i(f)&&null!==f)null===a&&(a=new Set),a.add(f);else{var d=t.get(f);if(void 0===d&&!t.has(f)||!B(h,d,n,o)){if(n)return!1;if(!H(e,t,f,h,o))return!1;null===a&&(a=new Set),a.add(f)}}}if(null!==a){for(var p=s(t),y=0;y<p.length;y++){var g=r(p[y],2),b=(f=g[0],g[1]);if("object"===i(f)&&null!==f){if(!F(a,e,f,b,n,o))return!1}else if(!(n||e.has(f)&&B(e.get(f),b,!1,o)||F(a,e,f,b,!1,o)))return!1}return 0===a.size}return!0}(e,t,n,c))return!1}else if(1===u)for(;l<e.length;l++){if(!h(e,l)){if(h(t,l))return!1;for(var f=Object.keys(e);l<f.length;l++){var d=f[l];if(!h(t,d)||!B(e[d],t[d],n,c))return!1}return f.length===Object.keys(t).length}if(!h(t,l)||!B(e[l],t[l],n,c))return!1}for(l=0;l<o.length;l++){var p=o[l];if(!B(e[p],t[p],n,c))return!1}return!0}e.exports={isDeepEqual:function(e,t){return B(e,t,!1)},isDeepStrictEqual:function(e,t){return B(e,t,!0)}}},1924:(e,t,n)=>{"use strict";var r=n(210),i=n(5559),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},5559:(e,t,n)=>{"use strict";var r=n(8612),i=n(210),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),c=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(r,a,arguments);return c&&u&&c(t,"length").configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))}),t};var f=function(){return s(r,o,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},5108:(e,t,n)=>{var r=n(9539),i=n(9282);function o(){return(new Date).getTime()}var a,s=Array.prototype.slice,c={};a=void 0!==n.g&&n.g.console?n.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var u=[[function(){},"log"],[function(){a.log.apply(a,arguments)},"info"],[function(){a.log.apply(a,arguments)},"warn"],[function(){a.warn.apply(a,arguments)},"error"],[function(e){c[e]=o()},"time"],[function(e){var t=c[e];if(!t)throw new Error("No such label: "+e);delete c[e];var n=o()-t;a.log(e+": "+n+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=r.format.apply(null,arguments),a.error(e.stack)},"trace"],[function(e){a.log(r.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);i.ok(!1,r.format.apply(null,t))}},"assert"]],l=0;l<u.length;l++){var f=u[l],h=f[0],d=f[1];a[d]||(a[d]=h)}e.exports=a},452:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],a=[],s=[],c=[],u=[],l=[],f=[],h=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var y=e[n],g=e[y],b=e[g],m=257*e[p]^16843008*p;a[n]=m<<24|m>>>8,s[n]=m<<16|m>>>16,c[n]=m<<8|m>>>24,u[n]=m,m=16843009*b^65537*g^257*y^16843008*n,l[p]=m<<24|m>>>8,f[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,d[p]=m,n?(n=y^e[e[e[b^y]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=t[a]:(u=o[a-1],a%n?n>6&&a%n==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=p[a/n|0]<<24),o[a]=o[a-n]^u);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var u=o[a];else u=o[a-4];s[c]=c<4||a<=4?u:l[i[u>>>24]]^f[i[u>>>16&255]]^h[i[u>>>8&255]]^d[i[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<c;p++){var y=r[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^n[d++],g=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&u]^n[d++],b=r[f>>>24]^i[h>>>16&255]^o[u>>>8&255]^a[255&l]^n[d++],m=r[h>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^n[d++];u=y,l=g,f=b,h=m}y=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[d++],g=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^n[d++],b=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[d++],m=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],e[t]=y,e[t+1]=g,e[t+2]=b,e[t+3]=m},keySize:8});e.AES=t._createHelper(y)}(),r.AES)},5109:function(e,t,n){var r,i,o,a,s,c,u,l,f,h,d,p,y,g,b,m,w,v,_;e.exports=(r=n(8249),n(888),void(r.lib.Cipher||(i=r,o=i.lib,a=o.Base,s=o.WordArray,c=o.BufferedBlockAlgorithm,u=i.enc,u.Utf8,l=u.Base64,f=i.algo.EvpKDF,h=o.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:w}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=i.mode={},p=o.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),y=d.CBC=function(){var e=p.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),g=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);var c=s.create(o,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:y,padding:g}),reset:function(){var e;h.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),b=o.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?s.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=s.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),b.create({ciphertext:n,salt:t})}},w=o.SerializableCipher=a.extend({cfg:a.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return b.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(i.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=s.random(8));var i=f.create({keySize:t+n}).compute(e,r),o=s.create(i.words.slice(t),4*n);return i.sigBytes=4*t,b.create({key:i,iv:o,salt:r})}},_=o.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:v}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=w.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,w.decrypt.call(this,e,t,i.key,r)}}))))},8249:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),l=a.enc={},f=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,o);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(i,f);n=i.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(s.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new y.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)},8269:function(e,t,n){var r,i,o;e.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return function(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return o.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},3786:function(e,t,n){var r,i,o;e.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64url={stringify:function(e,t=!0){var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<r;c++)o.push(i.charAt(s>>>6*(3-c)&63));var u=i.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e,t=!0){var n=e.length,r=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<r.length;a++)i[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(n=c)}return function(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return o.create(r,i)}(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},r.enc.Base64url)},298:function(e,t,n){var r;e.exports=(r=n(8249),function(){var e=r,t=e.lib.WordArray,n=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},888:function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(l=n(8249),n(2783),n(9824),o=(i=(r=l).lib).Base,a=i.WordArray,c=(s=r.algo).MD5,u=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=a.create(),s=o.words,c=r.keySize,u=r.iterations;s.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*c,o}}),r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},l.EvpKDF)},2209:function(e,t,n){var r,i,o,a;e.exports=(a=n(8249),n(5109),i=(r=a).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},a.format.Hex)},9824:function(e,t,n){var r,i,o;e.exports=(i=(r=n(8249)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},1354:function(e,t,n){var r;e.exports=(r=n(8249),n(4938),n(4433),n(298),n(8269),n(3786),n(8214),n(2783),n(2153),n(7792),n(34),n(7460),n(3327),n(706),n(9824),n(2112),n(888),n(5109),n(8568),n(4242),n(9968),n(7660),n(1148),n(3615),n(2807),n(1077),n(6475),n(6991),n(2209),n(452),n(4253),n(1857),n(4454),n(3974),r)},4433:function(e,t,n){var r;e.exports=(r=n(8249),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},8214:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],c=e[t+1],d=e[t+2],p=e[t+3],y=e[t+4],g=e[t+5],b=e[t+6],m=e[t+7],w=e[t+8],v=e[t+9],_=e[t+10],E=e[t+11],S=e[t+12],k=e[t+13],A=e[t+14],O=e[t+15],P=o[0],I=o[1],T=o[2],x=o[3];P=u(P,I,T,x,a,7,s[0]),x=u(x,P,I,T,c,12,s[1]),T=u(T,x,P,I,d,17,s[2]),I=u(I,T,x,P,p,22,s[3]),P=u(P,I,T,x,y,7,s[4]),x=u(x,P,I,T,g,12,s[5]),T=u(T,x,P,I,b,17,s[6]),I=u(I,T,x,P,m,22,s[7]),P=u(P,I,T,x,w,7,s[8]),x=u(x,P,I,T,v,12,s[9]),T=u(T,x,P,I,_,17,s[10]),I=u(I,T,x,P,E,22,s[11]),P=u(P,I,T,x,S,7,s[12]),x=u(x,P,I,T,k,12,s[13]),T=u(T,x,P,I,A,17,s[14]),P=l(P,I=u(I,T,x,P,O,22,s[15]),T,x,c,5,s[16]),x=l(x,P,I,T,b,9,s[17]),T=l(T,x,P,I,E,14,s[18]),I=l(I,T,x,P,a,20,s[19]),P=l(P,I,T,x,g,5,s[20]),x=l(x,P,I,T,_,9,s[21]),T=l(T,x,P,I,O,14,s[22]),I=l(I,T,x,P,y,20,s[23]),P=l(P,I,T,x,v,5,s[24]),x=l(x,P,I,T,A,9,s[25]),T=l(T,x,P,I,p,14,s[26]),I=l(I,T,x,P,w,20,s[27]),P=l(P,I,T,x,k,5,s[28]),x=l(x,P,I,T,d,9,s[29]),T=l(T,x,P,I,m,14,s[30]),P=f(P,I=l(I,T,x,P,S,20,s[31]),T,x,g,4,s[32]),x=f(x,P,I,T,w,11,s[33]),T=f(T,x,P,I,E,16,s[34]),I=f(I,T,x,P,A,23,s[35]),P=f(P,I,T,x,c,4,s[36]),x=f(x,P,I,T,y,11,s[37]),T=f(T,x,P,I,m,16,s[38]),I=f(I,T,x,P,_,23,s[39]),P=f(P,I,T,x,k,4,s[40]),x=f(x,P,I,T,a,11,s[41]),T=f(T,x,P,I,p,16,s[42]),I=f(I,T,x,P,b,23,s[43]),P=f(P,I,T,x,v,4,s[44]),x=f(x,P,I,T,S,11,s[45]),T=f(T,x,P,I,O,16,s[46]),P=h(P,I=f(I,T,x,P,d,23,s[47]),T,x,a,6,s[48]),x=h(x,P,I,T,m,10,s[49]),T=h(T,x,P,I,A,15,s[50]),I=h(I,T,x,P,g,21,s[51]),P=h(P,I,T,x,S,6,s[52]),x=h(x,P,I,T,p,10,s[53]),T=h(T,x,P,I,_,15,s[54]),I=h(I,T,x,P,c,21,s[55]),P=h(P,I,T,x,w,6,s[56]),x=h(x,P,I,T,O,10,s[57]),T=h(T,x,P,I,b,15,s[58]),I=h(I,T,x,P,k,21,s[59]),P=h(P,I,T,x,y,6,s[60]),x=h(x,P,I,T,E,10,s[61]),T=h(T,x,P,I,d,15,s[62]),I=h(I,T,x,P,v,21,s[63]),o[0]=o[0]+P|0,o[1]=o[1]+I|0,o[2]=o[2]+T|0,o[3]=o[3]+x|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function f(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function h(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},8568:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.mode.CFB=function(){var e=r.lib.BlockCipherMode.extend();function t(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=o}}),e}(),r.mode.CFB)},9968:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.mode.CTRGladman=function(){var e=r.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var n=e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var c=0;c<i;c++)e[n+c]^=s[c]}});return e.Decryptor=n,e}(),r.mode.CTRGladman)},4242:function(e,t,n){var r,i,o;e.exports=(o=n(8249),n(5109),o.mode.CTR=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}}),r.Decryptor=i,r),o.mode.CTR)},1148:function(e,t,n){var r,i;e.exports=(i=n(8249),n(5109),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),i.mode.ECB)},7660:function(e,t,n){var r,i,o;e.exports=(o=n(8249),n(5109),o.mode.OFB=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}}),r.Decryptor=i,r),o.mode.OFB)},3615:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Ansix923)},2807:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.Iso10126={pad:function(e,t){var n=4*t,i=n-e.sigBytes%n;e.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Iso10126)},1077:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.Iso97971={pad:function(e,t){e.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(e,t)},unpad:function(e){r.pad.ZeroPadding.unpad(e),e.sigBytes--}},r.pad.Iso97971)},6991:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},6475:function(e,t,n){var r;e.exports=(r=n(8249),n(5109),r.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},r.pad.ZeroPadding)},2112:function(e,t,n){var r,i,o,a,s,c,u,l,f;e.exports=(f=n(8249),n(2783),n(9824),o=(i=(r=f).lib).Base,a=i.WordArray,c=(s=r.algo).SHA1,u=s.HMAC,l=s.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=u.create(n.hasher,e),i=a.create(),o=a.create([1]),s=i.words,c=o.words,l=n.keySize,f=n.iterations;s.length<l;){var h=r.update(t).finalize(o);r.reset();for(var d=h.words,p=d.length,y=h,g=1;g<f;g++){y=r.finalize(y),r.reset();for(var b=y.words,m=0;m<p;m++)d[m]^=b[m]}i.concat(h),c[0]++}return i.sigBytes=4*l,i}}),r.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)},f.PBKDF2)},3974:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],o=[],a=[],s=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;for(r[0]^=u,r[1]^=f,r[2]^=l,r[3]^=h,r[4]^=u,r[5]^=f,r[6]^=l,r[7]^=h,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),r.RabbitLegacy)},4454:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],o=[],a=[],s=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;for(i[0]^=u,i[1]^=f,i[2]^=l,i[3]^=h,i[4]^=u,i[5]^=f,i[6]^=l,i[7]^=h,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),r.Rabbit)},1857:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(i);var a=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(a)}(),r.RC4)},706:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,d,v,_,E,S,k,A,O,P,I=this._hash.words,T=f.words,x=h.words,N=s.words,R=c.words,C=u.words,B=l.words;for(E=o=I[0],S=a=I[1],k=d=I[2],A=v=I[3],O=_=I[4],n=0;n<80;n+=1)P=o+e[t+N[n]]|0,P+=n<16?p(a,d,v)+T[0]:n<32?y(a,d,v)+T[1]:n<48?g(a,d,v)+T[2]:n<64?b(a,d,v)+T[3]:m(a,d,v)+T[4],P=(P=w(P|=0,C[n]))+_|0,o=_,_=v,v=w(d,10),d=a,a=P,P=E+e[t+R[n]]|0,P+=n<16?m(S,k,A)+x[0]:n<32?b(S,k,A)+x[1]:n<48?g(S,k,A)+x[2]:n<64?y(S,k,A)+x[3]:p(S,k,A)+x[4],P=(P=w(P|=0,B[n]))+O|0,E=O,O=A,A=w(k,10),k=S,S=P;P=I[1]+d+A|0,I[1]=I[2]+v+O|0,I[2]=I[3]+_+E|0,I[3]=I[4]+o+S|0,I[4]=I[0]+a+k|0,I[0]=P},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function y(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function b(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function w(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(d),t.HmacRIPEMD160=o._createHmacHelper(d)}(Math),r.RIPEMD160)},2783:function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(i=(r=l=n(8249)).lib,o=i.WordArray,a=i.Hasher,s=r.algo,c=[],u=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+s+c[u];f+=u<20?1518500249+(i&o|~i&a):u<40?1859775393+(i^o^a):u<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,s=a,a=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u),l.SHA1)},7792:function(e,t,n){var r,i,o,a,s,c;e.exports=(c=n(8249),n(2153),i=(r=c).lib.WordArray,o=r.algo,a=o.SHA256,s=o.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=a._createHelper(s),r.HmacSHA224=a._createHmacHelper(s),c.SHA224)},2153:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var p=u[d-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[d-2],b=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[d]=y+u[d-7]+b+u[d-16]}var m=r&i^r&o^i&o,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[d]+u[d];h=f,f=l,l=s,s=a+v|0,a=o,o=i,i=r,r=v+(w+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},3327:function(e,t,n){var r;e.exports=(r=n(8249),n(4938),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.x64.Word,s=t.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,f=0,h=0;h<7;h++){if(1&i){var d=(1<<h)-1;d<32?f^=1<<d:s^=1<<d-32}128&i?i=i<<1^113:i<<=1}l[o]=a.create(s,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=a.create()}();var h=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=n[i]).high^=a,I.low^=o}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var d=0,p=0,y=0;y<5;y++)d^=(I=n[h+5*y]).high,p^=I.low;var g=f[h];g.high=d,g.low=p}for(h=0;h<5;h++){var b=f[(h+4)%5],m=f[(h+1)%5],w=m.high,v=m.low;for(d=b.high^(w<<1|v>>>31),p=b.low^(v<<1|w>>>31),y=0;y<5;y++)(I=n[h+5*y]).high^=d,I.low^=p}for(var _=1;_<25;_++){var E=(I=n[_]).high,S=I.low,k=c[_];k<32?(d=E<<k|S>>>32-k,p=S<<k|E>>>32-k):(d=S<<k-32|E>>>64-k,p=E<<k-32|S>>>64-k);var A=f[u[_]];A.high=d,A.low=p}var O=f[0],P=n[0];for(O.high=P.high,O.low=P.low,h=0;h<5;h++)for(y=0;y<5;y++){var I=n[_=h+5*y],T=f[_],x=f[(h+1)%5+5*y],N=f[(h+2)%5+5*y];I.high=T.high^~x.high&N.high,I.low=T.low^~x.low&N.low}I=n[0];var R=l[s];I.high^=R.high,I.low^=R.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var f=a[l],h=f.high,d=f.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(h)}return new i.init(u,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(h),t.HmacSHA3=o._createHmacHelper(h)}(Math),r.SHA3)},7460:function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(l=n(8249),n(4938),n(34),i=(r=l).x64,o=i.Word,a=i.WordArray,s=r.algo,c=s.SHA512,u=s.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(u),r.HmacSHA384=c._createHmacHelper(u),l.SHA384)},34:function(e,t,n){var r;e.exports=(r=n(8249),n(4938),function(){var e=r,t=e.lib.Hasher,n=e.x64,i=n.Word,o=n.WordArray,a=e.algo;function s(){return i.create.apply(i,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var l=a.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=r.high,p=r.low,y=i.high,g=i.low,b=o.high,m=o.low,w=a.high,v=a.low,_=s.high,E=s.low,S=l.high,k=l.low,A=f.high,O=f.low,P=h.high,I=h.low,T=d,x=p,N=y,R=g,C=b,B=m,L=w,U=v,j=_,D=E,M=S,H=k,F=A,z=O,K=P,q=I,V=0;V<80;V++){var W,G,$=u[V];if(V<16)G=$.high=0|e[t+2*V],W=$.low=0|e[t+2*V+1];else{var Y=u[V-15],Z=Y.high,X=Y.low,J=(Z>>>1|X<<31)^(Z>>>8|X<<24)^Z>>>7,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^(X>>>7|Z<<25),ee=u[V-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=u[V-7],ae=oe.high,se=oe.low,ce=u[V-16],ue=ce.high,le=ce.low;G=(G=(G=J+ae+((W=Q+se)>>>0<Q>>>0?1:0))+re+((W+=ie)>>>0<ie>>>0?1:0))+ue+((W+=le)>>>0<le>>>0?1:0),$.high=G,$.low=W}var fe,he=j&M^~j&F,de=D&H^~D&z,pe=T&N^T&C^N&C,ye=x&R^x&B^R&B,ge=(T>>>28|x<<4)^(T<<30|x>>>2)^(T<<25|x>>>7),be=(x>>>28|T<<4)^(x<<30|T>>>2)^(x<<25|T>>>7),me=(j>>>14|D<<18)^(j>>>18|D<<14)^(j<<23|D>>>9),we=(D>>>14|j<<18)^(D>>>18|j<<14)^(D<<23|j>>>9),ve=c[V],_e=ve.high,Ee=ve.low,Se=K+me+((fe=q+we)>>>0<q>>>0?1:0),ke=be+ye;K=F,q=z,F=M,z=H,M=j,H=D,j=L+(Se=(Se=(Se=Se+he+((fe+=de)>>>0<de>>>0?1:0))+_e+((fe+=Ee)>>>0<Ee>>>0?1:0))+G+((fe+=W)>>>0<W>>>0?1:0))+((D=U+fe|0)>>>0<U>>>0?1:0)|0,L=C,U=B,C=N,B=R,N=T,R=x,T=Se+(ge+pe+(ke>>>0<be>>>0?1:0))+((x=fe+ke|0)>>>0<fe>>>0?1:0)|0}p=r.low=p+x,r.high=d+T+(p>>>0<x>>>0?1:0),g=i.low=g+R,i.high=y+N+(g>>>0<R>>>0?1:0),m=o.low=m+B,o.high=b+C+(m>>>0<B>>>0?1:0),v=a.low=v+U,a.high=w+L+(v>>>0<U>>>0?1:0),E=s.low=E+D,s.high=_+j+(E>>>0<D>>>0?1:0),k=l.low=k+H,l.high=S+M+(k>>>0<H>>>0?1:0),O=f.low=O+z,f.high=A+F+(O>>>0<z>>>0?1:0),I=h.low=I+q,h.high=P+K+(I>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),r.SHA512)},4253:function(e,t,n){var r;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),function(){var e=r,t=e.lib,n=t.WordArray,i=t.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var u=i[o]=[],l=c[o];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var f=this._invSubKeys=[];for(n=0;n<16;n++)f[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=u[c][((a^i[c])&l[c])>>>0];this._lBlock=a,this._rBlock=o^s}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function d(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=i._createHelper(f);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=f.createEncryptor(n.create(t)),this._des2=f.createEncryptor(n.create(r)),this._des3=f.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),r.TripleDES)},4938:function(e,t,n){var r,i,o,a,s,c;e.exports=(o=(i=r=n(8249)).lib,a=o.Base,s=o.WordArray,(c=i.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),c.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return s.create(n,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),r)},9435:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,a){a=a||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(s=e,(c=Math.abs(s))>=i?o(s,c,i,"day"):c>=r?o(s,c,r,"hour"):c>=n?o(s,c,n,"minute"):c>=t?o(s,c,t,"second"):s+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1227:(e,t,n)=>{var r=n(5108),i=n(4155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,r.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=r.debug||r.log||(()=>{}),e.exports=n(2447)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{var r=n(5108);e.exports=function(e){function t(e){let n,r,o,a=null;function s(...e){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";a++;const o=t.formatters[i];if("function"==typeof o){const t=e[a];n=o.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=i,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==t.namespaces&&(r=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function i(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(9435),t.destroy=function(){r.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},4289:(e,t,n)=>{"use strict";var r=n(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=n(1044)(),u=s&&c,l=function(e,t,n,r){var i;(!(t in e)||"function"==typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},f=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)l(e,o[s],t[o[s]],n[o[s]])};f.supportsDescriptors=!!u,e.exports=f},8091:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var c=o[a],u=Object.getOwnPropertyDescriptor(i,c);void 0!==u&&u.enumerable&&(n[c]=i[c])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},4029:(e,t,n)=>{"use strict";var r=n(5320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},c=function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))};e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===i.call(e)?a(e,t,o):"string"==typeof e?s(e,t,o):c(e,t,o)}},7648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||r.call(o)!==i)throw new TypeError(t+o);for(var a,s=n.call(arguments,1),c=function(){if(this instanceof a){var t=o.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(n.call(arguments)))},u=Math.max(0,o.length-s.length),l=[],f=0;f<u;f++)l.push("$"+f);if(a=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),o.prototype){var h=function(){};h.prototype=o.prototype,a.prototype=new h,h.prototype=null}return a}},8612:(e,t,n)=>{"use strict";var r=n(7648);e.exports=Function.prototype.bind||r},210:(e,t,n)=>{"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new a},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,f=n(1405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"==typeof Uint8Array?r:h(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f?h([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?h(h([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?h((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?h((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?h(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=h(i.prototype))}return y[t]=n,n},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=n(8612),w=n(7642),v=m.call(Function.call,Array.prototype.concat),_=m.call(Function.apply,Array.prototype.splice),E=m.call(Function.call,String.prototype.replace),S=m.call(Function.call,String.prototype.slice),k=m.call(Function.call,RegExp.prototype.exec),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,P=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(e,A,(function(e,t,n,i){r[r.length]=n?E(i,O,"$1"):t||e})),r},I=function(e,t){var n,r=e;if(w(b,r)&&(r="%"+(n=b[r])[0]+"%"),w(y,r)){var o=y[r];if(o===d&&(o=g(r)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===k(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=P(e),r=n.length>0?n[0]:"",o=I("%"+r+"%",t),s=o.name,u=o.value,l=!1,f=o.alias;f&&(r=f[0],_(n,v([0,1],f)));for(var h=1,d=!0;h<n.length;h+=1){var p=n[h],g=S(p,0,1),b=S(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===b||"'"===b||"`"===b)&&g!==b)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&d||(l=!0),w(y,s="%"+(r+="."+p)+"%"))u=y[s];else if(null!=u){if(!(p in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&h+1>=n.length){var m=c(u,p);u=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[p]}else d=w(u,p),u=u[p];d&&!l&&(y[s]=u)}}return u}},7296:(e,t,n)=>{"use strict";var r=n(210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},1044:(e,t,n)=>{"use strict";var r=n(210)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},1405:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(5419);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(e,t,n)=>{"use strict";var r=n(5419);e.exports=function(){return r()&&!!Symbol.toStringTag}},7642:(e,t,n)=>{"use strict";var r=n(8612);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},2584:(e,t,n)=>{"use strict";var r=n(6410)(),i=n(1924)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},5320:e=>{"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=r.call(e);return o.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(r.call(e),!0)}catch(e){return!1}},c=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var h=document.all;c.call(h)===c.call(document.all)&&(f=function(e){if((l||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!a(e)&&s(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return s(e);if(a(e))return!1;var t=c.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},8662:(e,t,n)=>{"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(6410)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!c)return!1;if(void 0===r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&c(t)}return c(e)===r}},8611:e=>{"use strict";e.exports=function(e){return e!=e}},360:(e,t,n)=>{"use strict";var r=n(5559),i=n(4289),o=n(8611),a=n(9415),s=n(3194),c=r(a(),Number);i(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},9415:(e,t,n)=>{"use strict";var r=n(8611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},3194:(e,t,n)=>{"use strict";var r=n(4289),i=n(9415);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},5692:(e,t,n)=>{"use strict";var r=n(4029),i=n(3083),o=n(1924),a=o("Object.prototype.toString"),s=n(6410)(),c=n(7296),u="undefined"==typeof globalThis?n.g:globalThis,l=i(),f=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},h=o("String.prototype.slice"),d={},p=Object.getPrototypeOf;s&&c&&p&&r(l,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=p(t),r=c(n,Symbol.toStringTag);if(!r){var i=p(n);r=c(i,Symbol.toStringTag)}d[e]=r.get}})),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=h(a(e),8,-1);return f(l,t)>-1}return!!c&&function(e){var t=!1;return r(d,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}},4244:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!(!t(e)||!t(n))}},609:(e,t,n)=>{"use strict";var r=n(4289),i=n(5559),o=n(4244),a=n(5624),s=n(2281),c=i(a(),Object);r(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},5624:(e,t,n)=>{"use strict";var r=n(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:r}},2281:(e,t,n)=>{"use strict";var r=n(5624),i=n(4289);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:(e,t,n)=>{"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(1414),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),h=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=u&&n;if(s&&e.length>0&&!i.call(e,0))for(var y=0;y<e.length;++y)h.push(String(y));if(r&&e.length>0)for(var g=0;g<e.length;++g)h.push(String(g));else for(var b in e)p&&"prototype"===b||!i.call(e,b)||h.push(String(b));if(c)for(var m=function(e){if("undefined"==typeof window||!d)return f(e);try{return f(e)}catch(e){return!1}}(e),w=0;w<l.length;++w)m&&"constructor"===l[w]||!i.call(e,l[w])||h.push(l[w]);return h}}e.exports=r},2215:(e,t,n)=>{"use strict";var r=Array.prototype.slice,i=n(1414),o=Object.keys,a=o?function(e){return o(e)}:n(8987),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},4155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],u=!1,l=-1;function f(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||u||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},380:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRpc=void 0;var o=n(7923);function a(e,t){return new Proxy({},{get:function(n,a,s){var c,u=this,l=(c=a.toString())&&c[0].toUpperCase()+c.slice(1),f="".concat(e,".").concat(l);return o.subscriptionMethods.includes(f)?function(e,n,r){t.subscribe(f,e,n,r)}:function(e){return r(u,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,t.request(f,e)];case 1:return[2,n.sent()]}}))}))}}})}t.createRpc=a,t.default=a},8713:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(8831);var c=s(n(2262));WebAssembly.instantiateStreaming||(WebAssembly.instantiateStreaming=function(e,t){return o(void 0,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return[4,r.sent().arrayBuffer()];case 2:return n=r.sent(),[4,WebAssembly.instantiate(n,t)];case 3:return[2,r.sent()]}}))}))}),i(n(7923),t),t.default=c.default},2262:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7923),s=n(380),c=o(n(1712)),u=n(1095),l={wasmClientCode:"https://lightning.engineering/lnc-v0.2.4-alpha.wasm",namespace:"default",serverHost:"mailbox.terminal.lightning.today:443"},f=function(){function e(e){var t=Object.assign({},l,e);this._wasmClientCode=t.wasmClientCode,this._namespace=t.namespace,t.credentialStore?this.credentials=t.credentialStore:(this.credentials=new c.default(t.namespace,t.password),this.credentials.isPaired||(this.credentials.serverHost=t.serverHost),t.pairingPhrase&&(this.credentials.pairingPhrase=t.pairingPhrase));var r=n.g||window||self;this.go=new r.Go,this.lnd=new a.LndApi(s.createRpc,this),this.loop=new a.LoopApi(s.createRpc,this),this.pool=new a.PoolApi(s.createRpc,this),this.faraday=new a.FaradayApi(s.createRpc,this),this.lit=new a.LitApi(s.createRpc,this)}return Object.defineProperty(e.prototype,"wasm",{get:function(){return globalThis[this._namespace]},set:function(e){globalThis[this._namespace]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this.wasm&&this.wasm.wasmClientIsReady&&this.wasm.wasmClientIsReady()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.wasm&&this.wasm.wasmClientIsConnected&&this.wasm.wasmClientIsConnected()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.wasm&&this.wasm.wasmClientStatus&&this.wasm.wasmClientStatus()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expiry",{get:function(){return this.wasm&&this.wasm.wasmClientGetExpiry&&new Date(1e3*this.wasm.wasmClientGetExpiry())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this.wasm&&this.wasm.wasmClientIsReadOnly&&this.wasm.wasmClientIsReadOnly()},enumerable:!1,configurable:!0}),e.prototype.hasPerms=function(e){return this.wasm&&this.wasm.wasmClientHasPerms&&this.wasm.wasmClientHasPerms(e)},e.prototype.preload=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this,[4,WebAssembly.instantiateStreaming(fetch(this._wasmClientCode),this.go.importObject)];case 1:return e.result=t.sent(),u.wasmLog.info("downloaded WASM file"),[2]}}))}))},e.prototype.run=function(){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return this.isReady?[3,2]:[4,this.preload()];case 1:t.sent(),t.label=2;case 2:return"object"!=typeof this.wasm&&(this.wasm={}),this.wasm.onLocalPrivCreate||(this.wasm.onLocalPrivCreate=function(t){u.wasmLog.debug("local private key created: "+t),e.credentials.localKey=t}),this.wasm.onRemoteKeyReceive||(this.wasm.onRemoteKeyReceive=function(t){u.wasmLog.debug("remote key received: "+t),e.credentials.remoteKey=t}),this.wasm.onAuthData||(this.wasm.onAuthData=function(e){u.wasmLog.debug("auth data received: "+e)}),this.go.argv=["wasm-client","--debuglevel=trace","--namespace="+this._namespace,"--onlocalprivcreate=".concat(this._namespace,".onLocalPrivCreate"),"--onremotekeyreceive=".concat(this._namespace,".onRemoteKeyReceive"),"--onauthdata=".concat(this._namespace,".onAuthData")],this.result?(this.go.run(this.result.instance),[4,WebAssembly.instantiate(this.result.module,this.go.importObject)]):[3,4];case 3:return t.sent(),[3,5];case 4:throw new Error("Can't find WASM instance.");case 5:return[2]}}))}))},e.prototype.connect=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,o,a=this;return i(this,(function(i){switch(i.label){case 0:return this.isConnected?[2]:this.isReady?[3,3]:[4,this.run()];case 1:return i.sent(),[4,this.waitTilReady()];case 2:i.sent(),i.label=3;case 3:return e=this.credentials,t=e.pairingPhrase,n=e.localKey,r=e.remoteKey,o=e.serverHost,this.wasm.wasmClientConnectServer(o,!1,t,n,r),"undefined"!=typeof window?window.addEventListener("unload",this.wasm.wasmClientDisconnect):u.wasmLog.info("No unload event listener added. window is not available"),[2,new Promise((function(e,t){var n=0,r=setInterval((function(){n++,a.isConnected?(clearInterval(r),e(),u.wasmLog.info("The WASM client is connected to the server")):n>20&&(clearInterval(r),t(new Error("Failed to connect the WASM client to the proxy server")))}),500)}))]}}))}))},e.prototype.disconnect=function(){this.wasm.wasmClientDisconnect()},e.prototype.waitTilReady=function(){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t,n){var r=0,i=setInterval((function(){r++,e.isReady?(clearInterval(i),t(),u.wasmLog.info("The WASM client is ready")):r>20&&(clearInterval(i),n(new Error("Failed to load the WASM client")))}),500)}))]}))}))},e.prototype.request=function(e,t){var n=this;return new Promise((function(r,i){u.wasmLog.debug("".concat(e," request"),t);var o=JSON.stringify(t||{});n.wasm.wasmClientInvokeRPC(e,o,(function(t){try{var n=JSON.parse(t),o=(0,a.snakeKeysToCamel)(n);u.wasmLog.debug("".concat(e," response"),o),r(o)}catch(n){return u.wasmLog.debug("".concat(e," raw response"),t),void i(new Error(t))}}))}))},e.prototype.subscribe=function(e,t,n,r){u.wasmLog.debug("".concat(e," request"),t);var i=JSON.stringify(t||{});this.wasm.wasmClientInvokeRPC(e,i,(function(t){try{var i=JSON.parse(t),o=(0,a.snakeKeysToCamel)(i);u.wasmLog.debug("".concat(e," response"),o),n&&n(o)}catch(n){u.wasmLog.debug("".concat(e," error"),n);var s=new Error(t);r&&r(s)}}))},e}();t.default=f},1712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5121),i="lnc-web",o=function(){function e(e,t){this.persisted={salt:"",cipher:"",serverHost:"",localKey:"",remoteKey:"",pairingPhrase:""},this._localKey="",this._remoteKey="",this._pairingPhrase="",this.namespace="default",e&&(this.namespace=e),this._load(),t&&(this.password=t)}return Object.defineProperty(e.prototype,"password",{get:function(){return this._password||""},set:function(e){if(this.persisted.cipher){var t=this.persisted,n=t.cipher,i=t.salt;if(!(0,r.verifyTestCipher)(n,e,i))throw new Error("The password provided is not valid");this._password=e,this._pairingPhrase=this._decrypt(this.persisted.pairingPhrase),this._localKey=this._decrypt(this.persisted.localKey),this._remoteKey=this._decrypt(this.persisted.remoteKey)}else this._password=e,this.persisted.salt=(0,r.generateSalt)(),this.persisted.cipher=(0,r.createTestCipher)(e,this.persisted.salt),this.pairingPhrase&&(this.persisted.pairingPhrase=this._encrypt(this.pairingPhrase)),this.localKey&&(this.persisted.localKey=this._encrypt(this.localKey)),this.remoteKey&&(this.persisted.remoteKey=this._encrypt(this.remoteKey)),this._save()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverHost",{get:function(){return this.persisted.serverHost},set:function(e){this.persisted.serverHost=e,this._save()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pairingPhrase",{get:function(){return this._pairingPhrase},set:function(e){this._pairingPhrase=e,this._password&&(this.persisted.pairingPhrase=this._encrypt(e),this._save())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localKey",{get:function(){return this._localKey},set:function(e){this._localKey=e,this._password&&(this.persisted.localKey=this._encrypt(e),this._save())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteKey",{get:function(){return this._remoteKey},set:function(e){this._remoteKey=e,this._password&&(this.persisted.remoteKey=this._encrypt(e),this._save())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaired",{get:function(){return!!this.persisted.remoteKey||!!this.persisted.pairingPhrase},enumerable:!1,configurable:!0}),e.prototype.clear=function(){var e="".concat(i,":").concat(this.namespace);localStorage.removeItem(e),this.persisted={salt:"",cipher:"",serverHost:this.persisted.serverHost,localKey:"",remoteKey:"",pairingPhrase:""},this._localKey="",this._remoteKey="",this._pairingPhrase="",this._password=void 0},e.prototype._load=function(){if("undefined"!=typeof localStorage)try{var e="".concat(i,":").concat(this.namespace),t=localStorage.getItem(e);if(!t)return;this.persisted=JSON.parse(t)}catch(e){var n=e.message;throw new Error("Failed to load secure data: ".concat(n))}},e.prototype._save=function(){if("undefined"!=typeof localStorage){var e="".concat(i,":").concat(this.namespace);localStorage.setItem(e,JSON.stringify(this.persisted))}},e.prototype._encrypt=function(e){return e&&this._password?(0,r.encrypt)(e,this._password,this.persisted.salt):""},e.prototype._decrypt=function(e){return e&&this._password?(0,r.decrypt)(e,this._password,this.persisted.salt):""},e}();t.default=o},5121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyTestCipher=t.createTestCipher=t.decrypt=t.encrypt=t.generateSalt=void 0;var r=n(1354),i="Irrelevant data for password verification";t.generateSalt=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=new Uint8Array(32);return globalThis.crypto.getRandomValues(t),t=t.map((function(t){return e.charCodeAt(t%e.length)})),String.fromCharCode.apply(null,t)},t.encrypt=function(e,t,n){return r.AES.encrypt(JSON.stringify(e),t+n).toString()},t.decrypt=function(e,t,n){var i=r.AES.decrypt(e,t+n);return JSON.parse(i.toString(r.enc.Utf8))},t.createTestCipher=function(e,n){return(0,t.encrypt)(i,e,n)},t.verifyTestCipher=function(e,n,r){try{return(0,t.decrypt)(e,n,r)===i}catch(e){return!1}}},1095:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.actionLog=t.wasmLog=t.grpcLog=t.log=t.Logger=t.LogLevel=void 0;var o,a=i(n(1227));!function(e){e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.none=5]="none"}(o=t.LogLevel||(t.LogLevel={}));var s=function(){function e(e,t){var n=this;this.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n._log(o.debug,e,t)},this.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n._log(o.info,e,t)},this.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n._log(o.warn,e,t)},this.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n._log(o.error,e,t)},this._levelToOutput=e,this._logger=(0,a.default)(t)}return e.fromEnv=function(t){var n=o.none;if(globalThis.localStorage&&globalThis.localStorage.getItem("debug")){var r=globalThis.localStorage.getItem("debug-level")||"debug";n=o[r]}return new e(n,t)},e.prototype._log=function(e,t,n){if(!(this._levelToOutput>e)){var i=Object.keys(o).reduce((function(t,n){return e===o[n]?n:t}),"??");this._logger.apply(this,r(["[".concat(i,"] ").concat(t)],n,!1))}},e}();t.Logger=s,t.log=s.fromEnv("main"),t.grpcLog=s.fromEnv("grpc"),t.wasmLog=s.fromEnv("wasm"),t.actionLog=s.fromEnv("action")},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},5955:(e,t,n)=>{"use strict";var r=n(2584),i=n(8662),o=n(6430),a=n(5692);function s(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=s(Object.prototype.toString),f=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(c)var p=s(BigInt.prototype.valueOf);if(u)var y=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function b(e){return"[object Map]"===l(e)}function m(e){return"[object Set]"===l(e)}function w(e){return"[object WeakMap]"===l(e)}function v(e){return"[object WeakSet]"===l(e)}function _(e){return"[object ArrayBuffer]"===l(e)}function E(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function k(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||k(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},b.working="undefined"!=typeof Map&&b(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(b.working?b(e):e instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(m.working?m(e):e instanceof Set)},w.working="undefined"!=typeof WeakMap&&w(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(w.working?w(e):e instanceof WeakMap)},v.working="undefined"!=typeof WeakSet&&v(new WeakSet),t.isWeakSet=function(e){return v(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),t.isArrayBuffer=E,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=k;var A="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(e){return"[object SharedArrayBuffer]"===l(e)}function P(e){return void 0!==A&&(void 0===O.working&&(O.working=O(new A)),O.working?O(e):e instanceof A)}function I(e){return g(e,f)}function T(e){return g(e,h)}function x(e){return g(e,d)}function N(e){return c&&g(e,p)}function R(e){return u&&g(e,y)}t.isSharedArrayBuffer=P,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=I,t.isStringObject=T,t.isBooleanObject=x,t.isBigIntObject=N,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return I(e)||T(e)||x(e)||N(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(E(e)||P(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9539:(e,t,n)=>{var r=n(4155),i=n(5108),o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])m(s)||!S(s)?o+=" "+s:o+=" "+l(s);return o},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?i.trace(n):i.error(n),o=!0}return e.apply(this,arguments)}};var s={},c=/^$/;if(r.env.NODE_DEBUG){var u=r.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+u+"$","i")}function l(e,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=f),d(r,e,r.depth)}function f(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function h(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&O(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=d(e,i,r)),i}var o=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return w(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),A(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(O(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(A(n))return p(n)}var u,l="",f=!1,h=["{","}"];return g(n)&&(f=!0,h=["[","]"]),O(n)&&(l=" [Function"+(n.name?": "+n.name:"")+"]"),E(n)&&(l=" "+RegExp.prototype.toString.call(n)),k(n)&&(l=" "+Date.prototype.toUTCString.call(n)),A(n)&&(l=" "+p(n)),0!==a.length||f&&0!=n.length?r<0?E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)N(t,String(a))?o.push(y(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(y(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return y(e,n,r,s,t,f)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,l,h)):h[0]+l+h[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function y(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),N(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=m(n)?d(e,c.value,null):d(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function m(e){return null===e}function w(e){return"number"==typeof e}function v(e){return"string"==typeof e}function _(e){return void 0===e}function E(e){return S(e)&&"[object RegExp]"===P(e)}function S(e){return"object"==typeof e&&null!==e}function k(e){return S(e)&&"[object Date]"===P(e)}function A(e){return S(e)&&("[object Error]"===P(e)||e instanceof Error)}function O(e){return"function"==typeof e}function P(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(c.test(e)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);i.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(5955),t.isArray=g,t.isBoolean=b,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=w,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=_,t.isRegExp=E,t.types.isRegExp=E,t.isObject=S,t.isDate=k,t.types.isDate=k,t.isError=A,t.types.isNativeError=A,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){i.log("%s - %s",x(),t.format.apply(t,arguments))},t.inherits=n(5717),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=R,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){r.nextTick(a.bind(null,null,e))}),(function(e){r.nextTick(C.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,o(e)),t}},6430:(e,t,n)=>{"use strict";var r=n(4029),i=n(3083),o=n(1924),a=n(7296),s=o("Object.prototype.toString"),c=n(6410)(),u="undefined"==typeof globalThis?n.g:globalThis,l=i(),f=o("String.prototype.slice"),h={},d=Object.getPrototypeOf;c&&a&&d&&r(l,(function(e){if("function"==typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var n=d(t),r=a(n,Symbol.toStringTag);if(!r){var i=d(n);r=a(i,Symbol.toStringTag)}h[e]=r.get}}}));var p=n(5692);e.exports=function(e){return!!p(e)&&(c&&Symbol.toStringTag in e?function(e){var t=!1;return r(h,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(e){}})),t}(e):f(s(e),8,-1))}},4229:()=>{},2203:()=>{},5381:()=>{},2480:()=>{},3083:(e,t,n)=>{"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof i[r[t]]&&(e[e.length]=r[t]);return e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(8713)})()},9669:(e,t,n)=>{e.exports=n(51609)},55448:(e,t,n)=>{"use strict";var r=n(64867),i=n(36026),o=n(4372),a=n(15327),s=n(94097),c=n(84109),u=n(67985),l=n(77874),f=n(82648),h=n(60644),d=n(90205);e.exports=function(e){return new Promise((function(t,n){var p,y=e.data,g=e.headers,b=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(y)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(v+":"+_)}var E=s(e.baseURL,e.url);function S(){if(w){var r="getAllResponseHeaders"in w?c(w.getAllResponseHeaders()):null,o={data:b&&"text"!==b&&"json"!==b?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:r,config:e,request:w};i((function(e){t(e),m()}),(function(e){n(e),m()}),o),w=null}}if(w.open(e.method.toUpperCase(),a(E,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=S:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(S)},w.onabort=function(){w&&(n(new f("Request aborted",f.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,w,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,w)),w=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||u(E))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;k&&(g[e.xsrfHeaderName]=k)}"setRequestHeader"in w&&r.forEach(g,(function(e,t){void 0===y&&"content-type"===t.toLowerCase()?delete g[t]:w.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),b&&"json"!==b&&(w.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){w&&(n(!e||e&&e.type?new h:e),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),y||(y=null);var A=d(E);A&&-1===["http","https","file"].indexOf(A)?n(new f("Unsupported protocol "+A+":",f.ERR_BAD_REQUEST,e)):w.send(y)}))}},51609:(e,t,n)=>{"use strict";var r=n(64867),i=n(91849),o=n(30321),a=n(47185);var s=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(45546));s.Axios=o,s.CanceledError=n(60644),s.CancelToken=n(14972),s.isCancel=n(26502),s.VERSION=n(97288).version,s.toFormData=n(47675),s.AxiosError=n(82648),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(8713),s.isAxiosError=n(16268),e.exports=s,e.exports.default=s},14972:(e,t,n)=>{"use strict";var r=n(60644);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},60644:(e,t,n)=>{"use strict";var r=n(82648);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(64867).inherits(i,r,{__CANCEL__:!0}),e.exports=i},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var r=n(64867),i=n(15327),o=n(80782),a=n(13572),s=n(47185),c=n(94097),u=n(54875),l=u.validators;function f(e){this.defaults=e,this.interceptors={request:new o,response:new o}}f.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!i){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(c),o=Promise.resolve(t);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(e){p(e);break}}try{o=a(h)}catch(e){return Promise.reject(e)}for(;c.length;)o=o.then(c.shift(),c.shift());return o},f.prototype.getUri=function(e){e=s(this.defaults,e);var t=c(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(s(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},82648:(e,t,n)=>{"use strict";var r=n(64867);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){a[e]={value:e}})),Object.defineProperties(i,a),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(e,t,n,a,s,c){var u=Object.create(o);return r.toFlatObject(e,u,(function(e){return e!==Error.prototype})),i.call(u,e.message,t,n,a,s),u.name=e.name,c&&Object.assign(u,c),u},e.exports=i},80782:(e,t,n)=>{"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:(e,t,n)=>{"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},13572:(e,t,n)=>{"use strict";var r=n(64867),i=n(18527),o=n(26502),a=n(45546),s=n(60644);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},47185:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},36026:(e,t,n)=>{"use strict";var r=n(82648);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var r=n(64867),i=n(45546);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45546:(e,t,n)=>{"use strict";var r=n(34155),i=n(64867),o=n(16016),a=n(82648),s=n(77874),c=n(47675),u={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var f,h={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(f=n(55448)),f),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e))return e;if(i.isArrayBufferView(e))return e.buffer;if(i.isURLSearchParams(e))return l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,r=i.isObject(e),a=t&&t["Content-Type"];if((n=i.isFileList(e))||r&&"multipart/form-data"===a){var s=this.env&&this.env.FormData;return c(n?{"files[]":e}:e,s&&new s)}return r||"application/json"===a?(l(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||h.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw a.from(e,a.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(91623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){h.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){h.headers[e]=i.merge(u)})),e.exports=h},77874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:e=>{e.exports={version:"0.27.2"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},91623:e=>{e.exports=null},84109:(e,t,n)=>{"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},90205:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},47675:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer,r=n(64867);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(o,a){if(r.isPlainObject(o)||r.isArray(o)){if(-1!==n.indexOf(o))throw Error("Circular reference detected in "+a);n.push(o),r.forEach(o,(function(n,o){if(!r.isUndefined(n)){var s,c=a?a+"."+o:o;if(n&&!a&&"object"==typeof n)if(r.endsWith(o,"{}"))n=JSON.stringify(n);else if(r.endsWith(o,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(c,i(e))}));e(n,c)}})),n.pop()}else t.append(a,i(o))}(e),t}},54875:(e,t,n)=>{"use strict";var r=n(97288).version,i=n(82648),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new i(o(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!a[r]&&(a[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var a=r[o],s=t[a];if(s){var c=e[a],u=void 0===c||s(c,a,e);if(!0!==u)throw new i("option "+a+" must be "+u,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+a,i.ERR_BAD_OPTION)}},validators:o}},64867:(e,t,n)=>{"use strict";var r,i=n(91849),o=Object.prototype.toString,a=(r=Object.create(null),function(e){var t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return a(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var l=s("ArrayBuffer");function f(e){return null!==e&&"object"==typeof e}function h(e){if("object"!==a(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=s("Date"),p=s("File"),y=s("Blob"),g=s("FileList");function b(e){return"[object Function]"===o.call(e)}var m=s("URLSearchParams");function w(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var v,_=(v="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return v&&e instanceof v});e.exports={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||o.call(e)===t||b(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:f,isPlainObject:h,isUndefined:u,isDate:d,isFile:p,isBlob:y,isFunction:b,isStream:function(e){return f(e)&&b(e.pipe)},isURLSearchParams:m,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:w,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return t},extend:function(e,t,n){return w(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,o,a={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)a[o=r[i]]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:_,isFileList:g}},58162:(e,t,n)=>{"use strict";var r=n(89509).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==t[a])throw new TypeError(o+" is ambiguous");t[a]=i}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return r.alloc(0);var n=0;if(" "!==e[n]){for(var i=0,o=0;e[n]===c;)i++,n++;for(var a=(e.length-n)*u+1>>>0,l=new Uint8Array(a);e[n];){var f=t[e.charCodeAt(n)];if(255===f)return;for(var h=0,d=a-1;(0!==f||h<o)&&-1!==d;d--,h++)f+=s*l[d]>>>0,l[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=h,n++}if(" "!==e[n]){for(var p=a-o;p!==a&&0===l[p];)p++;var y=r.allocUnsafe(i+(a-p));y.fill(0,0,i);for(var g=i;p!==a;)y[g++]=l[p++];return y}}}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,o=0,a=t.length;o!==a&&0===t[o];)o++,n++;for(var u=(a-o)*l+1>>>0,f=new Uint8Array(u);o!==a;){for(var h=t[o],d=0,p=u-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*f[p]>>>0,f[p]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");i=d,o++}for(var y=u-i;y!==u&&0===f[y];)y++;for(var g=c.repeat(n);y<u;++y)g+=e.charAt(f[y]);return g},decodeUnsafe:f,decode:function(e){var buffer=f(e);if(buffer)return buffer;throw new Error("Non-base"+s+" character")}}}},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],c=o[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,c)),l=0,f=c>0?a-4:a;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,u=r-i;s<u;s+=a)o.push(c(e,s,s+a>u?u:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},27715:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bech32m=t.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={};for(let e=0;e<32;e++){const t=n.charAt(e);r[t]=e}function i(e){const t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+e+")";t=i(t)^r>>5}t=i(t);for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);t=i(t)^31&r}return t}function a(e,t,n,r){let i=0,o=0;const a=(1<<n)-1,s=[];for(let r=0;r<e.length;++r)for(i=i<<t|e[r],o+=t;o>=n;)o-=n,s.push(i>>o&a);if(r)o>0&&s.push(i<<n-o&a);else{if(o>=t)return"Excess padding";if(i<<n-o&a)return"Non-zero padding"}return s}function s(e){return a(e,8,5,!0)}function c(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t}function u(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function l(e){let t;function a(e,n){if(n=n||90,e.length<8)return e+" too short";if(e.length>n)return"Exceeds length limit";const a=e.toLowerCase(),s=e.toUpperCase();if(e!==a&&e!==s)return"Mixed-case string "+e;const c=(e=a).lastIndexOf("1");if(-1===c)return"No separator character for "+e;if(0===c)return"Missing prefix for "+e;const u=e.slice(0,c),l=e.slice(c+1);if(l.length<6)return"Data too short";let f=o(u);if("string"==typeof f)return f;const h=[];for(let e=0;e<l.length;++e){const t=l.charAt(e),n=r[t];if(void 0===n)return"Unknown character "+t;f=i(f)^n,e+6>=l.length||h.push(n)}return f!==t?"Invalid checksum for "+e:{prefix:u,words:h}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const n=a(e,t);if("object"==typeof n)return n},decode:function(e,t){const n=a(e,t);if("object"==typeof n)return n;throw new Error(n)},encode:function(e,r,a){if(a=a||90,e.length+7+r.length>a)throw new TypeError("Exceeds length limit");let s=o(e=e.toLowerCase());if("string"==typeof s)throw new Error(s);let c=e+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5!=0)throw new Error("Non 5-bit word");s=i(s)^t,c+=n.charAt(t)}for(let e=0;e<6;++e)s=i(s);s^=t;for(let e=0;e<6;++e){c+=n.charAt(s>>5*(5-e)&31)}return c},toWords:s,fromWordsUnsafe:c,fromWords:u}}t.bech32=l("bech32"),t.bech32m=l("bech32m")},82190:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36574);function i(e,t,n){return r=>{if(e.has(r))return;const i=n.filter((e=>e.key.toString("hex")===r))[0];t.push(i),e.add(r)}}function o(e){return e.globalMap.unsignedTx}function a(e){const t=new Set;return e.forEach((e=>{const n=e.key.toString("hex");if(t.has(n))throw new Error("Combine: KeyValue Map keys should be unique");t.add(n)})),t}t.combine=function(e){const t=e[0],n=r.psbtToKeyVals(t),s=e.slice(1);if(0===s.length)throw new Error("Combine: Nothing to combine");const c=o(t);if(void 0===c)throw new Error("Combine: Self missing transaction");const u=a(n.globalKeyVals),l=n.inputKeyVals.map(a),f=n.outputKeyVals.map(a);for(const e of s){const t=o(e);if(void 0===t||!t.toBuffer().equals(c.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const s=r.psbtToKeyVals(e);a(s.globalKeyVals).forEach(i(u,n.globalKeyVals,s.globalKeyVals));s.inputKeyVals.map(a).forEach(((e,t)=>e.forEach(i(l[t],n.inputKeyVals[t],s.inputKeyVals[t]))));s.outputKeyVals.map(a).forEach(((e,t)=>e.forEach(i(f[t],n.outputKeyVals[t],s.outputKeyVals[t]))))}return r.psbtFromKeyVals(c,{globalMapKeyVals:n.globalKeyVals,inputKeyVals:n.inputKeyVals,outputKeyVals:n.outputKeyVals})}},44041:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const t=e.key.slice(1),n={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(const t of(i=e.value.length/4-1,[...Array(i).keys()])){const r=e.value.readUInt32LE(4*t+4),i=!!(2147483648&r),o=2147483647&r;n.path+="/"+o.toString(10)+(i?"'":"")}var i;return n},t.encode=function(e){const t=Buffer.from([r.GlobalTypes.GLOBAL_XPUB]),n=Buffer.concat([t,e.extendedPubkey]),i=e.path.split("/"),o=Buffer.allocUnsafe(4*i.length);e.masterFingerprint.copy(o,0);let a=4;return i.slice(1).forEach((e=>{const t="'"===e.slice(-1);let n=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(n+=2147483648),o.writeUInt32LE(n,a),a+=4})),{key:n,value:o}},t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=function(e){const t=e.extendedPubkey,n=e.masterFingerprint,r=e.path;return Buffer.isBuffer(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&Buffer.isBuffer(n)&&4===n.length&&"string"==typeof r&&!!r.match(/^m(\/\d+'?)*$/)},t.canAddToArray=function(e,t,n){const r=t.extendedPubkey.toString("hex");return!n.has(r)&&(n.add(r),0===e.filter((e=>e.extendedPubkey.equals(t.extendedPubkey))).length)}},74480:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.encode=function(e){return{key:Buffer.from([r.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}},71528:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847),i=n(44041),o=n(74480),a=n(20859),s=n(8248),c=n(70537),u=n(61511),l=n(65896),f=n(91243),h=n(3530),d=n(49265),p=n(23934),y=n(50602),g=n(82954),b=n(6036),m=n(44799),w=n(99595),v=n(9705),_=n(17196),E=n(29375),S=n(66327),k={unsignedTx:o,globalXpub:i,checkPubkey:w.makeChecker([])};t.globals=k;const A={nonWitnessUtxo:c,partialSig:u,sighashType:f,finalScriptSig:a,finalScriptWitness:s,porCommitment:l,witnessUtxo:g,bip32Derivation:m.makeConverter(r.InputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(r.InputTypes.REDEEM_SCRIPT),witnessScript:S.makeConverter(r.InputTypes.WITNESS_SCRIPT),checkPubkey:w.makeChecker([r.InputTypes.PARTIAL_SIG,r.InputTypes.BIP32_DERIVATION]),tapKeySig:h,tapScriptSig:y,tapLeafScript:d,tapBip32Derivation:_.makeConverter(r.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:E.makeConverter(r.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:p};t.inputs=A;const O={bip32Derivation:m.makeConverter(r.OutputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(r.OutputTypes.REDEEM_SCRIPT),witnessScript:S.makeConverter(r.OutputTypes.WITNESS_SCRIPT),checkPubkey:w.makeChecker([r.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:_.makeConverter(r.OutputTypes.TAP_BIP32_DERIVATION),tapTree:b,tapInternalKey:E.makeConverter(r.OutputTypes.TAP_INTERNAL_KEY)};t.outputs=O},20859:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:Buffer.from([r.InputTypes.FINAL_SCRIPTSIG]),value:e}},t.expected="Buffer",t.check=function(e){return Buffer.isBuffer(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}},8248:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:Buffer.from([r.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},t.expected="Buffer",t.check=function(e){return Buffer.isBuffer(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}},70537:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:Buffer.from([r.InputTypes.NON_WITNESS_UTXO]),value:e}},t.expected="Buffer",t.check=function(e){return Buffer.isBuffer(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}},61511:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(e){const t=Buffer.from([r.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([t,e.pubkey]),value:e.signature}},t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=function(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!Buffer.isBuffer(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;const t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;const n=e[3+t+2];return!(n>33||n<1)&&e.length===3+t+2+n+2}(e.signature)},t.canAddToArray=function(e,t,n){const r=t.pubkey.toString("hex");return!n.has(r)&&(n.add(r),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}},65896:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},t.encode=function(e){return{key:Buffer.from([r.InputTypes.POR_COMMITMENT]),value:Buffer.from(e,"utf8")}},t.expected="string",t.check=function(e){return"string"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}},91243:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},t.encode=function(e){const t=Buffer.from([r.InputTypes.SIGHASH_TYPE]),n=Buffer.allocUnsafe(4);return n.writeUInt32LE(e,0),{key:t,value:n}},t.expected="number",t.check=function(e){return"number"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}},3530:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);function i(e){return Buffer.isBuffer(e)&&(64===e.length||65===e.length)}t.decode=function(e){if(e.key[0]!==r.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!i(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value},t.encode=function(e){return{key:Buffer.from([r.InputTypes.TAP_KEY_SIG]),value:e}},t.expected="Buffer",t.check=i,t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapKeySig}},49265:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!=0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));const t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));const n=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:n,leafVersion:t}},t.encode=function(e){const t=Buffer.from([r.InputTypes.TAP_LEAF_SCRIPT]),n=Buffer.from([e.leafVersion]);return{key:Buffer.concat([t,e.controlBlock]),value:Buffer.concat([e.script,n])}},t.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",t.check=function(e){return Buffer.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&Buffer.isBuffer(e.script)},t.canAddToArray=function(e,t,n){const r=t.controlBlock.toString("hex");return!n.has(r)&&(n.add(r),0===e.filter((e=>e.controlBlock.equals(t.controlBlock))).length)}},23934:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);function i(e){return Buffer.isBuffer(e)&&32===e.length}t.decode=function(e){if(e.key[0]!==r.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!i(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value},t.encode=function(e){return{key:Buffer.from([r.InputTypes.TAP_MERKLE_ROOT]),value:e}},t.expected="Buffer",t.check=i,t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot}},50602:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847);t.decode=function(e){if(e.key[0]!==r.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(65!==e.key.length)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(64!==e.value.length&&65!==e.value.length)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}},t.encode=function(e){const t=Buffer.from([r.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([t,e.pubkey,e.leafHash]),value:e.signature}},t.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",t.check=function(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.leafHash)&&Buffer.isBuffer(e.signature)&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)},t.canAddToArray=function(e,t,n){const r=t.pubkey.toString("hex")+t.leafHash.toString("hex");return!n.has(r)&&(n.add(r),0===e.filter((e=>e.pubkey.equals(t.pubkey)&&e.leafHash.equals(t.leafHash))).length)}},82954:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847),i=n(19254),o=n(3493);t.decode=function(e){if(e.key[0]!==r.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));const t=i.readUInt64LE(e.value,0);let n=8;const a=o.decode(e.value,n);n+=o.encodingLength(a);const s=e.value.slice(n);if(s.length!==a)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:s,value:t}},t.encode=function(e){const{script:t,value:n}=e,a=o.encodingLength(t.length),s=Buffer.allocUnsafe(8+a+t.length);return i.writeUInt64LE(s,n,0),o.encode(t.length,s,8),t.copy(s,8+a),{key:Buffer.from([r.InputTypes.WITNESS_UTXO]),value:s}},t.expected="{ script: Buffer; value: number; }",t.check=function(e){return Buffer.isBuffer(e.script)&&"number"==typeof e.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}},6036:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(1847),i=n(3493);t.decode=function(e){if(e.key[0]!==r.OutputTypes.TAP_TREE||1!==e.key.length)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0;const n=[];for(;t<e.value.length;){const r=e.value[t++],o=e.value[t++],a=i.decode(e.value,t);t+=i.encodingLength(a),n.push({depth:r,leafVersion:o,script:e.value.slice(t,t+a)}),t+=a}return{leaves:n}},t.encode=function(e){const t=Buffer.from([r.OutputTypes.TAP_TREE]),n=[].concat(...e.leaves.map((e=>[Buffer.of(e.depth,e.leafVersion),i.encode(e.script.length),e.script])));return{key:t,value:Buffer.concat(n)}},t.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",t.check=function(e){return Array.isArray(e.leaves)&&e.leaves.every((e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&Buffer.isBuffer(e.script)))},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapTree}},44799:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];t.makeConverter=function(e,t=r){return{decode:function(n){if(n.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+n.key.toString("hex"));const r=n.key.slice(1);if(!t(r))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+n.key.toString("hex"));if(n.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const i={masterFingerprint:n.value.slice(0,4),pubkey:r,path:"m"};for(const e of(o=n.value.length/4-1,[...Array(o).keys()])){const t=n.value.readUInt32LE(4*e+4),r=!!(2147483648&t),o=2147483647&t;i.path+="/"+o.toString(10)+(r?"'":"")}var o;return i},encode:function(t){const n=Buffer.from([e]),r=Buffer.concat([n,t.pubkey]),i=t.path.split("/"),o=Buffer.allocUnsafe(4*i.length);t.masterFingerprint.copy(o,0);let a=4;return i.slice(1).forEach((e=>{const t="'"===e.slice(-1);let n=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(n+=2147483648),o.writeUInt32LE(n,a),a+=4})),{key:r,value:o}},check:function(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.masterFingerprint)&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,n){const r=t.pubkey.toString("hex");return!n.has(r)&&(n.add(r),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}}}},99595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=function(e){return function(t){let n;if(e.includes(t.key[0])&&(n=t.key.slice(1),33!==n.length&&65!==n.length||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return n}}},9705:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:Buffer.from([e]),value:t}},check:function(e){return Buffer.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}},17196:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(3493),i=n(44799),o=e=>32===e.length;t.makeConverter=function(e){const t=i.makeConverter(e,o);return{decode:function(e){const n=r.decode(e.value),i=r.encodingLength(n),o=t.decode({key:e.key,value:e.value.slice(i+32*n)}),a=new Array(n);for(let t=0,r=i;t<n;t++,r+=32)a[t]=e.value.slice(r,r+32);return Object.assign({},o,{leafHashes:a})},encode:function(e){const n=t.encode(e),i=r.encodingLength(e.leafHashes.length),o=Buffer.allocUnsafe(i);r.encode(e.leafHashes.length,o);const a=Buffer.concat([o,...e.leafHashes,n.value]);return Object.assign({},n,{value:a})},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every((e=>Buffer.isBuffer(e)&&32===e.length))&&t.check(e)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:t.canAddToArray}}},29375:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+t.key.toString("hex"));if(32!==t.value.length)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:Buffer.from([e]),value:t}},check:function(e){return Buffer.isBuffer(e)&&32===e.length},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}}},66327:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:Buffer.from([e]),value:t}},check:function(e){return Buffer.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}},19254:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(3493);function i(e){const t=e.key.length,n=e.value.length,i=r.encodingLength(t),o=r.encodingLength(n),buffer=Buffer.allocUnsafe(i+t+o+n);return r.encode(t,buffer,0),e.key.copy(buffer,i),r.encode(n,buffer,i+t),e.value.copy(buffer,i+t+o),buffer}function o(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}t.range=e=>[...Array(e).keys()],t.reverseBuffer=function(buffer){if(buffer.length<1)return buffer;let e=buffer.length-1,t=0;for(let n=0;n<buffer.length/2;n++)t=buffer[n],buffer[n]=buffer[e],buffer[e]=t,e--;return buffer},t.keyValsToBuffer=function(e){const t=e.map(i);return t.push(Buffer.from([0])),Buffer.concat(t)},t.keyValToBuffer=i,t.readUInt64LE=function(buffer,e){const t=buffer.readUInt32LE(e);let n=buffer.readUInt32LE(e+4);return n*=4294967296,o(n+t,9007199254740991),n+t},t.writeUInt64LE=function(buffer,e,t){return o(e,9007199254740991),buffer.writeInt32LE(-1&e,t),buffer.writeUInt32LE(Math.floor(e/4294967296),t+4),t+8}},3493:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=9007199254740991;function i(e){if(e<0||e>r||e%1!=0)throw new RangeError("value out of range")}function o(e){return i(e),e<253?1:e<=65535?3:e<=4294967295?5:9}t.encode=function e(t,buffer,n){if(i(t),buffer||(buffer=Buffer.allocUnsafe(o(t))),!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(buffer.writeUInt8(t,n),Object.assign(e,{bytes:1})):t<=65535?(buffer.writeUInt8(253,n),buffer.writeUInt16LE(t,n+1),Object.assign(e,{bytes:3})):t<=4294967295?(buffer.writeUInt8(254,n),buffer.writeUInt32LE(t,n+1),Object.assign(e,{bytes:5})):(buffer.writeUInt8(255,n),buffer.writeUInt32LE(t>>>0,n+1),buffer.writeUInt32LE(t/4294967296|0,n+5),Object.assign(e,{bytes:9})),buffer},t.decode=function e(buffer,t){if(!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");t||(t=0);const n=buffer.readUInt8(t);if(n<253)return Object.assign(e,{bytes:1}),n;if(253===n)return Object.assign(e,{bytes:3}),buffer.readUInt16LE(t+1);if(254===n)return Object.assign(e,{bytes:5}),buffer.readUInt32LE(t+1);{Object.assign(e,{bytes:9});const n=buffer.readUInt32LE(t+1),r=4294967296*buffer.readUInt32LE(t+5)+n;return i(r),r}},t.encodingLength=o},12974:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(71528),i=n(19254),o=n(3493),a=n(1847);function s(e,t,n){if(!t.equals(Buffer.from([n])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}function c(e,{globalMapKeyVals:t,inputKeyVals:n,outputKeyVals:o}){const c={unsignedTx:e};let u=0;for(const e of t)switch(e.key[0]){case a.GlobalTypes.UNSIGNED_TX:if(s("global",e.key,a.GlobalTypes.UNSIGNED_TX),u>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");u++;break;case a.GlobalTypes.GLOBAL_XPUB:void 0===c.globalXpub&&(c.globalXpub=[]),c.globalXpub.push(r.globals.globalXpub.decode(e));break;default:c.unknownKeyVals||(c.unknownKeyVals=[]),c.unknownKeyVals.push(e)}const l=n.length,f=o.length,h=[],d=[];for(const e of i.range(l)){const t={};for(const i of n[e])switch(r.inputs.checkPubkey(i),i.key[0]){case a.InputTypes.NON_WITNESS_UTXO:if(s("input",i.key,a.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=r.inputs.nonWitnessUtxo.decode(i);break;case a.InputTypes.WITNESS_UTXO:if(s("input",i.key,a.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=r.inputs.witnessUtxo.decode(i);break;case a.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(r.inputs.partialSig.decode(i));break;case a.InputTypes.SIGHASH_TYPE:if(s("input",i.key,a.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=r.inputs.sighashType.decode(i);break;case a.InputTypes.REDEEM_SCRIPT:if(s("input",i.key,a.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=r.inputs.redeemScript.decode(i);break;case a.InputTypes.WITNESS_SCRIPT:if(s("input",i.key,a.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=r.inputs.witnessScript.decode(i);break;case a.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(r.inputs.bip32Derivation.decode(i));break;case a.InputTypes.FINAL_SCRIPTSIG:s("input",i.key,a.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=r.inputs.finalScriptSig.decode(i);break;case a.InputTypes.FINAL_SCRIPTWITNESS:s("input",i.key,a.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=r.inputs.finalScriptWitness.decode(i);break;case a.InputTypes.POR_COMMITMENT:s("input",i.key,a.InputTypes.POR_COMMITMENT),t.porCommitment=r.inputs.porCommitment.decode(i);break;case a.InputTypes.TAP_KEY_SIG:s("input",i.key,a.InputTypes.TAP_KEY_SIG),t.tapKeySig=r.inputs.tapKeySig.decode(i);break;case a.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(r.inputs.tapScriptSig.decode(i));break;case a.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(r.inputs.tapLeafScript.decode(i));break;case a.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(r.inputs.tapBip32Derivation.decode(i));break;case a.InputTypes.TAP_INTERNAL_KEY:s("input",i.key,a.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=r.inputs.tapInternalKey.decode(i);break;case a.InputTypes.TAP_MERKLE_ROOT:s("input",i.key,a.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=r.inputs.tapMerkleRoot.decode(i);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(i)}h.push(t)}for(const e of i.range(f)){const t={};for(const n of o[e])switch(r.outputs.checkPubkey(n),n.key[0]){case a.OutputTypes.REDEEM_SCRIPT:if(s("output",n.key,a.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=r.outputs.redeemScript.decode(n);break;case a.OutputTypes.WITNESS_SCRIPT:if(s("output",n.key,a.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=r.outputs.witnessScript.decode(n);break;case a.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(r.outputs.bip32Derivation.decode(n));break;case a.OutputTypes.TAP_INTERNAL_KEY:s("output",n.key,a.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=r.outputs.tapInternalKey.decode(n);break;case a.OutputTypes.TAP_TREE:s("output",n.key,a.OutputTypes.TAP_TREE),t.tapTree=r.outputs.tapTree.decode(n);break;case a.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(r.outputs.tapBip32Derivation.decode(n));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(n)}d.push(t)}return{globalMap:c,inputs:h,outputs:d}}t.psbtFromBuffer=function(buffer,e){let t=0;function n(){const e=o.decode(buffer,t);t+=o.encodingLength(e);const n=buffer.slice(t,t+e);return t+=e,n}function r(){return{key:n(),value:n()}}function s(){if(t>=buffer.length)throw new Error("Format Error: Unexpected End of PSBT");const e=0===buffer.readUInt8(t);return e&&t++,e}if(1886610036!==function(){const e=buffer.readUInt32BE(t);return t+=4,e}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){const e=buffer.readUInt8(t);return t+=1,e}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");const u=[],l={};for(;!s();){const e=r(),t=e.key.toString("hex");if(l[t])throw new Error("Format Error: Keys must be unique for global keymap: key "+t);l[t]=1,u.push(e)}const f=u.filter((e=>e.key[0]===a.GlobalTypes.UNSIGNED_TX));if(1!==f.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const h=e(f[0].value),{inputCount:d,outputCount:p}=h.getInputOutputCounts(),y=[],g=[];for(const e of i.range(d)){const t={},n=[];for(;!s();){const i=r(),o=i.key.toString("hex");if(t[o])throw new Error("Format Error: Keys must be unique for each input: input index "+e+" key "+o);t[o]=1,n.push(i)}y.push(n)}for(const e of i.range(p)){const t={},n=[];for(;!s();){const i=r(),o=i.key.toString("hex");if(t[o])throw new Error("Format Error: Keys must be unique for each output: output index "+e+" key "+o);t[o]=1,n.push(i)}g.push(n)}return c(h,{globalMapKeyVals:u,inputKeyVals:y,outputKeyVals:g})},t.checkKeyBuffer=s,t.psbtFromKeyVals=c},36574:(e,t,n)=>{"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(12974)),r(n(15312))},15312:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(71528),i=n(19254);t.psbtToBuffer=function({globalMap:e,inputs:t,outputs:n}){const{globalKeyVals:r,inputKeyVals:o,outputKeyVals:a}=s({globalMap:e,inputs:t,outputs:n}),c=i.keyValsToBuffer(r),u=e=>0===e.length?[Buffer.from([0])]:e.map(i.keyValsToBuffer),l=u(o),f=u(a),h=Buffer.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),Buffer.concat([h,c].concat(l,f))};const o=(e,t)=>e.key.compare(t.key);function a(e,t){const n=new Set,r=Object.entries(e).reduce(((e,[r,i])=>{if("unknownKeyVals"===r)return e;const o=t[r];if(void 0===o)return e;const a=(Array.isArray(i)?i:[i]).map(o.encode);return a.map((e=>e.key.toString("hex"))).forEach((e=>{if(n.has(e))throw new Error("Serialize Error: Duplicate key: "+e);n.add(e)})),e.concat(a)}),[]),i=e.unknownKeyVals?e.unknownKeyVals.filter((e=>!n.has(e.key.toString("hex")))):[];return r.concat(i).sort(o)}function s({globalMap:e,inputs:t,outputs:n}){return{globalKeyVals:a(e,r.globals),inputKeyVals:t.map((e=>a(e,r.inputs))),outputKeyVals:n.map((e=>a(e,r.outputs)))}}t.psbtToKeyVals=s},95011:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(82190),i=n(36574),o=n(1847),a=n(96403);t.Psbt=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){const buffer=Buffer.from(e,"base64");return this.fromBuffer(buffer,t)}static fromHex(e,t){const buffer=Buffer.from(e,"hex");return this.fromBuffer(buffer,t)}static fromBuffer(buffer,e){const t=i.psbtFromBuffer(buffer,e),n=new this(t.globalMap.unsignedTx);return Object.assign(n,t),n}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return i.psbtToBuffer(this)}updateGlobal(e){return a.updateGlobal(e,this.globalMap),this}updateInput(e,t){const n=a.checkForInput(this.inputs,e);return a.updateInput(t,n),this}updateOutput(e,t){const n=a.checkForOutput(this.outputs,e);return a.updateOutput(t,n),this}addUnknownKeyValToGlobal(e){return a.checkHasKey(e,this.globalMap.unknownKeyVals,a.getEnumLength(o.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){const n=a.checkForInput(this.inputs,e);return a.checkHasKey(t,n.unknownKeyVals,a.getEnumLength(o.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){const n=a.checkForOutput(this.outputs,e);return a.checkHasKey(t,n.unknownKeyVals,a.getEnumLength(o.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(n,e))),a.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(n,e))),a.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){const t=a.checkForInput(this.inputs,e);a.inputCheckUncleanFinalized(e,t);for(const e of Object.keys(t))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(e)||delete t[e];return this}combine(...e){const t=r.combine([this].concat(e));return Object.assign(this,t),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}}},1847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(t.GlobalTypes||(t.GlobalTypes={})),t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(t.InputTypes||(t.InputTypes={})),t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(t.OutputTypes||(t.OutputTypes={})),t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]},96403:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=n(71528);function i(e,t){const n=e[t];if(void 0===n)throw new Error(`No input #${t}`);return n}function o(e,t){const n=e[t];if(void 0===n)throw new Error(`No output #${t}`);return n}function a(e,t,n,r){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${n} and got ${JSON.stringify(r)}`)}function s(e){return(t,n)=>{for(const i of Object.keys(t)){const o=t[i],{canAdd:s,canAddToArray:c,check:u,expected:l}=r[e+"s"][i]||{};if(u)if(!!c){if(!Array.isArray(o)||n[i]&&!Array.isArray(n[i]))throw new Error(`Key type ${i} must be an array`);o.every(u)||a(e,i,l,o);const t=n[i]||[],r=new Set;if(!o.every((e=>c(t,e,r))))throw new Error("Can not add duplicate data to array");n[i]=t.concat(o)}else{if(u(o)||a(e,i,l,o),!s(n,o))throw new Error(`Can not add duplicate data to ${e}`);n[i]=o}}}}t.checkForInput=i,t.checkForOutput=o,t.checkHasKey=function(e,t,n){if(e.key[0]<n)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((t=>t.key.equals(e.key))).length)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)},t.getEnumLength=function(e){let t=0;return Object.keys(e).forEach((e=>{Number(isNaN(Number(e)))&&t++})),t},t.inputCheckUncleanFinalized=function(e,t){let n=!1;if(t.nonWitnessUtxo||t.witnessUtxo){const e=!!t.redeemScript,r=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!r||!!t.finalScriptWitness,a=!!t.finalScriptSig||!!t.finalScriptWitness;n=i&&o&&a}if(!1===n)throw new Error(`Input #${e} has too much or too little data to clean`)},t.updateGlobal=s("global"),t.updateInput=s("input"),t.updateOutput=s("output"),t.addInputAttributes=function(e,n){const r=i(e,e.length-1);t.updateInput(n,r)},t.addOutputAttributes=function(e,n){const r=o(e,e.length-1);t.updateOutput(n,r)},t.defaultVersionSetter=function(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},t.defaultLocktimeSetter=function(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}},1488:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function s(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=i,t.hash=o,t.exists=a,t.output=s;const c={number:n,bool:r,bytes:i,hash:o,exists:a,output:s};t.default=c},901:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;const r=n(1488),i=n(71194);class o extends i.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){r.default.exists(this);const{view:t,buffer,blockLen:n}=this,o=(e=(0,i.toBytes)(e)).length;for(let r=0;r<o;){const a=Math.min(n-this.pos,o-r);if(a!==n)buffer.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;n<=o-r;r+=n)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){r.default.exists(this),r.default.output(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:o}=this;let{pos:a}=this;buffer[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(t,0),a=0);for(let e=a;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),o),this.process(t,0);const s=(0,i.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,l[e],o)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}t.SHA2=o},12815:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},1165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;const r=n(901),i=n(71194),o=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),a=Uint8Array.from({length:16},((e,t)=>t)),s=a.map((e=>(9*e+5)%16));let c=[a],u=[s];for(let e=0;e<4;e++)for(let t of[c,u])t.push(t[e].map((e=>o[e])));const l=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),f=c.map(((e,t)=>e.map((e=>l[t][e])))),h=u.map(((e,t)=>e.map((e=>l[t][e])))),d=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),p=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),y=(e,t)=>e<<t|e>>>32-t;function g(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const b=new Uint32Array(16);class m extends r.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:i}=this;return[e,t,n,r,i]}set(e,t,n,r,i){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(e,t){for(let n=0;n<16;n++,t+=4)b[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,a=0|this.h2,s=a,l=0|this.h3,m=l,w=0|this.h4,v=w;for(let e=0;e<5;e++){const t=4-e,_=d[e],E=p[e],S=c[e],k=u[e],A=f[e],O=h[e];for(let t=0;t<16;t++){const r=y(n+g(e,i,a,l)+b[S[t]]+_,A[t])+w|0;n=w,w=l,l=0|y(a,10),a=i,i=r}for(let e=0;e<16;e++){const n=y(r+g(t,o,s,m)+b[k[e]]+E,O[e])+v|0;r=v,v=m,m=0|y(s,10),s=o,o=n}}this.set(this.h1+a+m|0,this.h2+l+v|0,this.h3+w+r|0,this.h4+n+o|0,this.h0+i+s|0)}roundClean(){b.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=m,t.ripemd160=(0,i.wrapConstructor)((()=>new m))},36740:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha1=void 0;const r=n(901),i=n(71194),o=(e,t)=>e<<t|e>>>32-t>>>0,a=(e,t,n)=>e&t^e&n^t&n,s=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),c=new Uint32Array(80);class u extends r.SHA2{constructor(){super(64,20,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4]}get(){const{A:e,B:t,C:n,D:r,E:i}=this;return[e,t,n,r,i]}set(e,t,n,r,i){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t,!1);for(let e=16;e<80;e++)c[e]=o(c[e-3]^c[e-8]^c[e-14]^c[e-16],1);let{A:n,B:r,C:i,D:s,E:u}=this;for(let e=0;e<80;e++){let t,f;e<20?(t=(l=r)&i^~l&s,f=1518500249):e<40?(t=r^i^s,f=1859775393):e<60?(t=a(r,i,s),f=2400959708):(t=r^i^s,f=3395469782);const h=o(n,5)+t+u+f+c[e]|0;u=s,s=i,i=o(r,30),r=n,n=h}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,u=u+this.E|0,this.set(n,r,i,s,u)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}t.sha1=(0,i.wrapConstructor)((()=>new u))},68387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const r=n(901),i=n(71194),o=(e,t,n)=>e&t^e&n^t&n,a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends r.SHA2{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],n=c[e-2],r=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,o=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;c[e]=o+c[e-7]+r+c[e-16]|0}let{A:n,B:r,C:s,D:u,E:l,F:f,G:h,H:d}=this;for(let e=0;e<64;e++){const t=d+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+((p=l)&f^~p&h)+a[e]+c[e]|0,y=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+o(n,r,s)|0;d=h,h=f,f=l,l=u+t|0,u=s,s=r,r=n,n=t+y|0}var p;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,u=u+this.D|0,l=l+this.E|0,f=f+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(n,r,s,u,l,f,h,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)((()=>new u)),t.sha224=(0,i.wrapConstructor)((()=>new l))},71194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const r=n(12815);t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=i[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t};function o(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function a(e){if("string"==typeof e&&(e=o(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let i=Date.now();for(let o=0;o<e;o++){r(o);const e=Date.now()-i;e>=0&&e<n||(await(0,t.nextTick)(),i+=e)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n};t.Hash=class{clone(){return this._cloneInto()}};t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new TypeError("Options should be object or undefined");var n;return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},10009:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=r}var a=e.length,s=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===s;)r++,n++;for(var o=(e.length-n)*c+1>>>0,u=new Uint8Array(o);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var f=0,h=o-1;(0!==l||f<i)&&-1!==h;h--,f++)l+=a*u[h]>>>0,u[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=f,n++}for(var d=o-i;d!==o&&0===u[d];)d++;for(var p=new Uint8Array(r+(o-d)),y=r;d!==o;)p[y++]=u[d++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var c=(o-i)*u+1>>>0,l=new Uint8Array(c);i!==o;){for(var f=t[i],h=0,d=c-1;(0!==f||h<r)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=h,i++}for(var p=c-r;p!==c&&0===l[p];)p++;for(var y=s.repeat(n);p<c;++p)y+=e.charAt(l[p]);return y},decodeUnsafe:l,decode:function(e){var buffer=l(e);if(buffer)return buffer;throw new Error("Non-base"+a+" character")}}}},79075:(e,t,n)=>{const r=n(10009);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},72882:(e,t,n)=>{"use strict";var r=n(79075);e.exports=function(e){function t(buffer){var t=buffer.slice(0,-4),n=buffer.slice(-4),r=e(t);if(!(n[0]^r[0]|n[1]^r[1]|n[2]^r[2]|n[3]^r[3]))return t}return{encode:function(t){var n=Uint8Array.from(t),i=e(n),o=n.length+4,a=new Uint8Array(o);return a.set(n,0),a.set(i.subarray(0,4),n.length),r.encode(a,o)},decode:function(e){var n=t(r.decode(e));if(!n)throw new Error("Invalid checksum");return n},decodeUnsafe:function(e){var buffer=r.decodeUnsafe(e);if(buffer)return t(buffer)}}}},89239:(e,t,n)=>{"use strict";var{sha256:r}=n(68387),i=n(72882);e.exports=i((function(buffer){return r(r(buffer))}))},95488:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toOutputScript=t.fromOutputScript=t.toBech32=t.toBase58Check=t.fromBech32=t.fromBase58Check=void 0;const r=n(74378),i=n(84972),o=n(73357),a=n(41838),s=n(27715),c=n(89239),u=40,l=2,f=16,h=2,d=80,p="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function y(e){const t=Buffer.from(c.decode(e));if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUint8(0),hash:t.slice(1)}}function g(e){let t,n;try{t=s.bech32.decode(e)}catch(e){}if(t){if(n=t.words[0],0!==n)throw new TypeError(e+" uses wrong encoding")}else if(t=s.bech32m.decode(e),n=t.words[0],0===n)throw new TypeError(e+" uses wrong encoding");const r=s.bech32.fromWords(t.words.slice(1));return{version:n,prefix:t.prefix,data:Buffer.from(r)}}function b(e,t,n){const r=s.bech32.toWords(e);return r.unshift(t),0===t?s.bech32.encode(n,r):s.bech32m.encode(n,r)}t.fromBase58Check=y,t.fromBech32=g,t.toBase58Check=function(e,t){(0,a.typeforce)((0,a.tuple)(a.Hash160bit,a.UInt8),arguments);const n=Buffer.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),c.encode(n)},t.toBech32=b,t.fromOutputScript=function(e,t){t=t||r.bitcoin;try{return i.p2pkh({output:e,network:t}).address}catch(e){}try{return i.p2sh({output:e,network:t}).address}catch(e){}try{return i.p2wpkh({output:e,network:t}).address}catch(e){}try{return i.p2wsh({output:e,network:t}).address}catch(e){}try{return i.p2tr({output:e,network:t}).address}catch(e){}try{return function(e,t){const n=e.slice(2);if(n.length<l||n.length>u)throw new TypeError("Invalid program length for segwit address");const r=e[0]-d;if(r<h||r>f)throw new TypeError("Invalid version for segwit address");if(e[1]!==n.length)throw new TypeError("Invalid script for segwit address");return console.warn(p),b(n,r,t.bech32)}(e,t)}catch(e){}throw new Error(o.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let n,a;t=t||r.bitcoin;try{n=y(e)}catch(e){}if(n){if(n.version===t.pubKeyHash)return i.p2pkh({hash:n.hash}).output;if(n.version===t.scriptHash)return i.p2sh({hash:n.hash}).output}else{try{a=g(e)}catch(e){}if(a){if(a.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===a.version){if(20===a.data.length)return i.p2wpkh({hash:a.data}).output;if(32===a.data.length)return i.p2wsh({hash:a.data}).output}else if(1===a.version){if(32===a.data.length)return i.p2tr({pubkey:a.data}).output}else if(a.version>=h&&a.version<=f&&a.data.length>=l&&a.data.length<=u)return console.warn(p),o.compile([a.version+d,a.data])}}throw new Error(e+" has no matching Script")}},77617:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=t.check=void 0,t.check=function(buffer){if(buffer.length<8)return!1;if(buffer.length>72)return!1;if(48!==buffer[0])return!1;if(buffer[1]!==buffer.length-2)return!1;if(2!==buffer[2])return!1;const e=buffer[3];if(0===e)return!1;if(5+e>=buffer.length)return!1;if(2!==buffer[4+e])return!1;const t=buffer[5+e];return 0!==t&&(6+e+t===buffer.length&&(!(128&buffer[4])&&(!(e>1&&0===buffer[4]&&!(128&buffer[5]))&&(!(128&buffer[e+6])&&!(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))))))},t.decode=function(buffer){if(buffer.length<8)throw new Error("DER sequence length is too short");if(buffer.length>72)throw new Error("DER sequence length is too long");if(48!==buffer[0])throw new Error("Expected DER sequence");if(buffer[1]!==buffer.length-2)throw new Error("DER sequence length is invalid");if(2!==buffer[2])throw new Error("Expected DER integer");const e=buffer[3];if(0===e)throw new Error("R length is zero");if(5+e>=buffer.length)throw new Error("R length is too long");if(2!==buffer[4+e])throw new Error("Expected DER integer (2)");const t=buffer[5+e];if(0===t)throw new Error("S length is zero");if(6+e+t!==buffer.length)throw new Error("S length is invalid");if(128&buffer[4])throw new Error("R value is negative");if(e>1&&0===buffer[4]&&!(128&buffer[5]))throw new Error("R value excessively padded");if(128&buffer[e+6])throw new Error("S value is negative");if(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))throw new Error("S value excessively padded");return{r:buffer.slice(4,4+e),s:buffer.slice(6+e)}},t.encode=function(e,t){const n=e.length,r=t.length;if(0===n)throw new Error("R length is zero");if(0===r)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(r>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(r>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");const i=Buffer.allocUnsafe(6+n+r);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+n]=2,i[5+n]=t.length,t.copy(i,6+n),i}},87949:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;const r=n(9357),i=n(5525),o=n(298),a=n(82737),s=n(41838),{typeforce:c}=s,u=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block");class f{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(buffer){if(buffer.length<80)throw new Error("Buffer too small (< 80 bytes)");const e=new r.BufferReader(buffer),t=new f;if(t.version=e.readInt32(),t.prevHash=e.readSlice(32),t.merkleRoot=e.readSlice(32),t.timestamp=e.readUInt32(),t.bits=e.readUInt32(),t.nonce=e.readUInt32(),80===buffer.length)return t;const n=()=>{const t=a.Transaction.fromBuffer(e.buffer.slice(e.offset),!0);return e.offset+=t.byteLength(),t},i=e.readVarInt();t.transactions=[];for(let e=0;e<i;++e){const e=n();t.transactions.push(e)}const o=t.getWitnessCommit();return o&&(t.witnessCommit=o),t}static fromHex(e){return f.fromBuffer(Buffer.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,n=8388607&e,r=Buffer.alloc(32,0);return r.writeUIntBE(n,29-t,3),r}static calculateMerkleRoot(e,t){if(c([{getHash:s.Function}],e),0===e.length)throw u;if(t&&!h(e))throw l;const n=e.map((e=>e.getHash(t))),r=(0,o.fastMerkleRoot)(n,i.hash256);return t?i.hash256(Buffer.concat([r,e[0].ins[0].witness[0]])):r}getWitnessCommit(){if(!h(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof Buffer&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+r.varuint.encodingLength(this.transactions.length)+this.transactions.reduce(((e,n)=>e+n.byteLength(t)),0)}getHash(){return i.hash256(this.toBuffer(!0))}getId(){return(0,r.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const buffer=Buffer.allocUnsafe(this.byteLength(e)),t=new r.BufferWriter(buffer);return t.writeInt32(this.version),t.writeSlice(this.prevHash),t.writeSlice(this.merkleRoot),t.writeUInt32(this.timestamp),t.writeUInt32(this.bits),t.writeUInt32(this.nonce),e||!this.transactions||(r.varuint.encode(this.transactions.length,buffer,t.offset),t.offset+=r.varuint.encode.bytes,this.transactions.forEach((e=>{const n=e.byteLength();e.toBuffer(buffer,t.offset),t.offset+=n}))),buffer}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=(0,r.reverseBuffer)(this.getHash()),t=f.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw u;const e=f.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw u;if(!this.hasWitnessCommit())throw l;const e=f.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function h(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=f},9357:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.cloneBuffer=t.reverseBuffer=t.writeUInt64LE=t.readUInt64LE=t.varuint=void 0;const r=n(41838),{typeforce:i}=r,o=n(57795);function a(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function s(buffer,e){const t=buffer.readUInt32LE(e);let n=buffer.readUInt32LE(e+4);return n*=4294967296,a(n+t,9007199254740991),n+t}function c(buffer,e,t){return a(e,9007199254740991),buffer.writeInt32LE(-1&e,t),buffer.writeUInt32LE(Math.floor(e/4294967296),t+4),t+8}t.varuint=o,t.readUInt64LE=s,t.writeUInt64LE=c,t.reverseBuffer=function(buffer){if(buffer.length<1)return buffer;let e=buffer.length-1,t=0;for(let n=0;n<buffer.length/2;n++)t=buffer[n],buffer[n]=buffer[e],buffer[e]=t,e--;return buffer},t.cloneBuffer=function(buffer){const e=Buffer.allocUnsafe(buffer.length);return buffer.copy(e),e};class u{static withCapacity(e){return new u(Buffer.alloc(e))}constructor(buffer,e=0){this.buffer=buffer,this.offset=e,i(r.tuple(r.Buffer,r.UInt32),[buffer,e])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=c(this.buffer,e,this.offset)}writeVarInt(e){o.encode(e,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=u;t.BufferReader=class{constructor(buffer,e=0){this.buffer=buffer,this.offset=e,i(r.tuple(r.Buffer,r.UInt32),[buffer,e])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=s(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let n=0;n<e;n++)t.push(this.readVarSlice());return t}}},5525:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.TAGGED_HASH_PREFIXES=t.TAGS=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;const r=n(1165),i=n(36740),o=n(68387);function a(buffer){return Buffer.from((0,o.sha256)(Uint8Array.from(buffer)))}t.ripemd160=function(buffer){return Buffer.from((0,r.ripemd160)(Uint8Array.from(buffer)))},t.sha1=function(buffer){return Buffer.from((0,i.sha1)(Uint8Array.from(buffer)))},t.sha256=a,t.hash160=function(buffer){return Buffer.from((0,r.ripemd160)((0,o.sha256)(Uint8Array.from(buffer))))},t.hash256=function(buffer){return Buffer.from((0,o.sha256)((0,o.sha256)(Uint8Array.from(buffer))))},t.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],t.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Buffer.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Buffer.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Buffer.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Buffer.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Buffer.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Buffer.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Buffer.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Buffer.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Buffer.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])},t.taggedHash=function(e,n){return a(Buffer.concat([t.TAGGED_HASH_PREFIXES[e],n]))}},66379:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.getEccLib=t.initEccLib=void 0;const r={};t.initEccLib=function(e){var t;e?e!==r.eccLib&&(o("function"==typeof(t=e).isXOnlyPoint),o(t.isXOnlyPoint(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),o(t.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),o(t.isXOnlyPoint(i("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),o(t.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000001"))),o(!t.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000000"))),o(!t.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),o("function"==typeof t.xOnlyPointAddTweak),a.forEach((e=>{const n=t.xOnlyPointAddTweak(i(e.pubkey),i(e.tweak));null===e.result?o(null===n):(o(null!==n),o(n.parity===e.parity),o(Buffer.from(n.xOnlyPubkey).equals(i(e.result))))})),r.eccLib=e):r.eccLib=e},t.getEccLib=function(){if(!r.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return r.eccLib};const i=e=>Buffer.from(e,"hex");function o(e){if(!e)throw new Error("ecc library invalid")}const a=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},17656:(e,t,n)=>{"use strict";t.Wi=t._B=t.PP=t.QW=t.eL=t.Lk=void 0;const r=n(95488);t.Lk=r;const i=n(5525);t.eL=i;const o=n(74378);t.QW=o;const a=n(84972);t.PP=a;n(73357);var s=n(87949);var c=n(99930);Object.defineProperty(t,"_B",{enumerable:!0,get:function(){return c.Psbt}});var u=n(47334);var l=n(82737);var f=n(66379);Object.defineProperty(t,"Wi",{enumerable:!0,get:function(){return f.initEccLib}})},298:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=void 0,t.fastMerkleRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let n=e.length;const r=e.concat();for(;n>1;){let e=0;for(let i=0;i<n;i+=2,++e){const o=r[i],a=i+1===n?o:r[i+1],s=Buffer.concat([o,a]);r[e]=t(s)}n=e}return r[0]}},74378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},47334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;const n={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=n;const r={};t.REVERSE_OPS=r;for(const e of Object.keys(n)){r[n[e]]=e}},12227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tweakKey=t.tapTweakHash=t.tapleafHash=t.findScriptPath=t.toHashTree=t.rootHashFromPath=t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0;const r=n(48764),i=n(66379),o=n(5525),a=n(9357),s=n(41838);t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;function c(e){const n=e.version||t.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",r.Buffer.concat([r.Buffer.from([n]),f(e.output)]))}function u(e,t){return o.taggedHash("TapTweak",r.Buffer.concat(t?[e,t]:[e]))}function l(e,t){return o.taggedHash("TapBranch",r.Buffer.concat([e,t]))}function f(e){const t=a.varuint.encodingLength(e.length),buffer=r.Buffer.allocUnsafe(t);return a.varuint.encode(e.length,buffer),r.Buffer.concat([buffer,e])}t.rootHashFromPath=function(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);const n=(e.length-33)/32;let r=t;for(let t=0;t<n;t++){const n=e.slice(33+32*t,65+32*t);r=r.compare(n)<0?l(r,n):l(n,r)}return r},t.toHashTree=function e(t){if((0,s.isTapleaf)(t))return{hash:c(t)};const n=[e(t[0]),e(t[1])];n.sort(((e,t)=>e.hash.compare(t.hash)));const[r,i]=n;return{hash:l(r.hash,i.hash),left:r,right:i}},t.findScriptPath=function e(t,n){if("left"in(r=t)&&"right"in r){const r=e(t.left,n);if(void 0!==r)return[...r,t.right.hash];const i=e(t.right,n);if(void 0!==i)return[...i,t.left.hash]}else if(t.hash.equals(n))return[];var r},t.tapleafHash=c,t.tapTweakHash=u,t.tweakKey=function(e,t){if(!r.Buffer.isBuffer(e))return null;if(32!==e.length)return null;if(t&&32!==t.length)return null;const n=u(e,t),o=(0,i.getEccLib)().xOnlyPointAddTweak(e,n);return o&&null!==o.xOnlyPubkey?{parity:o.parity,x:r.Buffer.from(o.xOnlyPubkey)}:null}},36648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=void 0;const r=n(74378),i=n(73357),o=n(41838),a=n(52691),s=i.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),data:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))},e);const n={name:"embed",network:e.network||r.bitcoin};if(a.prop(n,"output",(()=>{if(e.data)return i.compile([s.OP_RETURN].concat(e.data))})),a.prop(n,"data",(()=>{if(e.output)return i.decompile(e.output).slice(1)})),t.validate&&e.output){const t=i.decompile(e.output);if(t[0]!==s.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(o.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}},84972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;const r=n(36648);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return r.p2data}});const i=n(98793);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});const o=n(97759);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});const a=n(44483);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return a.p2pkh}});const s=n(21160);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return s.p2sh}});const c=n(18810);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return c.p2wpkh}});const u=n(82401);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return u.p2wsh}});const l=n(10079);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return l.p2tr}})},52691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.value=t.prop=void 0,t.prop=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}},98793:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=void 0;const r=n(74378),i=n(73357),o=n(41838),a=n(52691),s=i.OPS,c=s.OP_RESERVED;function u(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function n(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===s.OP_0)}t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),m:o.typeforce.maybe(o.typeforce.Number),n:o.typeforce.maybe(o.typeforce.Number),output:o.typeforce.maybe(o.typeforce.Buffer),pubkeys:o.typeforce.maybe(o.typeforce.arrayOf(o.isPoint)),signatures:o.typeforce.maybe(o.typeforce.arrayOf(n)),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const l={network:e.network||r.bitcoin};let f=[],h=!1;function d(e){h||(h=!0,f=i.decompile(e),l.m=f[0]-c,l.n=f[f.length-2]-c,l.pubkeys=f.slice(1,-2))}if(a.prop(l,"output",(()=>{if(e.m&&l.n&&e.pubkeys)return i.compile([].concat(c+e.m,e.pubkeys,c+l.n,s.OP_CHECKMULTISIG))})),a.prop(l,"m",(()=>{if(l.output)return d(l.output),l.m})),a.prop(l,"n",(()=>{if(l.pubkeys)return l.pubkeys.length})),a.prop(l,"pubkeys",(()=>{if(e.output)return d(e.output),l.pubkeys})),a.prop(l,"signatures",(()=>{if(e.input)return i.decompile(e.input).slice(1)})),a.prop(l,"input",(()=>{if(e.signatures)return i.compile([s.OP_0].concat(e.signatures))})),a.prop(l,"witness",(()=>{if(l.input)return[]})),a.prop(l,"name",(()=>{if(l.m&&l.n)return`p2ms(${l.m} of ${l.n})`})),t.validate){if(e.output){if(d(e.output),!o.typeforce.Number(f[0]))throw new TypeError("Output is invalid");if(!o.typeforce.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==s.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(l.m<=0||l.n>16||l.m>l.n||l.n!==f.length-3)throw new TypeError("Output is invalid");if(!l.pubkeys.every((e=>(0,o.isPoint)(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==l.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==l.n)throw new TypeError("n mismatch");if(e.pubkeys&&!u(e.pubkeys,l.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(l.n=e.pubkeys.length,l.n<l.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<l.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>l.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==s.OP_0)throw new TypeError("Input is invalid");if(0===l.signatures.length||!l.signatures.every(n))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!u(e.signatures,l.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(l,e)}},97759:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=void 0;const r=n(74378),i=n(73357),o=n(41838),a=n(52691),s=i.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),pubkey:o.typeforce.maybe(o.isPoint),signature:o.typeforce.maybe(i.isCanonicalScriptSignature),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const n=a.value((()=>i.decompile(e.input))),c={name:"p2pk",network:e.network||r.bitcoin};if(a.prop(c,"output",(()=>{if(e.pubkey)return i.compile([e.pubkey,s.OP_CHECKSIG])})),a.prop(c,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),a.prop(c,"signature",(()=>{if(e.input)return n()[0]})),a.prop(c,"input",(()=>{if(e.signature)return i.compile([e.signature])})),a.prop(c,"witness",(()=>{if(c.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==s.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,o.isPoint)(c.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(c.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(c.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(c.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(c,e)}},44483:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=void 0;const r=n(5525),i=n(74378),o=n(73357),a=n(41838),s=n(52691),c=n(89239),u=o.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(25)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(o.isCanonicalScriptSignature),input:a.typeforce.maybe(a.typeforce.Buffer)},e);const n=s.value((()=>{const t=Buffer.from(c.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}})),l=s.value((()=>o.decompile(e.input))),f=e.network||i.bitcoin,h={name:"p2pkh",network:f};if(s.prop(h,"address",(()=>{if(!h.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(f.pubKeyHash,0),h.hash.copy(e,1),c.encode(e)})),s.prop(h,"hash",(()=>e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||h.pubkey?r.hash160(e.pubkey||h.pubkey):void 0)),s.prop(h,"output",(()=>{if(h.hash)return o.compile([u.OP_DUP,u.OP_HASH160,h.hash,u.OP_EQUALVERIFY,u.OP_CHECKSIG])})),s.prop(h,"pubkey",(()=>{if(e.input)return l()[1]})),s.prop(h,"signature",(()=>{if(e.input)return l()[0]})),s.prop(h,"input",(()=>{if(e.pubkey&&e.signature)return o.compile([e.signature,e.pubkey])})),s.prop(h,"witness",(()=>{if(h.input)return[]})),t.validate){let t=Buffer.from([]);if(e.address){if(n().version!==f.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==u.OP_DUP||e.output[1]!==u.OP_HASH160||20!==e.output[2]||e.output[23]!==u.OP_EQUALVERIFY||e.output[24]!==u.OP_CHECKSIG)throw new TypeError("Output is invalid");const n=e.output.slice(3,23);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.pubkey){const n=r.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const n=l();if(2!==n.length)throw new TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(n[0]))throw new TypeError("Input has invalid signature");if(!(0,a.isPoint)(n[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(n[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(n[1]))throw new TypeError("Pubkey mismatch");const i=r.hash160(n[1]);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(h,e)}},21160:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=void 0;const r=n(5525),i=n(74378),o=n(73357),a=n(41838),s=n(52691),c=n(89239),u=o.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(23)),redeem:a.typeforce.maybe({network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||i.bitcoin);const l={network:n},f=s.value((()=>{const t=Buffer.from(c.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}})),h=s.value((()=>o.decompile(e.input))),d=s.value((()=>{const t=h(),r=t[t.length-1];return{network:n,output:r===u.OP_FALSE?Buffer.from([]):r,input:o.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(s.prop(l,"address",(()=>{if(!l.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(l.network.scriptHash,0),l.hash.copy(e,1),c.encode(e)})),s.prop(l,"hash",(()=>e.output?e.output.slice(2,22):e.address?f().hash:l.redeem&&l.redeem.output?r.hash160(l.redeem.output):void 0)),s.prop(l,"output",(()=>{if(l.hash)return o.compile([u.OP_HASH160,l.hash,u.OP_EQUAL])})),s.prop(l,"redeem",(()=>{if(e.input)return d()})),s.prop(l,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return o.compile([].concat(o.decompile(e.redeem.input),e.redeem.output))})),s.prop(l,"witness",(()=>l.redeem&&l.redeem.witness?l.redeem.witness:l.input?[]:void 0)),s.prop(l,"name",(()=>{const e=["p2sh"];return void 0!==l.redeem&&void 0!==l.redeem.name&&e.push(l.redeem.name),e.join("-")})),t.validate){let t=Buffer.from([]);if(e.address){if(f().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==f().hash.length)throw new TypeError("Invalid address");t=f().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==u.OP_HASH160||20!==e.output[1]||e.output[22]!==u.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const i=e=>{if(e.output){const n=o.decompile(e.output);if(!n||n.length<1)throw new TypeError("Redeem.output too short");if(e.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(o.countNonPushOnlyOPs(n)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const i=r.hash160(e.output);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch");t=i}if(e.input){const t=e.input.length>0,n=e.witness&&e.witness.length>0;if(!t&&!n)throw new TypeError("Empty input");if(t&&n)throw new TypeError("Input and witness provided");if(t){const t=o.decompile(e.input);if(!o.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=h();if(!e||e.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(d().output))throw new TypeError("Input is invalid");i(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){const t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}i(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(l,e)}},10079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=void 0;const r=n(48764),i=n(74378),o=n(73357),a=n(41838),s=n(66379),c=n(12227),u=n(52691),l=n(27715),f=o.OPS;t.p2tr=function(e,t){if(!(e.address||e.output||e.pubkey||e.internalPubkey||e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(34)),internalPubkey:a.typeforce.maybe(a.typeforce.BufferN(32)),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),pubkey:a.typeforce.maybe(a.typeforce.BufferN(32)),signature:a.typeforce.maybe(a.typeforce.anyOf(a.typeforce.BufferN(64),a.typeforce.BufferN(65))),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer)),scriptTree:a.typeforce.maybe(a.isTaptree),redeem:a.typeforce.maybe({output:a.typeforce.maybe(a.typeforce.Buffer),redeemVersion:a.typeforce.maybe(a.typeforce.Number),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),redeemVersion:a.typeforce.maybe(a.typeforce.Number)},e);const n=u.value((()=>{const t=l.bech32m.decode(e.address),n=t.words.shift(),i=l.bech32m.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.Buffer.from(i)}})),h=u.value((()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&80===e.witness[e.witness.length-1][0]?e.witness.slice(0,-1):e.witness.slice()})),d=u.value((()=>e.scriptTree?(0,c.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0)),p=e.network||i.bitcoin,y={name:"p2tr",network:p};if(u.prop(y,"address",(()=>{if(!y.pubkey)return;const e=l.bech32m.toWords(y.pubkey);return e.unshift(1),l.bech32m.encode(p.bech32,e)})),u.prop(y,"hash",(()=>{const e=d();if(e)return e.hash;const t=h();if(t&&t.length>1){const e=t[t.length-1],n=e[0]&a.TAPLEAF_VERSION_MASK,r=t[t.length-2],i=(0,c.tapleafHash)({output:r,version:n});return(0,c.rootHashFromPath)(e,i)}return null})),u.prop(y,"output",(()=>{if(y.pubkey)return o.compile([f.OP_1,y.pubkey])})),u.prop(y,"redeemVersion",(()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:c.LEAF_VERSION_TAPSCRIPT)),u.prop(y,"redeem",(()=>{const e=h();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&a.TAPLEAF_VERSION_MASK}})),u.prop(y,"pubkey",(()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return n().data;if(y.internalPubkey){const e=(0,c.tweakKey)(y.internalPubkey,y.hash);if(e)return e.x}})),u.prop(y,"internalPubkey",(()=>{if(e.internalPubkey)return e.internalPubkey;const t=h();return t&&t.length>1?t[t.length-1].slice(1,33):void 0})),u.prop(y,"signature",(()=>{if(e.signature)return e.signature;const t=h();return t&&1===t.length?t[0]:void 0})),u.prop(y,"witness",(()=>{if(e.witness)return e.witness;const t=d();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){const n=(0,c.tapleafHash)({output:e.redeem.output,version:y.redeemVersion}),i=(0,c.findScriptPath)(t,n);if(!i)return;const o=(0,c.tweakKey)(e.internalPubkey,t.hash);if(!o)return;const a=r.Buffer.concat([r.Buffer.from([y.redeemVersion|o.parity]),e.internalPubkey].concat(i));return[e.redeem.output,a]}return e.signature?[e.signature]:void 0})),t.validate){let t=r.Buffer.from([]);if(e.address){if(p&&p.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(1!==n().version)throw new TypeError("Invalid address version");if(32!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw new TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==f.OP_1||32!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){const n=(0,c.tweakKey)(e.internalPubkey,y.hash);if(t.length>0&&!t.equals(n.x))throw new TypeError("Pubkey mismatch");t=n.x}if(t&&t.length&&!(0,s.getEccLib)().isXOnlyPoint(t))throw new TypeError("Invalid pubkey for p2tr");const i=d();if(e.hash&&i&&!e.hash.equals(i.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&i){const t=(0,c.tapleafHash)({output:e.redeem.output,version:y.redeemVersion});if(!(0,c.findScriptPath)(i,t))throw new TypeError("Redeem script not in tree")}const u=h();if(e.redeem&&y.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==y.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");if(y.redeem.output&&!e.redeem.output.equals(y.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&y.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,y.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(1===u.length){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{const n=u[u.length-1];if(n.length<33)throw new TypeError(`The control-block length is too small. Got ${n.length}, expected min 33.`);if((n.length-33)%32!=0)throw new TypeError(`The control-block length of ${n.length} is incorrect!`);const r=(n.length-33)/32;if(r>128)throw new TypeError(`The script path is too long. Got ${r}, expected max 128.`);const i=n.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(i))throw new TypeError("Internal pubkey mismatch");if(!(0,s.getEccLib)().isXOnlyPoint(i))throw new TypeError("Invalid internalPubkey for p2tr witness");const o=n[0]&a.TAPLEAF_VERSION_MASK,l=u[u.length-2],f=(0,c.tapleafHash)({output:l,version:o}),h=(0,c.rootHashFromPath)(n,f),d=(0,c.tweakKey)(i,h);if(!d)throw new TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(d.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(d.parity!==(1&n[0]))throw new Error("Incorrect parity")}}return Object.assign(y,e)}},18810:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=void 0;const r=n(5525),i=n(74378),o=n(73357),a=n(41838),s=n(52691),c=n(27715),u=o.OPS,l=Buffer.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(22)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(o.isCanonicalScriptSignature),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const n=s.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),r=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),f=e.network||i.bitcoin,h={name:"p2wpkh",network:f};if(s.prop(h,"address",(()=>{if(!h.hash)return;const e=c.bech32.toWords(h.hash);return e.unshift(0),c.bech32.encode(f.bech32,e)})),s.prop(h,"hash",(()=>e.output?e.output.slice(2,22):e.address?n().data:e.pubkey||h.pubkey?r.hash160(e.pubkey||h.pubkey):void 0)),s.prop(h,"output",(()=>{if(h.hash)return o.compile([u.OP_0,h.hash])})),s.prop(h,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),s.prop(h,"signature",(()=>{if(e.witness)return e.witness[0]})),s.prop(h,"input",(()=>{if(h.witness)return l})),s.prop(h,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=Buffer.from([]);if(e.address){if(f&&f.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==n().version)throw new TypeError("Invalid address version");if(20!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==u.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const n=r.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");if(t=n,!(0,a.isPoint)(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,a.isPoint)(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const n=r.hash160(e.witness[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(h,e)}},82401:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=void 0;const r=n(5525),i=n(74378),o=n(73357),a=n(41838),s=n(52691),c=n(27715),u=o.OPS,l=Buffer.alloc(0);function f(e){return!(!Buffer.isBuffer(e)||65!==e.length||4!==e[0]||!(0,a.isPoint)(e))}t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),output:a.typeforce.maybe(a.typeforce.BufferN(34)),redeem:a.typeforce.maybe({input:a.typeforce.maybe(a.typeforce.Buffer),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.BufferN(0)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const n=s.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),r=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),h=s.value((()=>o.decompile(e.redeem.input)));let d=e.network;d||(d=e.redeem&&e.redeem.network||i.bitcoin);const p={network:d};if(s.prop(p,"address",(()=>{if(!p.hash)return;const e=c.bech32.toWords(p.hash);return e.unshift(0),c.bech32.encode(d.bech32,e)})),s.prop(p,"hash",(()=>e.output?e.output.slice(2):e.address?n().data:p.redeem&&p.redeem.output?r.sha256(p.redeem.output):void 0)),s.prop(p,"output",(()=>{if(p.hash)return o.compile([u.OP_0,p.hash])})),s.prop(p,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:l,witness:e.witness.slice(0,-1)}})),s.prop(p,"input",(()=>{if(p.witness)return l})),s.prop(p,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=o.toStack(h());return p.redeem=Object.assign({witness:t},e.redeem),p.redeem.input=l,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),s.prop(p,"name",(()=>{const e=["p2wsh"];return void 0!==p.redeem&&void 0!==p.redeem.name&&e.push(p.redeem.name),e.join("-")})),t.validate){let t=Buffer.from([]);if(e.address){if(n().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==n().version)throw new TypeError("Invalid address version");if(32!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==u.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==d)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){const n=o.decompile(e.redeem.output);if(!n||n.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(o.countNonPushOnlyOPs(n)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const i=r.sha256(e.redeem.output);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch");t=i}if(e.redeem.input&&!o.isPushOnly(h()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&h().some(f)||e.redeem.output&&(o.decompile(e.redeem.output)||[]).some(f))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(f)||(o.decompile(t)||[]).some(f))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(p,e)}},99930:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;const r=n(95011),i=n(3493),o=n(96403),a=n(95488),s=n(9357),c=n(74378),u=n(84972),l=n(12227),f=n(73357),h=n(82737),d=n(23064),p=n(87929),y={network:c.bitcoin,maximumFeeRate:5e3};class g{static fromBase64(e,t={}){const buffer=Buffer.from(e,"base64");return this.fromBuffer(buffer,t)}static fromHex(e,t={}){const buffer=Buffer.from(e,"hex");return this.fromBuffer(buffer,t)}static fromBuffer(buffer,e={}){const t=r.Psbt.fromBuffer(buffer,b),n=new g(e,t);var i,o;return i=n.__CACHE.__TX,o=n.__CACHE,i.ins.forEach((e=>{O(o,e)})),n}constructor(e={},t=new r.Psbt(new m)){this.data=t,this.opts=Object.assign({},y,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const n=(e,t,n,r)=>Object.defineProperty(e,t,{enumerable:n,writable:r});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:(0,s.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=(0,a.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,s.cloneBuffer)(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=g.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){S(e),this.opts.maximumFeeRate=e}setVersion(e){S(e),k(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){S(e),k(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){S(t),k(this.data.inputs,"setInputSequence");const n=this.__CACHE;if(n.__TX.ins.length<=e)throw new Error("Input index too high");return n.__TX.ins[e].sequence=t,n.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,d.checkTaprootInputFields)(e,e,"addInput"),k(this.data.inputs,"addInput"),e.witnessScript&&G(e.witnessScript);const t=this.__CACHE;this.data.addInput(e);O(t,t.__TX.ins[t.__TX.ins.length-1]);const n=this.data.inputs.length-1,r=this.data.inputs[n];return r.nonWitnessUtxo&&H(this.__CACHE,r,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");k(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:n}=this.opts,r=(0,a.toOutputScript)(t,n);e=Object.assign(e,{script:r})}(0,d.checkTaprootOutputFields)(e,e,"addOutput");const n=this.__CACHE;return this.data.addOutput(e),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(_))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,n){const r=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=r*i;if(r>=n.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${r} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const n=t.__TX.clone();return F(this.data.inputs,n,t,!0),n}getFeeRate(){return x("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return x("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,o.checkForInput)(this.data.inputs,0),Y(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t){const n=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._finalizeTaprootInput(e,n,void 0,t):this._finalizeInput(e,n,t)}finalizeTaprootInput(e,t,n=d.tapScriptFinalizer){const r=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(r))return this._finalizeTaprootInput(e,r,t,n);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,n=N){const{script:r,isP2SH:i,isP2WSH:o,isSegwit:a}=function(e,t,n){const r=n.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const o=z(n,t,e),a=r.ins[e].index;i.script=o.outs[a].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);(t.witnessScript||(0,p.isP2WPKH)(i.script))&&(i.isSegwit=!0);return i}(e,t,this.__CACHE);if(!r)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:n}=e;t.forEach((e=>{const{hashType:t}=f.signature.decode(e.signature);if(n!==t)throw new Error("Signature sighash does not match input sighash type")}))}(t);const{finalScriptSig:s,finalScriptWitness:c}=n(e,t,r,a,i,o);if(s&&this.data.updateInput(e,{finalScriptSig:s}),c&&this.data.updateInput(e,{finalScriptWitness:c}),!s&&!c)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,n,r=d.tapScriptFinalizer){if(!t.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){const n=u.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),r=(0,p.witnessStackToScriptWitness)(n.witness);this.data.updateInput(e,{finalScriptWitness:r})}else{const{finalScriptWitness:i}=r(e,t,n);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){const t=(0,o.checkForInput)(this.data.inputs,e),n=W(K(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=f.decompile(e);if(!t)return;const n=t[t.length-1];if(!Buffer.isBuffer(n)||V(n)||(r=n,f.isCanonicalScriptSignature(r)))return;var r;if(!f.decompile(n))return;return n}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=M(e),n=t[t.length-1];if(V(n))return;if(!f.decompile(n))return;return n}(t.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+$(n.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,n,r){const i=K(n,t,r),{meaningfulScript:o}=W(i,n,"input",t.redeemScript,t.witnessScript);return(0,p.pubkeyInScript)(e,o)}(t,(0,o.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const n=(0,o.checkForInput)(this.data.inputs,e),r=E(t);return!!n.bip32Derivation&&n.bip32Derivation.some(r)}outputHasPubkey(e,t){return function(e,t,n,r){const i=r.__TX.outs[n].script,{meaningfulScript:o}=W(i,n,"output",t.redeemScript,t.witnessScript);return(0,p.pubkeyInScript)(e,o)}(t,(0,o.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const n=(0,o.checkForOutput)(this.data.outputs,e),r=E(t);return!!n.bip32Derivation&&n.bip32Derivation.some(r)}validateSignaturesOfAllInputs(e){(0,o.checkForInput)(this.data.inputs,0);return Y(this.data.inputs.length).map((t=>this.validateSignaturesOfInput(t,e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t,n){const r=this.data.inputs[e];return(0,d.isTaprootInput)(r)?this.validateSignaturesOfTaprootInput(e,t,n):this._validateSignaturesOfInput(e,t,n)}_validateSignaturesOfInput(e,t,n){const r=this.data.inputs[e],i=(r||{}).partialSig;if(!r||!i||i.length<1)throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const o=n?i.filter((e=>e.pubkey.equals(n))):i;if(o.length<1)throw new Error("No signatures for this pubkey");const a=[];let s,c,u;for(const n of o){const i=f.signature.decode(n.signature),{hash:o,script:l}=u!==i.hashType?C(e,Object.assign({},r,{sighashType:i.hashType}),this.__CACHE,!0):{hash:s,script:c};u=i.hashType,s=o,c=l,A(n.pubkey,l,"verify"),a.push(t(n.pubkey,o,i.signature))}return a.every((e=>!0===e))}validateSignaturesOfTaprootInput(e,t,n){const r=this.data.inputs[e],i=(r||{}).tapKeySig,o=(r||{}).tapScriptSig;if(!r&&!i&&(!o||o.length))throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const a=(n=n&&(0,d.toXOnly)(n))?U(e,r,this.data.inputs,n,this.__CACHE):function(e,t,n,r){const i=[];if(t.tapInternalKey){const n=B(e,t,r);n&&i.push(n)}if(t.tapScriptSig){const e=t.tapScriptSig.map((e=>e.pubkey));i.push(...e)}const o=i.map((i=>U(e,t,n,i,r)));return o.flat()}(e,r,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");const s=a.find((e=>!e.leafHash));let c=0;if(i&&s){if(!t(s.pubkey,s.hash,L(i)))return!1;c++}if(o)for(const e of o){const n=a.find((t=>e.pubkey.equals(t.pubkey)));if(n){if(!t(e.pubkey,n.hash,L(e.signature)))return!1;c++}}return c>0}signAllInputsHD(e,t=[h.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const n=[];for(const r of Y(this.data.inputs.length))try{this.signInputHD(r,e,t),n.push(!0)}catch(e){n.push(!1)}if(n.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[h.Transaction.SIGHASH_ALL]){return new Promise(((n,r)=>{if(!e||!e.publicKey||!e.fingerprint)return r(new Error("Need HDSigner to sign input"));const i=[],o=[];for(const n of Y(this.data.inputs.length))o.push(this.signInputHDAsync(n,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return r(new Error("No inputs were signed"));n()}))}))}signInputHD(e,t,n=[h.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return D(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,n))),this}signInputHDAsync(e,t,n=[h.Transaction.SIGHASH_ALL]){return new Promise(((r,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const o=D(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,n)));return Promise.all(o).then((()=>{r()})).catch(i)}))}signAllInputs(e,t){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const n=[];for(const r of Y(this.data.inputs.length))try{this.signInput(r,e,t),n.push(!0)}catch(e){n.push(!1)}if(n.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise(((n,r)=>{if(!e||!e.publicKey)return r(new Error("Need Signer to sign input"));const i=[],o=[];for(const[n]of this.data.inputs.entries())o.push(this.signInputAsync(n,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return r(new Error("No inputs were signed"));n()}))}))}signInput(e,t,n){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._signTaprootInput(e,r,t,void 0,n):this._signInput(e,t,n)}signTaprootInput(e,t,n,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInput(e,i,t,n,r);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,n=[h.Transaction.SIGHASH_ALL]){const{hash:r,sighashType:i}=R(this.data.inputs,e,t.publicKey,this.__CACHE,n),o=[{pubkey:t.publicKey,signature:f.signature.encode(t.sign(r),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,n,r,i=[h.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,n,r,i),a=o.filter((e=>!e.leafHash)).map((e=>(0,d.serializeTaprootSignature)(n.signSchnorr(e.hash),t.sighashType)))[0],s=o.filter((e=>!!e.leafHash)).map((e=>({pubkey:(0,d.toXOnly)(n.publicKey),signature:(0,d.serializeTaprootSignature)(n.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash})));return a&&this.data.updateInput(e,{tapKeySig:a}),s.length&&this.data.updateInput(e,{tapScriptSig:s}),this}signInputAsync(e,t,n){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._signTaprootInputAsync(e,r,t,void 0,n):this._signInputAsync(e,t,n)}))}signTaprootInputAsync(e,t,n,r){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,n,r);throw new Error(`Input #${e} is not of type Taproot.`)}))}_signInputAsync(e,t,n=[h.Transaction.SIGHASH_ALL]){const{hash:r,sighashType:i}=R(this.data.inputs,e,t.publicKey,this.__CACHE,n);return Promise.resolve(t.sign(r)).then((n=>{const r=[{pubkey:t.publicKey,signature:f.signature.encode(n,i)}];this.data.updateInput(e,{partialSig:r})}))}async _signTaprootInputAsync(e,t,n,r,i=[h.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,n,r,i),a=[],s=o.filter((e=>!e.leafHash))[0];if(s){const e=Promise.resolve(n.signSchnorr(s.hash)).then((e=>({tapKeySig:(0,d.serializeTaprootSignature)(e,t.sighashType)})));a.push(e)}const c=o.filter((e=>!!e.leafHash));if(c.length){const e=c.map((e=>Promise.resolve(n.signSchnorr(e.hash)).then((r=>({tapScriptSig:[{pubkey:(0,d.toXOnly)(n.publicKey),signature:(0,d.serializeTaprootSignature)(r,t.sighashType),leafHash:e.leafHash}]})))));a.push(...e)}return Promise.all(a).then((t=>{t.forEach((t=>this.data.updateInput(e,t)))}))}checkTaprootHashesForSig(e,t,n,r,i){if("function"!=typeof n.signSchnorr)throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const o=U(e,t,this.data.inputs,n.publicKey,this.__CACHE,r,i);if(!o||!o.length)throw new Error(`Can not sign for input #${e} with the key ${n.publicKey.toString("hex")}`);return o}toBuffer(){return w(this.__CACHE),this.data.toBuffer()}toHex(){return w(this.__CACHE),this.data.toHex()}toBase64(){return w(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&G(t.witnessScript),(0,d.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&H(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){const n=this.data.outputs[e];return(0,d.checkTaprootOutputFields)(n,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=g;const b=buffer=>new m(buffer);class m{constructor(buffer=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=h.Transaction.fromBuffer(buffer),function(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!Buffer.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?(0,s.reverseBuffer)(Buffer.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!Buffer.isBuffer(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function w(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function v(e,t,n){if(!t)return!1;let r;if(r=n?n.map((e=>{const n=function(e){if(65===e.length){const t=1&e[64],n=e.slice(0,33);return n[0]=2|t,n}return e.slice()}(e);return t.find((e=>e.pubkey.equals(n)))})).filter((e=>!!e)):t,r.length>e)throw new Error("Too many signatures");return r.length===e}function _(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function E(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function S(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function k(e,t){e.forEach((e=>{if((0,d.isTaprootInput)(e)?(0,d.checkTaprootInputForSigs)(e,t):(0,p.checkInputForSig)(e,t))throw new Error("Can not modify transaction, signatures exist.")}))}function A(e,t,n){if(!(0,p.pubkeyInScript)(e,t))throw new Error(`Can not ${n} for this input with the key ${e.toString("hex")}`)}function O(e,t){const n=(0,s.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[n]=1}function P(e,t){return(n,r,i,o)=>{const a=e({redeem:{output:i}}).output;if(!r.equals(a))throw new Error(`${t} for ${o} #${n} doesn't match the scriptPubKey in the prevout`)}}const I=P(u.p2sh,"Redeem script"),T=P(u.p2wsh,"Witness script");function x(e,t,n,r){if(!n.every(_))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&r.__FEE_RATE)return r.__FEE_RATE;if("__FEE"===e&&r.__FEE)return r.__FEE;let i,o=!0;return r.__EXTRACTED_TX?(i=r.__EXTRACTED_TX,o=!1):i=r.__TX.clone(),F(n,i,r,o),"__FEE_RATE"===e?r.__FEE_RATE:"__FEE"===e?r.__FEE:void 0}function N(e,t,n,r,i,o){const a=$(n);if(!function(e,t,n){switch(n){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return v(1,e.partialSig);case"multisig":const n=u.p2ms({output:t});return v(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,n,a))throw new Error(`Can not finalize input #${e}`);return function(e,t,n,r,i,o){let a,s;const c=function(e,t,n){let r;switch(t){case"multisig":const t=function(e,t){const n=u.p2ms({output:e});return n.pubkeys.map((e=>(t.filter((t=>t.pubkey.equals(e)))[0]||{}).signature)).filter((e=>!!e))}(e,n);r=u.p2ms({output:e,signatures:t});break;case"pubkey":r=u.p2pk({output:e,signature:n[0].signature});break;case"pubkeyhash":r=u.p2pkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature});break;case"witnesspubkeyhash":r=u.p2wpkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature})}return r}(e,t,n),l=o?u.p2wsh({redeem:c}):null,f=i?u.p2sh({redeem:l||c}):null;r?(s=l?(0,p.witnessStackToScriptWitness)(l.witness):(0,p.witnessStackToScriptWitness)(c.witness),f&&(a=f.input)):a=f?f.input:c.input;return{finalScriptSig:a,finalScriptWitness:s}}(n,a,t.partialSig,r,i,o)}function R(e,t,n,r,i){const a=(0,o.checkForInput)(e,t),{hash:s,sighashType:c,script:u}=C(t,a,r,!1,i);return A(n,u,"sign"),{hash:s,sighashType:c}}function C(e,t,n,r,i){const o=n.__TX,a=t.sighashType||h.Transaction.SIGHASH_ALL;let s,c;if(j(a,i),t.nonWitnessUtxo){const r=z(n,t,e),i=o.ins[e].hash,a=r.getHash();if(!i.equals(a))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const s=o.ins[e].index;c=r.outs[s]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");c=t.witnessUtxo}const{meaningfulScript:l,type:f}=W(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)s=o.hashForWitnessV0(e,l,c.value,a);else if((0,p.isP2WPKH)(l)){const t=u.p2pkh({hash:l.slice(2)}).output;s=o.hashForWitnessV0(e,t,c.value,a)}else{if(void 0===t.nonWitnessUtxo&&!1===n.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${l.toString("hex")}`);r||!1===n.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),s=o.hashForSignature(e,l,a)}return{script:l,sighashType:a,hash:s}}function B(e,t,n){const{script:r}=q(e,t,n);return(0,p.isP2TR)(r)?r.subarray(2,34):null}function L(e){return 64===e.length?e:e.subarray(0,64)}function U(e,t,n,r,i,o,a){const s=i.__TX,c=t.sighashType||h.Transaction.SIGHASH_DEFAULT;j(c,a);const u=n.map(((e,t)=>q(t,e,i))),f=u.map((e=>e.script)),y=u.map((e=>e.value)),g=[];if(t.tapInternalKey&&!o){const n=B(e,t,i)||Buffer.from([]);if((0,d.toXOnly)(r).equals(n)){const t=s.hashForWitnessV1(e,f,y,c);g.push({pubkey:r,hash:t})}}const b=(t.tapLeafScript||[]).filter((e=>(0,p.pubkeyInScript)(r,e.script))).map((e=>{const t=(0,l.tapleafHash)({output:e.script,version:e.leafVersion});return Object.assign({hash:t},e)})).filter((e=>!o||o.equals(e.hash))).map((t=>{const n=s.hashForWitnessV1(e,f,y,h.Transaction.SIGHASH_DEFAULT,t.hash);return{pubkey:r,hash:n,leafHash:t.hash}}));return g.concat(b)}function j(e,t){if(t&&t.indexOf(e)<0){const t=function(e){let t=e&h.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case h.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case h.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case h.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function D(e,t,n){const r=(0,o.checkForInput)(t,e);if(!r.bip32Derivation||0===r.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=r.bip32Derivation.map((e=>e.masterFingerprint.equals(n.fingerprint)?e:void 0)).filter((e=>!!e));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((e=>{const t=n.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function M(buffer){let e=0;function t(){const t=i.decode(buffer,e);return e+=i.decode.bytes,t}function n(){return n=t(),e+=n,buffer.slice(e-n,e);var n}return function(){const e=t(),r=[];for(let t=0;t<e;t++)r.push(n());return r}()}function H(e,t,n){e.__NON_WITNESS_UTXO_BUF_CACHE[n]=t.nonWitnessUtxo;const r=h.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[n]=r;const i=e,o=n;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function F(e,t,n,r){let i=0;e.forEach(((e,o)=>{if(r&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),r&&e.finalScriptWitness&&(t.ins[o].witness=M(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const r=z(n,e,o),a=t.ins[o].index,s=r.outs[a];i+=s.value}}));const o=t.outs.reduce(((e,t)=>e+t.value),0),a=i-o;if(a<0)throw new Error("Outputs are spending more than Inputs");const s=t.virtualSize();n.__FEE=a,n.__EXTRACTED_TX=t,n.__FEE_RATE=Math.floor(a/s)}function z(e,t,n){const r=e.__NON_WITNESS_UTXO_TX_CACHE;return r[n]||H(e,t,n),r[n]}function K(e,t,n){const{script:r}=q(e,t,n);return r}function q(e,t,n){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){const r=z(n,t,e).outs[n.__TX.ins[e].index];return{script:r.script,value:r.value}}throw new Error("Can't find pubkey in input without Utxo data")}function V(e){return 33===e.length&&f.isCanonicalPubKey(e)}function W(e,t,n,r,i){const o=(0,p.isP2SHScript)(e),a=o&&r&&(0,p.isP2WSHScript)(r),s=(0,p.isP2WSHScript)(e);if(o&&void 0===r)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((s||a)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return a?(c=i,I(t,e,r,n),T(t,r,i,n),G(c)):s?(c=i,T(t,e,i,n),G(c)):o?(c=r,I(t,e,r,n)):c=e,{meaningfulScript:c,type:a?"p2sh-p2wsh":o?"p2sh":s?"p2wsh":"raw"}}function G(e){if((0,p.isP2WPKH)(e)||(0,p.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function $(e){return(0,p.isP2WPKH)(e)?"witnesspubkeyhash":(0,p.isP2PKH)(e)?"pubkeyhash":(0,p.isP2MS)(e)?"multisig":(0,p.isP2PK)(e)?"pubkey":"nonstandard"}function Y(e){return[...Array(e).keys()]}},23064:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.checkTaprootInputForSigs=t.tapTreeFromList=t.tapTreeToList=t.tweakInternalPubKey=t.checkTaprootOutputFields=t.checkTaprootInputFields=t.isTaprootOutput=t.isTaprootInput=t.serializeTaprootSignature=t.tapScriptFinalizer=t.toXOnly=void 0;const r=n(41838),i=n(82737),o=n(87929),a=n(12227),s=n(84972),c=n(87929);function u(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,o.isP2TR)(e.witnessUtxo.script))}function l(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,o.isP2TR)(t))}function f(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:function(e){let t;for(const n of e)if(t=p(n,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}(e)}function h(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||i.Transaction.SIGHASH_DEFAULT}}function d(e,t=[],n=0){if(n>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,r.isTapleaf)(e)?(t.push({depth:n,leafVersion:e.version||a.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&d(e[0],t,n+1),e[1]&&d(e[1],t,n+1),t):[]}function p(e,t,n=0){if(n>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===n)return t?void 0:{output:e.script,version:e.leafVersion};if((0,r.isTapleaf)(t))return;const i=p(e,t&&t[0],n+1);if(i)return[i,t&&t[1]];const o=p(e,t&&t[1],n+1);return o?[t&&t[0],o]:void 0}function y(e,t){if(!t)return!0;const n=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(0,a.rootHashFromPath)(e.controlBlock,n).equals(t)}function g(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=e=>32===e.length?e:e.slice(1,33),t.tapScriptFinalizer=function(e,t,n){const r=function(e,t,n){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);const r=(e.tapLeafScript||[]).sort(((e,t)=>e.controlBlock.length-t.controlBlock.length)).find((t=>function(e,t,n){const r=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(!n||n.equals(r))&&void 0!==t.find((e=>e.leafHash.equals(r)))}(t,e.tapScriptSig,n)));if(!r)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return r}(t,e,n);try{const e=function(e,t){const n=(0,a.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter((e=>e.leafHash.equals(n))).map((e=>function(e,t){return Object.assign({positionInScript:(0,o.pubkeyPositionInScript)(t.pubkey,e)},t)}(t.script,e))).sort(((e,t)=>t.positionInScript-e.positionInScript)).map((e=>e.signature))}(t,r),n=e.concat(r.script).concat(r.controlBlock);return{finalScriptWitness:(0,o.witnessStackToScriptWitness)(n)}}catch(t){throw new Error(`Can not finalize taproot input #${e}: ${t}`)}},t.serializeTaprootSignature=function(e,t){const n=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,n])},t.isTaprootInput=u,t.isTaprootOutput=l,t.checkTaprootInputFields=function(e,t,n){!function(e,t,n){const r=u(e)&&g(t),i=g(e)&&u(t),o=e===t&&u(t)&&g(t);if(r||i||o)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}(e,t,n),function(e,t,n){if(t.tapMerkleRoot){const r=(t.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot))),i=(e.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot)));if(!r||!i)throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot){if(!(t.tapLeafScript||[]).every((t=>y(t,e.tapMerkleRoot))))throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}}(e,t,n)},t.checkTaprootOutputFields=function(e,t,n){!function(e,t,n){const r=l(e)&&g(t),i=g(e)&&l(t),o=e===t&&l(t)&&g(t);if(r||i||o)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}(e,t,n),function(e,t){if(!t.tapTree&&!t.tapInternalKey)return;const n=t.tapInternalKey||e.tapInternalKey,r=t.tapTree||e.tapTree;if(n){const{script:t}=e,i=function(e,t){const n=t&&f(t.leaves),{output:r}=(0,s.p2tr)({internalPubkey:e,scriptTree:n});return r}(n,r);if(t&&!t.equals(i))throw new Error("Error adding output. Script or address missmatch.")}}(e,t)},t.tweakInternalPubKey=function(e,t){const n=t.tapInternalKey,r=n&&(0,a.tweakKey)(n,t.tapMerkleRoot);if(!r)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${n&&n.toString("hex")}`);return r.x},t.tapTreeToList=function(e){if(!(0,r.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return d(e)},t.tapTreeFromList=f,t.checkTaprootInputForSigs=function(e,t){return function(e){const t=[];e.tapKeySig&&t.push(e.tapKeySig);e.tapScriptSig&&t.push(...e.tapScriptSig.map((e=>e.signature)));if(!t.length){const n=function(e){if(!e)return;const t=e.slice(2);if(64===t.length||65===t.length)return t}(e.finalScriptWitness);n&&t.push(n)}return t}(e).some((e=>(0,c.signatureBlocksAction)(e,h,t)))}},87929:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signatureBlocksAction=t.checkInputForSig=t.pubkeyInScript=t.pubkeyPositionInScript=t.witnessStackToScriptWitness=t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0;const r=n(3493),i=n(73357),o=n(82737),a=n(5525),s=n(84972);function c(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function u(e,t){const n=(0,a.hash160)(e),r=e.slice(1,33),o=i.decompile(t);if(null===o)throw new Error("Unknown script error");return o.findIndex((t=>"number"!=typeof t&&(t.equals(e)||t.equals(n)||t.equals(r))))}function l(e,t,n){const{hashType:r}=t(e),i=[];r&o.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput");switch(31&r){case o.Transaction.SIGHASH_ALL:break;case o.Transaction.SIGHASH_SINGLE:case o.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return-1===i.indexOf(n)}t.isP2MS=c(s.p2ms),t.isP2PK=c(s.p2pk),t.isP2PKH=c(s.p2pkh),t.isP2WPKH=c(s.p2wpkh),t.isP2WSHScript=c(s.p2wsh),t.isP2SHScript=c(s.p2sh),t.isP2TR=c(s.p2tr),t.witnessStackToScriptWitness=function(e){let buffer=Buffer.allocUnsafe(0);function t(e){const t=buffer.length,n=r.encodingLength(e);buffer=Buffer.concat([buffer,Buffer.allocUnsafe(n)]),r.encode(e,buffer,t)}function n(e){t(e.length),function(e){buffer=Buffer.concat([buffer,Buffer.from(e)])}(e)}var i;return t((i=e).length),i.forEach(n),buffer},t.pubkeyPositionInScript=u,t.pubkeyInScript=function(e,t){return-1!==u(e,t)},t.checkInputForSig=function(e,t){return function(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=function(e){const t=e.finalScriptSig&&i.decompile(e.finalScriptSig)||[],n=e.finalScriptWitness&&i.decompile(e.finalScriptWitness)||[];return t.concat(n).filter((e=>Buffer.isBuffer(e)&&i.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else t=e.partialSig;return t.map((e=>e.signature))}(e).some((e=>l(e,i.signature.decode,t)))},t.signatureBlocksAction=l},79937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodingLength=void 0;const r=n(47334);function i(e){return e<r.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}t.encodingLength=i,t.encode=function(buffer,e,t){const n=i(e);return 1===n?buffer.writeUInt8(e,t):2===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA1,t),buffer.writeUInt8(e,t+1)):3===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA2,t),buffer.writeUInt16LE(e,t+1)):(buffer.writeUInt8(r.OPS.OP_PUSHDATA4,t),buffer.writeUInt32LE(e,t+1)),n},t.decode=function(buffer,e){const t=buffer.readUInt8(e);let n,i;if(t<r.OPS.OP_PUSHDATA1)n=t,i=1;else if(t===r.OPS.OP_PUSHDATA1){if(e+2>buffer.length)return null;n=buffer.readUInt8(e+1),i=2}else if(t===r.OPS.OP_PUSHDATA2){if(e+3>buffer.length)return null;n=buffer.readUInt16LE(e+1),i=3}else{if(e+5>buffer.length)return null;if(t!==r.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=buffer.readUInt32LE(e+1),i=5}return{opcode:t,number:n,size:i}}},73357:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.countNonPushOnlyOPs=t.isPushOnly=t.OPS=void 0;const r=n(77617),i=n(47334);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return i.OPS}});const o=n(79937),a=n(45815),s=n(24362),c=n(41838),{typeforce:u}=c,l=i.OPS.OP_RESERVED;function f(e){return c.Buffer(e)||function(e){return c.Number(e)&&(e===i.OPS.OP_0||e>=i.OPS.OP_1&&e<=i.OPS.OP_16||e===i.OPS.OP_1NEGATE)}(e)}function h(e){return c.Array(e)&&e.every(f)}function d(buffer){return 0===buffer.length?i.OPS.OP_0:1===buffer.length?buffer[0]>=1&&buffer[0]<=16?l+buffer[0]:129===buffer[0]?i.OPS.OP_1NEGATE:void 0:void 0}function p(e){return Buffer.isBuffer(e)}function y(e){return Buffer.isBuffer(e)}function g(e){if(p(e))return e;u(c.Array,e);const t=e.reduce(((e,t)=>y(t)?1===t.length&&void 0!==d(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1),0),buffer=Buffer.allocUnsafe(t);let n=0;if(e.forEach((e=>{if(y(e)){const t=d(e);if(void 0!==t)return buffer.writeUInt8(t,n),void(n+=1);n+=o.encode(buffer,e.length,n),e.copy(buffer,n),n+=e.length}else buffer.writeUInt8(e,n),n+=1})),n!==buffer.length)throw new Error("Could not decode chunks");return buffer}function b(buffer){if(e=buffer,c.Array(e))return buffer;var e;u(c.Buffer,buffer);const t=[];let n=0;for(;n<buffer.length;){const e=buffer[n];if(e>i.OPS.OP_0&&e<=i.OPS.OP_PUSHDATA4){const e=o.decode(buffer,n);if(null===e)return null;if(n+=e.size,n+e.number>buffer.length)return null;const r=buffer.slice(n,n+e.number);n+=e.number;const i=d(r);void 0!==i?t.push(i):t.push(r)}else t.push(e),n+=1}return t}function m(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=h,t.countNonPushOnlyOPs=function(e){return e.length-e.filter(f).length},t.compile=g,t.decompile=b,t.toASM=function(e){return p(e)&&(e=b(e)),e.map((e=>{if(y(e)){const t=d(e);if(void 0===t)return e.toString("hex");e=t}return i.REVERSE_OPS[e]})).join(" ")},t.fromASM=function(e){return u(c.String,e),g(e.split(" ").map((e=>void 0!==i.OPS[e]?i.OPS[e]:(u(c.Hex,e),Buffer.from(e,"hex")))))},t.toStack=function(e){return e=b(e),u(h,e),e.map((e=>y(e)?e:e===i.OPS.OP_0?Buffer.allocUnsafe(0):a.encode(e-l)))},t.isCanonicalPubKey=function(buffer){return c.isPoint(buffer)},t.isDefinedHashType=m,t.isCanonicalScriptSignature=function(buffer){return!!Buffer.isBuffer(buffer)&&(!!m(buffer[buffer.length-1])&&r.check(buffer.slice(0,-1)))},t.number=a,t.signature=s},45815:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0,t.decode=function(buffer,e,t){e=e||4,t=void 0===t||t;const n=buffer.length;if(0===n)return 0;if(n>e)throw new TypeError("Script number overflow");if(t&&0==(127&buffer[n-1])&&(n<=1||0==(128&buffer[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const e=buffer.readUInt32LE(0),t=buffer.readUInt8(4);return 128&t?-(4294967296*(-129&t)+e):4294967296*t+e}let r=0;for(let e=0;e<n;++e)r|=buffer[e]<<8*e;return 128&buffer[n-1]?-(r&~(128<<8*(n-1))):r},t.encode=function(e){let t=Math.abs(e);const n=(r=t)>2147483647?5:r>8388607?4:r>32767?3:r>127?2:r>0?1:0;var r;const buffer=Buffer.allocUnsafe(n),i=e<0;for(let e=0;e<n;++e)buffer.writeUInt8(255&t,e),t>>=8;return 128&buffer[n-1]?buffer.writeUInt8(i?128:0,n-1):i&&(buffer[n-1]|=128),buffer}},24362:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;const r=n(77617),i=n(41838),{typeforce:o}=i,a=Buffer.alloc(1,0);function s(e){let t=0;for(;0===e[t];)++t;return t===e.length?a:128&(e=e.slice(t))[0]?Buffer.concat([a,e],1+e.length):e}function c(e){0===e[0]&&(e=e.slice(1));const buffer=Buffer.alloc(32,0),t=Math.max(0,32-e.length);return e.copy(buffer,t),buffer}t.decode=function(buffer){const e=buffer.readUInt8(buffer.length-1),t=-129&e;if(t<=0||t>=4)throw new Error("Invalid hashType "+e);const n=r.decode(buffer.slice(0,-1)),i=c(n.r),o=c(n.s);return{signature:Buffer.concat([i,o],64),hashType:e}},t.encode=function(e,t){o({signature:i.BufferN(64),hashType:i.UInt8},{signature:e,hashType:t});const n=-129&t;if(n<=0||n>=4)throw new Error("Invalid hashType "+t);const a=Buffer.allocUnsafe(1);a.writeUInt8(t,0);const c=s(e.slice(0,32)),u=s(e.slice(32,64));return Buffer.concat([r.encode(c,u),a])}},82737:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const r=n(9357),i=n(5525),o=n(73357),a=n(73357),s=n(41838),{typeforce:c}=s;function u(e){const t=e.length;return r.varuint.encodingLength(t)+t}const l=Buffer.allocUnsafe(0),f=[],h=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),d=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),p=Buffer.from("ffffffffffffffff","hex"),y={script:l,valueBuffer:p};class g{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(buffer,e){const t=new r.BufferReader(buffer),n=new g;n.version=t.readInt32();const i=t.readUInt8(),o=t.readUInt8();let a=!1;i===g.ADVANCED_TRANSACTION_MARKER&&o===g.ADVANCED_TRANSACTION_FLAG?a=!0:t.offset-=2;const s=t.readVarInt();for(let e=0;e<s;++e)n.ins.push({hash:t.readSlice(32),index:t.readUInt32(),script:t.readVarSlice(),sequence:t.readUInt32(),witness:f});const c=t.readVarInt();for(let e=0;e<c;++e)n.outs.push({value:t.readUInt64(),script:t.readVarSlice()});if(a){for(let e=0;e<s;++e)n.ins[e].witness=t.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=t.readUInt32(),e)return n;if(t.offset!==buffer.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return g.fromBuffer(Buffer.from(e,"hex"),!1)}static isCoinbaseHash(buffer){c(s.Hash256bit,buffer);for(let e=0;e<32;++e)if(0!==buffer[e])return!1;return!0}isCoinbase(){return 1===this.ins.length&&g.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,n,r){return c(s.tuple(s.Hash256bit,s.UInt32,s.maybe(s.UInt32),s.maybe(s.Buffer)),arguments),s.Null(n)&&(n=g.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:r||l,sequence:n,witness:f})-1}addOutput(e,t){return c(s.tuple(s.Buffer,s.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+r.varuint.encodingLength(this.ins.length)+r.varuint.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+u(t.script)),0)+this.outs.reduce(((e,t)=>e+8+u(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function(e){const t=e.length;return r.varuint.encodingLength(t)+e.reduce(((e,t)=>e+u(t)),0)}(t.witness)),0):0)}clone(){const e=new g;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,n){if(c(s.tuple(s.UInt32,s.Buffer,s.Number),arguments),e>=this.ins.length)return d;const r=o.compile(o.decompile(t).filter((e=>e!==a.OPS.OP_CODESEPARATOR))),u=this.clone();if((31&n)===g.SIGHASH_NONE)u.outs=[],u.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}));else if((31&n)===g.SIGHASH_SINGLE){if(e>=this.outs.length)return d;u.outs.length=e+1;for(let t=0;t<e;t++)u.outs[t]=y;u.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}))}n&g.SIGHASH_ANYONECANPAY?(u.ins=[u.ins[e]],u.ins[0].script=r):(u.ins.forEach((e=>{e.script=l})),u.ins[e].script=r);const buffer=Buffer.allocUnsafe(u.byteLength(!1)+4);return buffer.writeInt32LE(n,buffer.length-4),u.__toBuffer(buffer,0,!1),i.hash256(buffer)}hashForWitnessV1(e,t,n,o,a,f){if(c(s.tuple(s.UInt32,c.arrayOf(s.Buffer),c.arrayOf(s.Satoshi),s.UInt32),arguments),n.length!==this.ins.length||t.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const h=o===g.SIGHASH_DEFAULT?g.SIGHASH_ALL:o&g.SIGHASH_OUTPUT_MASK,d=(o&g.SIGHASH_INPUT_MASK)===g.SIGHASH_ANYONECANPAY,p=h===g.SIGHASH_NONE,y=h===g.SIGHASH_SINGLE;let b=l,m=l,w=l,v=l,_=l;if(!d){let e=r.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)})),b=i.sha256(e.end()),e=r.BufferWriter.withCapacity(8*this.ins.length),n.forEach((t=>e.writeUInt64(t))),m=i.sha256(e.end()),e=r.BufferWriter.withCapacity(t.map(u).reduce(((e,t)=>e+t))),t.forEach((t=>e.writeVarSlice(t))),w=i.sha256(e.end()),e=r.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach((t=>e.writeUInt32(t.sequence))),v=i.sha256(e.end())}if(p||y){if(y&&e<this.outs.length){const t=this.outs[e],n=r.BufferWriter.withCapacity(8+u(t.script));n.writeUInt64(t.value),n.writeVarSlice(t.script),_=i.sha256(n.end())}}else{const e=this.outs.map((e=>8+u(e.script))).reduce(((e,t)=>e+t)),t=r.BufferWriter.withCapacity(e);this.outs.forEach((e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)})),_=i.sha256(t.end())}const E=(a?2:0)+(f?1:0),S=174-(d?49:0)-(p?32:0)+(f?32:0)+(a?37:0),k=r.BufferWriter.withCapacity(S);if(k.writeUInt8(o),k.writeInt32(this.version),k.writeUInt32(this.locktime),k.writeSlice(b),k.writeSlice(m),k.writeSlice(w),k.writeSlice(v),p||y||k.writeSlice(_),k.writeUInt8(E),d){const r=this.ins[e];k.writeSlice(r.hash),k.writeUInt32(r.index),k.writeUInt64(n[e]),k.writeVarSlice(t[e]),k.writeUInt32(r.sequence)}else k.writeUInt32(e);if(f){const e=r.BufferWriter.withCapacity(u(f));e.writeVarSlice(f),k.writeSlice(i.sha256(e.end()))}return y&&k.writeSlice(_),a&&(k.writeSlice(a),k.writeUInt8(0),k.writeUInt32(4294967295)),i.taggedHash("TapSighash",Buffer.concat([Buffer.from([0]),k.end()]))}hashForWitnessV0(e,t,n,o){c(s.tuple(s.UInt32,s.Buffer,s.Satoshi,s.UInt32),arguments);let a,l=Buffer.from([]),f=h,d=h,p=h;if(o&g.SIGHASH_ANYONECANPAY||(l=Buffer.allocUnsafe(36*this.ins.length),a=new r.BufferWriter(l,0),this.ins.forEach((e=>{a.writeSlice(e.hash),a.writeUInt32(e.index)})),d=i.hash256(l)),o&g.SIGHASH_ANYONECANPAY||(31&o)===g.SIGHASH_SINGLE||(31&o)===g.SIGHASH_NONE||(l=Buffer.allocUnsafe(4*this.ins.length),a=new r.BufferWriter(l,0),this.ins.forEach((e=>{a.writeUInt32(e.sequence)})),p=i.hash256(l)),(31&o)!==g.SIGHASH_SINGLE&&(31&o)!==g.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+u(t.script)),0);l=Buffer.allocUnsafe(e),a=new r.BufferWriter(l,0),this.outs.forEach((e=>{a.writeUInt64(e.value),a.writeVarSlice(e.script)})),f=i.hash256(l)}else if((31&o)===g.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];l=Buffer.allocUnsafe(8+u(t.script)),a=new r.BufferWriter(l,0),a.writeUInt64(t.value),a.writeVarSlice(t.script),f=i.hash256(l)}l=Buffer.allocUnsafe(156+u(t)),a=new r.BufferWriter(l,0);const y=this.ins[e];return a.writeInt32(this.version),a.writeSlice(d),a.writeSlice(p),a.writeSlice(y.hash),a.writeUInt32(y.index),a.writeVarSlice(t),a.writeUInt64(n),a.writeUInt32(y.sequence),a.writeSlice(f),a.writeUInt32(this.locktime),a.writeUInt32(o),i.hash256(l)}getHash(e){return e&&this.isCoinbase()?Buffer.alloc(32,0):i.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,r.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(buffer,e){return this.__toBuffer(buffer,e,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){c(s.tuple(s.Number,s.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){c(s.tuple(s.Number,[s.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(buffer,e,t=!1){buffer||(buffer=Buffer.allocUnsafe(this.byteLength(t)));const n=new r.BufferWriter(buffer,e||0);n.writeInt32(this.version);const i=t&&this.hasWitnesses();return i&&(n.writeUInt8(g.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(g.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach((e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)})),n.writeVarInt(this.outs.length),this.outs.forEach((e=>{void 0!==e.value?n.writeUInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)})),i&&this.ins.forEach((e=>{n.writeVector(e.witness)})),n.writeUInt32(this.locktime),void 0!==e?buffer.slice(e,n.offset):buffer}}t.Transaction=g,g.DEFAULT_SEQUENCE=4294967295,g.SIGHASH_DEFAULT=0,g.SIGHASH_ALL=1,g.SIGHASH_NONE=2,g.SIGHASH_SINGLE=3,g.SIGHASH_ANYONECANPAY=128,g.SIGHASH_OUTPUT_MASK=3,g.SIGHASH_INPUT_MASK=128,g.ADVANCED_TRANSACTION_MARKER=0,g.ADVANCED_TRANSACTION_FLAG=1},41838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Network=t.ECPoint=t.Satoshi=t.Signer=t.BIP32Path=t.UInt31=t.isPoint=t.typeforce=void 0;const r=n(48764);t.typeforce=n(2401);const i=r.Buffer.alloc(32,0),o=r.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");t.isPoint=function(e){if(!r.Buffer.isBuffer(e))return!1;if(e.length<33)return!1;const t=e[0],n=e.slice(1,33);if(0===n.compare(i))return!1;if(n.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;const a=e.slice(33);return 0!==a.compare(i)&&(!(a.compare(o)>=0)&&(4===t&&65===e.length))};const a=Math.pow(2,31)-1;function s(e){return t.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return t.typeforce.UInt32(e)&&e<=a},t.BIP32Path=s,s.toJSON=()=>"BIP32 derivation path",t.Signer=function(e){return(t.typeforce.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign};function c(e){return!(!e||!("output"in e))&&(!!r.Buffer.isBuffer(e.output)&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version))}t.Satoshi=function(e){return t.typeforce.UInt53(e)&&e<=21e14},t.ECPoint=t.typeforce.quacksLike("Point"),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.TAPLEAF_VERSION_MASK=254,t.isTapleaf=c,t.isTaptree=function e(n){return(0,t.Array)(n)?2===n.length&&n.every((t=>e(t))):c(n)},t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf},53288:function(e,t){var n;!function(r){"use strict";var i=32,o=5;function a(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}function s(e,t){for(var n=0,r=0;r<e.length;r++){n*=2;var i=(e[r]+n)/t|0;n=(e[r]+n)%t,e[r]=i}return n}function c(e,t){if(null==t)return e.data=[0,0,0,0,0,0,0,0,0,0],void(e._=0);if(t instanceof u)return e.data=t.data,void(e._=t._);switch(typeof t){case"number":e.data=[0|t],e._=0;break;case"string":var n=2,r=i;0===t.indexOf("0b")?t=t.substr(2):0===t.indexOf("0x")&&(t=t.substr(2),n=16,r=8),e.data=[],e._=0;for(var a=t.length-r,s=t.length;;){var c=parseInt(t.slice(a>0?a:0,s),n);if(isNaN(c))throw SyntaxError("Invalid param");if(e.data.push(0|c),a<=0)break;a-=r,s-=r}break;default:e.data=[0];var f=e.data;if(t instanceof Array){for(var h=t.length-1;h>=0;h--){var d=t[h];d===1/0?e._=-1:(l(e,d),f[d>>>o]|=1<<d)}break}if(Uint8Array&&t instanceof Uint8Array){l(e,8*t.length);for(h=0;h<t.length;h++)for(var p=t[h],y=0;y<8;y++){var g=8*h+y;f[g>>>o]|=(p>>y&1)<<g}break}throw SyntaxError("Invalid param")}}function u(e){if(!(this instanceof u))return new u(e);c(this,e),this.data=this.data.slice()}function l(e,t){for(var n=t>>>o,r=e.data,i=e._,a=r.length;n>=a;n--)r.push(i)}var f={data:[],_:0};u.prototype={data:[],_:0,set:function(e,t){return l(this,e|=0),void 0===t||t?this.data[e>>>o]|=1<<e:this.data[e>>>o]&=~(1<<e),this},get:function(e){e|=0;var t=this.data,n=e>>>o;return n>=t.length?1&this._:t[n]>>>e&1},not:function(){for(var e=this.clone(),t=e.data,n=0;n<t.length;n++)t[n]=~t[n];return e._=~e._,e},and:function(e){c(f,e);var t=this.clone(),n=t.data,r=f.data,o=r.length,a=f._;0!==t._&&l(t,o*i-1);for(var s=n.length,u=Math.min(o,s),h=0;h<u;h++)n[h]&=r[h];for(;h<s;h++)n[h]&=a;return t._&=a,t},or:function(e){c(f,e);for(var t=this.clone(),n=t.data,r=f.data,i=r.length-1,o=n.length-1,a=Math.min(o,i),s=i;s>a;s--)n[s]=r[s];for(;s>=0;s--)n[s]|=r[s];return t._|=f._,t},xor:function(e){c(f,e);var t=this.clone(),n=t.data,r=f.data,i=t._,o=f._,a=0,s=n.length-1,u=r.length-1;for(a=s;a>u;a--)n[a]^=o;for(a=u;a>s;a--)n[a]=i^r[a];for(;a>=0;a--)n[a]^=r[a];return t._^=o,t},andNot:function(e){return this.and(new u(e).flip())},flip:function(e,t){if(void 0===e){for(var n=this.data,r=0;r<n.length;r++)n[r]=~n[r];this._=~this._}else if(void 0===t)l(this,e),this.data[e>>>o]^=1<<e;else if(0<=e&&e<=t){l(this,t);for(r=e;r<=t;r++)this.data[r>>>o]^=1<<r}return this},clear:function(e,t){var n=this.data;if(void 0===e){for(var r=n.length-1;r>=0;r--)n[r]=0;this._=0}else if(void 0===t)l(this,e|=0),n[e>>>o]&=~(1<<e);else if(e<=t){l(this,t);for(r=e;r<=t;r++)n[r>>>o]&=~(1<<r)}return this},slice:function(e,t){if(void 0===e)return this.clone();if(void 0===t){t=this.data.length*i,(r=Object.create(u.prototype))._=this._,r.data=[0];for(var n=e;n<=t;n++)r.set(n-e,this.get(n));return r}if(e<=t&&0<=e){var r;(r=Object.create(u.prototype)).data=[0];for(n=e;n<=t;n++)r.set(n-e,this.get(n));return r}return null},setRange:function(e,t,n){for(var r=e;r<=t;r++)this.set(r,n);return this},clone:function(){var e=Object.create(u.prototype);return e.data=this.data.slice(),e._=this._,e},toArray:Math.clz32?function(){for(var e=[],t=this.data,n=t.length-1;n>=0;n--)for(var r=t[n];0!==r;){var o=31-Math.clz32(r);r^=1<<o,e.unshift(n*i+o)}return 0!==this._&&e.push(1/0),e}:function(){for(var e=[],t=this.data,n=0;n<t.length;n++)for(var r=t[n];0!==r;){var o=r&-r;r^=o,e.push(n*i+a(o-1))}return 0!==this._&&e.push(1/0),e},toString:function(e){var t=this.data;if(e||(e=2),0==(e&e-1)&&e<36){for(var n="",r=2+Math.log(4294967295)/Math.log(e)|0,o=t.length-1;o>=0;o--){var a=t[o];a<0&&(a+=4294967296);var c=a.toString(e);""!==n&&(n+="0".repeat(r-c.length-1)),n+=c}return 0===this._?(""===(n=n.replace(/^0+/,""))&&(n="0"),n):(n="1111"+n).replace(/^1+/,"...1111")}if(2>e||e>36)throw SyntaxError("Invalid base");n=[];var u=[];for(o=t.length;o--;)for(var l=i;l--;)u.push(t[o]>>>l&1);do{n.unshift(s(u,e).toString(e))}while(!u.every((function(e){return 0===e})));return n.join("")},isEmpty:function(){if(0!==this._)return!1;for(var e=this.data,t=e.length-1;t>=0;t--)if(0!==e[t])return!1;return!0},cardinality:function(){if(0!==this._)return 1/0;for(var e=0,t=this.data,n=0;n<t.length;n++){var r=t[n];0!==r&&(e+=a(r))}return e},msb:Math.clz32?function(){if(0!==this._)return 1/0;for(var e=this.data,t=e.length;t-- >0;){var n=Math.clz32(e[t]);if(n!==i)return t*i+i-1-n}return 1/0}:function(){if(0!==this._)return 1/0;for(var e=this.data,t=e.length;t-- >0;){var n=e[t],r=0;if(n){for(;(n>>>=1)>0;r++);return t*i+r}}return 1/0},ntz:function(){for(var e=this.data,t=0;t<e.length;t++){var n=e[t];if(0!==n)return t*i+a(n=(n^n-1)>>>1)}return 1/0},lsb:function(){for(var e=this.data,t=0;t<e.length;t++){var n=e[t],r=0;if(n){for(var o=n&-n;o>>>=1;r++);return i*t+r}}return 1&this._},equals:function(e){c(f,e);var t=this.data,n=f.data,r=this._,i=f._,o=t.length-1,a=n.length-1;if(i!==r)return!1;for(var s=o<a?o:a,u=0;u<=s;u++)if(t[u]!==n[u])return!1;for(u=o;u>a;u--)if(t[u]!==i)return!1;for(u=a;u>o;u--)if(n[u]!==r)return!1;return!0},[Symbol.iterator]:function(){var e=this.data,t=0;if(0===this._){for(var n=0,r=e.length-1;r>=0;r--)if(0!==e[r]){n=r;break}return{next:function(){var r=t>>>o;return{done:r>n||r===n&&e[r]>>>t==0,value:r>n?0:e[r]>>>t++&1}}}}return{next:function(){var n=t>>>o;return{done:!1,value:n<e.length?e[n]>>>t++&1:1}}}}},u.fromBinaryString=function(e){return new u("0b"+e)},u.fromHexString=function(e){return new u("0x"+e)},u.Random=function(e){(void 0===e||e<0)&&(e=i);for(var t=e%i,n=[],r=Math.ceil(e/i),o=Object.create(u.prototype),a=0;a<r;a++)n.push(4294967296*Math.random()|0);return t>0&&(n[r-1]&=(1<<t)-1),o.data=n,o._=0,o},void 0===(n=function(){return u}.apply(t,[]))||(e.exports=n)}()},45982:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(43720))&&"object"==typeof r&&"default"in r?r.default:r;function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r){if(t<1||t>8||n<1||t>8)throw new Error("only bits groups between 1 and 8 are allowed");for(var i,a=[],s=0,c=0,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,void 0):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(i=u()).done;)for(var l=i.value<<8-t,f=t;f>0;){var h=n-c,d=f;h<d&&(d=h),s=s<<d|l>>8-d,l=(l<<d)%256,f-=d,(c+=d)===n&&(a.push(s),c=0,s=0)}if(r&&c>0&&(a.push(s<<=n-c),c=0,s=0),c>0&&(c>4||0!==s))throw new Error("invalid incomplete group of bits");return a}function s(e){if(e<0||e>16)throw new Error("invalid witness version")}var c="qpzry9x8gf2tvdw0s3jn54khce6mua7l";function u(e){return i.fromString(e,!0,16)}var l=["7d52fba40bd886","5e8dbf1a03950c","1c3a3c74072a18","385d72fa0e5139","7093e5a608865b"].map(u);function f(e){if(s(e),0===e)return"blech32";if(1===e)return"blech32m";throw new Error("Unsuported witness version ("+e+"), only 0 (blech32) or 1 (blech32m) are supported")}function h(e){if("blech32"===e)return i.fromNumber(1);if("blech32m"===e)return u("455972a3350f7a1");throw new Error("Invalid encoding type")}function d(e){for(var t=i.fromNumber(1),n=0;n<e.length;++n){var r=t.shiftRight(55);t=t.and(u("7fffffffffffff")).shiftLeft(5).xor(e[n]);for(var o=0;o<5;o++)r.shiftRight(i.fromNumber(o)).and(1).equals(1)&&(t=t.xor(l[o]))}return t}function p(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)>>5);t.push(0);for(var r=0;r<e.length;++r)t.push(31&e.charCodeAt(r));return Uint8Array.from(t)}var y=[0,0,0,0,0,0,0,0,0,0,0,0];function g(e,t,n){for(var r=function(e,t,n){for(var r=d(Array.from(p(e)).concat(Array.from(t)).concat(y)).xor(h(n)),i=[],o=0;o<12;++o)i.push(r.shiftRight(5*(11-o)).and(31));return i.map((function(e){return e.toInt()}))}(e,t,n),i=Array.from(t).concat(r),o=e+"1",a=0;a<i.length;++a)o+=c.charAt(i[a]);return o}function b(e,t){for(var n=!1,r=!1,i=0;i<e.length;++i){if(e.charCodeAt(i)<33||e.charCodeAt(i)>126)throw new Error("Invalid charcode in blech32 string");e.charCodeAt(i)>=97&&e.charCodeAt(i)<=122&&(n=!0),e.charCodeAt(i)>=65&&e.charCodeAt(i)<=90&&(r=!0)}if(n&&r)throw new Error("blech32 has lowercases AND uppercases");var o=(e=e.toLowerCase()).lastIndexOf("1");if(o<1||o+13>e.length)throw new Error('Invalid index of "1"');for(var a=e.substring(0,o),s=[],u=o+1;u<e.length;++u){var l=c.indexOf(e.charAt(u));if(-1===l)throw new Error('"'+e.charAt(u)+'" is not allowed in blech32 strings');s.push(l)}if(!function(e,t,n){return d(Array.from(p(e)).concat(t)).equals(h(n))}(a,s,t))throw new Error("invalid "+t+' checksum "'+e+'"');return{hrp:a,data:Uint8Array.from(s.slice(0,s.length-12))}}var m=function(){function e(e){this.witness=e.witness,this.blindingPublicKey=e.blindingPublicKey,this.witnessVersion=e.witnessVersion,this.address=function(e){var t=e.witness,n=e.witnessVersion,r=e.blindingPublicKey,i=e.hrp;s(n);var o=Buffer.concat([Buffer.from(r,"hex"),Buffer.from(t,"hex")]),c=o.length;if(0===n&&53!==c&&65!==c)throw new Error("witness version 0 needs witness program length = 53 OR = 65");if(c<2||c>65)throw new Error("witness program length should be >= 2 and <= 65");var u=[n].concat(a(Array.from(o),8,5,!0));return g(i,Uint8Array.from(u),f(u[0]))}(e)}return e.from=function(t,n,r,i){return new e({witness:t,witnessVersion:i,blindingPublicKey:n,hrp:r})},e.fromString=function(t,n){return new e(function(e,t){var n=b(e,t),r=n.hrp,i=n.data,o=i[0];if(s(o),0===i.length||i.length>1e3)throw new Error("Invalid data length");var c=a(Array.from(i.slice(1)),5,8,!1);if(c.length<2||c.length>65)throw new Error("Invalid witness data length");if(0===i[0]&&53!==c.length&&65!==c.length)throw new Error("Invalid witness data length for witness version 0");var u=Buffer.from(c.slice(0,33)).toString("hex");return{witness:Buffer.from(c.slice(33)).toString("hex"),blindingPublicKey:u,witnessVersion:o,hrp:r}}(t,n))},e}();t.BLECH32="blech32",t.BLECH32M="blech32m",t.Blech32Address=m,t.MAX_LEN=1e3,t.decode=b,t.encode=g,t.getEncodingType=f},93726:(e,t,n)=>{"use strict";e.exports=n(45982)},13550:function(e,t,n){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var Buffer;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{Buffer="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(46601).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function s(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=s(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=s(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,c=a/67108864|0;n.words[0]=s;for(var u=1;u<r;u++){for(var l=c>>>26,f=67108863&c,h=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=h;d++){var p=u-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+f)/67108864|0,f=67108863&a}n.words[u]=0|f,c=0|l}return 0!==c?n.words[u]=0|c:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],c=(16777215&(s<<i|o)).toString(16);n=0!==(o=s>>>24-i&16777215)||a!==this.length-1?u[6-c.length]+c+n:c+n,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],d=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var y=p.modn(d).toString(e);n=(p=p.idivn(d)).isZero()?y+n:u[h-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==Buffer),this.toArrayLike(Buffer,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,c="le"===t,u=new e(o),l=this.clone();if(c){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),u[s]=a;for(;s<o;s++)u[s]=0}else{for(s=0;s<o-i;s++)u[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),u[o-s-1]=a}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,n){var r,i,o,a=e.words,s=t.words,c=n.words,u=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,y=d>>>13,g=0|a[2],b=8191&g,m=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,k=E>>>13,A=0|a[5],O=8191&A,P=A>>>13,I=0|a[6],T=8191&I,x=I>>>13,N=0|a[7],R=8191&N,C=N>>>13,B=0|a[8],L=8191&B,U=B>>>13,j=0|a[9],D=8191&j,M=j>>>13,H=0|s[0],F=8191&H,z=H>>>13,K=0|s[1],q=8191&K,V=K>>>13,W=0|s[2],G=8191&W,$=W>>>13,Y=0|s[3],Z=8191&Y,X=Y>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ce=8191&se,ue=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ye=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(u+(r=Math.imul(f,F))|0)+((8191&(i=(i=Math.imul(f,z))+Math.imul(h,F)|0))<<13)|0;u=((o=Math.imul(h,z))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,F),i=(i=Math.imul(p,z))+Math.imul(y,F)|0,o=Math.imul(y,z);var be=(u+(r=r+Math.imul(f,q)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(h,q)|0))<<13)|0;u=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,F),i=(i=Math.imul(b,z))+Math.imul(m,F)|0,o=Math.imul(m,z),r=r+Math.imul(p,q)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,V)|0;var me=(u+(r=r+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,$)|0)+Math.imul(h,G)|0))<<13)|0;u=((o=o+Math.imul(h,$)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(v,F),i=(i=Math.imul(v,z))+Math.imul(_,F)|0,o=Math.imul(_,z),r=r+Math.imul(b,q)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,V)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,$)|0;var we=(u+(r=r+Math.imul(f,Z)|0)|0)+((8191&(i=(i=i+Math.imul(f,X)|0)+Math.imul(h,Z)|0))<<13)|0;u=((o=o+Math.imul(h,X)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(S,F),i=(i=Math.imul(S,z))+Math.imul(k,F)|0,o=Math.imul(k,z),r=r+Math.imul(v,q)|0,i=(i=i+Math.imul(v,V)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,V)|0,r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,$)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,$)|0,r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,X)|0;var ve=(u+(r=r+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,Q)|0))<<13)|0;u=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(O,F),i=(i=Math.imul(O,z))+Math.imul(P,F)|0,o=Math.imul(P,z),r=r+Math.imul(S,q)|0,i=(i=i+Math.imul(S,V)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,V)|0,r=r+Math.imul(v,G)|0,i=(i=i+Math.imul(v,$)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,$)|0,r=r+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0;var _e=(u+(r=r+Math.imul(f,ne)|0)|0)+((8191&(i=(i=i+Math.imul(f,re)|0)+Math.imul(h,ne)|0))<<13)|0;u=((o=o+Math.imul(h,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(T,F),i=(i=Math.imul(T,z))+Math.imul(x,F)|0,o=Math.imul(x,z),r=r+Math.imul(O,q)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,V)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,$)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,$)|0,r=r+Math.imul(v,Z)|0,i=(i=i+Math.imul(v,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0;var Ee=(u+(r=r+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;u=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(R,F),i=(i=Math.imul(R,z))+Math.imul(C,F)|0,o=Math.imul(C,z),r=r+Math.imul(T,q)|0,i=(i=i+Math.imul(T,V)|0)+Math.imul(x,q)|0,o=o+Math.imul(x,V)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,$)|0,r=r+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,X)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,X)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0;var Se=(u+(r=r+Math.imul(f,ce)|0)|0)+((8191&(i=(i=i+Math.imul(f,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((o=o+Math.imul(h,ue)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,F),i=(i=Math.imul(L,z))+Math.imul(U,F)|0,o=Math.imul(U,z),r=r+Math.imul(R,q)|0,i=(i=i+Math.imul(R,V)|0)+Math.imul(C,q)|0,o=o+Math.imul(C,V)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,X)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,r=r+Math.imul(v,ne)|0,i=(i=i+Math.imul(v,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(b,oe)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0,r=r+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(y,ce)|0,o=o+Math.imul(y,ue)|0;var ke=(u+(r=r+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;u=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(D,F),i=(i=Math.imul(D,z))+Math.imul(M,F)|0,o=Math.imul(M,z),r=r+Math.imul(L,q)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,V)|0,r=r+Math.imul(R,G)|0,i=(i=i+Math.imul(R,$)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,$)|0,r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(k,ne)|0,o=o+Math.imul(k,re)|0,r=r+Math.imul(v,oe)|0,i=(i=i+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(b,ce)|0,i=(i=i+Math.imul(b,ue)|0)+Math.imul(m,ce)|0,o=o+Math.imul(m,ue)|0,r=r+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(y,fe)|0,o=o+Math.imul(y,he)|0;var Ae=(u+(r=r+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ye)|0)+Math.imul(h,pe)|0))<<13)|0;u=((o=o+Math.imul(h,ye)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(D,q),i=(i=Math.imul(D,V))+Math.imul(M,q)|0,o=Math.imul(M,V),r=r+Math.imul(L,G)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(U,G)|0,o=o+Math.imul(U,$)|0,r=r+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,X)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,X)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,ae)|0,r=r+Math.imul(v,ce)|0,i=(i=i+Math.imul(v,ue)|0)+Math.imul(_,ce)|0,o=o+Math.imul(_,ue)|0,r=r+Math.imul(b,fe)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(m,fe)|0,o=o+Math.imul(m,he)|0;var Oe=(u+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ye)|0)+Math.imul(y,pe)|0))<<13)|0;u=((o=o+Math.imul(y,ye)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(D,G),i=(i=Math.imul(D,$))+Math.imul(M,G)|0,o=Math.imul(M,$),r=r+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(U,Z)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(x,ne)|0,o=o+Math.imul(x,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,r=r+Math.imul(S,ce)|0,i=(i=i+Math.imul(S,ue)|0)+Math.imul(k,ce)|0,o=o+Math.imul(k,ue)|0,r=r+Math.imul(v,fe)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(_,fe)|0,o=o+Math.imul(_,he)|0;var Pe=(u+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,ye)|0)+Math.imul(m,pe)|0))<<13)|0;u=((o=o+Math.imul(m,ye)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(D,Z),i=(i=Math.imul(D,X))+Math.imul(M,Z)|0,o=Math.imul(M,X),r=r+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(U,Q)|0,o=o+Math.imul(U,ee)|0,r=r+Math.imul(R,ne)|0,i=(i=i+Math.imul(R,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,r=r+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,ue)|0)+Math.imul(P,ce)|0,o=o+Math.imul(P,ue)|0,r=r+Math.imul(S,fe)|0,i=(i=i+Math.imul(S,he)|0)+Math.imul(k,fe)|0,o=o+Math.imul(k,he)|0;var Ie=(u+(r=r+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,ye)|0)+Math.imul(_,pe)|0))<<13)|0;u=((o=o+Math.imul(_,ye)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(D,Q),i=(i=Math.imul(D,ee))+Math.imul(M,Q)|0,o=Math.imul(M,ee),r=r+Math.imul(L,ne)|0,i=(i=i+Math.imul(L,re)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,re)|0,r=r+Math.imul(R,oe)|0,i=(i=i+Math.imul(R,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(x,ce)|0,o=o+Math.imul(x,ue)|0,r=r+Math.imul(O,fe)|0,i=(i=i+Math.imul(O,he)|0)+Math.imul(P,fe)|0,o=o+Math.imul(P,he)|0;var Te=(u+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ye)|0)+Math.imul(k,pe)|0))<<13)|0;u=((o=o+Math.imul(k,ye)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(D,ne),i=(i=Math.imul(D,re))+Math.imul(M,ne)|0,o=Math.imul(M,re),r=r+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,ae)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,ae)|0,r=r+Math.imul(R,ce)|0,i=(i=i+Math.imul(R,ue)|0)+Math.imul(C,ce)|0,o=o+Math.imul(C,ue)|0,r=r+Math.imul(T,fe)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(x,fe)|0,o=o+Math.imul(x,he)|0;var xe=(u+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,ye)|0)+Math.imul(P,pe)|0))<<13)|0;u=((o=o+Math.imul(P,ye)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(D,oe),i=(i=Math.imul(D,ae))+Math.imul(M,oe)|0,o=Math.imul(M,ae),r=r+Math.imul(L,ce)|0,i=(i=i+Math.imul(L,ue)|0)+Math.imul(U,ce)|0,o=o+Math.imul(U,ue)|0,r=r+Math.imul(R,fe)|0,i=(i=i+Math.imul(R,he)|0)+Math.imul(C,fe)|0,o=o+Math.imul(C,he)|0;var Ne=(u+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ye)|0)+Math.imul(x,pe)|0))<<13)|0;u=((o=o+Math.imul(x,ye)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(D,ce),i=(i=Math.imul(D,ue))+Math.imul(M,ce)|0,o=Math.imul(M,ue),r=r+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(U,fe)|0,o=o+Math.imul(U,he)|0;var Re=(u+(r=r+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,ye)|0)+Math.imul(C,pe)|0))<<13)|0;u=((o=o+Math.imul(C,ye)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(D,fe),i=(i=Math.imul(D,he))+Math.imul(M,fe)|0,o=Math.imul(M,he);var Ce=(u+(r=r+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ye)|0)+Math.imul(U,pe)|0))<<13)|0;u=((o=o+Math.imul(U,ye)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863;var Be=(u+(r=Math.imul(D,pe))|0)+((8191&(i=(i=Math.imul(D,ye))+Math.imul(M,pe)|0))<<13)|0;return u=((o=Math.imul(M,ye))+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,c[0]=ge,c[1]=be,c[2]=me,c[3]=we,c[4]=ve,c[5]=_e,c[6]=Ee,c[7]=Se,c[8]=ke,c[9]=Ae,c[10]=Oe,c[11]=Pe,c[12]=Ie,c[13]=Te,c[14]=xe,c[15]=Ne,c[16]=Re,c[17]=Ce,c[18]=Be,0!==u&&(c[19]=u,n.length++),n};function p(e,t,n){return(new y).mulp(e,t,n)}function y(e,t){this.x=e,this.y=t}Math.imul||(d=h),o.prototype.mulTo=function(e,t){var n,r=this.length+e.length;return n=10===this.length&&10===e.length?d(this,e,t):r<63?h(this,e,t):r<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var l=o-u,f=(0|e.words[l])*(0|t.words[u]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):p(this,e,t),n},y.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},y.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},y.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},y.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,c=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=c,h=u,d=0;d<a;d++){var p=n[l+d],y=r[l+d],g=n[l+d+a],b=r[l+d+a],m=f*g-h*b;b=f*b+h*g,g=m,n[l+d]=p+g,r[l+d]=y+b,n[l+d+a]=p-g,r[l+d+a]=y-b,d!==s&&(m=c*f-u*h,h=c*h+u*f,f=m)}},y.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},y.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},y.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},y.prototype.convert13b=function(e,t,n,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},y.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},y.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),c=new Array(r),u=new Array(r),l=new Array(r),f=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,u,r),this.transform(a,o,s,c,r,i),this.transform(u,o,l,f,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-c[d]*f[d];c[d]=s[d]*f[d]+c[d]*l[d],s[d]=p}return this.conjugate(s,c,r),this.transform(s,c,h,o,r,i),this.conjugate(h,o,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,c=(0|this.words[t])-s<<n;this.words[t]=c|a,a=s>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,c=n;if(i-=a,i=Math.max(0,i),c){for(var u=0;u<a;u++)c.words[u]=this.words[u];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var f=0|this.words[u];this.words[u]=l<<26-o|f>>>o,l=f&s}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,a=e.length+n;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+s;var c=(0|e.words[i])*t;s=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,a=0|i.words[i.length-1];0!==(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,c=r.length-i.length;if("mod"!==t){(s=new o(null)).length=c+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var l=r.clone()._ishlnsubmul(i,1,c);0===l.negative&&(r=l,s&&(s.words[c]=1));for(var f=c-1;f>=0;f--){var h=67108864*(0|r.words[i.length+f])+(0|r.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),r._ishlnsubmul(i,h,f);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,f),r.isZero()||(r.negative^=1);s&&(s.words[f]=h)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0==(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var p=0,y=1;0==(n.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(l),c.isub(f)),s.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),a.isub(c)):(n.isub(t),s.isub(i),c.isub(a))}return{a:s,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0==(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);for(var f=0,h=1;0==(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s)):(n.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new E(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(m,b),m.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},m.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,b),i(v,b),i(_,b),_.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new m;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},E.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),c=s.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var y=d,g=0;0!==y.cmp(s);g++)y=y.redSqr();r(g<p);var b=this.pow(f,new o(1).iushln(p-g-1));h=h.redMul(b),f=b.redSqr(),d=d.redMul(f),p=g}return h},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],a=0,s=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var u=t.words[r],l=c-1;l>=0;l--){var f=u>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===r&&0===l)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}c=26}return i},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},36683:e=>{"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n={},r=0;r<32;r++){var i=t.charAt(r);if(void 0!==n[i])throw new TypeError(i+" is ambiguous");n[i]=r}function o(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function a(e){for(var t=1,n=0;n<e.length;++n){var r=e.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+e+")";t=o(t)^r>>5}for(t=o(t),n=0;n<e.length;++n){var i=e.charCodeAt(n);t=o(t)^31&i}return t}function s(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),i=e.toUpperCase();if(e!==r&&e!==i)return"Mixed-case string "+e;var s=(e=r).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var c=e.slice(0,s),u=e.slice(s+1);if(u.length<6)return"Data too short";var l=a(c);if("string"==typeof l)return l;for(var f=[],h=0;h<u.length;++h){var d=u.charAt(h),p=n[d];if(void 0===p)return"Unknown character "+d;l=o(l)^p,h+6>=u.length||f.push(p)}return 1!==l?"Invalid checksum for "+e:{prefix:c,words:f}}function c(e,t,n,r){for(var i=0,o=0,a=(1<<n)-1,s=[],c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=n;)o-=n,s.push(i>>o&a);if(r)o>0&&s.push(i<<n-o&a);else{if(o>=t)return"Excess padding";if(i<<n-o&a)return"Non-zero padding"}return s}e.exports={decodeUnsafe:function(){var e=s.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=s.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,n,r){if(r=r||90,e.length+7+n.length>r)throw new TypeError("Exceeds length limit");var i=a(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var s=e+"1",c=0;c<n.length;++c){var u=n[c];if(u>>5!=0)throw new Error("Non 5-bit word");i=o(i)^u,s+=t.charAt(u)}for(c=0;c<6;++c)i=o(i);for(i^=1,c=0;c<6;++c){s+=t.charAt(i>>5*(5-c)&31)}return s},toWordsUnsafe:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},99282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bech32m=t.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={};for(let e=0;e<32;e++){const t=n.charAt(e);r[t]=e}function i(e){const t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+e+")";t=i(t)^r>>5}t=i(t);for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);t=i(t)^31&r}return t}function a(e,t,n,r){let i=0,o=0;const a=(1<<n)-1,s=[];for(let r=0;r<e.length;++r)for(i=i<<t|e[r],o+=t;o>=n;)o-=n,s.push(i>>o&a);if(r)o>0&&s.push(i<<n-o&a);else{if(o>=t)return"Excess padding";if(i<<n-o&a)return"Non-zero padding"}return s}function s(e){return a(e,8,5,!0)}function c(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t}function u(e){const t=a(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function l(e){let t;function a(e,n){if(n=n||90,e.length<8)return e+" too short";if(e.length>n)return"Exceeds length limit";const a=e.toLowerCase(),s=e.toUpperCase();if(e!==a&&e!==s)return"Mixed-case string "+e;const c=(e=a).lastIndexOf("1");if(-1===c)return"No separator character for "+e;if(0===c)return"Missing prefix for "+e;const u=e.slice(0,c),l=e.slice(c+1);if(l.length<6)return"Data too short";let f=o(u);if("string"==typeof f)return f;const h=[];for(let e=0;e<l.length;++e){const t=l.charAt(e),n=r[t];if(void 0===n)return"Unknown character "+t;f=i(f)^n,e+6>=l.length||h.push(n)}return f!==t?"Invalid checksum for "+e:{prefix:u,words:h}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const n=a(e,t);if("object"==typeof n)return n},decode:function(e,t){const n=a(e,t);if("object"==typeof n)return n;throw new Error(n)},encode:function(e,r,a){if(a=a||90,e.length+7+r.length>a)throw new TypeError("Exceeds length limit");let s=o(e=e.toLowerCase());if("string"==typeof s)throw new Error(s);let c=e+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5!=0)throw new Error("Non 5-bit word");s=i(s)^t,c+=n.charAt(t)}for(let e=0;e<6;++e)s=i(s);s^=t;for(let e=0;e<6;++e){c+=n.charAt(s>>5*(5-e)&31)}return c},toWords:s,fromWordsUnsafe:c,fromWords:u}}t.bech32=l("bech32"),t.bech32m=l("bech32m")},7336:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toOutputScript=t.fromOutputScript=t.toBech32=t.toBase58Check=t.fromBech32=t.fromBase58Check=void 0;const r=n(33967),i=n(79196),o=n(31213),a=n(47177),s=n(99282),c=n(58334),u=40,l=2,f=16,h=2,d=80,p="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function y(e){const t=c.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function g(e){let t,n;try{t=s.bech32.decode(e)}catch(e){}if(t){if(n=t.words[0],0!==n)throw new TypeError(e+" uses wrong encoding")}else if(t=s.bech32m.decode(e),n=t.words[0],0===n)throw new TypeError(e+" uses wrong encoding");const r=s.bech32.fromWords(t.words.slice(1));return{version:n,prefix:t.prefix,data:Buffer.from(r)}}function b(e,t,n){const r=s.bech32.toWords(e);return r.unshift(t),0===t?s.bech32.encode(n,r):s.bech32m.encode(n,r)}t.fromBase58Check=y,t.fromBech32=g,t.toBase58Check=function(e,t){(0,a.typeforce)((0,a.tuple)(a.Hash160bit,a.UInt8),arguments);const n=Buffer.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),c.encode(n)},t.toBech32=b,t.fromOutputScript=function(e,t){t=t||r.bitcoin;try{return i.p2pkh({output:e,network:t}).address}catch(e){}try{return i.p2sh({output:e,network:t}).address}catch(e){}try{return i.p2wpkh({output:e,network:t}).address}catch(e){}try{return i.p2wsh({output:e,network:t}).address}catch(e){}try{return i.p2tr({output:e,network:t}).address}catch(e){}try{return function(e,t){const n=e.slice(2);if(n.length<l||n.length>u)throw new TypeError("Invalid program length for segwit address");const r=e[0]-d;if(r<h||r>f)throw new TypeError("Invalid version for segwit address");if(e[1]!==n.length)throw new TypeError("Invalid script for segwit address");return console.warn(p),b(n,r,t.bech32)}(e,t)}catch(e){}throw new Error(o.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let n,a;t=t||r.bitcoin;try{n=y(e)}catch(e){}if(n){if(n.version===t.pubKeyHash)return i.p2pkh({hash:n.hash}).output;if(n.version===t.scriptHash)return i.p2sh({hash:n.hash}).output}else{try{a=g(e)}catch(e){}if(a){if(a.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===a.version){if(20===a.data.length)return i.p2wpkh({hash:a.data}).output;if(32===a.data.length)return i.p2wsh({hash:a.data}).output}else if(1===a.version){if(32===a.data.length)return i.p2tr({pubkey:a.data}).output}else if(a.version>=h&&a.version<=f&&a.data.length>=l&&a.data.length<=u)return console.warn(p),o.compile([a.version+d,a.data])}}throw new Error(e+" has no matching Script")}},77297:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=t.check=void 0,t.check=function(buffer){if(buffer.length<8)return!1;if(buffer.length>72)return!1;if(48!==buffer[0])return!1;if(buffer[1]!==buffer.length-2)return!1;if(2!==buffer[2])return!1;const e=buffer[3];if(0===e)return!1;if(5+e>=buffer.length)return!1;if(2!==buffer[4+e])return!1;const t=buffer[5+e];return 0!==t&&(6+e+t===buffer.length&&(!(128&buffer[4])&&(!(e>1&&0===buffer[4]&&!(128&buffer[5]))&&(!(128&buffer[e+6])&&!(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))))))},t.decode=function(buffer){if(buffer.length<8)throw new Error("DER sequence length is too short");if(buffer.length>72)throw new Error("DER sequence length is too long");if(48!==buffer[0])throw new Error("Expected DER sequence");if(buffer[1]!==buffer.length-2)throw new Error("DER sequence length is invalid");if(2!==buffer[2])throw new Error("Expected DER integer");const e=buffer[3];if(0===e)throw new Error("R length is zero");if(5+e>=buffer.length)throw new Error("R length is too long");if(2!==buffer[4+e])throw new Error("Expected DER integer (2)");const t=buffer[5+e];if(0===t)throw new Error("S length is zero");if(6+e+t!==buffer.length)throw new Error("S length is invalid");if(128&buffer[4])throw new Error("R value is negative");if(e>1&&0===buffer[4]&&!(128&buffer[5]))throw new Error("R value excessively padded");if(128&buffer[e+6])throw new Error("S value is negative");if(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))throw new Error("S value excessively padded");return{r:buffer.slice(4,4+e),s:buffer.slice(6+e)}},t.encode=function(e,t){const n=e.length,r=t.length;if(0===n)throw new Error("R length is zero");if(0===r)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(r>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(r>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");const i=Buffer.allocUnsafe(6+n+r);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+n]=2,i[5+n]=t.length,t.copy(i,6+n),i}},18543:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;const r=n(54673),i=n(47994),o=n(38323),a=n(47127),s=n(47177),{typeforce:c}=s,u=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block");class f{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(buffer){if(buffer.length<80)throw new Error("Buffer too small (< 80 bytes)");const e=new r.BufferReader(buffer),t=new f;if(t.version=e.readInt32(),t.prevHash=e.readSlice(32),t.merkleRoot=e.readSlice(32),t.timestamp=e.readUInt32(),t.bits=e.readUInt32(),t.nonce=e.readUInt32(),80===buffer.length)return t;const n=()=>{const t=a.Transaction.fromBuffer(e.buffer.slice(e.offset),!0);return e.offset+=t.byteLength(),t},i=e.readVarInt();t.transactions=[];for(let e=0;e<i;++e){const e=n();t.transactions.push(e)}const o=t.getWitnessCommit();return o&&(t.witnessCommit=o),t}static fromHex(e){return f.fromBuffer(Buffer.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,n=8388607&e,r=Buffer.alloc(32,0);return r.writeUIntBE(n,29-t,3),r}static calculateMerkleRoot(e,t){if(c([{getHash:s.Function}],e),0===e.length)throw u;if(t&&!h(e))throw l;const n=e.map((e=>e.getHash(t))),r=(0,o.fastMerkleRoot)(n,i.hash256);return t?i.hash256(Buffer.concat([r,e[0].ins[0].witness[0]])):r}getWitnessCommit(){if(!h(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof Buffer&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+r.varuint.encodingLength(this.transactions.length)+this.transactions.reduce(((e,n)=>e+n.byteLength(t)),0)}getHash(){return i.hash256(this.toBuffer(!0))}getId(){return(0,r.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const buffer=Buffer.allocUnsafe(this.byteLength(e)),t=new r.BufferWriter(buffer);return t.writeInt32(this.version),t.writeSlice(this.prevHash),t.writeSlice(this.merkleRoot),t.writeUInt32(this.timestamp),t.writeUInt32(this.bits),t.writeUInt32(this.nonce),e||!this.transactions||(r.varuint.encode(this.transactions.length,buffer,t.offset),t.offset+=r.varuint.encode.bytes,this.transactions.forEach((e=>{const n=e.byteLength();e.toBuffer(buffer,t.offset),t.offset+=n}))),buffer}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=(0,r.reverseBuffer)(this.getHash()),t=f.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw u;const e=f.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw u;if(!this.hasWitnessCommit())throw l;const e=f.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function h(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=f},54673:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.cloneBuffer=t.reverseBuffer=t.writeUInt64LE=t.readUInt64LE=t.varuint=void 0;const r=n(47177),{typeforce:i}=r,o=n(57795);function a(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function s(buffer,e){const t=buffer.readUInt32LE(e);let n=buffer.readUInt32LE(e+4);return n*=4294967296,a(n+t,9007199254740991),n+t}function c(buffer,e,t){return a(e,9007199254740991),buffer.writeInt32LE(-1&e,t),buffer.writeUInt32LE(Math.floor(e/4294967296),t+4),t+8}t.varuint=o,t.readUInt64LE=s,t.writeUInt64LE=c,t.reverseBuffer=function(buffer){if(buffer.length<1)return buffer;let e=buffer.length-1,t=0;for(let n=0;n<buffer.length/2;n++)t=buffer[n],buffer[n]=buffer[e],buffer[e]=t,e--;return buffer},t.cloneBuffer=function(buffer){const e=Buffer.allocUnsafe(buffer.length);return buffer.copy(e),e};class u{static withCapacity(e){return new u(Buffer.alloc(e))}constructor(buffer,e=0){this.buffer=buffer,this.offset=e,i(r.tuple(r.Buffer,r.UInt32),[buffer,e])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=c(this.buffer,e,this.offset)}writeVarInt(e){o.encode(e,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=u;t.BufferReader=class{constructor(buffer,e=0){this.buffer=buffer,this.offset=e,i(r.tuple(r.Buffer,r.UInt32),[buffer,e])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=s(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let n=0;n<e;n++)t.push(this.readVarSlice());return t}}},47994:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;const r=n(23482),i=n(79785);function o(buffer){try{return r("rmd160").update(buffer).digest()}catch(e){try{return r("ripemd160").update(buffer).digest()}catch(e){return(new i).update(buffer).digest()}}}function a(buffer){return r("sha256").update(buffer).digest()}t.ripemd160=o,t.sha1=function(buffer){return r("sha1").update(buffer).digest()},t.sha256=a,t.hash160=function(buffer){return o(a(buffer))},t.hash256=function(buffer){return a(a(buffer))};const s=Object.fromEntries(["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"].map((e=>{const t=a(Buffer.from(e));return[e,Buffer.concat([t,t])]})));t.taggedHash=function(e,t){return a(Buffer.concat([s[e],t]))}},21885:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.getEccLib=t.initEccLib=void 0;const r={};t.initEccLib=function(e){var t;e?e!==r.eccLib&&(o("function"==typeof(t=e).isXOnlyPoint),o(t.isXOnlyPoint(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),o(t.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),o(t.isXOnlyPoint(i("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),o(t.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000001"))),o(!t.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000000"))),o(!t.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),o("function"==typeof t.xOnlyPointAddTweak),a.forEach((e=>{const n=t.xOnlyPointAddTweak(i(e.pubkey),i(e.tweak));null===e.result?o(null===n):(o(null!==n),o(n.parity===e.parity),o(Buffer.from(n.xOnlyPubkey).equals(i(e.result))))})),r.eccLib=e):r.eccLib=e},t.getEccLib=function(){if(!r.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return r.eccLib};const i=e=>Buffer.from(e,"hex");function o(e){if(!e)throw new Error("ecc library invalid")}const a=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},1093:(e,t,n)=>{"use strict";t.Lk=void 0;const r=n(7336);t.Lk=r;n(47994);n(33967);n(79196);n(31213);var i=n(18543);var o=n(76666);var a=n(88132);var s=n(47127);var c=n(21885)},38323:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=void 0,t.fastMerkleRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let n=e.length;const r=e.concat();for(;n>1;){let e=0;for(let i=0;i<n;i+=2,++e){const o=r[i],a=i+1===n?o:r[i+1],s=Buffer.concat([o,a]);r[e]=t(s)}n=e}return r[0]}},33967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},88132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;const n={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=n;const r={};t.REVERSE_OPS=r;for(const e of Object.keys(n)){r[n[e]]=e}},54913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tweakKey=t.tapTweakHash=t.tapleafHash=t.findScriptPath=t.toHashTree=t.rootHashFromPath=t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0;const r=n(48764),i=n(21885),o=n(47994),a=n(54673),s=n(47177);t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;function c(e){const n=e.version||t.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",r.Buffer.concat([r.Buffer.from([n]),f(e.output)]))}function u(e,t){return o.taggedHash("TapTweak",r.Buffer.concat(t?[e,t]:[e]))}function l(e,t){return o.taggedHash("TapBranch",r.Buffer.concat([e,t]))}function f(e){const t=a.varuint.encodingLength(e.length),buffer=r.Buffer.allocUnsafe(t);return a.varuint.encode(e.length,buffer),r.Buffer.concat([buffer,e])}t.rootHashFromPath=function(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);const n=(e.length-33)/32;let r=t;for(let t=0;t<n;t++){const n=e.slice(33+32*t,65+32*t);r=r.compare(n)<0?l(r,n):l(n,r)}return r},t.toHashTree=function e(t){if((0,s.isTapleaf)(t))return{hash:c(t)};const n=[e(t[0]),e(t[1])];n.sort(((e,t)=>e.hash.compare(t.hash)));const[r,i]=n;return{hash:l(r.hash,i.hash),left:r,right:i}},t.findScriptPath=function e(t,n){if("left"in(r=t)&&"right"in r){const r=e(t.left,n);if(void 0!==r)return[...r,t.right.hash];const i=e(t.right,n);if(void 0!==i)return[...i,t.left.hash]}else if(t.hash.equals(n))return[];var r},t.tapleafHash=c,t.tapTweakHash=u,t.tweakKey=function(e,t){if(!r.Buffer.isBuffer(e))return null;if(32!==e.length)return null;if(t&&32!==t.length)return null;const n=u(e,t),o=(0,i.getEccLib)().xOnlyPointAddTweak(e,n);return o&&null!==o.xOnlyPubkey?{parity:o.parity,x:r.Buffer.from(o.xOnlyPubkey)}:null}},56318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=void 0;const r=n(33967),i=n(31213),o=n(47177),a=n(65994),s=i.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),data:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))},e);const n={name:"embed",network:e.network||r.bitcoin};if(a.prop(n,"output",(()=>{if(e.data)return i.compile([s.OP_RETURN].concat(e.data))})),a.prop(n,"data",(()=>{if(e.output)return i.decompile(e.output).slice(1)})),t.validate&&e.output){const t=i.decompile(e.output);if(t[0]!==s.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(o.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}},79196:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;const r=n(56318);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return r.p2data}});const i=n(39724);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});const o=n(85406);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});const a=n(16301);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return a.p2pkh}});const s=n(43171);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return s.p2sh}});const c=n(80055);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return c.p2wpkh}});const u=n(4381);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return u.p2wsh}});const l=n(49762);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return l.p2tr}})},65994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.value=t.prop=void 0,t.prop=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}},39724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=void 0;const r=n(33967),i=n(31213),o=n(47177),a=n(65994),s=i.OPS,c=s.OP_RESERVED;function u(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function n(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===s.OP_0)}t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),m:o.typeforce.maybe(o.typeforce.Number),n:o.typeforce.maybe(o.typeforce.Number),output:o.typeforce.maybe(o.typeforce.Buffer),pubkeys:o.typeforce.maybe(o.typeforce.arrayOf(o.isPoint)),signatures:o.typeforce.maybe(o.typeforce.arrayOf(n)),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const l={network:e.network||r.bitcoin};let f=[],h=!1;function d(e){h||(h=!0,f=i.decompile(e),l.m=f[0]-c,l.n=f[f.length-2]-c,l.pubkeys=f.slice(1,-2))}if(a.prop(l,"output",(()=>{if(e.m&&l.n&&e.pubkeys)return i.compile([].concat(c+e.m,e.pubkeys,c+l.n,s.OP_CHECKMULTISIG))})),a.prop(l,"m",(()=>{if(l.output)return d(l.output),l.m})),a.prop(l,"n",(()=>{if(l.pubkeys)return l.pubkeys.length})),a.prop(l,"pubkeys",(()=>{if(e.output)return d(e.output),l.pubkeys})),a.prop(l,"signatures",(()=>{if(e.input)return i.decompile(e.input).slice(1)})),a.prop(l,"input",(()=>{if(e.signatures)return i.compile([s.OP_0].concat(e.signatures))})),a.prop(l,"witness",(()=>{if(l.input)return[]})),a.prop(l,"name",(()=>{if(l.m&&l.n)return`p2ms(${l.m} of ${l.n})`})),t.validate){if(e.output){if(d(e.output),!o.typeforce.Number(f[0]))throw new TypeError("Output is invalid");if(!o.typeforce.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==s.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(l.m<=0||l.n>16||l.m>l.n||l.n!==f.length-3)throw new TypeError("Output is invalid");if(!l.pubkeys.every((e=>(0,o.isPoint)(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==l.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==l.n)throw new TypeError("n mismatch");if(e.pubkeys&&!u(e.pubkeys,l.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(l.n=e.pubkeys.length,l.n<l.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<l.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>l.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==s.OP_0)throw new TypeError("Input is invalid");if(0===l.signatures.length||!l.signatures.every(n))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!u(e.signatures,l.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(l,e)}},85406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=void 0;const r=n(33967),i=n(31213),o=n(47177),a=n(65994),s=i.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),pubkey:o.typeforce.maybe(o.isPoint),signature:o.typeforce.maybe(i.isCanonicalScriptSignature),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const n=a.value((()=>i.decompile(e.input))),c={name:"p2pk",network:e.network||r.bitcoin};if(a.prop(c,"output",(()=>{if(e.pubkey)return i.compile([e.pubkey,s.OP_CHECKSIG])})),a.prop(c,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),a.prop(c,"signature",(()=>{if(e.input)return n()[0]})),a.prop(c,"input",(()=>{if(e.signature)return i.compile([e.signature])})),a.prop(c,"witness",(()=>{if(c.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==s.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,o.isPoint)(c.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(c.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(c.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(c.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(c,e)}},16301:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=void 0;const r=n(47994),i=n(33967),o=n(31213),a=n(47177),s=n(65994),c=n(58334),u=o.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(25)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(o.isCanonicalScriptSignature),input:a.typeforce.maybe(a.typeforce.Buffer)},e);const n=s.value((()=>{const t=c.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),l=s.value((()=>o.decompile(e.input))),f=e.network||i.bitcoin,h={name:"p2pkh",network:f};if(s.prop(h,"address",(()=>{if(!h.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(f.pubKeyHash,0),h.hash.copy(e,1),c.encode(e)})),s.prop(h,"hash",(()=>e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||h.pubkey?r.hash160(e.pubkey||h.pubkey):void 0)),s.prop(h,"output",(()=>{if(h.hash)return o.compile([u.OP_DUP,u.OP_HASH160,h.hash,u.OP_EQUALVERIFY,u.OP_CHECKSIG])})),s.prop(h,"pubkey",(()=>{if(e.input)return l()[1]})),s.prop(h,"signature",(()=>{if(e.input)return l()[0]})),s.prop(h,"input",(()=>{if(e.pubkey&&e.signature)return o.compile([e.signature,e.pubkey])})),s.prop(h,"witness",(()=>{if(h.input)return[]})),t.validate){let t=Buffer.from([]);if(e.address){if(n().version!==f.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==u.OP_DUP||e.output[1]!==u.OP_HASH160||20!==e.output[2]||e.output[23]!==u.OP_EQUALVERIFY||e.output[24]!==u.OP_CHECKSIG)throw new TypeError("Output is invalid");const n=e.output.slice(3,23);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.pubkey){const n=r.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const n=l();if(2!==n.length)throw new TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(n[0]))throw new TypeError("Input has invalid signature");if(!(0,a.isPoint)(n[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(n[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(n[1]))throw new TypeError("Pubkey mismatch");const i=r.hash160(n[1]);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(h,e)}},43171:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=void 0;const r=n(47994),i=n(33967),o=n(31213),a=n(47177),s=n(65994),c=n(58334),u=o.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(23)),redeem:a.typeforce.maybe({network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||i.bitcoin);const l={network:n},f=s.value((()=>{const t=c.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),h=s.value((()=>o.decompile(e.input))),d=s.value((()=>{const t=h(),r=t[t.length-1];return{network:n,output:r===u.OP_FALSE?Buffer.from([]):r,input:o.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(s.prop(l,"address",(()=>{if(!l.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(l.network.scriptHash,0),l.hash.copy(e,1),c.encode(e)})),s.prop(l,"hash",(()=>e.output?e.output.slice(2,22):e.address?f().hash:l.redeem&&l.redeem.output?r.hash160(l.redeem.output):void 0)),s.prop(l,"output",(()=>{if(l.hash)return o.compile([u.OP_HASH160,l.hash,u.OP_EQUAL])})),s.prop(l,"redeem",(()=>{if(e.input)return d()})),s.prop(l,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return o.compile([].concat(o.decompile(e.redeem.input),e.redeem.output))})),s.prop(l,"witness",(()=>l.redeem&&l.redeem.witness?l.redeem.witness:l.input?[]:void 0)),s.prop(l,"name",(()=>{const e=["p2sh"];return void 0!==l.redeem&&void 0!==l.redeem.name&&e.push(l.redeem.name),e.join("-")})),t.validate){let t=Buffer.from([]);if(e.address){if(f().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==f().hash.length)throw new TypeError("Invalid address");t=f().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==u.OP_HASH160||20!==e.output[1]||e.output[22]!==u.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const i=e=>{if(e.output){const n=o.decompile(e.output);if(!n||n.length<1)throw new TypeError("Redeem.output too short");const i=r.hash160(e.output);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch");t=i}if(e.input){const t=e.input.length>0,n=e.witness&&e.witness.length>0;if(!t&&!n)throw new TypeError("Empty input");if(t&&n)throw new TypeError("Input and witness provided");if(t){const t=o.decompile(e.input);if(!o.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=h();if(!e||e.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(d().output))throw new TypeError("Input is invalid");i(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){const t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}i(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(l,e)}},49762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=void 0;const r=n(48764),i=n(33967),o=n(31213),a=n(47177),s=n(21885),c=n(54913),u=n(65994),l=n(99282),f=o.OPS;t.p2tr=function(e,t){if(!(e.address||e.output||e.pubkey||e.internalPubkey||e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(34)),internalPubkey:a.typeforce.maybe(a.typeforce.BufferN(32)),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),pubkey:a.typeforce.maybe(a.typeforce.BufferN(32)),signature:a.typeforce.maybe(a.typeforce.BufferN(64)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer)),scriptTree:a.typeforce.maybe(a.isTaptree),redeem:a.typeforce.maybe({output:a.typeforce.maybe(a.typeforce.Buffer),redeemVersion:a.typeforce.maybe(a.typeforce.Number),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),redeemVersion:a.typeforce.maybe(a.typeforce.Number)},e);const n=u.value((()=>{const t=l.bech32m.decode(e.address),n=t.words.shift(),i=l.bech32m.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.Buffer.from(i)}})),h=u.value((()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&80===e.witness[e.witness.length-1][0]?e.witness.slice(0,-1):e.witness.slice()})),d=u.value((()=>e.scriptTree?(0,c.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0)),p=e.network||i.bitcoin,y={name:"p2tr",network:p};if(u.prop(y,"address",(()=>{if(!y.pubkey)return;const e=l.bech32m.toWords(y.pubkey);return e.unshift(1),l.bech32m.encode(p.bech32,e)})),u.prop(y,"hash",(()=>{const e=d();if(e)return e.hash;const t=h();if(t&&t.length>1){const e=t[t.length-1],n=e[0]&a.TAPLEAF_VERSION_MASK,r=t[t.length-2],i=(0,c.tapleafHash)({output:r,version:n});return(0,c.rootHashFromPath)(e,i)}return null})),u.prop(y,"output",(()=>{if(y.pubkey)return o.compile([f.OP_1,y.pubkey])})),u.prop(y,"redeemVersion",(()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:c.LEAF_VERSION_TAPSCRIPT)),u.prop(y,"redeem",(()=>{const e=h();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&a.TAPLEAF_VERSION_MASK}})),u.prop(y,"pubkey",(()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return n().data;if(y.internalPubkey){const e=(0,c.tweakKey)(y.internalPubkey,y.hash);if(e)return e.x}})),u.prop(y,"internalPubkey",(()=>{if(e.internalPubkey)return e.internalPubkey;const t=h();return t&&t.length>1?t[t.length-1].slice(1,33):void 0})),u.prop(y,"signature",(()=>{if(e.signature)return e.signature;const t=h();return t&&1===t.length?t[0]:void 0})),u.prop(y,"witness",(()=>{if(e.witness)return e.witness;const t=d();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){const n=(0,c.tapleafHash)({output:e.redeem.output,version:y.redeemVersion}),i=(0,c.findScriptPath)(t,n);if(!i)return;const o=(0,c.tweakKey)(e.internalPubkey,t.hash);if(!o)return;const a=r.Buffer.concat([r.Buffer.from([y.redeemVersion|o.parity]),e.internalPubkey].concat(i));return[e.redeem.output,a]}return e.signature?[e.signature]:void 0})),t.validate){let t=r.Buffer.from([]);if(e.address){if(p&&p.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(1!==n().version)throw new TypeError("Invalid address version");if(32!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw new TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==f.OP_1||32!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){const n=(0,c.tweakKey)(e.internalPubkey,y.hash);if(t.length>0&&!t.equals(n.x))throw new TypeError("Pubkey mismatch");t=n.x}if(t&&t.length&&!(0,s.getEccLib)().isXOnlyPoint(t))throw new TypeError("Invalid pubkey for p2tr");const i=d();if(e.hash&&i&&!e.hash.equals(i.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&i){const t=(0,c.tapleafHash)({output:e.redeem.output,version:y.redeemVersion});if(!(0,c.findScriptPath)(i,t))throw new TypeError("Redeem script not in tree")}const u=h();if(e.redeem&&y.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==y.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");if(y.redeem.output&&!e.redeem.output.equals(y.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&y.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,y.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(1===u.length){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{const n=u[u.length-1];if(n.length<33)throw new TypeError(`The control-block length is too small. Got ${n.length}, expected min 33.`);if((n.length-33)%32!=0)throw new TypeError(`The control-block length of ${n.length} is incorrect!`);const r=(n.length-33)/32;if(r>128)throw new TypeError(`The script path is too long. Got ${r}, expected max 128.`);const i=n.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(i))throw new TypeError("Internal pubkey mismatch");if(!(0,s.getEccLib)().isXOnlyPoint(i))throw new TypeError("Invalid internalPubkey for p2tr witness");const o=n[0]&a.TAPLEAF_VERSION_MASK,l=u[u.length-2],f=(0,c.tapleafHash)({output:l,version:o}),h=(0,c.rootHashFromPath)(n,f),d=(0,c.tweakKey)(i,h);if(!d)throw new TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(d.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(d.parity!==(1&n[0]))throw new Error("Incorrect parity")}}return Object.assign(y,e)}},80055:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=void 0;const r=n(47994),i=n(33967),o=n(31213),a=n(47177),s=n(65994),c=n(99282),u=o.OPS,l=Buffer.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(22)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(o.isCanonicalScriptSignature),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const n=s.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),r=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),f=e.network||i.bitcoin,h={name:"p2wpkh",network:f};if(s.prop(h,"address",(()=>{if(!h.hash)return;const e=c.bech32.toWords(h.hash);return e.unshift(0),c.bech32.encode(f.bech32,e)})),s.prop(h,"hash",(()=>e.output?e.output.slice(2,22):e.address?n().data:e.pubkey||h.pubkey?r.hash160(e.pubkey||h.pubkey):void 0)),s.prop(h,"output",(()=>{if(h.hash)return o.compile([u.OP_0,h.hash])})),s.prop(h,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),s.prop(h,"signature",(()=>{if(e.witness)return e.witness[0]})),s.prop(h,"input",(()=>{if(h.witness)return l})),s.prop(h,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=Buffer.from([]);if(e.address){if(f&&f.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==n().version)throw new TypeError("Invalid address version");if(20!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==u.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const n=r.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");if(t=n,!(0,a.isPoint)(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,a.isPoint)(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const n=r.hash160(e.witness[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(h,e)}},4381:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=void 0;const r=n(47994),i=n(33967),o=n(31213),a=n(47177),s=n(65994),c=n(99282),u=o.OPS,l=Buffer.alloc(0);function f(e){return!(!Buffer.isBuffer(e)||65!==e.length||4!==e[0]||!(0,a.isPoint)(e))}t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),output:a.typeforce.maybe(a.typeforce.BufferN(34)),redeem:a.typeforce.maybe({input:a.typeforce.maybe(a.typeforce.Buffer),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.BufferN(0)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const n=s.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),r=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),h=s.value((()=>o.decompile(e.redeem.input)));let d=e.network;d||(d=e.redeem&&e.redeem.network||i.bitcoin);const p={network:d};if(s.prop(p,"address",(()=>{if(!p.hash)return;const e=c.bech32.toWords(p.hash);return e.unshift(0),c.bech32.encode(d.bech32,e)})),s.prop(p,"hash",(()=>e.output?e.output.slice(2):e.address?n().data:p.redeem&&p.redeem.output?r.sha256(p.redeem.output):void 0)),s.prop(p,"output",(()=>{if(p.hash)return o.compile([u.OP_0,p.hash])})),s.prop(p,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:l,witness:e.witness.slice(0,-1)}})),s.prop(p,"input",(()=>{if(p.witness)return l})),s.prop(p,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=o.toStack(h());return p.redeem=Object.assign({witness:t},e.redeem),p.redeem.input=l,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),s.prop(p,"name",(()=>{const e=["p2wsh"];return void 0!==p.redeem&&void 0!==p.redeem.name&&e.push(p.redeem.name),e.join("-")})),t.validate){let t=Buffer.from([]);if(e.address){if(n().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==n().version)throw new TypeError("Invalid address version");if(32!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==u.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==d)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const n=r.sha256(e.redeem.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem.input&&!o.isPushOnly(h()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&h().some(f)||e.redeem.output&&(o.decompile(e.redeem.output)||[]).some(f))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(f)||(o.decompile(t)||[]).some(f))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(p,e)}},76666:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;const r=n(95011),i=n(3493),o=n(96403),a=n(7336),s=n(54673),c=n(33967),u=n(79196),l=n(54913),f=n(31213),h=n(47127),d=n(67969),p=n(71748),y={network:c.bitcoin,maximumFeeRate:5e3};class g{static fromBase64(e,t={}){const buffer=Buffer.from(e,"base64");return this.fromBuffer(buffer,t)}static fromHex(e,t={}){const buffer=Buffer.from(e,"hex");return this.fromBuffer(buffer,t)}static fromBuffer(buffer,e={}){const t=r.Psbt.fromBuffer(buffer,b),n=new g(e,t);var i,o;return i=n.__CACHE.__TX,o=n.__CACHE,i.ins.forEach((e=>{O(o,e)})),n}constructor(e={},t=new r.Psbt(new m)){this.data=t,this.opts=Object.assign({},y,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const n=(e,t,n,r)=>Object.defineProperty(e,t,{enumerable:n,writable:r});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:(0,s.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=(0,a.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,s.cloneBuffer)(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=g.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){S(e),this.opts.maximumFeeRate=e}setVersion(e){S(e),k(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){S(e),k(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){S(t),k(this.data.inputs,"setInputSequence");const n=this.__CACHE;if(n.__TX.ins.length<=e)throw new Error("Input index too high");return n.__TX.ins[e].sequence=t,n.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,d.checkTaprootInputFields)(e,e,"addInput"),k(this.data.inputs,"addInput"),e.witnessScript&&V(e.witnessScript);const t=this.__CACHE;this.data.addInput(e);O(t,t.__TX.ins[t.__TX.ins.length-1]);const n=this.data.inputs.length-1,r=this.data.inputs[n];return r.nonWitnessUtxo&&D(this.__CACHE,r,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");k(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:n}=this.opts,r=(0,a.toOutputScript)(t,n);e=Object.assign(e,{script:r})}(0,d.checkTaprootOutputFields)(e,e,"addOutput");const n=this.__CACHE;return this.data.addOutput(e),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(_))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,n){const r=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=r*i;if(r>=n.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${r} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const n=t.__TX.clone();return M(this.data.inputs,n,t,!0),n}getFeeRate(){return x("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return x("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,o.checkForInput)(this.data.inputs,0),G(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t){const n=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._finalizeTaprootInput(e,n,void 0,t):this._finalizeInput(e,n,t)}finalizeTaprootInput(e,t,n=d.tapScriptFinalizer){const r=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(r))return this._finalizeTaprootInput(e,r,t,n);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,n=N){const{script:r,isP2SH:i,isP2WSH:o,isSegwit:a}=function(e,t,n){const r=n.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const o=H(n,t,e),a=r.ins[e].index;i.script=o.outs[a].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);(t.witnessScript||(0,p.isP2WPKH)(i.script))&&(i.isSegwit=!0);return i}(e,t,this.__CACHE);if(!r)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:n}=e;t.forEach((e=>{const{hashType:t}=f.signature.decode(e.signature);if(n!==t)throw new Error("Signature sighash does not match input sighash type")}))}(t);const{finalScriptSig:s,finalScriptWitness:c}=n(e,t,r,a,i,o);if(s&&this.data.updateInput(e,{finalScriptSig:s}),c&&this.data.updateInput(e,{finalScriptWitness:c}),!s&&!c)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,n,r=d.tapScriptFinalizer){if(!t.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){const n=u.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),r=(0,p.witnessStackToScriptWitness)(n.witness);this.data.updateInput(e,{finalScriptWitness:r})}else{const{finalScriptWitness:i}=r(e,t,n);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){const t=(0,o.checkForInput)(this.data.inputs,e),n=q(F(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=f.decompile(e);if(!t)return;const n=t[t.length-1];if(!Buffer.isBuffer(n)||K(n)||(r=n,f.isCanonicalScriptSignature(r)))return;var r;if(!f.decompile(n))return;return n}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=j(e),n=t[t.length-1];if(K(n))return;if(!f.decompile(n))return;return n}(t.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+W(n.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,n,r){const i=F(n,t,r),{meaningfulScript:o}=q(i,n,"input",t.redeemScript,t.witnessScript);return(0,p.pubkeyInScript)(e,o)}(t,(0,o.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const n=(0,o.checkForInput)(this.data.inputs,e),r=E(t);return!!n.bip32Derivation&&n.bip32Derivation.some(r)}outputHasPubkey(e,t){return function(e,t,n,r){const i=r.__TX.outs[n].script,{meaningfulScript:o}=q(i,n,"output",t.redeemScript,t.witnessScript);return(0,p.pubkeyInScript)(e,o)}(t,(0,o.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const n=(0,o.checkForOutput)(this.data.outputs,e),r=E(t);return!!n.bip32Derivation&&n.bip32Derivation.some(r)}validateSignaturesOfAllInputs(e){(0,o.checkForInput)(this.data.inputs,0);return G(this.data.inputs.length).map((t=>this.validateSignaturesOfInput(t,e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t,n){const r=this.data.inputs[e];return(0,d.isTaprootInput)(r)?this.validateSignaturesOfTaprootInput(e,t,n):this._validateSignaturesOfInput(e,t,n)}_validateSignaturesOfInput(e,t,n){const r=this.data.inputs[e],i=(r||{}).partialSig;if(!r||!i||i.length<1)throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const o=n?i.filter((e=>e.pubkey.equals(n))):i;if(o.length<1)throw new Error("No signatures for this pubkey");const a=[];let s,c,u;for(const n of o){const i=f.signature.decode(n.signature),{hash:o,script:l}=u!==i.hashType?C(e,Object.assign({},r,{sighashType:i.hashType}),this.__CACHE,!0):{hash:s,script:c};u=i.hashType,s=o,c=l,A(n.pubkey,l,"verify"),a.push(t(n.pubkey,o,i.signature))}return a.every((e=>!0===e))}validateSignaturesOfTaprootInput(e,t,n){const r=this.data.inputs[e],i=(r||{}).tapKeySig,o=(r||{}).tapScriptSig;if(!r&&!i&&(!o||o.length))throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const a=(n=n&&(0,d.toXOnly)(n))?B(e,r,this.data.inputs,n,this.__CACHE):function(e,t,n,r){const i=[];if(t.tapInternalKey){const n=(0,d.tweakInternalPubKey)(e,t);i.push(n)}if(t.tapScriptSig){const e=t.tapScriptSig.map((e=>e.pubkey));i.push(...e)}const o=i.map((i=>B(e,t,n,i,r)));return o.flat()}(e,r,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");const s=a.find((e=>!!e.leafHash));if(i&&s){if(!t(s.pubkey,s.hash,i))return!1}if(o)for(const e of o){const n=a.find((t=>e.pubkey.equals(t.pubkey)));if(n){if(!t(e.pubkey,n.hash,e.signature))return!1}}return!0}signAllInputsHD(e,t=[h.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const n=[];for(const r of G(this.data.inputs.length))try{this.signInputHD(r,e,t),n.push(!0)}catch(e){n.push(!1)}if(n.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[h.Transaction.SIGHASH_ALL]){return new Promise(((n,r)=>{if(!e||!e.publicKey||!e.fingerprint)return r(new Error("Need HDSigner to sign input"));const i=[],o=[];for(const n of G(this.data.inputs.length))o.push(this.signInputHDAsync(n,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return r(new Error("No inputs were signed"));n()}))}))}signInputHD(e,t,n=[h.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return U(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,n))),this}signInputHDAsync(e,t,n=[h.Transaction.SIGHASH_ALL]){return new Promise(((r,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const o=U(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,n)));return Promise.all(o).then((()=>{r()})).catch(i)}))}signAllInputs(e,t){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const n=[];for(const r of G(this.data.inputs.length))try{this.signInput(r,e,t),n.push(!0)}catch(e){n.push(!1)}if(n.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise(((n,r)=>{if(!e||!e.publicKey)return r(new Error("Need Signer to sign input"));const i=[],o=[];for(const[n]of this.data.inputs.entries())o.push(this.signInputAsync(n,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return r(new Error("No inputs were signed"));n()}))}))}signInput(e,t,n){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._signTaprootInput(e,r,t,void 0,n):this._signInput(e,t,n)}signTaprootInput(e,t,n,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInput(e,i,t,n,r);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,n=[h.Transaction.SIGHASH_ALL]){const{hash:r,sighashType:i}=R(this.data.inputs,e,t.publicKey,this.__CACHE,n),o=[{pubkey:t.publicKey,signature:f.signature.encode(t.sign(r),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,n,r,i=[h.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,n,r,i),a=o.filter((e=>!e.leafHash)).map((e=>(0,d.serializeTaprootSignature)(n.signSchnorr(e.hash),t.sighashType)))[0],s=o.filter((e=>!!e.leafHash)).map((e=>({pubkey:(0,d.toXOnly)(n.publicKey),signature:(0,d.serializeTaprootSignature)(n.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash})));return a&&this.data.updateInput(e,{tapKeySig:a}),s.length&&this.data.updateInput(e,{tapScriptSig:s}),this}signInputAsync(e,t,n){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._signTaprootInputAsync(e,r,t,void 0,n):this._signInputAsync(e,t,n)}))}signTaprootInputAsync(e,t,n,r){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,n,r);throw new Error(`Input #${e} is not of type Taproot.`)}))}_signInputAsync(e,t,n=[h.Transaction.SIGHASH_ALL]){const{hash:r,sighashType:i}=R(this.data.inputs,e,t.publicKey,this.__CACHE,n);return Promise.resolve(t.sign(r)).then((n=>{const r=[{pubkey:t.publicKey,signature:f.signature.encode(n,i)}];this.data.updateInput(e,{partialSig:r})}))}async _signTaprootInputAsync(e,t,n,r,i=[h.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,n,r,i),a=[],s=o.filter((e=>!e.leafHash))[0];if(s){const e=Promise.resolve(n.signSchnorr(s.hash)).then((e=>({tapKeySig:(0,d.serializeTaprootSignature)(e,t.sighashType)})));a.push(e)}const c=o.filter((e=>!!e.leafHash));if(c.length){const e=c.map((e=>Promise.resolve(n.signSchnorr(e.hash)).then((r=>({tapScriptSig:[{pubkey:(0,d.toXOnly)(n.publicKey),signature:(0,d.serializeTaprootSignature)(r,t.sighashType),leafHash:e.leafHash}]})))));a.push(...e)}return Promise.all(a).then((t=>{t.forEach((t=>this.data.updateInput(e,t)))}))}checkTaprootHashesForSig(e,t,n,r,i){if("function"!=typeof n.signSchnorr)throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const o=B(e,t,this.data.inputs,n.publicKey,this.__CACHE,r,i);if(!o||!o.length)throw new Error(`Can not sign for input #${e} with the key ${n.publicKey.toString("hex")}`);return o}toBuffer(){return w(this.__CACHE),this.data.toBuffer()}toHex(){return w(this.__CACHE),this.data.toHex()}toBase64(){return w(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&V(t.witnessScript),(0,d.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&D(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){const n=this.data.outputs[e];return(0,d.checkTaprootOutputFields)(n,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=g;const b=buffer=>new m(buffer);class m{constructor(buffer=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=h.Transaction.fromBuffer(buffer),function(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!Buffer.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?(0,s.reverseBuffer)(Buffer.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!Buffer.isBuffer(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function w(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function v(e,t,n){if(!t)return!1;let r;if(r=n?n.map((e=>{const n=function(e){if(65===e.length){const t=1&e[64],n=e.slice(0,33);return n[0]=2|t,n}return e.slice()}(e);return t.find((e=>e.pubkey.equals(n)))})).filter((e=>!!e)):t,r.length>e)throw new Error("Too many signatures");return r.length===e}function _(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function E(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function S(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function k(e,t){e.forEach((e=>{if((0,d.isTaprootInput)(e)?(0,d.checkTaprootInputForSigs)(e,t):(0,p.checkInputForSig)(e,t))throw new Error("Can not modify transaction, signatures exist.")}))}function A(e,t,n){if(!(0,p.pubkeyInScript)(e,t))throw new Error(`Can not ${n} for this input with the key ${e.toString("hex")}`)}function O(e,t){const n=(0,s.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[n]=1}function P(e,t){return(n,r,i,o)=>{const a=e({redeem:{output:i}}).output;if(!r.equals(a))throw new Error(`${t} for ${o} #${n} doesn't match the scriptPubKey in the prevout`)}}const I=P(u.p2sh,"Redeem script"),T=P(u.p2wsh,"Witness script");function x(e,t,n,r){if(!n.every(_))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&r.__FEE_RATE)return r.__FEE_RATE;if("__FEE"===e&&r.__FEE)return r.__FEE;let i,o=!0;return r.__EXTRACTED_TX?(i=r.__EXTRACTED_TX,o=!1):i=r.__TX.clone(),M(n,i,r,o),"__FEE_RATE"===e?r.__FEE_RATE:"__FEE"===e?r.__FEE:void 0}function N(e,t,n,r,i,o){const a=W(n);if(!function(e,t,n){switch(n){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return v(1,e.partialSig);case"multisig":const n=u.p2ms({output:t});return v(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,n,a))throw new Error(`Can not finalize input #${e}`);return function(e,t,n,r,i,o){let a,s;const c=function(e,t,n){let r;switch(t){case"multisig":const t=function(e,t){const n=u.p2ms({output:e});return n.pubkeys.map((e=>(t.filter((t=>t.pubkey.equals(e)))[0]||{}).signature)).filter((e=>!!e))}(e,n);r=u.p2ms({output:e,signatures:t});break;case"pubkey":r=u.p2pk({output:e,signature:n[0].signature});break;case"pubkeyhash":r=u.p2pkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature});break;case"witnesspubkeyhash":r=u.p2wpkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature})}return r}(e,t,n),l=o?u.p2wsh({redeem:c}):null,f=i?u.p2sh({redeem:l||c}):null;r?(s=l?(0,p.witnessStackToScriptWitness)(l.witness):(0,p.witnessStackToScriptWitness)(c.witness),f&&(a=f.input)):a=f?f.input:c.input;return{finalScriptSig:a,finalScriptWitness:s}}(n,a,t.partialSig,r,i,o)}function R(e,t,n,r,i){const a=(0,o.checkForInput)(e,t),{hash:s,sighashType:c,script:u}=C(t,a,r,!1,i);return A(n,u,"sign"),{hash:s,sighashType:c}}function C(e,t,n,r,i){const o=n.__TX,a=t.sighashType||h.Transaction.SIGHASH_ALL;let s,c;if(L(a,i),t.nonWitnessUtxo){const r=H(n,t,e),i=o.ins[e].hash,a=r.getHash();if(!i.equals(a))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const s=o.ins[e].index;c=r.outs[s]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");c=t.witnessUtxo}const{meaningfulScript:l,type:f}=q(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)s=o.hashForWitnessV0(e,l,c.value,a);else if((0,p.isP2WPKH)(l)){const t=u.p2pkh({hash:l.slice(2)}).output;s=o.hashForWitnessV0(e,t,c.value,a)}else{if(void 0===t.nonWitnessUtxo&&!1===n.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${l.toString("hex")}`);r||!1===n.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),s=o.hashForSignature(e,l,a)}return{script:l,sighashType:a,hash:s}}function B(e,t,n,r,i,o,a){const s=i.__TX,c=t.sighashType||h.Transaction.SIGHASH_DEFAULT;L(c,a);const u=n.map(((e,t)=>z(t,e,i))),f=u.map((e=>e.script)),y=u.map((e=>e.value)),g=[];if(t.tapInternalKey&&!o){const n=(0,d.tweakInternalPubKey)(e,t);if((0,d.toXOnly)(r).equals(n)){const t=s.hashForWitnessV1(e,f,y,c);g.push({pubkey:r,hash:t})}}const b=(t.tapLeafScript||[]).filter((e=>(0,p.pubkeyInScript)(r,e.script))).map((e=>{const t=(0,l.tapleafHash)({output:e.script,version:e.leafVersion});return Object.assign({hash:t},e)})).filter((e=>!o||o.equals(e.hash))).map((t=>{const n=s.hashForWitnessV1(e,f,y,h.Transaction.SIGHASH_DEFAULT,t.hash);return{pubkey:r,hash:n,leafHash:t.hash}}));return g.concat(b)}function L(e,t){if(t&&t.indexOf(e)<0){const t=function(e){let t=e&h.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case h.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case h.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case h.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function U(e,t,n){const r=(0,o.checkForInput)(t,e);if(!r.bip32Derivation||0===r.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=r.bip32Derivation.map((e=>e.masterFingerprint.equals(n.fingerprint)?e:void 0)).filter((e=>!!e));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((e=>{const t=n.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function j(buffer){let e=0;function t(){const t=i.decode(buffer,e);return e+=i.decode.bytes,t}function n(){return n=t(),e+=n,buffer.slice(e-n,e);var n}return function(){const e=t(),r=[];for(let t=0;t<e;t++)r.push(n());return r}()}function D(e,t,n){e.__NON_WITNESS_UTXO_BUF_CACHE[n]=t.nonWitnessUtxo;const r=h.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[n]=r;const i=e,o=n;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function M(e,t,n,r){let i=0;e.forEach(((e,o)=>{if(r&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),r&&e.finalScriptWitness&&(t.ins[o].witness=j(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const r=H(n,e,o),a=t.ins[o].index,s=r.outs[a];i+=s.value}}));const o=t.outs.reduce(((e,t)=>e+t.value),0),a=i-o;if(a<0)throw new Error("Outputs are spending more than Inputs");const s=t.virtualSize();n.__FEE=a,n.__EXTRACTED_TX=t,n.__FEE_RATE=Math.floor(a/s)}function H(e,t,n){const r=e.__NON_WITNESS_UTXO_TX_CACHE;return r[n]||D(e,t,n),r[n]}function F(e,t,n){const{script:r}=z(e,t,n);return r}function z(e,t,n){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){const r=H(n,t,e).outs[n.__TX.ins[e].index];return{script:r.script,value:r.value}}throw new Error("Can't find pubkey in input without Utxo data")}function K(e){return 33===e.length&&f.isCanonicalPubKey(e)}function q(e,t,n,r,i){const o=(0,p.isP2SHScript)(e),a=o&&r&&(0,p.isP2WSHScript)(r),s=(0,p.isP2WSHScript)(e);if(o&&void 0===r)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((s||a)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return a?(c=i,I(t,e,r,n),T(t,r,i,n),V(c)):s?(c=i,T(t,e,i,n),V(c)):o?(c=r,I(t,e,r,n)):c=e,{meaningfulScript:c,type:a?"p2sh-p2wsh":o?"p2sh":s?"p2wsh":"raw"}}function V(e){if((0,p.isP2WPKH)(e)||(0,p.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function W(e){return(0,p.isP2WPKH)(e)?"witnesspubkeyhash":(0,p.isP2PKH)(e)?"pubkeyhash":(0,p.isP2MS)(e)?"multisig":(0,p.isP2PK)(e)?"pubkey":"nonstandard"}function G(e){return[...Array(e).keys()]}},67969:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.checkTaprootInputForSigs=t.tapTreeFromList=t.tapTreeToList=t.tweakInternalPubKey=t.checkTaprootOutputFields=t.checkTaprootInputFields=t.isTaprootOutput=t.isTaprootInput=t.serializeTaprootSignature=t.tapScriptFinalizer=t.toXOnly=void 0;const r=n(47177),i=n(47127),o=n(71748),a=n(54913),s=n(79196),c=n(71748);function u(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,o.isP2TR)(e.witnessUtxo.script))}function l(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,o.isP2TR)(t))}function f(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:function(e){let t;for(const n of e)if(t=p(n,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}(e)}function h(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||i.Transaction.SIGHASH_DEFAULT}}function d(e,t=[],n=0){if(n>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,r.isTapleaf)(e)?(t.push({depth:n,leafVersion:e.version||a.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&d(e[0],t,n+1),e[1]&&d(e[1],t,n+1),t):[]}function p(e,t,n=0){if(n>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===n)return t?void 0:{output:e.script,version:e.leafVersion};if((0,r.isTapleaf)(t))return;const i=p(e,t&&t[0],n+1);if(i)return[i,t&&t[1]];const o=p(e,t&&t[1],n+1);return o?[t&&t[0],o]:void 0}function y(e,t){if(!t)return!0;const n=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(0,a.rootHashFromPath)(e.controlBlock,n).equals(t)}function g(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=e=>32===e.length?e:e.slice(1,33),t.tapScriptFinalizer=function(e,t,n){const r=function(e,t,n){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);const r=(e.tapLeafScript||[]).sort(((e,t)=>e.controlBlock.length-t.controlBlock.length)).find((t=>function(e,t,n){const r=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(!n||n.equals(r))&&void 0!==t.find((e=>e.leafHash.equals(r)))}(t,e.tapScriptSig,n)));if(!r)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return r}(t,e,n);try{const e=function(e,t){const n=(0,a.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter((e=>e.leafHash.equals(n))).map((e=>function(e,t){return Object.assign({positionInScript:(0,o.pubkeyPositionInScript)(t.pubkey,e)},t)}(t.script,e))).sort(((e,t)=>t.positionInScript-e.positionInScript)).map((e=>e.signature))}(t,r),n=e.concat(r.script).concat(r.controlBlock);return{finalScriptWitness:(0,o.witnessStackToScriptWitness)(n)}}catch(t){throw new Error(`Can not finalize taproot input #${e}: ${t}`)}},t.serializeTaprootSignature=function(e,t){const n=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,n])},t.isTaprootInput=u,t.isTaprootOutput=l,t.checkTaprootInputFields=function(e,t,n){!function(e,t,n){const r=u(e)&&g(t),i=g(e)&&u(t),o=e===t&&u(t)&&g(t);if(r||i||o)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}(e,t,n),function(e,t,n){if(t.tapMerkleRoot){const r=(t.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot))),i=(e.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot)));if(!r||!i)throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot){if(!(t.tapLeafScript||[]).every((t=>y(t,e.tapMerkleRoot))))throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}}(e,t,n)},t.checkTaprootOutputFields=function(e,t,n){!function(e,t,n){const r=l(e)&&g(t),i=g(e)&&l(t),o=e===t&&l(t)&&g(t);if(r||i||o)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}(e,t,n),function(e,t){if(!t.tapTree&&!t.tapInternalKey)return;const n=t.tapInternalKey||e.tapInternalKey,r=t.tapTree||e.tapTree;if(n){const{script:t}=e,i=function(e,t){const n=t&&f(t.leaves),{output:r}=(0,s.p2tr)({internalPubkey:e,scriptTree:n});return r}(n,r);if(t&&!t.equals(i))throw new Error("Error adding output. Script or address missmatch.")}}(e,t)},t.tweakInternalPubKey=function(e,t){const n=t.tapInternalKey,r=n&&(0,a.tweakKey)(n,t.tapMerkleRoot);if(!r)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${n&&n.toString("hex")}`);return r.x},t.tapTreeToList=function(e){if(!(0,r.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return d(e)},t.tapTreeFromList=f,t.checkTaprootInputForSigs=function(e,t){return function(e){const t=[];e.tapKeySig&&t.push(e.tapKeySig);e.tapScriptSig&&t.push(...e.tapScriptSig.map((e=>e.signature)));if(!t.length){const n=function(e){if(!e)return;const t=e.slice(2);if(64===t.length||65===t.length)return t}(e.finalScriptWitness);n&&t.push(n)}return t}(e).some((e=>(0,c.signatureBlocksAction)(e,h,t)))}},71748:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signatureBlocksAction=t.checkInputForSig=t.pubkeyInScript=t.pubkeyPositionInScript=t.witnessStackToScriptWitness=t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0;const r=n(3493),i=n(31213),o=n(47127),a=n(47994),s=n(79196);function c(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function u(e,t){const n=(0,a.hash160)(e),r=e.slice(1,33),o=i.decompile(t);if(null===o)throw new Error("Unknown script error");return o.findIndex((t=>"number"!=typeof t&&(t.equals(e)||t.equals(n)||t.equals(r))))}function l(e,t,n){const{hashType:r}=t(e),i=[];r&o.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput");switch(31&r){case o.Transaction.SIGHASH_ALL:break;case o.Transaction.SIGHASH_SINGLE:case o.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return-1===i.indexOf(n)}t.isP2MS=c(s.p2ms),t.isP2PK=c(s.p2pk),t.isP2PKH=c(s.p2pkh),t.isP2WPKH=c(s.p2wpkh),t.isP2WSHScript=c(s.p2wsh),t.isP2SHScript=c(s.p2sh),t.isP2TR=c(s.p2tr),t.witnessStackToScriptWitness=function(e){let buffer=Buffer.allocUnsafe(0);function t(e){const t=buffer.length,n=r.encodingLength(e);buffer=Buffer.concat([buffer,Buffer.allocUnsafe(n)]),r.encode(e,buffer,t)}function n(e){t(e.length),function(e){buffer=Buffer.concat([buffer,Buffer.from(e)])}(e)}var i;return t((i=e).length),i.forEach(n),buffer},t.pubkeyPositionInScript=u,t.pubkeyInScript=function(e,t){return-1!==u(e,t)},t.checkInputForSig=function(e,t){return function(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=function(e){const t=e.finalScriptSig&&i.decompile(e.finalScriptSig)||[],n=e.finalScriptWitness&&i.decompile(e.finalScriptWitness)||[];return t.concat(n).filter((e=>Buffer.isBuffer(e)&&i.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else t=e.partialSig;return t.map((e=>e.signature))}(e).some((e=>l(e,i.signature.decode,t)))},t.signatureBlocksAction=l},38624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodingLength=void 0;const r=n(88132);function i(e){return e<r.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}t.encodingLength=i,t.encode=function(buffer,e,t){const n=i(e);return 1===n?buffer.writeUInt8(e,t):2===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA1,t),buffer.writeUInt8(e,t+1)):3===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA2,t),buffer.writeUInt16LE(e,t+1)):(buffer.writeUInt8(r.OPS.OP_PUSHDATA4,t),buffer.writeUInt32LE(e,t+1)),n},t.decode=function(buffer,e){const t=buffer.readUInt8(e);let n,i;if(t<r.OPS.OP_PUSHDATA1)n=t,i=1;else if(t===r.OPS.OP_PUSHDATA1){if(e+2>buffer.length)return null;n=buffer.readUInt8(e+1),i=2}else if(t===r.OPS.OP_PUSHDATA2){if(e+3>buffer.length)return null;n=buffer.readUInt16LE(e+1),i=3}else{if(e+5>buffer.length)return null;if(t!==r.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=buffer.readUInt32LE(e+1),i=5}return{opcode:t,number:n,size:i}}},31213:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.isPushOnly=t.OPS=void 0;const r=n(77297),i=n(88132);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return i.OPS}});const o=n(38624),a=n(56879),s=n(14666),c=n(47177),{typeforce:u}=c,l=i.OPS.OP_RESERVED;function f(e){return c.Buffer(e)||function(e){return c.Number(e)&&(e===i.OPS.OP_0||e>=i.OPS.OP_1&&e<=i.OPS.OP_16||e===i.OPS.OP_1NEGATE)}(e)}function h(e){return c.Array(e)&&e.every(f)}function d(buffer){return 0===buffer.length?i.OPS.OP_0:1===buffer.length?buffer[0]>=1&&buffer[0]<=16?l+buffer[0]:129===buffer[0]?i.OPS.OP_1NEGATE:void 0:void 0}function p(e){return Buffer.isBuffer(e)}function y(e){return Buffer.isBuffer(e)}function g(e){if(p(e))return e;u(c.Array,e);const t=e.reduce(((e,t)=>y(t)?1===t.length&&void 0!==d(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1),0),buffer=Buffer.allocUnsafe(t);let n=0;if(e.forEach((e=>{if(y(e)){const t=d(e);if(void 0!==t)return buffer.writeUInt8(t,n),void(n+=1);n+=o.encode(buffer,e.length,n),e.copy(buffer,n),n+=e.length}else buffer.writeUInt8(e,n),n+=1})),n!==buffer.length)throw new Error("Could not decode chunks");return buffer}function b(buffer){if(e=buffer,c.Array(e))return buffer;var e;u(c.Buffer,buffer);const t=[];let n=0;for(;n<buffer.length;){const e=buffer[n];if(e>i.OPS.OP_0&&e<=i.OPS.OP_PUSHDATA4){const e=o.decode(buffer,n);if(null===e)return null;if(n+=e.size,n+e.number>buffer.length)return null;const r=buffer.slice(n,n+e.number);n+=e.number;const i=d(r);void 0!==i?t.push(i):t.push(r)}else t.push(e),n+=1}return t}function m(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=h,t.compile=g,t.decompile=b,t.toASM=function(e){return p(e)&&(e=b(e)),e.map((e=>{if(y(e)){const t=d(e);if(void 0===t)return e.toString("hex");e=t}return i.REVERSE_OPS[e]})).join(" ")},t.fromASM=function(e){return u(c.String,e),g(e.split(" ").map((e=>void 0!==i.OPS[e]?i.OPS[e]:(u(c.Hex,e),Buffer.from(e,"hex")))))},t.toStack=function(e){return e=b(e),u(h,e),e.map((e=>y(e)?e:e===i.OPS.OP_0?Buffer.allocUnsafe(0):a.encode(e-l)))},t.isCanonicalPubKey=function(buffer){return c.isPoint(buffer)},t.isDefinedHashType=m,t.isCanonicalScriptSignature=function(buffer){return!!Buffer.isBuffer(buffer)&&(!!m(buffer[buffer.length-1])&&r.check(buffer.slice(0,-1)))},t.number=a,t.signature=s},56879:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0,t.decode=function(buffer,e,t){e=e||4,t=void 0===t||t;const n=buffer.length;if(0===n)return 0;if(n>e)throw new TypeError("Script number overflow");if(t&&0==(127&buffer[n-1])&&(n<=1||0==(128&buffer[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const e=buffer.readUInt32LE(0),t=buffer.readUInt8(4);return 128&t?-(4294967296*(-129&t)+e):4294967296*t+e}let r=0;for(let e=0;e<n;++e)r|=buffer[e]<<8*e;return 128&buffer[n-1]?-(r&~(128<<8*(n-1))):r},t.encode=function(e){let t=Math.abs(e);const n=(r=t)>2147483647?5:r>8388607?4:r>32767?3:r>127?2:r>0?1:0;var r;const buffer=Buffer.allocUnsafe(n),i=e<0;for(let e=0;e<n;++e)buffer.writeUInt8(255&t,e),t>>=8;return 128&buffer[n-1]?buffer.writeUInt8(i?128:0,n-1):i&&(buffer[n-1]|=128),buffer}},14666:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;const r=n(77297),i=n(47177),{typeforce:o}=i,a=Buffer.alloc(1,0);function s(e){let t=0;for(;0===e[t];)++t;return t===e.length?a:128&(e=e.slice(t))[0]?Buffer.concat([a,e],1+e.length):e}function c(e){0===e[0]&&(e=e.slice(1));const buffer=Buffer.alloc(32,0),t=Math.max(0,32-e.length);return e.copy(buffer,t),buffer}t.decode=function(buffer){const e=buffer.readUInt8(buffer.length-1),t=-129&e;if(t<=0||t>=4)throw new Error("Invalid hashType "+e);const n=r.decode(buffer.slice(0,-1)),i=c(n.r),o=c(n.s);return{signature:Buffer.concat([i,o],64),hashType:e}},t.encode=function(e,t){o({signature:i.BufferN(64),hashType:i.UInt8},{signature:e,hashType:t});const n=-129&t;if(n<=0||n>=4)throw new Error("Invalid hashType "+t);const a=Buffer.allocUnsafe(1);a.writeUInt8(t,0);const c=s(e.slice(0,32)),u=s(e.slice(32,64));return Buffer.concat([r.encode(c,u),a])}},47127:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const r=n(54673),i=n(47994),o=n(31213),a=n(31213),s=n(47177),{typeforce:c}=s;function u(e){const t=e.length;return r.varuint.encodingLength(t)+t}const l=Buffer.allocUnsafe(0),f=[],h=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),d=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),p=Buffer.from("ffffffffffffffff","hex"),y={script:l,valueBuffer:p};class g{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(buffer,e){const t=new r.BufferReader(buffer),n=new g;n.version=t.readInt32();const i=t.readUInt8(),o=t.readUInt8();let a=!1;i===g.ADVANCED_TRANSACTION_MARKER&&o===g.ADVANCED_TRANSACTION_FLAG?a=!0:t.offset-=2;const s=t.readVarInt();for(let e=0;e<s;++e)n.ins.push({hash:t.readSlice(32),index:t.readUInt32(),script:t.readVarSlice(),sequence:t.readUInt32(),witness:f});const c=t.readVarInt();for(let e=0;e<c;++e)n.outs.push({value:t.readUInt64(),script:t.readVarSlice()});if(a){for(let e=0;e<s;++e)n.ins[e].witness=t.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=t.readUInt32(),e)return n;if(t.offset!==buffer.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return g.fromBuffer(Buffer.from(e,"hex"),!1)}static isCoinbaseHash(buffer){c(s.Hash256bit,buffer);for(let e=0;e<32;++e)if(0!==buffer[e])return!1;return!0}isCoinbase(){return 1===this.ins.length&&g.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,n,r){return c(s.tuple(s.Hash256bit,s.UInt32,s.maybe(s.UInt32),s.maybe(s.Buffer)),arguments),s.Null(n)&&(n=g.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:r||l,sequence:n,witness:f})-1}addOutput(e,t){return c(s.tuple(s.Buffer,s.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+r.varuint.encodingLength(this.ins.length)+r.varuint.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+u(t.script)),0)+this.outs.reduce(((e,t)=>e+8+u(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function(e){const t=e.length;return r.varuint.encodingLength(t)+e.reduce(((e,t)=>e+u(t)),0)}(t.witness)),0):0)}clone(){const e=new g;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,n){if(c(s.tuple(s.UInt32,s.Buffer,s.Number),arguments),e>=this.ins.length)return d;const r=o.compile(o.decompile(t).filter((e=>e!==a.OPS.OP_CODESEPARATOR))),u=this.clone();if((31&n)===g.SIGHASH_NONE)u.outs=[],u.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}));else if((31&n)===g.SIGHASH_SINGLE){if(e>=this.outs.length)return d;u.outs.length=e+1;for(let t=0;t<e;t++)u.outs[t]=y;u.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}))}n&g.SIGHASH_ANYONECANPAY?(u.ins=[u.ins[e]],u.ins[0].script=r):(u.ins.forEach((e=>{e.script=l})),u.ins[e].script=r);const buffer=Buffer.allocUnsafe(u.byteLength(!1)+4);return buffer.writeInt32LE(n,buffer.length-4),u.__toBuffer(buffer,0,!1),i.hash256(buffer)}hashForWitnessV1(e,t,n,o,a,f){if(c(s.tuple(s.UInt32,c.arrayOf(s.Buffer),c.arrayOf(s.Satoshi),s.UInt32),arguments),n.length!==this.ins.length||t.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const h=o===g.SIGHASH_DEFAULT?g.SIGHASH_ALL:o&g.SIGHASH_OUTPUT_MASK,d=(o&g.SIGHASH_INPUT_MASK)===g.SIGHASH_ANYONECANPAY,p=h===g.SIGHASH_NONE,y=h===g.SIGHASH_SINGLE;let b=l,m=l,w=l,v=l,_=l;if(!d){let e=r.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)})),b=i.sha256(e.end()),e=r.BufferWriter.withCapacity(8*this.ins.length),n.forEach((t=>e.writeUInt64(t))),m=i.sha256(e.end()),e=r.BufferWriter.withCapacity(t.map(u).reduce(((e,t)=>e+t))),t.forEach((t=>e.writeVarSlice(t))),w=i.sha256(e.end()),e=r.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach((t=>e.writeUInt32(t.sequence))),v=i.sha256(e.end())}if(p||y){if(y&&e<this.outs.length){const t=this.outs[e],n=r.BufferWriter.withCapacity(8+u(t.script));n.writeUInt64(t.value),n.writeVarSlice(t.script),_=i.sha256(n.end())}}else{const e=this.outs.map((e=>8+u(e.script))).reduce(((e,t)=>e+t)),t=r.BufferWriter.withCapacity(e);this.outs.forEach((e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)})),_=i.sha256(t.end())}const E=(a?2:0)+(f?1:0),S=174-(d?49:0)-(p?32:0)+(f?32:0)+(a?37:0),k=r.BufferWriter.withCapacity(S);if(k.writeUInt8(o),k.writeInt32(this.version),k.writeUInt32(this.locktime),k.writeSlice(b),k.writeSlice(m),k.writeSlice(w),k.writeSlice(v),p||y||k.writeSlice(_),k.writeUInt8(E),d){const r=this.ins[e];k.writeSlice(r.hash),k.writeUInt32(r.index),k.writeUInt64(n[e]),k.writeVarSlice(t[e]),k.writeUInt32(r.sequence)}else k.writeUInt32(e);if(f){const e=r.BufferWriter.withCapacity(u(f));e.writeVarSlice(f),k.writeSlice(i.sha256(e.end()))}return y&&k.writeSlice(_),a&&(k.writeSlice(a),k.writeUInt8(0),k.writeUInt32(4294967295)),i.taggedHash("TapSighash",Buffer.concat([Buffer.of(0),k.end()]))}hashForWitnessV0(e,t,n,o){c(s.tuple(s.UInt32,s.Buffer,s.Satoshi,s.UInt32),arguments);let a,l=Buffer.from([]),f=h,d=h,p=h;if(o&g.SIGHASH_ANYONECANPAY||(l=Buffer.allocUnsafe(36*this.ins.length),a=new r.BufferWriter(l,0),this.ins.forEach((e=>{a.writeSlice(e.hash),a.writeUInt32(e.index)})),d=i.hash256(l)),o&g.SIGHASH_ANYONECANPAY||(31&o)===g.SIGHASH_SINGLE||(31&o)===g.SIGHASH_NONE||(l=Buffer.allocUnsafe(4*this.ins.length),a=new r.BufferWriter(l,0),this.ins.forEach((e=>{a.writeUInt32(e.sequence)})),p=i.hash256(l)),(31&o)!==g.SIGHASH_SINGLE&&(31&o)!==g.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+u(t.script)),0);l=Buffer.allocUnsafe(e),a=new r.BufferWriter(l,0),this.outs.forEach((e=>{a.writeUInt64(e.value),a.writeVarSlice(e.script)})),f=i.hash256(l)}else if((31&o)===g.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];l=Buffer.allocUnsafe(8+u(t.script)),a=new r.BufferWriter(l,0),a.writeUInt64(t.value),a.writeVarSlice(t.script),f=i.hash256(l)}l=Buffer.allocUnsafe(156+u(t)),a=new r.BufferWriter(l,0);const y=this.ins[e];return a.writeInt32(this.version),a.writeSlice(d),a.writeSlice(p),a.writeSlice(y.hash),a.writeUInt32(y.index),a.writeVarSlice(t),a.writeUInt64(n),a.writeUInt32(y.sequence),a.writeSlice(f),a.writeUInt32(this.locktime),a.writeUInt32(o),i.hash256(l)}getHash(e){return e&&this.isCoinbase()?Buffer.alloc(32,0):i.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,r.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(buffer,e){return this.__toBuffer(buffer,e,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){c(s.tuple(s.Number,s.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){c(s.tuple(s.Number,[s.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(buffer,e,t=!1){buffer||(buffer=Buffer.allocUnsafe(this.byteLength(t)));const n=new r.BufferWriter(buffer,e||0);n.writeInt32(this.version);const i=t&&this.hasWitnesses();return i&&(n.writeUInt8(g.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(g.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach((e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)})),n.writeVarInt(this.outs.length),this.outs.forEach((e=>{void 0!==e.value?n.writeUInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)})),i&&this.ins.forEach((e=>{n.writeVector(e.witness)})),n.writeUInt32(this.locktime),void 0!==e?buffer.slice(e,n.offset):buffer}}t.Transaction=g,g.DEFAULT_SEQUENCE=4294967295,g.SIGHASH_DEFAULT=0,g.SIGHASH_ALL=1,g.SIGHASH_NONE=2,g.SIGHASH_SINGLE=3,g.SIGHASH_ANYONECANPAY=128,g.SIGHASH_OUTPUT_MASK=3,g.SIGHASH_INPUT_MASK=128,g.ADVANCED_TRANSACTION_MARKER=0,g.ADVANCED_TRANSACTION_FLAG=1},47177:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Network=t.ECPoint=t.Satoshi=t.Signer=t.BIP32Path=t.UInt31=t.isPoint=t.typeforce=void 0;const r=n(48764);t.typeforce=n(2401);const i=r.Buffer.alloc(32,0),o=r.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");t.isPoint=function(e){if(!r.Buffer.isBuffer(e))return!1;if(e.length<33)return!1;const t=e[0],n=e.slice(1,33);if(0===n.compare(i))return!1;if(n.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;const a=e.slice(33);return 0!==a.compare(i)&&(!(a.compare(o)>=0)&&(4===t&&65===e.length))};const a=Math.pow(2,31)-1;function s(e){return t.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return t.typeforce.UInt32(e)&&e<=a},t.BIP32Path=s,s.toJSON=()=>"BIP32 derivation path",t.Signer=function(e){return(t.typeforce.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign};function c(e){return!(!e||!("output"in e))&&(!!r.Buffer.isBuffer(e.output)&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version))}t.Satoshi=function(e){return t.typeforce.UInt53(e)&&e<=21e14},t.ECPoint=t.typeforce.quacksLike("Point"),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.TAPLEAF_VERSION_MASK=254,t.isTapleaf=c,t.isTaptree=function e(n){return(0,t.Array)(n)?2===n.length&&n.every((t=>e(t))):c(n)},t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf},28805:(e,t,n)=>{"use strict";const r=n(23482),i=n(36683),o=n(17221),Buffer=n(89509).Buffer,a=n(13550),s=n(1093).Lk,c=n(50361),u={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0,1]},l={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0,1]},f={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0,1]},h={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0,1]},d={word_length:4,var_onion_optin:{required:!1,supported:!0},payment_secret:{required:!1,supported:!0}},p=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],y={m:new a(1e3,10),u:new a(1e6,10),n:new a(1e9,10),p:new a(1e12,10)},g=new a("2100000000000000000",10),b=new a(1e11,10),m=new a(1e8,10),w=new a(1e5,10),v=new a(100,10),_=new a(10,10),E={payment_hash:1,payment_secret:16,description:13,payee_node_key:19,purpose_commit_hash:23,expire_time:6,min_final_cltv_expiry:24,fallback_address:9,routing_info:3,feature_bits:5},S={};for(let e=0,t=Object.keys(E);e<t.length;e++){const n=t[e],r=E[t[e]].toString();S[r]=n}const k={payment_hash:B,payment_secret:B,description:function(e){const buffer=function(e){return Buffer.from(e,"utf8")}(e);return i.toWords(buffer)},payee_node_key:B,purpose_commit_hash:function(e){let buffer;if(void 0===e||!("string"==typeof e||e instanceof String))throw new Error("purpose or purpose commit must be a string or hex string");buffer=e.match(/^([a-zA-Z0-9]{2})*$/)?Buffer.from(e,"hex"):x(Buffer.from(e,"utf8"));return i.toWords(buffer)},expire_time:T,min_final_cltv_expiry:T,fallback_address:function(e,t){return[e.code].concat(B(e.addressHash))},routing_info:function(e){let buffer=Buffer.from([]);return e.forEach((e=>{buffer=Buffer.concat([buffer,C(e.pubkey)]),buffer=Buffer.concat([buffer,C(e.short_channel_id)]),buffer=Buffer.concat([buffer,Buffer.from([0,0,0].concat(T(e.fee_base_msat,8)).slice(-4))]),buffer=Buffer.concat([buffer,Buffer.from([0,0,0].concat(T(e.fee_proportional_millionths,8)).slice(-4))]),buffer=Buffer.concat([buffer,Buffer.from([0].concat(T(e.cltv_expiry_delta,8)).slice(-2))])})),B(buffer)},feature_bits:function(e){let t=e.word_length,n=[];p.forEach((t=>{n.push(!!(e[t]||{}).required),n.push(!!(e[t]||{}).supported)}));for(;!1===n[n.length-1];)n.pop();for(;n.length%5!=0;)n.push(!1);if(e.extra_bits&&Array.isArray(e.extra_bits.bits)&&e.extra_bits.bits.length>0){for(;n.length<e.extra_bits.start_bit;)n.push(!1);n=n.concat(e.extra_bits.bits)}if(void 0!==t&&n.length/5>t)throw new Error("word_length is too small to contain all featureBits");void 0===t&&(t=Math.ceil(n.length/5));return new Array(t).fill(0).map(((e,t)=>n[5*t+4]<<4|n[5*t+3]<<3|n[5*t+2]<<2|n[5*t+1]<<1|n[5*t]<<0)).reverse()}},A={1:e=>R(e,!0).toString("hex"),16:e=>R(e,!0).toString("hex"),13:e=>R(e,!0).toString("utf8"),19:e=>R(e,!0).toString("hex"),23:e=>R(e,!0).toString("hex"),6:I,24:I,9:function(e,t){const n=e[0],r=R(e=e.slice(1),!0);let i=null;switch(n){case 17:i=s.toBase58Check(r,t.pubKeyHash);break;case 18:i=s.toBase58Check(r,t.scriptHash);break;case 0:case 1:i=s.toBech32(r,n,t.bech32)}return{code:n,address:i,addressHash:r.toString("hex")}},3:function(e){const t=[];let n,r,i,o,a,s=R(e,!0);for(;s.length>0;)n=s.slice(0,33).toString("hex"),r=s.slice(33,41).toString("hex"),i=parseInt(s.slice(41,45).toString("hex"),16),o=parseInt(s.slice(45,49).toString("hex"),16),a=parseInt(s.slice(49,51).toString("hex"),16),s=s.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:i,fee_proportional_millionths:o,cltv_expiry_delta:a});return t},5:function(e){const t=e.slice().reverse().map((e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)])).reduce(((e,t)=>e.concat(t)),[]);for(;t.length<2*p.length;)t.push(!1);const n={word_length:e.length};if(p.forEach(((e,r)=>{n[e]={required:t[2*r],supported:t[2*r+1]}})),t.length>2*p.length){const e=t.slice(2*p.length);n.extra_bits={start_bit:2*p.length,bits:e,has_required:e.reduce(((e,t,n)=>n%2!=0?e||!1:e||t),!1)}}else n.extra_bits={start_bit:2*p.length,bits:[],has_required:!1};return n}},O="unknownTag";function P(e){return t=>({tagCode:parseInt(e),words:i.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function I(e){return e.reverse().reduce(((e,t,n)=>e+t*Math.pow(32,n)),0)}function T(e,t){const n=[];if(void 0===t&&(t=5),0===(e=Math.floor(e)))return[0];for(;e>0;)n.push(e&Math.pow(2,t)-1),e=Math.floor(e/Math.pow(2,t));return n.reverse()}function x(e){return r("sha256").update(e).digest()}function N(e,t,n){let r=0,i=0;const o=(1<<n)-1,a=[];for(let s=0;s<e.length;++s)for(r=r<<t|e[s],i+=t;i>=n;)i-=n,a.push(r>>i&o);return i>0&&a.push(r<<n-i&o),a}function R(e,t){let buffer=Buffer.from(N(e,5,8));return t&&5*e.length%8!=0&&(buffer=buffer.slice(0,-1)),buffer}function C(e){return void 0!==e&&("string"==typeof e||e instanceof String)&&e.match(/^([a-zA-Z0-9]{2})*$/)?Buffer.from(e,"hex"):e}function B(e){const buffer=C(e);return i.toWords(buffer)}function L(e,t){const n=e.filter((e=>e.tagName===t));return n.length>0?n[0].data:null}function U(e,t){return null!==L(e,t)}function j(e,t){const n={};if(Object.keys(e).sort().forEach((t=>{n[t]=e[t]})),!0===t){const e="__tagsObject_cache";Object.defineProperty(n,"tagsObject",{get(){return this[e]||Object.defineProperty(this,e,{value:z(this.tags)}),this[e]}})}return n}function D(e){if(!e.toString().match(/^\d+$/))throw new Error("satoshis must be an integer");return M(new a(e,10).mul(new a(1e3,10)))}function M(e){if(!e.toString().match(/^\d+$/))throw new Error("millisatoshis must be an integer");const t=new a(e,10),n=t.toString(10),r=n.length;let i,o;return r>11&&/0{11}$/.test(n)?(i="",o=t.div(b).toString(10)):r>8&&/0{8}$/.test(n)?(i="m",o=t.div(m).toString(10)):r>5&&/0{5}$/.test(n)?(i="u",o=t.div(w).toString(10)):r>2&&/0{2}$/.test(n)?(i="n",o=t.div(v).toString(10)):(i="p",o=t.mul(_).toString(10)),o+i}function H(e,t){const n=F(e,!1);if(!n.mod(new a(1e3,10)).eq(new a(0,10)))throw new Error("Amount is outside of valid range");const r=n.div(new a(1e3,10));return t?r.toString():r}function F(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=new a(r,10),o=n?i.mul(b).div(y[n]):i.mul(b);if("p"===n&&!i.mod(new a(10,10)).eq(new a(0,10))||o.gt(g))throw new Error("Amount is outside of valid range");return t?o.toString():o}function z(e){const t={};return e.forEach((e=>{e.tagName===O?(t.unknownTags||(t.unknownTags=[]),t.unknownTags.push(e.data)):t[e.tagName]=e.data})),t}e.exports={encode:function(e,t){const n=c(e);void 0===t&&(t=!0);const r=!(void 0===n.signature||void 0===n.recoveryFlag);let l,f,h,p,y,g;if(void 0!==n.network||r){if(void 0===n.network&&r)throw new Error("Need network for proper payment request reconstruction");if(!n.network.bech32||void 0===n.network.pubKeyHash||void 0===n.network.scriptHash||!Array.isArray(n.network.validWitnessVersions))throw new Error("Invalid network");l=n.network}else n.network=u,l=u;if(void 0!==n.timestamp||r){if(void 0===n.timestamp&&r)throw new Error("Need timestamp for proper payment request reconstruction")}else n.timestamp=Math.floor((new Date).getTime()/1e3);if(void 0===n.tags)throw new Error("Payment Requests need tags array");if(!U(n.tags,S[1]))throw new Error("Lightning Payment Request needs a payment hash");if(U(n.tags,S[16]))if(U(n.tags,S[5])){const e=L(n.tags,S[5]);if(!e.payment_secret||!e.payment_secret.supported&&!e.payment_secret.required)throw new Error("Payment request requires feature bits with at least payment secret support flagged if payment secret is included")}else{if(!t)throw new Error("Payment request requires feature bits with at least payment secret support flagged if payment secret is included");n.tags.push({tagName:S[5],data:d})}if(!U(n.tags,S[13])&&!U(n.tags,S[23])){if(!t)throw new Error("Payment request requires description or purpose commit hash");n.tags.push({tagName:S[13],data:""})}if(U(n.tags,S[13])&&Buffer.from(L(n.tags,S[13]),"utf8").length>639)throw new Error("Description is too long: Max length 639 bytes");if(U(n.tags,S[6])||r||!t||n.tags.push({tagName:S[6],data:3600}),U(n.tags,S[24])||r||!t||n.tags.push({tagName:S[24],data:9}),U(n.tags,S[19])&&(h=C(L(n.tags,S[19]))),n.payeeNodeKey&&(f=C(n.payeeNodeKey)),f&&h&&!h.equals(f))throw new Error("payeeNodeKey and tag payee node key do not match");if(f=f||h,f&&(n.payeeNodeKey=f.toString("hex")),U(n.tags,S[9])){const e=L(n.tags,S[9]);if(g=e.address,y=e.addressHash,p=e.code,void 0===y||void 0===p){let t,n;try{t=s.fromBech32(g),y=t.data,p=t.version}catch(e){try{n=s.fromBase58Check(g),n.version===l.pubKeyHash?p=17:n.version===l.scriptHash&&(p=18),y=n.hash}catch(e){throw new Error("Fallback address type is unknown")}}if(t&&!(t.version in l.validWitnessVersions))throw new Error("Fallback address witness version is unknown");if(t&&t.prefix!==l.bech32)throw new Error("Fallback address network type does not match payment request network type");if(n&&n.version!==l.pubKeyHash&&n.version!==l.scriptHash)throw new Error("Fallback address version (base58) is unknown or the network type is incorrect");e.addressHash=y.toString("hex"),e.code=p}}if(U(n.tags,S[3])){L(n.tags,S[3]).forEach((e=>{if(void 0===e.pubkey||void 0===e.short_channel_id||void 0===e.fee_base_msat||void 0===e.fee_proportional_millionths||void 0===e.cltv_expiry_delta)throw new Error("Routing info is incomplete");if(!o.publicKeyVerify(C(e.pubkey)))throw new Error("Routing info pubkey is not a valid pubkey");const t=C(e.short_channel_id);if(!(t instanceof Buffer)||8!==t.length)throw new Error("Routing info short channel id must be 8 bytes");if("number"!=typeof e.fee_base_msat||Math.floor(e.fee_base_msat)!==e.fee_base_msat)throw new Error("Routing info fee base msat is not an integer");if("number"!=typeof e.fee_proportional_millionths||Math.floor(e.fee_proportional_millionths)!==e.fee_proportional_millionths)throw new Error("Routing info fee proportional millionths is not an integer");if("number"!=typeof e.cltv_expiry_delta||Math.floor(e.cltv_expiry_delta)!==e.cltv_expiry_delta)throw new Error("Routing info cltv expiry delta is not an integer")}))}let b,m="ln";if(m+=l.bech32,n.millisatoshis&&n.satoshis){b=M(new a(n.millisatoshis,10));if(D(new a(n.satoshis,10))!==b)throw new Error("satoshis and millisatoshis do not match")}else b=n.millisatoshis?M(new a(n.millisatoshis,10)):n.satoshis?D(new a(n.satoshis,10)):"";m+=b;const w=T(n.timestamp);for(;w.length<7;)w.unshift(0);const v=n.tags;let _=[];v.forEach((e=>{const t=Object.keys(k);if(r&&t.push(O),-1===t.indexOf(e.tagName))throw new Error("Unknown tag key: "+e.tagName);let n;if(e.tagName!==O){_.push(E[e.tagName]);n=(0,k[e.tagName])(e.data)}else{const t=function(e){return e.words=i.decode(e.words,Number.MAX_SAFE_INTEGER).words,e}(e.data);_.push(t.tagCode),n=t.words}_=_.concat([0].concat(T(n.length)).slice(-2)),_=_.concat(n)}));let A=w.concat(_);const P=x(Buffer.concat([Buffer.from(m,"utf8"),Buffer.from(N(A,5,8))]));let I;if(r){if(!f)throw new Error("Reconstruction with signature and recoveryID requires payeeNodeKey to verify correctness of input data.");{const e=Buffer.from(o.ecdsaRecover(Buffer.from(n.signature,"hex"),n.recoveryFlag,P,!0));if(f&&!f.equals(e))throw new Error("Signature, message, and recoveryID did not produce the same pubkey as payeeNodeKey");I=B(n.signature+"0"+n.recoveryFlag)}}return I&&(A=A.concat(I)),U(n.tags,S[6])&&(n.timeExpireDate=n.timestamp+L(n.tags,S[6]),n.timeExpireDateString=new Date(1e3*n.timeExpireDate).toISOString()),n.timestampString=new Date(1e3*n.timestamp).toISOString(),n.complete=!!I,n.paymentRequest=n.complete?i.encode(m,A,Number.MAX_SAFE_INTEGER):"",n.prefix=m,n.wordsTemp=i.encode("temp",A,Number.MAX_SAFE_INTEGER),j(n)},decode:function(e,t){if("string"!=typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const n=i.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const r=n.prefix;let a=n.words;const s=a.slice(-104),c=a.slice(0,-104);a=a.slice(0,-104);let d=R(s,!0);const p=d.slice(-1)[0];if(d=d.slice(0,-1),!(p in[0,1,2,3])||64!==d.length)throw new Error("Signature is missing or incorrect");let y=r.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(y&&!y[2]&&(y=r.match(/^ln(\S+)$/)),!y)throw new Error("Not a proper lightning payment request");const g=y[1];let b;if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");b=t}else switch(g){case u.bech32:b=u;break;case l.bech32:b=l;break;case f.bech32:b=f;break;case h.bech32:b=h}if(!b||b.bech32!==g)throw new Error("Unknown coin bech32 prefix");const m=y[2];let w,v,_;if(m){const e=y[3];try{w=parseInt(H(m+e,!0))}catch(e){w=null,_=!0}v=F(m+e,!0)}else w=null,v=null;const E=I(a.slice(0,7)),k=new Date(1e3*E).toISOString();a=a.slice(7);const T=[];let C,B,D,M,z,K;for(;a.length>0;){const e=a[0].toString();C=S[e]||O,B=A[e]||P(e),a=a.slice(1),D=I(a.slice(0,2)),a=a.slice(2),M=a.slice(0,D),a=a.slice(D),T.push({tagName:C,data:B(M,b)})}U(T,S[6])&&(z=E+L(T,S[6]),K=new Date(1e3*z).toISOString());const q=x(Buffer.concat([Buffer.from(r,"utf8"),Buffer.from(N(c,5,8))])),V=Buffer.from(o.ecdsaRecover(d,p,q,!0));if(U(T,S[19])&&L(T,S[19])!==V.toString("hex"))throw new Error("Lightning Payment Request signature pubkey does not match payee pubkey");let W={paymentRequest:e,complete:!0,prefix:r,wordsTemp:i.encode("temp",c.concat(s),Number.MAX_SAFE_INTEGER),network:b,satoshis:w,millisatoshis:v,timestamp:E,timestampString:k,payeeNodeKey:V.toString("hex"),signature:d.toString("hex"),recoveryFlag:p,tags:T};return _&&delete W.satoshis,z&&(W=Object.assign(W,{timeExpireDate:z,timeExpireDateString:K})),j(W,!0)},sign:function(e,t){const n=c(e),r=C(t);if(n.complete&&n.paymentRequest)return n;if(void 0===r||32!==r.length||!o.privateKeyVerify(r))throw new Error("privateKey must be a 32 byte Buffer and valid private key");let a,s;if(U(n.tags,S[19])&&(s=C(L(n.tags,S[19]))),n.payeeNodeKey&&(a=C(n.payeeNodeKey)),a&&s&&!s.equals(a))throw new Error("payee node key tag and payeeNodeKey attribute must match");a=s||a;const u=Buffer.from(o.publicKeyCreate(r));if(a&&!u.equals(a))throw new Error("The private key given is not the private key of the node public key given");const l=i.decode(n.wordsTemp,Number.MAX_SAFE_INTEGER).words,f=x(Buffer.concat([Buffer.from(n.prefix,"utf8"),R(l)])),h=o.ecdsaSign(f,r);h.signature=Buffer.from(h.signature);const d=B(h.signature.toString("hex")+"0"+h.recid);return n.payeeNodeKey=u.toString("hex"),n.signature=h.signature.toString("hex"),n.recoveryFlag=h.recid,n.wordsTemp=i.encode("temp",l.concat(d),Number.MAX_SAFE_INTEGER),n.complete=!0,n.paymentRequest=i.encode(n.prefix,l.concat(d),Number.MAX_SAFE_INTEGER),j(n)},satToHrp:D,millisatToHrp:M,hrpToSat:H,hrpToMillisat:F}},29931:(e,t,n)=>{var r;function i(e){this.rand=e}if(e.exports=function(e){return r||(r=new i(null)),r.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(89214);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){}},77191:(e,t,n)=>{var r=n(58162);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},53310:(e,t,n)=>{"use strict";var r=n(77191),Buffer=n(89509).Buffer;e.exports=function(e){function t(buffer){var t=buffer.slice(0,-4),n=buffer.slice(-4),r=e(t);if(!(n[0]^r[0]|n[1]^r[1]|n[2]^r[2]|n[3]^r[3]))return t}return{encode:function(t){var n=e(t);return r.encode(Buffer.concat([t,n],t.length+4))},decode:function(e){var n=t(r.decode(e));if(!n)throw new Error("Invalid checksum");return n},decodeUnsafe:function(e){var buffer=r.decodeUnsafe(e);if(buffer)return t(buffer)}}}},58334:(e,t,n)=>{"use strict";var r=n(23482),i=n(53310);e.exports=i((function(buffer){var e=r("sha256").update(buffer).digest();return r("sha256").update(e).digest()}))},48764:(e,t,n)=>{"use strict";const r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=Buffer,t.SlowBuffer=function(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer.prototype),t}function Buffer(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|p(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if($(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&($(e,SharedArrayBuffer)||e&&$(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return Buffer.from(r,t,n);const i=function(e){if(Buffer.isBuffer(e)){const t=0|d(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Y(e.length)?s(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),s(e<0?0:0|d(e))}function f(e){const t=e.length<0?0:0|d(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,Buffer.prototype),r}function d(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function p(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(i)return r?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function b(buffer,e,t,n,r){if(0===buffer.length)return-1;if("string"==typeof t?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),Y(t=+t)&&(t=r?0:buffer.length-1),t<0&&(t=buffer.length+t),t>=buffer.length){if(r)return-1;t=buffer.length-1}else if(t<0){if(!r)return-1;t=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:m(buffer,e,t,n,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(buffer,e,t):Uint8Array.prototype.lastIndexOf.call(buffer,e,t):m(buffer,[e],t,n,r);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){let o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(Y(r))return a;e[n+a]=r}return a}function v(e,t,n,r){return G(V(t,e.length-n),e,n,r)}function _(e,t,n,r){return G(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return G(W(t),e,n,r)}function S(e,t,n,r){return G(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}t.kMaxLength=a,Buffer.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},Buffer.allocUnsafe=function(e){return l(e)},Buffer.allocUnsafeSlow=function(e){return l(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if($(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const buffer=Buffer.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if($(t,Uint8Array))r+t.length>buffer.length?(Buffer.isBuffer(t)||(t=Buffer.from(t)),t.copy(buffer,r)):Uint8Array.prototype.set.call(buffer,t,r);else{if(!Buffer.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(buffer,r)}r+=t.length}return buffer},Buffer.byteLength=p,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},Buffer.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},Buffer.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(Buffer.prototype[o]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,t,n,r,i){if($(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},Buffer.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function P(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Z[e[r]];return i}function x(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r,i){F(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function B(e,t,n,r,i){F(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return t=+t,n>>>=0,o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}Buffer.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,Buffer.prototype),r},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readBigUInt64LE=X((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=X((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),Buffer.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},Buffer.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readBigInt64LE=X((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer.prototype.readBigInt64BE=X((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||K(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigUInt64LE=X((function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=X((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},Buffer.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigInt64LE=X((function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=X((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},Buffer.prototype.copy=function(e,t,n,r){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},Buffer.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=Buffer.isBuffer(e)?e:Buffer.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const D={};function M(e,t,n){D[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function H(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function F(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new D.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||K(t,e.length-(n+1))}(r,i,o)}function z(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function K(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new D.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=H(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=H(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function V(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},71027:(e,t,n)=>{var Buffer=n(89509).Buffer,r=n(42830).Transform,i=n(32553).s;function o(e){r.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(35717)(o,r),o.prototype.update=function(e,t,n){"string"==typeof e&&(e=Buffer.from(e,t));var r=this._update(e);return this.hashMode?this:(n&&(r=this._toString(r,n)),r)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},o.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},o.prototype._finalOrDigest=function(e){var t=this.__final()||Buffer.alloc(0);return e&&(t=this._toString(t,e,!0)),t},o.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},e.exports=o},23482:(e,t,n)=>{"use strict";var r=n(35717),i=n(62318),o=n(79785),a=n(89072),s=n(71027);function c(e){s.call(this,"digest"),this._hash=e}r(c,s),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new o:new c(a(e))}},78028:(e,t,n)=>{var r=n(62318);e.exports=function(buffer){return(new r).update(buffer).digest()}},58355:(e,t,n)=>{"use strict";var r=n(35717),i=n(51031),o=n(71027),Buffer=n(89509).Buffer,a=n(78028),s=n(79785),c=n(89072),u=Buffer.alloc(128);function l(e,t){o.call(this,"digest"),"string"==typeof t&&(t=Buffer.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new s:c(e)).update(t).digest():t.length<n&&(t=Buffer.concat([t,u],n));for(var r=this._ipad=Buffer.allocUnsafe(n),i=this._opad=Buffer.allocUnsafe(n),a=0;a<n;a++)r[a]=54^t[a],i[a]=92^t[a];this._hash="rmd160"===e?new s:c(e),this._hash.update(r)}r(l,o),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new s:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new l("rmd160",t):"md5"===e?new i(a,t):new l(e,t)}},51031:(e,t,n)=>{"use strict";var r=n(35717),Buffer=n(89509).Buffer,i=n(71027),o=Buffer.alloc(128),a=64;function s(e,t){i.call(this,"digest"),"string"==typeof t&&(t=Buffer.from(t)),this._alg=e,this._key=t,t.length>a?t=e(t):t.length<a&&(t=Buffer.concat([t,o],a));for(var n=this._ipad=Buffer.allocUnsafe(a),r=this._opad=Buffer.allocUnsafe(a),s=0;s<a;s++)n[s]=54^t[s],r[s]=92^t[s];this._hash=[n]}r(s,i),s.prototype._update=function(e){this._hash.push(e)},s.prototype._final=function(){var e=this._alg(Buffer.concat(this._hash));return this._alg(Buffer.concat([this._opad,e]))},e.exports=s},40452:function(e,t,n){var r;e.exports=(r=n(78249),n(98269),n(68214),n(90888),n(75109),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],a=[],s=[],c=[],u=[],l=[],f=[],h=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var y=e[n],g=e[y],b=e[g],m=257*e[p]^16843008*p;a[n]=m<<24|m>>>8,s[n]=m<<16|m>>>16,c[n]=m<<8|m>>>24,u[n]=m,m=16843009*b^65537*g^257*y^16843008*n,l[p]=m<<24|m>>>8,f[p]=m<<16|m>>>16,h[p]=m<<8|m>>>24,d[p]=m,n?(n=y^e[e[e[b^y]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=t[a]:(u=o[a-1],a%n?n>6&&a%n==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=p[a/n|0]<<24),o[a]=o[a-n]^u);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var u=o[a];else u=o[a-4];s[c]=c<4||a<=4?u:l[i[u>>>24]]^f[i[u>>>16&255]]^h[i[u>>>8&255]]^d[i[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<c;p++){var y=r[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^n[d++],g=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&u]^n[d++],b=r[f>>>24]^i[h>>>16&255]^o[u>>>8&255]^a[255&l]^n[d++],m=r[h>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^n[d++];u=y,l=g,f=b,h=m}y=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[d++],g=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^n[d++],b=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[d++],m=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],e[t]=y,e[t+1]=g,e[t+2]=b,e[t+3]=m},keySize:8});e.AES=t._createHelper(y)}(),r.AES)},87407:function(e,t,n){var r;e.exports=(r=n(78249),n(98269),n(68214),n(90888),n(75109),function(){var e=r,t=e.lib.BlockCipher,n=e.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function c(e,t){let n=t>>24&255,r=t>>16&255,i=t>>8&255,o=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][i],a+=e.sbox[3][o],a}function u(e,t,n){let r,o=t,a=n;for(let t=0;t<i;++t)o^=e.pbox[t],a=c(e,o)^a,r=o,o=a,a=r;return r=o,o=a,a=r,a^=e.pbox[i],o^=e.pbox[i+1],{left:o,right:a}}function l(e,t,n){let r,o=t,a=n;for(let t=i+1;t>1;--t)o^=e.pbox[t],a=c(e,o)^a,r=o,o=a,a=r;return r=o,o=a,a=r,a^=e.pbox[1],o^=e.pbox[0],{left:o,right:a}}function f(e,t,n){for(let t=0;t<4;t++){e.sbox[t]=[];for(let n=0;n<256;n++)e.sbox[t][n]=a[t][n]}let r=0;for(let a=0;a<i+2;a++)e.pbox[a]=o[a]^t[r],r++,r>=n&&(r=0);let s=0,c=0,l=0;for(let t=0;t<i+2;t+=2)l=u(e,s,c),s=l.left,c=l.right,e.pbox[t]=s,e.pbox[t+1]=c;for(let t=0;t<4;t++)for(let n=0;n<256;n+=2)l=u(e,s,c),s=l.left,c=l.right,e.sbox[t][n]=s,e.sbox[t][n+1]=c;return!0}var h=n.Blowfish=t.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;f(s,t,n)}},encryptBlock:function(e,t){var n=u(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=l(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=t._createHelper(h)}(),r.Blowfish)},75109:function(e,t,n){var r;e.exports=(r=n(78249),n(90888),void(r.lib.Cipher||function(e){var t=r,n=t.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),u=t.algo.EvpKDF,l=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:b}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),f=(n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),h=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=f.CBC=function(){var t=h.extend();function n(t,n,r){var i,o=this._iv;o?(i=o,this._iv=e):i=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=o}}),t}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var c=o.create(a,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},y=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:p}),reset:function(){var e;l.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),y.create({ciphertext:n,salt:t})}},b=n.SerializableCipher=i.extend({cfg:i.extend({format:g}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return y.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),m=(t.kdf={}).OpenSSL={execute:function(e,t,n,r,i){if(r||(r=o.random(8)),i)a=u.create({keySize:t+n,hasher:i}).compute(e,r);else var a=u.create({keySize:t+n}).compute(e,r);var s=o.create(a.words.slice(t),4*n);return a.sigBytes=4*t,y.create({key:a,iv:s,salt:r})}},w=n.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:m}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=b.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=i.iv,b.decrypt.call(this,e,t,i.key,r)}})}()))},78249:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(42480)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),l=a.enc={},f=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,o);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(i,f);n=i.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(s.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new y.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)},98269:function(e,t,n){var r;e.exports=(r=n(78249),function(){var e=r,t=e.lib.WordArray;function n(e,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),r.enc.Base64)},43786:function(e,t,n){var r;e.exports=(r=n(78249),function(){var e=r,t=e.lib.WordArray;function n(e,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<r;c++)o.push(i.charAt(s>>>6*(3-c)&63));var u=i.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e,t){void 0===t&&(t=!0);var r=e.length,i=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<i.length;a++)o[i.charCodeAt(a)]=a}var s=i.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(r=c)}return n(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),r.enc.Base64url)},63465:function(e,t,n){var r;e.exports=(r=n(78249),r.enc.Hex)},50298:function(e,t,n){var r;e.exports=(r=n(78249),function(){var e=r,t=e.lib.WordArray,n=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},55743:function(e,t,n){var r;e.exports=(r=n(78249),r.enc.Utf8)},90888:function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(l=n(78249),n(62783),n(89824),i=(r=l).lib,o=i.Base,a=i.WordArray,s=r.algo,c=s.MD5,u=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=a.create(),s=o.words,c=r.keySize,u=r.iterations;s.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*c,o}}),r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},l.EvpKDF)},42209:function(e,t,n){var r,i,o,a;e.exports=(a=n(78249),n(75109),i=(r=a).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},a.format.Hex)},88010:function(e,t,n){var r;e.exports=(r=n(78249),n(52153),n(89824),r.HmacSHA256)},89824:function(e,t,n){var r,i,o,a;e.exports=(r=n(78249),o=(i=r).lib.Base,a=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),s=i.words,c=o.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},81354:function(e,t,n){var r;e.exports=(r=n(78249),n(64938),n(4433),n(50298),n(98269),n(43786),n(68214),n(62783),n(52153),n(87792),n(70034),n(17460),n(13327),n(30706),n(89824),n(2112),n(90888),n(75109),n(8568),n(74242),n(59968),n(27660),n(31148),n(43615),n(92807),n(71077),n(56475),n(16991),n(42209),n(40452),n(94253),n(51857),n(84454),n(93974),n(87407),r)},4433:function(e,t,n){var r;e.exports=(r=n(78249),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},68214:function(e,t,n){var r;e.exports=(r=n(78249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],c=e[t+1],d=e[t+2],p=e[t+3],y=e[t+4],g=e[t+5],b=e[t+6],m=e[t+7],w=e[t+8],v=e[t+9],_=e[t+10],E=e[t+11],S=e[t+12],k=e[t+13],A=e[t+14],O=e[t+15],P=o[0],I=o[1],T=o[2],x=o[3];P=u(P,I,T,x,a,7,s[0]),x=u(x,P,I,T,c,12,s[1]),T=u(T,x,P,I,d,17,s[2]),I=u(I,T,x,P,p,22,s[3]),P=u(P,I,T,x,y,7,s[4]),x=u(x,P,I,T,g,12,s[5]),T=u(T,x,P,I,b,17,s[6]),I=u(I,T,x,P,m,22,s[7]),P=u(P,I,T,x,w,7,s[8]),x=u(x,P,I,T,v,12,s[9]),T=u(T,x,P,I,_,17,s[10]),I=u(I,T,x,P,E,22,s[11]),P=u(P,I,T,x,S,7,s[12]),x=u(x,P,I,T,k,12,s[13]),T=u(T,x,P,I,A,17,s[14]),P=l(P,I=u(I,T,x,P,O,22,s[15]),T,x,c,5,s[16]),x=l(x,P,I,T,b,9,s[17]),T=l(T,x,P,I,E,14,s[18]),I=l(I,T,x,P,a,20,s[19]),P=l(P,I,T,x,g,5,s[20]),x=l(x,P,I,T,_,9,s[21]),T=l(T,x,P,I,O,14,s[22]),I=l(I,T,x,P,y,20,s[23]),P=l(P,I,T,x,v,5,s[24]),x=l(x,P,I,T,A,9,s[25]),T=l(T,x,P,I,p,14,s[26]),I=l(I,T,x,P,w,20,s[27]),P=l(P,I,T,x,k,5,s[28]),x=l(x,P,I,T,d,9,s[29]),T=l(T,x,P,I,m,14,s[30]),P=f(P,I=l(I,T,x,P,S,20,s[31]),T,x,g,4,s[32]),x=f(x,P,I,T,w,11,s[33]),T=f(T,x,P,I,E,16,s[34]),I=f(I,T,x,P,A,23,s[35]),P=f(P,I,T,x,c,4,s[36]),x=f(x,P,I,T,y,11,s[37]),T=f(T,x,P,I,m,16,s[38]),I=f(I,T,x,P,_,23,s[39]),P=f(P,I,T,x,k,4,s[40]),x=f(x,P,I,T,a,11,s[41]),T=f(T,x,P,I,p,16,s[42]),I=f(I,T,x,P,b,23,s[43]),P=f(P,I,T,x,v,4,s[44]),x=f(x,P,I,T,S,11,s[45]),T=f(T,x,P,I,O,16,s[46]),P=h(P,I=f(I,T,x,P,d,23,s[47]),T,x,a,6,s[48]),x=h(x,P,I,T,m,10,s[49]),T=h(T,x,P,I,A,15,s[50]),I=h(I,T,x,P,g,21,s[51]),P=h(P,I,T,x,S,6,s[52]),x=h(x,P,I,T,p,10,s[53]),T=h(T,x,P,I,_,15,s[54]),I=h(I,T,x,P,c,21,s[55]),P=h(P,I,T,x,w,6,s[56]),x=h(x,P,I,T,O,10,s[57]),T=h(T,x,P,I,b,15,s[58]),I=h(I,T,x,P,k,21,s[59]),P=h(P,I,T,x,y,6,s[60]),x=h(x,P,I,T,E,10,s[61]),T=h(T,x,P,I,d,15,s[62]),I=h(I,T,x,P,v,21,s[63]),o[0]=o[0]+P|0,o[1]=o[1]+I|0,o[2]=o[2]+T|0,o[3]=o[3]+x|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function l(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function f(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function h(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},8568:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.mode.CFB=function(){var e=r.lib.BlockCipherMode.extend();function t(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=o}}),e}(),r.mode.CFB)},59968:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.mode.CTRGladman=function(){var e=r.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var i=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),n(a);var s=a.slice(0);r.encryptBlock(s,0);for(var c=0;c<i;c++)e[t+c]^=s[c]}});return e.Decryptor=i,e}(),r.mode.CTRGladman)},74242:function(e,t,n){var r,i,o;e.exports=(o=n(78249),n(75109),o.mode.CTR=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}}),r.Decryptor=i,r),o.mode.CTR)},31148:function(e,t,n){var r,i;e.exports=(i=n(78249),n(75109),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),i.mode.ECB)},27660:function(e,t,n){var r,i,o;e.exports=(o=n(78249),n(75109),o.mode.OFB=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}}),r.Decryptor=i,r),o.mode.OFB)},43615:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Ansix923)},92807:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.pad.Iso10126={pad:function(e,t){var n=4*t,i=n-e.sigBytes%n;e.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.pad.Iso10126)},71077:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.pad.Iso97971={pad:function(e,t){e.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(e,t)},unpad:function(e){r.pad.ZeroPadding.unpad(e),e.sigBytes--}},r.pad.Iso97971)},16991:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},56475:function(e,t,n){var r;e.exports=(r=n(78249),n(75109),r.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},r.pad.ZeroPadding)},2112:function(e,t,n){var r,i,o,a,s,c,u,l,f;e.exports=(f=n(78249),n(52153),n(89824),i=(r=f).lib,o=i.Base,a=i.WordArray,s=r.algo,c=s.SHA256,u=s.HMAC,l=s.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=u.create(n.hasher,e),i=a.create(),o=a.create([1]),s=i.words,c=o.words,l=n.keySize,f=n.iterations;s.length<l;){var h=r.update(t).finalize(o);r.reset();for(var d=h.words,p=d.length,y=h,g=1;g<f;g++){y=r.finalize(y),r.reset();for(var b=y.words,m=0;m<p;m++)d[m]^=b[m]}i.concat(h),c[0]++}return i.sigBytes=4*l,i}}),r.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)},f.PBKDF2)},93974:function(e,t,n){var r;e.exports=(r=n(78249),n(98269),n(68214),n(90888),n(75109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],o=[],a=[],s=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;for(r[0]^=u,r[1]^=f,r[2]^=l,r[3]^=h,r[4]^=u,r[5]^=f,r[6]^=l,r[7]^=h,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),r.RabbitLegacy)},84454:function(e,t,n){var r;e.exports=(r=n(78249),n(98269),n(68214),n(90888),n(75109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=[],o=[],a=[],s=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;for(i[0]^=u,i[1]^=f,i[2]^=l,i[3]^=h,i[4]^=u,i[5]^=f,i[6]^=l,i[7]^=h,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),r.Rabbit)},51857:function(e,t,n){var r;e.exports=(r=n(78249),n(98269),n(68214),n(90888),n(75109),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(i);var a=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(a)}(),r.RC4)},30706:function(e,t,n){var r;e.exports=(r=n(78249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,d,v,_,E,S,k,A,O,P,I=this._hash.words,T=f.words,x=h.words,N=s.words,R=c.words,C=u.words,B=l.words;for(E=o=I[0],S=a=I[1],k=d=I[2],A=v=I[3],O=_=I[4],n=0;n<80;n+=1)P=o+e[t+N[n]]|0,P+=n<16?p(a,d,v)+T[0]:n<32?y(a,d,v)+T[1]:n<48?g(a,d,v)+T[2]:n<64?b(a,d,v)+T[3]:m(a,d,v)+T[4],P=(P=w(P|=0,C[n]))+_|0,o=_,_=v,v=w(d,10),d=a,a=P,P=E+e[t+R[n]]|0,P+=n<16?m(S,k,A)+x[0]:n<32?b(S,k,A)+x[1]:n<48?g(S,k,A)+x[2]:n<64?y(S,k,A)+x[3]:p(S,k,A)+x[4],P=(P=w(P|=0,B[n]))+O|0,E=O,O=A,A=w(k,10),k=S,S=P;P=I[1]+d+A|0,I[1]=I[2]+v+O|0,I[2]=I[3]+_+E|0,I[3]=I[4]+o+S|0,I[4]=I[0]+a+k|0,I[0]=P},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function y(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function b(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function w(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(d),t.HmacRIPEMD160=o._createHmacHelper(d)}(Math),r.RIPEMD160)},62783:function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(l=n(78249),i=(r=l).lib,o=i.WordArray,a=i.Hasher,s=r.algo,c=[],u=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+s+c[u];f+=u<20?1518500249+(i&o|~i&a):u<40?1859775393+(i^o^a):u<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,s=a,a=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u),l.SHA1)},87792:function(e,t,n){var r,i,o,a,s,c;e.exports=(c=n(78249),n(52153),i=(r=c).lib.WordArray,o=r.algo,a=o.SHA256,s=o.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=a._createHelper(s),r.HmacSHA224=a._createHmacHelper(s),c.SHA224)},52153:function(e,t,n){var r;e.exports=(r=n(78249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var p=u[d-15],y=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[d-2],b=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[d]=y+u[d-7]+b+u[d-16]}var m=r&i^r&o^i&o,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[d]+u[d];h=f,f=l,l=s,s=a+v|0,a=o,o=i,i=r,r=v+(w+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},13327:function(e,t,n){var r;e.exports=(r=n(78249),n(64938),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.x64.Word,s=t.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,f=0,h=0;h<7;h++){if(1&i){var d=(1<<h)-1;d<32?f^=1<<d:s^=1<<d-32}128&i?i=i<<1^113:i<<=1}l[o]=a.create(s,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=a.create()}();var h=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=n[i]).high^=a,I.low^=o}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var d=0,p=0,y=0;y<5;y++)d^=(I=n[h+5*y]).high,p^=I.low;var g=f[h];g.high=d,g.low=p}for(h=0;h<5;h++){var b=f[(h+4)%5],m=f[(h+1)%5],w=m.high,v=m.low;for(d=b.high^(w<<1|v>>>31),p=b.low^(v<<1|w>>>31),y=0;y<5;y++)(I=n[h+5*y]).high^=d,I.low^=p}for(var _=1;_<25;_++){var E=(I=n[_]).high,S=I.low,k=c[_];k<32?(d=E<<k|S>>>32-k,p=S<<k|E>>>32-k):(d=S<<k-32|E>>>64-k,p=E<<k-32|S>>>64-k);var A=f[u[_]];A.high=d,A.low=p}var O=f[0],P=n[0];for(O.high=P.high,O.low=P.low,h=0;h<5;h++)for(y=0;y<5;y++){var I=n[_=h+5*y],T=f[_],x=f[(h+1)%5+5*y],N=f[(h+2)%5+5*y];I.high=T.high^~x.high&N.high,I.low=T.low^~x.low&N.low}I=n[0];var R=l[s];I.high^=R.high,I.low^=R.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var f=a[l],h=f.high,d=f.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(h)}return new i.init(u,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(h),t.HmacSHA3=o._createHmacHelper(h)}(Math),r.SHA3)},17460:function(e,t,n){var r,i,o,a,s,c,u,l;e.exports=(l=n(78249),n(64938),n(70034),i=(r=l).x64,o=i.Word,a=i.WordArray,s=r.algo,c=s.SHA512,u=s.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(u),r.HmacSHA384=c._createHmacHelper(u),l.SHA384)},70034:function(e,t,n){var r;e.exports=(r=n(78249),n(64938),function(){var e=r,t=e.lib.Hasher,n=e.x64,i=n.Word,o=n.WordArray,a=e.algo;function s(){return i.create.apply(i,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var l=a.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=r.high,p=r.low,y=i.high,g=i.low,b=o.high,m=o.low,w=a.high,v=a.low,_=s.high,E=s.low,S=l.high,k=l.low,A=f.high,O=f.low,P=h.high,I=h.low,T=d,x=p,N=y,R=g,C=b,B=m,L=w,U=v,j=_,D=E,M=S,H=k,F=A,z=O,K=P,q=I,V=0;V<80;V++){var W,G,$=u[V];if(V<16)G=$.high=0|e[t+2*V],W=$.low=0|e[t+2*V+1];else{var Y=u[V-15],Z=Y.high,X=Y.low,J=(Z>>>1|X<<31)^(Z>>>8|X<<24)^Z>>>7,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^(X>>>7|Z<<25),ee=u[V-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=u[V-7],ae=oe.high,se=oe.low,ce=u[V-16],ue=ce.high,le=ce.low;G=(G=(G=J+ae+((W=Q+se)>>>0<Q>>>0?1:0))+re+((W+=ie)>>>0<ie>>>0?1:0))+ue+((W+=le)>>>0<le>>>0?1:0),$.high=G,$.low=W}var fe,he=j&M^~j&F,de=D&H^~D&z,pe=T&N^T&C^N&C,ye=x&R^x&B^R&B,ge=(T>>>28|x<<4)^(T<<30|x>>>2)^(T<<25|x>>>7),be=(x>>>28|T<<4)^(x<<30|T>>>2)^(x<<25|T>>>7),me=(j>>>14|D<<18)^(j>>>18|D<<14)^(j<<23|D>>>9),we=(D>>>14|j<<18)^(D>>>18|j<<14)^(D<<23|j>>>9),ve=c[V],_e=ve.high,Ee=ve.low,Se=K+me+((fe=q+we)>>>0<q>>>0?1:0),ke=be+ye;K=F,q=z,F=M,z=H,M=j,H=D,j=L+(Se=(Se=(Se=Se+he+((fe+=de)>>>0<de>>>0?1:0))+_e+((fe+=Ee)>>>0<Ee>>>0?1:0))+G+((fe+=W)>>>0<W>>>0?1:0))+((D=U+fe|0)>>>0<U>>>0?1:0)|0,L=C,U=B,C=N,B=R,N=T,R=x,T=Se+(ge+pe+(ke>>>0<be>>>0?1:0))+((x=fe+ke|0)>>>0<fe>>>0?1:0)|0}p=r.low=p+x,r.high=d+T+(p>>>0<x>>>0?1:0),g=i.low=g+R,i.high=y+N+(g>>>0<R>>>0?1:0),m=o.low=m+B,o.high=b+C+(m>>>0<B>>>0?1:0),v=a.low=v+U,a.high=w+L+(v>>>0<U>>>0?1:0),E=s.low=E+D,s.high=_+j+(E>>>0<D>>>0?1:0),k=l.low=k+H,l.high=S+M+(k>>>0<H>>>0?1:0),O=f.low=O+z,f.high=A+F+(O>>>0<z>>>0?1:0),I=h.low=I+q,h.high=P+K+(I>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),r.SHA512)},94253:function(e,t,n){var r;e.exports=(r=n(78249),n(98269),n(68214),n(90888),n(75109),function(){var e=r,t=e.lib,n=t.WordArray,i=t.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var u=i[o]=[],l=c[o];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var f=this._invSubKeys=[];for(n=0;n<16;n++)f[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=u[c][((a^i[c])&l[c])>>>0];this._lBlock=a,this._rBlock=o^s}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function d(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=i._createHelper(f);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=f.createEncryptor(n.create(t)),this._des2=f.createEncryptor(n.create(r)),this._des3=f.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),r.TripleDES)},64938:function(e,t,n){var r;e.exports=(r=n(78249),function(e){var t=r,n=t.lib,i=n.Base,o=n.WordArray,a=t.x64={};a.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),r)},27484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",c="week",u="month",l="quarter",f="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},b=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},m={s:b,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+b(r,2,"0")+":"+b(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),o=n-i<0,a=t.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:f,w:c,d:s,D:h,h:a,m:o,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",v={};v[w]=g;var _="$isDayjsObject",E=function(e){return e instanceof O||!(!e||!e[_])},S=function e(t,n,r){var i;if(!t)return w;if("string"==typeof t){var o=t.toLowerCase();v[o]&&(i=o),n&&(v[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;v[s]=t,i=s}return!r&&i&&(w=i),i||!r&&w},k=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},A=m;A.l=S,A.i=E,A.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var b=g.prototype;return b.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(A.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},b.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},b.$utils=function(){return A},b.isValid=function(){return!(this.$d.toString()===d)},b.isSame=function(e,t){var n=k(e);return this.startOf(t)<=n&&n<=this.endOf(t)},b.isAfter=function(e,t){return k(e)<this.startOf(t)},b.isBefore=function(e,t){return this.endOf(t)<k(e)},b.$g=function(e,t,n){return A.u(e)?this[t]:this.set(n,e)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(e,t){var n=this,r=!!A.u(t)||t,l=A.p(e),d=function(e,t){var i=A.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},p=function(e,t){return A.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},y=this.$W,g=this.$M,b=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case u:return r?d(1,g):d(0,g+1);case c:var w=this.$locale().weekStart||0,v=(y<w?y+7:y)-w;return d(r?b-v:b+(6-v),g);case s:case h:return p(m+"Hours",0);case a:return p(m+"Minutes",1);case o:return p(m+"Seconds",2);case i:return p(m+"Milliseconds",3);default:return this.clone()}},b.endOf=function(e){return this.startOf(e,!1)},b.$set=function(e,t){var n,c=A.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[s]=l+"Date",n[h]=l+"Date",n[u]=l+"Month",n[f]=l+"FullYear",n[a]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],p=c===s?this.$D+(t-this.$W):t;if(c===u||c===f){var y=this.clone().set(h,1);y.$d[d](p),y.init(),this.$d=y.set(h,Math.min(this.$D,y.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},b.set=function(e,t){return this.clone().$set(e,t)},b.get=function(e){return this[A.p(e)]()},b.add=function(r,l){var h,d=this;r=Number(r);var p=A.p(l),y=function(e){var t=k(d);return A.w(t.date(t.date()+Math.round(e*r)),d)};if(p===u)return this.set(u,this.$M+r);if(p===f)return this.set(f,this.$y+r);if(p===s)return y(1);if(p===c)return y(7);var g=(h={},h[o]=t,h[a]=n,h[i]=e,h)[p]||1,b=this.$d.getTime()+r*g;return A.w(b,this)},b.subtract=function(e,t){return this.add(-1*e,t)},b.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=A.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,u=n.months,l=n.meridiem,f=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},h=function(e){return A.s(o%12||12,e,"0")},p=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(y,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return A.s(t.$y,4,"0");case"M":return s+1;case"MM":return A.s(s+1,2,"0");case"MMM":return f(n.monthsShort,s,u,3);case"MMMM":return f(u,s);case"D":return t.$D;case"DD":return A.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(n.weekdaysMin,t.$W,c,2);case"ddd":return f(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(o);case"HH":return A.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return p(o,a,!0);case"A":return p(o,a,!1);case"m":return String(a);case"mm":return A.s(a,2,"0");case"s":return String(t.$s);case"ss":return A.s(t.$s,2,"0");case"SSS":return A.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(r,h,d){var p,y=this,g=A.p(h),b=k(r),m=(b.utcOffset()-this.utcOffset())*t,w=this-b,v=function(){return A.m(y,b)};switch(g){case f:p=v()/12;break;case u:p=v();break;case l:p=v()/3;break;case c:p=(w-m)/6048e5;break;case s:p=(w-m)/864e5;break;case a:p=w/n;break;case o:p=w/t;break;case i:p=w/e;break;default:p=w}return d?p:A.a(p)},b.daysInMonth=function(){return this.endOf(u).$D},b.$locale=function(){return v[this.$L]},b.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},b.clone=function(){return A.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},g}(),P=O.prototype;return k.prototype=P,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",f],["$D",h]].forEach((function(e){P[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,O,k),e.$i=!0),k},k.locale=S,k.isDayjs=E,k.unix=function(e){return k(1e3*e)},k.en=v[w],k.Ls=v,k.p={},k}()},98507:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e){return e>1&&e<5&&1!=~~(e/10)}function i(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"pr sekund":"pr sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":return t||i?o+(r(e)?"minuty":"minut"):o+"minutami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?o+(r(e)?"hodiny":"hodin"):o+"hodinami";case"d":return t||i?"den":"dnem";case"dd":return t||i?o+(r(e)?"dny":"dn"):o+"dny";case"M":return t||i?"msc":"mscem";case"MM":return t||i?o+(r(e)?"msce":"msc"):o+"msci";case"y":return t||i?"rok":"rokem";case"yy":return t||i?o+(r(e)?"roky":"let"):o+"lety"}}var o={name:"cs",weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),months:"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),monthsShort:"led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),weekStart:1,yearStart:4,ordinal:function(e){return e+"."},formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},relativeTime:{future:"za %s",past:"ped %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i}};return n.default.locale(o,null,!0),o}(n(27484))},17427:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"da",weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn._man._tirs._ons._tors._fre._lr.".split("_"),weekdaysMin:"s._ma._ti._on._to._fr._l.".split("_"),months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj_juni_juli_aug._sept._okt._nov._dec.".split("_"),weekStart:1,ordinal:function(e){return e+"."},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"}};return n.default.locale(r,null,!0),r}(n(27484))},67763:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(e){return e+""}};return n.default.locale(r,null,!0),r}(n(27484))},47822:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e,t,n,r){var i={s:"muutama sekunti",m:"minuutti",mm:"%d minuuttia",h:"tunti",hh:"%d tuntia",d:"piv",dd:"%d piv",M:"kuukausi",MM:"%d kuukautta",y:"vuosi",yy:"%d vuotta",numbers:"nolla_yksi_kaksi_kolme_nelj_viisi_kuusi_seitsemn_kahdeksan_yhdeksn".split("_")},o={s:"muutaman sekunnin",m:"minuutin",mm:"%d minuutin",h:"tunnin",hh:"%d tunnin",d:"pivn",dd:"%d pivn",M:"kuukauden",MM:"%d kuukauden",y:"vuoden",yy:"%d vuoden",numbers:"nollan_yhden_kahden_kolmen_neljn_viiden_kuuden_seitsemn_kahdeksan_yhdeksn".split("_")},a=r&&!t?o:i,s=a[n];return e<10?s.replace("%d",a.numbers[e]):s.replace("%d",e)}var i={name:"fi",weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,relativeTime:{future:"%s pst",past:"%s sitten",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM[ta] YYYY",LLL:"D. MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, D. MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"D. MMM YYYY",lll:"D. MMM YYYY, [klo] HH.mm",llll:"ddd, D. MMM YYYY, [klo] HH.mm"}};return n.default.locale(i,null,!0),i}(n(27484))},96023:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")}};return n.default.locale(r,null,!0),r}(n(27484))},77573:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"hi",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdaysMin:"______".split("_"),ordinal:function(e){return e},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "}};return n.default.locale(r,null,!0),r}(n(27484))},15551:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"it",weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un' ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(e){return e+""}};return n.default.locale(r,null,!0),r}(n(27484))},15473:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"mr",weekdays:"______".split("_"),months:"___________".split("_"),weekdaysShort:"______".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdaysMin:"______".split("_"),ordinal:function(e){return e},formats:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "}};return n.default.locale(r,null,!0),r}(n(27484))},81987:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var i=e+" ";switch(n){case"m":return t?"minuta":"minut";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return i+(r(e)?"godziny":"godzin");case"MM":return i+(r(e)?"miesice":"miesicy");case"yy":return i+(r(e)?"lata":"lat")}}var o="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),a="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),s=/D MMMM/,c=function(e,t){return s.test(t)?o[e.month()]:a[e.month()]};c.s=a,c.f=o;var u={name:"pl",weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),months:c,monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzie",dd:"%d dni",M:"miesic",MM:i,y:"rok",yy:i},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return n.default.locale(u,null,!0),u}(n(27484))},57548:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"pt-br",weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(e){return e+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"}};return n.default.locale(r,null,!0),r}(n(27484))},91876:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"sv",weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekStart:1,yearStart:4,ordinal:function(e){var t=e%10;return"["+e+(1===t||2===t?"a":"e")+"]"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"}};return n.default.locale(r,null,!0),r}(n(27484))},33852:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(e,t){return"W"===t?e+"":e+""},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},meridiem:function(e,t){var n=100*e+t;return n<600?"":n<900?"":n<1100?"":n<1300?"":n<1800?"":""}};return n.default.locale(r,null,!0),r}(n(27484))},37412:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}()},86428:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ECPairFactory=t.networks=void 0;const r=n(14644);t.networks=r;const i=n(4844),o=n(61798),a=n(37174),s=n(25049),c=i.typeforce.maybe(i.typeforce.compile({compressed:i.maybe(i.Boolean),network:i.maybe(i.Network)}));t.ECPairFactory=function(e){function t(buffer,t){if(i.typeforce(i.Buffer256bit,buffer),!e.isPrivate(buffer))throw new TypeError("Private key not in range [1, n)");return i.typeforce(c,t),new u(buffer,void 0,t)}function n(buffer,t){return i.typeforce(e.isPoint,buffer),i.typeforce(c,t),new u(void 0,buffer,t)}(0,s.testEcc)(e);class u{__D;__Q;compressed;network;lowR;constructor(t,n,i){this.__D=t,this.__Q=n,this.lowR=!1,void 0===i&&(i={}),this.compressed=void 0===i.compressed||i.compressed,this.network=i.network||r.bitcoin,void 0!==n&&(this.__Q=Buffer.from(e.pointCompress(n,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){const t=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(t)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return a.encode(this.network.wif,this.__D,this.compressed)}tweak(e){return this.privateKey?this.tweakFromPrivateKey(e):this.tweakFromPublicKey(e)}sign(t,n){if(!this.__D)throw new Error("Missing private key");if(void 0===n&&(n=this.lowR),!1===n)return Buffer.from(e.sign(t,this.__D));{let n=e.sign(t,this.__D);const r=Buffer.alloc(32,0);let i=0;for(;n[0]>127;)i++,r.writeUIntLE(i,0,6),n=e.sign(t,this.__D,r);return Buffer.from(n)}}signSchnorr(t){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(t,this.privateKey))}verify(t,n){return e.verify(t,this.publicKey,n)}verifySchnorr(t,n){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(t,this.publicKey.subarray(1,33),n)}tweakFromPublicKey(t){const r=32===(i=this.publicKey).length?i:i.slice(1,33);var i;const o=e.xOnlyPointAddTweak(r,t);if(!o||null===o.xOnlyPubkey)throw new Error("Cannot tweak public key!");const a=Buffer.from([0===o.parity?2:3]);return n(Buffer.concat([a,o.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(n){const r=3===this.publicKey[0]||4===this.publicKey[0]&&1==(1&this.publicKey[64])?e.privateNegate(this.privateKey):this.privateKey,i=e.privateAdd(r,n);if(!i)throw new Error("Invalid tweaked private key!");return t(Buffer.from(i),{network:this.network,compressed:this.compressed})}}return{isPoint:function(t){return e.isPoint(t)},fromPrivateKey:t,fromPublicKey:n,fromWIF:function(e,n){const o=a.decode(e),s=o.version;if(i.Array(n)){if(!(n=n.filter((e=>s===e.wif)).pop()))throw new Error("Unknown network version")}else if(n=n||r.bitcoin,s!==n.wif)throw new Error("Invalid network version");return t(o.privateKey,{compressed:o.compressed,network:n})},makeRandom:function(n){i.typeforce(c,n),void 0===n&&(n={});const r=n.rng||o;let a;do{a=r(32),i.typeforce(i.Buffer256bit,a)}while(!e.isPrivate(a));return t(a,n)}}}},45217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.networks=t.ECPairFactory=t.default=void 0;var r=n(86428);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.ECPairFactory}}),Object.defineProperty(t,"ECPairFactory",{enumerable:!0,get:function(){return r.ECPairFactory}}),Object.defineProperty(t,"networks",{enumerable:!0,get:function(){return r.networks}})},14644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.bitcoin=void 0,t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},25049:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.testEcc=void 0;const r=e=>Buffer.from(e,"hex");function i(e){if(!e)throw new Error("ecc library invalid")}t.testEcc=function(e){i(e.isPoint(r("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),i(!e.isPoint(r("030000000000000000000000000000000000000000000000000000000000000005"))),i(e.isPrivate(r("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),i(e.isPrivate(r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),i(!e.isPrivate(r("0000000000000000000000000000000000000000000000000000000000000000"))),i(!e.isPrivate(r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),i(!e.isPrivate(r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),i(Buffer.from(e.privateAdd(r("0000000000000000000000000000000000000000000000000000000000000001"),r("0000000000000000000000000000000000000000000000000000000000000000"))).equals(r("0000000000000000000000000000000000000000000000000000000000000001"))),i(null===e.privateAdd(r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),r("0000000000000000000000000000000000000000000000000000000000000003"))),i(Buffer.from(e.privateAdd(r("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),r("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(r("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),i(Buffer.from(e.privateNegate(r("0000000000000000000000000000000000000000000000000000000000000001"))).equals(r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),i(Buffer.from(e.privateNegate(r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(r("0000000000000000000000000000000000000000000000000000000000000003"))),i(Buffer.from(e.privateNegate(r("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(r("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),i(Buffer.from(e.pointCompress(r("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(r("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),i(Buffer.from(e.pointCompress(r("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(r("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),i(Buffer.from(e.pointCompress(r("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(r("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),i(Buffer.from(e.pointCompress(r("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(r("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),i(Buffer.from(e.pointFromScalar(r("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(r("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),i(null===e.xOnlyPointAddTweak(r("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")));let t=e.xOnlyPointAddTweak(r("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),r("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));i(Buffer.from(t.xOnlyPubkey).equals(r("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&1===t.parity),t=e.xOnlyPointAddTweak(r("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),r("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),i(Buffer.from(t.xOnlyPubkey).equals(r("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&0===t.parity),i(Buffer.from(e.sign(r("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),r("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(r("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),i(e.verify(r("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),r("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),r("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&i(Buffer.from(e.signSchnorr(r("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),r("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),r("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(r("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&i(e.verifySchnorr(r("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),r("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),r("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}},4844:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybe=t.Boolean=t.Array=t.Buffer256bit=t.Network=t.typeforce=void 0,t.typeforce=n(2401),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.Buffer256bit=t.typeforce.BufferN(32),t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.maybe=t.typeforce.maybe},86266:(e,t,n)=>{"use strict";var r=t;r.version=n(18597).i8,r.utils=n(80953),r.rand=n(29931),r.curve=n(88254),r.curves=n(45427),r.ec=n(57954),r.eddsa=n(65980)},4918:(e,t,n)=>{"use strict";var r=n(13550),i=n(80953),o=i.getNAF,a=i.getJSF,s=i.assert;function c(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){s(e.precomputed);var n=e._getDoubles(),r=o(t,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;var a,c,u=[];for(a=0;a<r.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+r[l];u.push(c)}for(var f=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=i;d>0;d--){for(a=0;a<u.length;a++)(c=u[a])===d?h=h.mixedAdd(n.points[a]):c===-d&&(h=h.mixedAdd(n.points[a].neg()));f=f.add(h)}return f.toP()},c.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var i=r.points,a=o(t,n,this._bitLength),c=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var l=0;u>=0&&0===a[u];u--)l++;if(u>=0&&l++,c=c.dblp(l),u<0)break;var f=a[u];s(0!==f),c="affine"===e.type?f>0?c.mixedAdd(i[f-1>>1]):c.mixedAdd(i[-f-1>>1].neg()):f>0?c.add(i[f-1>>1]):c.add(i[-f-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,n,r,i){var s,c,u,l=this._wnafT1,f=this._wnafT2,h=this._wnafT3,d=0;for(s=0;s<r;s++){var p=(u=t[s])._getNAFPoints(e);l[s]=p.wnd,f[s]=p.points}for(s=r-1;s>=1;s-=2){var y=s-1,g=s;if(1===l[y]&&1===l[g]){var b=[t[y],null,null,t[g]];0===t[y].y.cmp(t[g].y)?(b[1]=t[y].add(t[g]),b[2]=t[y].toJ().mixedAdd(t[g].neg())):0===t[y].y.cmp(t[g].y.redNeg())?(b[1]=t[y].toJ().mixedAdd(t[g]),b[2]=t[y].add(t[g].neg())):(b[1]=t[y].toJ().mixedAdd(t[g]),b[2]=t[y].toJ().mixedAdd(t[g].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],w=a(n[y],n[g]);for(d=Math.max(w[0].length,d),h[y]=new Array(d),h[g]=new Array(d),c=0;c<d;c++){var v=0|w[0][c],_=0|w[1][c];h[y][c]=m[3*(v+1)+(_+1)],h[g][c]=0,f[y]=b}}else h[y]=o(n[y],l[y],this._bitLength),h[g]=o(n[g],l[g],this._bitLength),d=Math.max(h[y].length,d),d=Math.max(h[g].length,d)}var E=this.jpoint(null,null,null),S=this._wnafT4;for(s=d;s>=0;s--){for(var k=0;s>=0;){var A=!0;for(c=0;c<r;c++)S[c]=0|h[c][s],0!==S[c]&&(A=!1);if(!A)break;k++,s--}if(s>=0&&k++,E=E.dblp(k),s<0)break;for(c=0;c<r;c++){var O=S[c];0!==O&&(O>0?u=f[c][O-1>>1]:O<0&&(u=f[c][-O-1>>1].neg()),E="affine"===u.type?E.mixedAdd(u):E.add(u))}}for(s=0;s<r;s++)f[s]=null;return i?E:E.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?s(e[e.length-1]%2==0):7===e[0]&&s(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)r=r.dbl();n.push(r)}return{step:e,points:n}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},31138:(e,t,n)=>{"use strict";var r=n(80953),i=n(13550),o=n(35717),a=n(4918),s=r.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,a.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function u(e,t,n,r,o){a.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,a),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=r.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var c=s.fromRed().isOdd();return(t&&!c||!t&&c)&&(s=s.redNeg()),this.point(e,s)},c.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=r.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(i)},o(u,a.BasePoint),c.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},c.prototype.point=function(e,t,n,r){return new u(this,e,t,n,r)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=r.redAdd(t),a=o.redSub(n),s=r.redSub(t),c=i.redMul(a),u=o.redMul(s),l=i.redMul(s),f=a.redMul(o);return this.curve.point(c,u,f,l)},u.prototype._projDbl=function(){var e,t,n,r,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var u=(r=this.curve._mulA(s)).redAdd(c);this.zOne?(e=a.redSub(s).redSub(c).redMul(u.redSub(this.curve.two)),t=u.redMul(r.redSub(c)),n=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),o=u.redSub(i).redISub(i),e=a.redSub(s).redISub(c).redMul(o),t=u.redMul(r.redSub(c)),n=u.redMul(o))}else r=s.redAdd(c),i=this.curve._mulC(this.z).redSqr(),o=r.redSub(i).redSub(i),e=this.curve._mulC(a.redISub(r)).redMul(o),t=this.curve._mulC(r).redMul(s.redISub(c)),n=r.redMul(o);return this.curve.point(e,t,n)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),a=i.redSub(r),s=i.redAdd(r),c=n.redAdd(t),u=o.redMul(a),l=s.redMul(c),f=o.redMul(c),h=a.redMul(s);return this.curve.point(u,l,h,f)},u.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),i=r.redSqr(),o=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(o).redMul(a),c=i.redSub(s),u=i.redAdd(s),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(a),f=r.redMul(c).redMul(l);return this.curve.twisted?(t=r.redMul(u).redMul(a.redSub(this.curve._mulA(o))),n=c.redMul(u)):(t=r.redMul(u).redMul(a.redSub(o)),n=this.curve._mulC(c).redMul(u)),this.curve.point(f,t,n)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},u.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},88254:(e,t,n)=>{"use strict";var r=t;r.base=n(4918),r.short=n(6673),r.mont=n(22881),r.edwards=n(31138)},22881:(e,t,n)=>{"use strict";var r=n(13550),i=n(35717),o=n(4918),a=n(80953);function s(e){o.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,n){o.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,o),e.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},i(c,o.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(a.toArray(e,t),1)},s.prototype.point=function(e,t){return new c(this,e,t)},s.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(n),a=i.redMul(r),s=t.z.redMul(o.redAdd(a).redSqr()),c=t.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,c)},c.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},6673:(e,t,n)=>{"use strict";var r=n(80953),i=n(13550),o=n(35717),a=n(4918),s=r.assert;function c(e){a.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(e,t,n,r){a.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,n,r){a.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(c,a),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?n=o[0]:(n=o[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(n)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),n=new i(2).toRed(t).redInvm(),r=n.redNeg(),o=new i(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,n,r,o,a,s,c,u,l,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,d=this.n.clone(),p=new i(1),y=new i(0),g=new i(0),b=new i(1),m=0;0!==h.cmpn(0);){var w=d.div(h);u=d.sub(w.mul(h)),l=g.sub(w.mul(p));var v=b.sub(w.mul(y));if(!r&&u.cmp(f)<0)t=c.neg(),n=p,r=u.neg(),o=l;else if(r&&2==++m)break;c=u,d=h,h=u,g=p,p=l,b=y,y=v}a=u.neg(),s=l;var _=r.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(_)>=0&&(a=t,s=n),r.negative&&(r=r.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:r,b:o},{a,b:s}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=i.mul(n.a),s=o.mul(r.a),c=i.mul(n.b),u=o.mul(r.b);return{k1:e.sub(a).sub(s),k2:c.add(u).neg()}},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(t&&!o||!t&&o)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],c=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),r[2*o]=s,r[2*o+1]=c,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var u=this._wnafMulAdd(1,r,i,2*o,n),l=0;l<2*o;l++)r[l]=null,i[l]=null;return u},o(u,a.BasePoint),c.prototype.point=function(e,t,n){return new u(this,e,t,n)},c.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var o=t[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},u.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,a.BasePoint),c.prototype.jpoint=function(e,t,n){return new l(this,e,t,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),s=r.redSub(i),c=o.redSub(a);if(0===s.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),l=u.redMul(s),f=r.redMul(u),h=c.redSqr().redIAdd(l).redISub(f).redISub(f),d=c.redMul(f.redISub(h)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(r),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),l=n.redMul(c),f=s.redSqr().redIAdd(u).redISub(l).redISub(l),h=s.redMul(l.redISub(f)).redISub(i.redMul(u)),d=this.z.redMul(a);return this.curve.jpoint(f,h,d)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,c=s.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var l=o.redSqr(),f=u.redSqr(),h=f.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(c)),p=o.redMul(f),y=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(y),b=d.redMul(g);b=b.redIAdd(b).redISub(h);var m=u.redMul(s);t+1<e&&(c=c.redMul(h)),o=y,s=m,u=b}return this.curve.jpoint(o,u.redMul(i),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),c=s.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=s.redMul(a.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(l).redISub(h);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),y=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=y.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},l.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=s.redSqr().redISub(a).redISub(a);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=s.redMul(a.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),y=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(y),n=this.y.redAdd(this.z).redSqr().redISub(f).redISub(l);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(a),l=s.redSqr().redISub(u.redAdd(u)),f=u.redISub(l),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(f).redISub(h),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,d,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(c),l=t.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.x.redMul(s).redISub(l);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(f,h,d)},l.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},45427:(e,t,n)=>{"use strict";var r,i=t,o=n(33715),a=n(88254),s=n(80953).assert;function c(e){"short"===e.type?this.curve=new a.short(e):"edwards"===e.type?this.curve=new a.edwards(e):this.curve=new a.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new c(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=c,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(91037)}catch(e){r=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},57954:(e,t,n)=>{"use strict";var r=n(13550),i=n(2156),o=n(80953),a=n(45427),s=n(29931),c=o.assert,u=n(31251),l=n(90611);function f(e){if(!(this instanceof f))return new f(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(a,e),"Unknown curve "+e),e=a[e]),e instanceof a.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=f,f.prototype.keyPair=function(e){return new u(this,e)},f.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},f.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},f.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var a=new r(t.generate(n));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},f.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},f.prototype.sign=function(e,t,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new r(e,16));for(var a=this.n.byteLength(),s=t.getPrivate().toArray("be",a),c=e.toArray("be",a),u=new i({hash:this.hash,entropy:s,nonce:c,pers:o.pers,persEnc:o.persEnc||"utf8"}),f=this.n.sub(new r(1)),h=0;;h++){var d=o.k?o.k(h):new r(u.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(f)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var y=p.getX(),g=y.umod(this.n);if(0!==g.cmpn(0)){var b=d.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var m=(p.getY().isOdd()?1:0)|(0!==y.cmp(g)?2:0);return o.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),m^=1),new l({r:g,s:b,recoveryParam:m})}}}}}},f.prototype.verify=function(e,t,n,i){e=this._truncateToN(new r(e,16)),n=this.keyFromPublic(n,i);var o=(t=new l(t,"hex")).r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,c=a.invm(this.n),u=c.mul(e).umod(this.n),f=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,n.getPublic(),f)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(u,n.getPublic(),f)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},f.prototype.recoverPubKey=function(e,t,n,i){c((3&n)===n,"The recovery param is more than two bits"),t=new l(t,i);var o=this.n,a=new r(e),s=t.r,u=t.s,f=1&n,h=n>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");s=h?this.curve.pointFromX(s.add(this.curve.n),f):this.curve.pointFromX(s,f);var d=t.r.invm(o),p=o.sub(a).mul(d).umod(o),y=u.mul(d).umod(o);return this.g.mulAdd(p,s,y)},f.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new l(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},31251:(e,t,n)=>{"use strict";var r=n(13550),i=n(80953).assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,n){return t instanceof o?t:new o(e,{pub:t,pubEnc:n})},o.fromPrivate=function(e,t,n){return t instanceof o?t:new o(e,{priv:t,privEnc:n})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},90611:(e,t,n)=>{"use strict";var r=n(13550),i=n(80953),o=i.assert;function a(e,t){if(e instanceof a)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function c(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,a=t.place;o<r;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function u(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=a,a.prototype._importDER=function(e,t){e=i.toArray(e,t);var n=new s;if(48!==e[n.place++])return!1;var o=c(e,n);if(!1===o)return!1;if(o+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var a=c(e,n);if(!1===a)return!1;var u=e.slice(n.place,a+n.place);if(n.place+=a,2!==e[n.place++])return!1;var l=c(e,n);if(!1===l)return!1;if(e.length!==l+n.place)return!1;var f=e.slice(n.place,l+n.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===f[0]){if(!(128&f[1]))return!1;f=f.slice(1)}return this.r=new r(u),this.s=new r(f),this.recoveryParam=null,!0},a.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=u(t),n=u(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];l(r,t.length),(r=r.concat(t)).push(2),l(r,n.length);var o=r.concat(n),a=[48];return l(a,o.length),a=a.concat(o),i.encode(a,e)}},65980:(e,t,n)=>{"use strict";var r=n(33715),i=n(45427),o=n(80953),a=o.assert,s=o.parseBytes,c=n(79087),u=n(23622);function l(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=l,l.prototype.sign=function(e,t){e=s(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),i=this.g.mul(r),o=this.encodePoint(i),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=r.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:o})},l.prototype.verify=function(e,t,n){e=s(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),r.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(r.pub().mul(i)).eq(o)},l.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),i=o.intFromLE(n);return this.curve.pointFromY(i,r)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return o.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},79087:(e,t,n)=>{"use strict";var r=n(80953),i=r.assert,o=r.parseBytes,a=r.cachedProperty;function s(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},s.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=s},23622:(e,t,n)=>{"use strict";var r=n(13550),i=n(80953),o=i.assert,a=i.cachedProperty,s=i.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),o(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},91037:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},80953:(e,t,n)=>{"use strict";var r=t,i=n(13550),o=n(79746),a=n(34504);r.assert=o,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<r.length;a++){var s,c=o.andln(i-1);o.isOdd()?(s=c>(i>>1)-1?(i>>1)-c:c,o.isubn(s)):s=0,r[a]=s,o.iushrn(1)}return r},r.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,c=e.andln(3)+i&3,u=t.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),a=0==(1&c)?0:3!==(r=e.andln(7)+i&7)&&5!==r||2!==u?c:-c,n[0].push(a),s=0==(1&u)?0:3!==(r=t.andln(7)+o&7)&&5!==r||2!==c?u:-u,n[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return n},r.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new i(e,"hex","le")}},17187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,a,u;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3349:(e,t,n)=>{"use strict";var Buffer=n(89509).Buffer,r=n(88473).Transform;function i(e){r.call(this),this._block=Buffer.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(35717)(i,r),i.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");Buffer.isBuffer(e)||(e=Buffer.from(e,t));for(var n=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)n[i++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)n[this._blockOffset++]=e[r++];for(var o=0,a=8*e.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i},33715:(e,t,n)=>{var r=t;r.utils=n(26436),r.common=n(95772),r.sha=n(89041),r.ripemd=n(12949),r.hmac=n(52344),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},95772:(e,t,n)=>{"use strict";var r=n(26436),i=n(79746);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},52344:(e,t,n)=>{"use strict";var r=n(26436),i=n(79746);function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},12949:(e,t,n)=>{"use strict";var r=n(26436),i=n(95772),o=r.rotl32,a=r.sum32,s=r.sum32_3,c=r.sum32_4,u=i.BlockHash;function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function d(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(l,u),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],u=this.h[3],l=this.h[4],m=n,w=r,v=i,_=u,E=l,S=0;S<80;S++){var k=a(o(c(n,f(S,r,i,u),e[p[S]+t],h(S)),g[S]),l);n=l,l=u,u=o(i,10),i=r,r=k,k=a(o(c(m,f(79-S,w,v,_),e[y[S]+t],d(S)),b[S]),E),m=E,E=_,_=o(v,10),v=w,w=k}k=s(this.h[1],i,_),this.h[1]=s(this.h[2],u,E),this.h[2]=s(this.h[3],l,m),this.h[3]=s(this.h[4],n,w),this.h[4]=s(this.h[0],r,v),this.h[0]=k},l.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},89041:(e,t,n)=>{"use strict";t.sha1=n(84761),t.sha224=n(10799),t.sha256=n(89344),t.sha384=n(80772),t.sha512=n(45900)},84761:(e,t,n)=>{"use strict";var r=n(26436),i=n(95772),o=n(37038),a=r.rotl32,s=r.sum32,c=r.sum32_5,u=o.ft_1,l=i.BlockHash,f=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(h,l),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],h=this.h[3],d=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),y=c(a(i,5),u(p,o,l,h),d,n[r],f[p]);d=h,h=l,l=a(o,30),o=i,i=y}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],l),this.h[3]=s(this.h[3],h),this.h[4]=s(this.h[4],d)},h.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},10799:(e,t,n)=>{"use strict";var r=n(26436),i=n(89344);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},89344:(e,t,n)=>{"use strict";var r=n(26436),i=n(95772),o=n(37038),a=n(79746),s=r.sum32,c=r.sum32_4,u=r.sum32_5,l=o.ch32,f=o.maj32,h=o.s0_256,d=o.s1_256,p=o.g0_256,y=o.g1_256,g=i.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}r.inherits(m,g),e.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=c(y(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],g=this.h[2],b=this.h[3],m=this.h[4],w=this.h[5],v=this.h[6],_=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var E=u(_,d(m),l(m,w,v),this.k[r],n[r]),S=s(h(i),f(i,o,g));_=v,v=w,w=m,m=s(b,E),b=g,g=o,o=i,i=s(E,S)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],b),this.h[4]=s(this.h[4],m),this.h[5]=s(this.h[5],w),this.h[6]=s(this.h[6],v),this.h[7]=s(this.h[7],_)},m.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},80772:(e,t,n)=>{"use strict";var r=n(26436),i=n(45900);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},45900:(e,t,n)=>{"use strict";var r=n(26436),i=n(95772),o=n(79746),a=r.rotr64_hi,s=r.rotr64_lo,c=r.shr64_hi,u=r.shr64_lo,l=r.sum64,f=r.sum64_hi,h=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,y=r.sum64_5_hi,g=r.sum64_5_lo,b=i.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function w(){if(!(this instanceof w))return new w;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function v(e,t,n,r,i){var o=e&n^~e&i;return o<0&&(o+=4294967296),o}function _(e,t,n,r,i,o){var a=t&r^~t&o;return a<0&&(a+=4294967296),a}function E(e,t,n,r,i){var o=e&n^e&i^n&i;return o<0&&(o+=4294967296),o}function S(e,t,n,r,i,o){var a=t&r^t&o^r&o;return a<0&&(a+=4294967296),a}function k(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function A(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function O(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function P(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function I(e,t){var n=a(e,t,1)^a(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function T(e,t){var n=s(e,t,1)^s(e,t,8)^u(e,t,7);return n<0&&(n+=4294967296),n}function x(e,t){var n=a(e,t,19)^a(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}function N(e,t){var n=s(e,t,19)^s(t,e,29)^u(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(w,b),e.exports=w,w.blockSize=1024,w.outSize=512,w.hmacStrength=192,w.padLength=128,w.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=x(n[r-4],n[r-3]),o=N(n[r-4],n[r-3]),a=n[r-14],s=n[r-13],c=I(n[r-30],n[r-29]),u=T(n[r-30],n[r-29]),l=n[r-32],f=n[r-31];n[r]=d(i,o,a,s,c,u,l,f),n[r+1]=p(i,o,a,s,c,u,l,f)}},w.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],c=this.h[4],u=this.h[5],d=this.h[6],p=this.h[7],b=this.h[8],m=this.h[9],w=this.h[10],I=this.h[11],T=this.h[12],x=this.h[13],N=this.h[14],R=this.h[15];o(this.k.length===n.length);for(var C=0;C<n.length;C+=2){var B=N,L=R,U=O(b,m),j=P(b,m),D=v(b,m,w,I,T),M=_(b,m,w,I,T,x),H=this.k[C],F=this.k[C+1],z=n[C],K=n[C+1],q=y(B,L,U,j,D,M,H,F,z,K),V=g(B,L,U,j,D,M,H,F,z,K);B=k(r,i),L=A(r,i),U=E(r,i,a,s,c),j=S(r,i,a,s,c,u);var W=f(B,L,U,j),G=h(B,L,U,j);N=T,R=x,T=w,x=I,w=b,I=m,b=f(d,p,q,V),m=h(p,p,q,V),d=c,p=u,c=a,u=s,a=r,s=i,r=f(q,V,W,G),i=h(q,V,W,G)}l(this.h,0,r,i),l(this.h,2,a,s),l(this.h,4,c,u),l(this.h,6,d,p),l(this.h,8,b,m),l(this.h,10,w,I),l(this.h,12,T,x),l(this.h,14,N,R)},w.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},37038:(e,t,n)=>{"use strict";var r=n(26436).rotr32;function i(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function a(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?i(t,n,r):1===e||3===e?a(t,n,r):2===e?o(t,n,r):void 0},t.ch32=i,t.maj32=o,t.p32=a,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},26436:(e,t,n)=>{"use strict";var r=n(79746),i=n(35717);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?n[r++]=a:a<2048?(n[r++]=a>>6|192,n[r++]=63&a|128):o(e,i)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++i)),n[r++]=a>>18|240,n[r++]=a>>12&63|128,n[r++]=a>>6&63|128,n[r++]=63&a|128):(n[r++]=a>>12|224,n[r++]=a>>6&63|128,n[r++]=63&a|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=a(i)),n+=c(i.toString(16))}return n},t.zero2=s,t.zero8=c,t.join32=function(e,t,n,i){var o=n-t;r(o%4==0);for(var a=new Array(o/4),s=0,c=t;s<a.length;s++,c+=4){var u;u="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],a[s]=u>>>0}return a},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var o=e[r];"big"===t?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,i){return e+t+n+r+i>>>0},t.sum64=function(e,t,n,r){var i=e[t],o=r+e[t+1]>>>0,a=(o<r?1:0)+n+i;e[t]=a>>>0,e[t+1]=o},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,i,o,a,s){var c=0,u=t;return c+=(u=u+r>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+n+i+a+(c+=(u=u+s>>>0)<s?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,i,o,a,s){return t+r+o+s>>>0},t.sum64_5_hi=function(e,t,n,r,i,o,a,s,c,u){var l=0,f=t;return l+=(f=f+r>>>0)<t?1:0,l+=(f=f+o>>>0)<o?1:0,l+=(f=f+s>>>0)<s?1:0,e+n+i+a+c+(l+=(f=f+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,i,o,a,s,c,u){return t+r+o+s+u>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},2156:(e,t,n)=>{"use strict";var r=n(33715),i=n(34504),o=n(79746);function a(e){if(!(this instanceof a))return new a(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),n=i.toArray(e.nonce,e.nonceEnc||"hex"),r=i.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}e.exports=a,a.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=i.toArray(e,t),n=i.toArray(n,r),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},a.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,i.encode(a,t)}},80645:(e,t)=>{t.read=function(buffer,e,t,n,r){var i,o,a=8*r-n-1,s=(1<<a)-1,c=s>>1,u=-7,l=t?r-1:0,f=t?-1:1,h=buffer[e+l];for(l+=f,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=256*i+buffer[e+l],l+=f,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=n;u>0;o=256*o+buffer[e+l],l+=f,u-=8);if(0===i)i=1-c;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),i-=c}return(h?-1:1)*o*Math.pow(2,i-n)},t.write=function(buffer,e,t,n,r,i){var o,a,s,c=8*i-r-1,u=(1<<c)-1,l=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-o))<1&&(o--,s*=2),(e+=o+l>=1?f/s:f*Math.pow(2,1-l))*s>=2&&(o++,s/=2),o+l>=u?(a=0,o=u):o+l>=1?(a=(e*s-1)*Math.pow(2,r),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;buffer[t+h]=255&a,h+=d,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;buffer[t+h]=255&o,h+=d,o/=256,c-=8);buffer[t+h-d]|=128*p}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},6264:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toOutputScript=t.fromOutputScript=t.toBech32=t.toBase58Check=t.fromBech32=t.fromBase58Check=void 0;const r=n(55815),i=n(41502),o=n(78668),a=n(25735),s=n(27715),c=n(58334),u=40,l=2,f=16,h=2,d=80,p="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function y(e){const t=c.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function g(e){let t,n;try{t=s.bech32.decode(e)}catch(e){}if(t){if(n=t.words[0],0!==n)throw new TypeError(e+" uses wrong encoding")}else if(t=s.bech32m.decode(e),n=t.words[0],0===n)throw new TypeError(e+" uses wrong encoding");const r=s.bech32.fromWords(t.words.slice(1));return{version:n,prefix:t.prefix,data:Buffer.from(r)}}function b(e,t,n){const r=s.bech32.toWords(e);return r.unshift(t),0===t?s.bech32.encode(n,r):s.bech32m.encode(n,r)}t.fromBase58Check=y,t.fromBech32=g,t.toBase58Check=function(e,t){(0,a.typeforce)((0,a.tuple)(a.Hash160bit,a.UInt8),arguments);const n=Buffer.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),c.encode(n)},t.toBech32=b,t.fromOutputScript=function(e,t){t=t||r.bitcoin;try{return i.p2pkh({output:e,network:t}).address}catch(e){}try{return i.p2sh({output:e,network:t}).address}catch(e){}try{return i.p2wpkh({output:e,network:t}).address}catch(e){}try{return i.p2wsh({output:e,network:t}).address}catch(e){}try{return i.p2tr({output:e,network:t}).address}catch(e){}try{return function(e,t){const n=e.slice(2);if(n.length<l||n.length>u)throw new TypeError("Invalid program length for segwit address");const r=e[0]-d;if(r<h||r>f)throw new TypeError("Invalid version for segwit address");if(e[1]!==n.length)throw new TypeError("Invalid script for segwit address");return console.warn(p),b(n,r,t.bech32)}(e,t)}catch(e){}throw new Error(o.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let n,a;t=t||r.bitcoin;try{n=y(e)}catch(e){}if(n){if(n.version===t.pubKeyHash)return i.p2pkh({hash:n.hash}).output;if(n.version===t.scriptHash)return i.p2sh({hash:n.hash}).output}else{try{a=g(e)}catch(e){}if(a){if(a.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===a.version){if(20===a.data.length)return i.p2wpkh({hash:a.data}).output;if(32===a.data.length)return i.p2wsh({hash:a.data}).output}else if(1===a.version){if(32===a.data.length)return i.p2tr({pubkey:a.data}).output}else if(a.version>=h&&a.version<=f&&a.data.length>=l&&a.data.length<=u)return console.warn(p),o.compile([a.version+d,a.data])}}throw new Error(e+" has no matching Script")}},15999:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=t.check=void 0,t.check=function(buffer){if(buffer.length<8)return!1;if(buffer.length>72)return!1;if(48!==buffer[0])return!1;if(buffer[1]!==buffer.length-2)return!1;if(2!==buffer[2])return!1;const e=buffer[3];if(0===e)return!1;if(5+e>=buffer.length)return!1;if(2!==buffer[4+e])return!1;const t=buffer[5+e];return 0!==t&&(6+e+t===buffer.length&&(!(128&buffer[4])&&(!(e>1&&0===buffer[4]&&!(128&buffer[5]))&&(!(128&buffer[e+6])&&!(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))))))},t.decode=function(buffer){if(buffer.length<8)throw new Error("DER sequence length is too short");if(buffer.length>72)throw new Error("DER sequence length is too long");if(48!==buffer[0])throw new Error("Expected DER sequence");if(buffer[1]!==buffer.length-2)throw new Error("DER sequence length is invalid");if(2!==buffer[2])throw new Error("Expected DER integer");const e=buffer[3];if(0===e)throw new Error("R length is zero");if(5+e>=buffer.length)throw new Error("R length is too long");if(2!==buffer[4+e])throw new Error("Expected DER integer (2)");const t=buffer[5+e];if(0===t)throw new Error("S length is zero");if(6+e+t!==buffer.length)throw new Error("S length is invalid");if(128&buffer[4])throw new Error("R value is negative");if(e>1&&0===buffer[4]&&!(128&buffer[5]))throw new Error("R value excessively padded");if(128&buffer[e+6])throw new Error("S value is negative");if(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))throw new Error("S value excessively padded");return{r:buffer.slice(4,4+e),s:buffer.slice(6+e)}},t.encode=function(e,t){const n=e.length,r=t.length;if(0===n)throw new Error("R length is zero");if(0===r)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(r>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(r>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");const i=Buffer.allocUnsafe(6+n+r);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+n]=2,i[5+n]=t.length,t.copy(i,6+n),i}},57046:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;const r=n(74929),i=n(76e3),o=n(22787),a=n(95262),s=n(25735),{typeforce:c}=s,u=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block");class f{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(buffer){if(buffer.length<80)throw new Error("Buffer too small (< 80 bytes)");const e=new r.BufferReader(buffer),t=new f;if(t.version=e.readInt32(),t.prevHash=e.readSlice(32),t.merkleRoot=e.readSlice(32),t.timestamp=e.readUInt32(),t.bits=e.readUInt32(),t.nonce=e.readUInt32(),80===buffer.length)return t;const n=()=>{const t=a.Transaction.fromBuffer(e.buffer.slice(e.offset),!0);return e.offset+=t.byteLength(),t},i=e.readVarInt();t.transactions=[];for(let e=0;e<i;++e){const e=n();t.transactions.push(e)}const o=t.getWitnessCommit();return o&&(t.witnessCommit=o),t}static fromHex(e){return f.fromBuffer(Buffer.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,n=8388607&e,r=Buffer.alloc(32,0);return r.writeUIntBE(n,29-t,3),r}static calculateMerkleRoot(e,t){if(c([{getHash:s.Function}],e),0===e.length)throw u;if(t&&!h(e))throw l;const n=e.map((e=>e.getHash(t))),r=(0,o.fastMerkleRoot)(n,i.hash256);return t?i.hash256(Buffer.concat([r,e[0].ins[0].witness[0]])):r}getWitnessCommit(){if(!h(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof Buffer&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+r.varuint.encodingLength(this.transactions.length)+this.transactions.reduce(((e,n)=>e+n.byteLength(t)),0)}getHash(){return i.hash256(this.toBuffer(!0))}getId(){return(0,r.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const buffer=Buffer.allocUnsafe(this.byteLength(e)),t=new r.BufferWriter(buffer);return t.writeInt32(this.version),t.writeSlice(this.prevHash),t.writeSlice(this.merkleRoot),t.writeUInt32(this.timestamp),t.writeUInt32(this.bits),t.writeUInt32(this.nonce),e||!this.transactions||(r.varuint.encode(this.transactions.length,buffer,t.offset),t.offset+=r.varuint.encode.bytes,this.transactions.forEach((e=>{const n=e.byteLength();e.toBuffer(buffer,t.offset),t.offset+=n}))),buffer}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=(0,r.reverseBuffer)(this.getHash()),t=f.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw u;const e=f.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw u;if(!this.hasWitnessCommit())throw l;const e=f.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function h(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=f},74929:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.cloneBuffer=t.reverseBuffer=t.writeUInt64LE=t.readUInt64LE=t.varuint=void 0;const r=n(25735),{typeforce:i}=r,o=n(57795);function a(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function s(buffer,e){const t=buffer.readUInt32LE(e);let n=buffer.readUInt32LE(e+4);return n*=4294967296,a(n+t,9007199254740991),n+t}function c(buffer,e,t){return a(e,9007199254740991),buffer.writeInt32LE(-1&e,t),buffer.writeUInt32LE(Math.floor(e/4294967296),t+4),t+8}t.varuint=o,t.readUInt64LE=s,t.writeUInt64LE=c,t.reverseBuffer=function(buffer){if(buffer.length<1)return buffer;let e=buffer.length-1,t=0;for(let n=0;n<buffer.length/2;n++)t=buffer[n],buffer[n]=buffer[e],buffer[e]=t,e--;return buffer},t.cloneBuffer=function(buffer){const e=Buffer.allocUnsafe(buffer.length);return buffer.copy(e),e};class u{static withCapacity(e){return new u(Buffer.alloc(e))}constructor(buffer,e=0){this.buffer=buffer,this.offset=e,i(r.tuple(r.Buffer,r.UInt32),[buffer,e])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=c(this.buffer,e,this.offset)}writeVarInt(e){o.encode(e,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=u;t.BufferReader=class{constructor(buffer,e=0){this.buffer=buffer,this.offset=e,i(r.tuple(r.Buffer,r.UInt32),[buffer,e])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=s(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let n=0;n<e;n++)t.push(this.readVarSlice());return t}}},76e3:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;const r=n(23482),i=n(79785);function o(buffer){try{return r("rmd160").update(buffer).digest()}catch(e){try{return r("ripemd160").update(buffer).digest()}catch(e){return(new i).update(buffer).digest()}}}function a(buffer){return r("sha256").update(buffer).digest()}t.ripemd160=o,t.sha1=function(buffer){return r("sha1").update(buffer).digest()},t.sha256=a,t.hash160=function(buffer){return o(a(buffer))},t.hash256=function(buffer){return a(a(buffer))};const s=Object.fromEntries(["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"].map((e=>{const t=a(Buffer.from(e));return[e,Buffer.concat([t,t])]})));t.taggedHash=function(e,t){return a(Buffer.concat([s[e],t]))}},32698:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.getEccLib=t.initEccLib=void 0;const r={};t.initEccLib=function(e){var t;e?e!==r.eccLib&&(o("function"==typeof(t=e).isXOnlyPoint),o(t.isXOnlyPoint(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),o(t.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),o(t.isXOnlyPoint(i("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),o(t.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000001"))),o(!t.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000000"))),o(!t.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),o("function"==typeof t.xOnlyPointAddTweak),a.forEach((e=>{const n=t.xOnlyPointAddTweak(i(e.pubkey),i(e.tweak));null===e.result?o(null===n):(o(null!==n),o(n.parity===e.parity),o(Buffer.from(n.xOnlyPubkey).equals(i(e.result))))})),r.eccLib=e):r.eccLib=e},t.getEccLib=function(){if(!r.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return r.eccLib};const i=e=>Buffer.from(e,"hex");function o(e){if(!e)throw new Error("ecc library invalid")}const a=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]},43513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEccLib=t.Transaction=t.opcodes=t.Psbt=t.Block=t.script=t.payments=t.networks=t.crypto=t.address=void 0;const r=n(6264);t.address=r;const i=n(76e3);t.crypto=i;const o=n(55815);t.networks=o;const a=n(41502);t.payments=a;const s=n(78668);t.script=s;var c=n(57046);Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return c.Block}});var u=n(28207);Object.defineProperty(t,"Psbt",{enumerable:!0,get:function(){return u.Psbt}});var l=n(26308);Object.defineProperty(t,"opcodes",{enumerable:!0,get:function(){return l.OPS}});var f=n(95262);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return f.Transaction}});var h=n(32698);Object.defineProperty(t,"initEccLib",{enumerable:!0,get:function(){return h.initEccLib}})},22787:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.fastMerkleRoot=void 0,t.fastMerkleRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let n=e.length;const r=e.concat();for(;n>1;){let e=0;for(let i=0;i<n;i+=2,++e){const o=r[i],a=i+1===n?o:r[i+1],s=Buffer.concat([o,a]);r[e]=t(s)}n=e}return r[0]}},55815:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.bitcoin=void 0,t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},26308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;const n={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=n;const r={};t.REVERSE_OPS=r;for(const e of Object.keys(n)){r[n[e]]=e}},54246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tweakKey=t.tapTweakHash=t.tapleafHash=t.findScriptPath=t.toHashTree=t.rootHashFromPath=t.MAX_TAPTREE_DEPTH=t.LEAF_VERSION_TAPSCRIPT=void 0;const r=n(48764),i=n(32698),o=n(76e3),a=n(74929),s=n(25735);t.LEAF_VERSION_TAPSCRIPT=192,t.MAX_TAPTREE_DEPTH=128;function c(e){const n=e.version||t.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",r.Buffer.concat([r.Buffer.from([n]),f(e.output)]))}function u(e,t){return o.taggedHash("TapTweak",r.Buffer.concat(t?[e,t]:[e]))}function l(e,t){return o.taggedHash("TapBranch",r.Buffer.concat([e,t]))}function f(e){const t=a.varuint.encodingLength(e.length),buffer=r.Buffer.allocUnsafe(t);return a.varuint.encode(e.length,buffer),r.Buffer.concat([buffer,e])}t.rootHashFromPath=function(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);const n=(e.length-33)/32;let r=t;for(let t=0;t<n;t++){const n=e.slice(33+32*t,65+32*t);r=r.compare(n)<0?l(r,n):l(n,r)}return r},t.toHashTree=function e(t){if((0,s.isTapleaf)(t))return{hash:c(t)};const n=[e(t[0]),e(t[1])];n.sort(((e,t)=>e.hash.compare(t.hash)));const[r,i]=n;return{hash:l(r.hash,i.hash),left:r,right:i}},t.findScriptPath=function e(t,n){if("left"in(r=t)&&"right"in r){const r=e(t.left,n);if(void 0!==r)return[...r,t.right.hash];const i=e(t.right,n);if(void 0!==i)return[...i,t.left.hash]}else if(t.hash.equals(n))return[];var r},t.tapleafHash=c,t.tapTweakHash=u,t.tweakKey=function(e,t){if(!r.Buffer.isBuffer(e))return null;if(32!==e.length)return null;if(t&&32!==t.length)return null;const n=u(e,t),o=(0,i.getEccLib)().xOnlyPointAddTweak(e,n);return o&&null!==o.xOnlyPubkey?{parity:o.parity,x:r.Buffer.from(o.xOnlyPubkey)}:null}},17109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=void 0;const r=n(55815),i=n(78668),o=n(25735),a=n(21198),s=i.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),data:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))},e);const n={name:"embed",network:e.network||r.bitcoin};if(a.prop(n,"output",(()=>{if(e.data)return i.compile([s.OP_RETURN].concat(e.data))})),a.prop(n,"data",(()=>{if(e.output)return i.decompile(e.output).slice(1)})),t.validate&&e.output){const t=i.decompile(e.output);if(t[0]!==s.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(o.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}},41502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;const r=n(17109);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return r.p2data}});const i=n(88910);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});const o=n(21484);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});const a=n(51636);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return a.p2pkh}});const s=n(14476);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return s.p2sh}});const c=n(16410);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return c.p2wpkh}});const u=n(19944);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return u.p2wsh}});const l=n(99126);Object.defineProperty(t,"p2tr",{enumerable:!0,get:function(){return l.p2tr}})},21198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.value=t.prop=void 0,t.prop=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}},88910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=void 0;const r=n(55815),i=n(78668),o=n(25735),a=n(21198),s=i.OPS,c=s.OP_RESERVED;function u(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function n(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===s.OP_0)}t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),m:o.typeforce.maybe(o.typeforce.Number),n:o.typeforce.maybe(o.typeforce.Number),output:o.typeforce.maybe(o.typeforce.Buffer),pubkeys:o.typeforce.maybe(o.typeforce.arrayOf(o.isPoint)),signatures:o.typeforce.maybe(o.typeforce.arrayOf(n)),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const l={network:e.network||r.bitcoin};let f=[],h=!1;function d(e){h||(h=!0,f=i.decompile(e),l.m=f[0]-c,l.n=f[f.length-2]-c,l.pubkeys=f.slice(1,-2))}if(a.prop(l,"output",(()=>{if(e.m&&l.n&&e.pubkeys)return i.compile([].concat(c+e.m,e.pubkeys,c+l.n,s.OP_CHECKMULTISIG))})),a.prop(l,"m",(()=>{if(l.output)return d(l.output),l.m})),a.prop(l,"n",(()=>{if(l.pubkeys)return l.pubkeys.length})),a.prop(l,"pubkeys",(()=>{if(e.output)return d(e.output),l.pubkeys})),a.prop(l,"signatures",(()=>{if(e.input)return i.decompile(e.input).slice(1)})),a.prop(l,"input",(()=>{if(e.signatures)return i.compile([s.OP_0].concat(e.signatures))})),a.prop(l,"witness",(()=>{if(l.input)return[]})),a.prop(l,"name",(()=>{if(l.m&&l.n)return`p2ms(${l.m} of ${l.n})`})),t.validate){if(e.output){if(d(e.output),!o.typeforce.Number(f[0]))throw new TypeError("Output is invalid");if(!o.typeforce.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==s.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(l.m<=0||l.n>16||l.m>l.n||l.n!==f.length-3)throw new TypeError("Output is invalid");if(!l.pubkeys.every((e=>(0,o.isPoint)(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==l.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==l.n)throw new TypeError("n mismatch");if(e.pubkeys&&!u(e.pubkeys,l.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(l.n=e.pubkeys.length,l.n<l.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<l.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>l.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==s.OP_0)throw new TypeError("Input is invalid");if(0===l.signatures.length||!l.signatures.every(n))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!u(e.signatures,l.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(l,e)}},21484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=void 0;const r=n(55815),i=n(78668),o=n(25735),a=n(21198),s=i.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),pubkey:o.typeforce.maybe(o.isPoint),signature:o.typeforce.maybe(i.isCanonicalScriptSignature),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const n=a.value((()=>i.decompile(e.input))),c={name:"p2pk",network:e.network||r.bitcoin};if(a.prop(c,"output",(()=>{if(e.pubkey)return i.compile([e.pubkey,s.OP_CHECKSIG])})),a.prop(c,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),a.prop(c,"signature",(()=>{if(e.input)return n()[0]})),a.prop(c,"input",(()=>{if(e.signature)return i.compile([e.signature])})),a.prop(c,"witness",(()=>{if(c.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==s.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,o.isPoint)(c.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(c.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(c.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(c.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(c,e)}},51636:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=void 0;const r=n(76e3),i=n(55815),o=n(78668),a=n(25735),s=n(21198),c=n(58334),u=o.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(25)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(o.isCanonicalScriptSignature),input:a.typeforce.maybe(a.typeforce.Buffer)},e);const n=s.value((()=>{const t=c.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),l=s.value((()=>o.decompile(e.input))),f=e.network||i.bitcoin,h={name:"p2pkh",network:f};if(s.prop(h,"address",(()=>{if(!h.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(f.pubKeyHash,0),h.hash.copy(e,1),c.encode(e)})),s.prop(h,"hash",(()=>e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||h.pubkey?r.hash160(e.pubkey||h.pubkey):void 0)),s.prop(h,"output",(()=>{if(h.hash)return o.compile([u.OP_DUP,u.OP_HASH160,h.hash,u.OP_EQUALVERIFY,u.OP_CHECKSIG])})),s.prop(h,"pubkey",(()=>{if(e.input)return l()[1]})),s.prop(h,"signature",(()=>{if(e.input)return l()[0]})),s.prop(h,"input",(()=>{if(e.pubkey&&e.signature)return o.compile([e.signature,e.pubkey])})),s.prop(h,"witness",(()=>{if(h.input)return[]})),t.validate){let t=Buffer.from([]);if(e.address){if(n().version!==f.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==u.OP_DUP||e.output[1]!==u.OP_HASH160||20!==e.output[2]||e.output[23]!==u.OP_EQUALVERIFY||e.output[24]!==u.OP_CHECKSIG)throw new TypeError("Output is invalid");const n=e.output.slice(3,23);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.pubkey){const n=r.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const n=l();if(2!==n.length)throw new TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(n[0]))throw new TypeError("Input has invalid signature");if(!(0,a.isPoint)(n[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(n[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(n[1]))throw new TypeError("Pubkey mismatch");const i=r.hash160(n[1]);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(h,e)}},14476:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=void 0;const r=n(76e3),i=n(55815),o=n(78668),a=n(25735),s=n(21198),c=n(58334),u=o.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(23)),redeem:a.typeforce.maybe({network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||i.bitcoin);const l={network:n},f=s.value((()=>{const t=c.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),h=s.value((()=>o.decompile(e.input))),d=s.value((()=>{const t=h(),r=t[t.length-1];return{network:n,output:r===u.OP_FALSE?Buffer.from([]):r,input:o.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(s.prop(l,"address",(()=>{if(!l.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(l.network.scriptHash,0),l.hash.copy(e,1),c.encode(e)})),s.prop(l,"hash",(()=>e.output?e.output.slice(2,22):e.address?f().hash:l.redeem&&l.redeem.output?r.hash160(l.redeem.output):void 0)),s.prop(l,"output",(()=>{if(l.hash)return o.compile([u.OP_HASH160,l.hash,u.OP_EQUAL])})),s.prop(l,"redeem",(()=>{if(e.input)return d()})),s.prop(l,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return o.compile([].concat(o.decompile(e.redeem.input),e.redeem.output))})),s.prop(l,"witness",(()=>l.redeem&&l.redeem.witness?l.redeem.witness:l.input?[]:void 0)),s.prop(l,"name",(()=>{const e=["p2sh"];return void 0!==l.redeem&&void 0!==l.redeem.name&&e.push(l.redeem.name),e.join("-")})),t.validate){let t=Buffer.from([]);if(e.address){if(f().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==f().hash.length)throw new TypeError("Invalid address");t=f().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==u.OP_HASH160||20!==e.output[1]||e.output[22]!==u.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const i=e=>{if(e.output){const n=o.decompile(e.output);if(!n||n.length<1)throw new TypeError("Redeem.output too short");const i=r.hash160(e.output);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch");t=i}if(e.input){const t=e.input.length>0,n=e.witness&&e.witness.length>0;if(!t&&!n)throw new TypeError("Empty input");if(t&&n)throw new TypeError("Input and witness provided");if(t){const t=o.decompile(e.input);if(!o.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=h();if(!e||e.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(d().output))throw new TypeError("Input is invalid");i(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){const t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}i(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(l,e)}},99126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2tr=void 0;const r=n(48764),i=n(55815),o=n(78668),a=n(25735),s=n(32698),c=n(54246),u=n(21198),l=n(27715),f=o.OPS;t.p2tr=function(e,t){if(!(e.address||e.output||e.pubkey||e.internalPubkey||e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(34)),internalPubkey:a.typeforce.maybe(a.typeforce.BufferN(32)),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),pubkey:a.typeforce.maybe(a.typeforce.BufferN(32)),signature:a.typeforce.maybe(a.typeforce.BufferN(64)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer)),scriptTree:a.typeforce.maybe(a.isTaptree),redeem:a.typeforce.maybe({output:a.typeforce.maybe(a.typeforce.Buffer),redeemVersion:a.typeforce.maybe(a.typeforce.Number),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),redeemVersion:a.typeforce.maybe(a.typeforce.Number)},e);const n=u.value((()=>{const t=l.bech32m.decode(e.address),n=t.words.shift(),i=l.bech32m.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.Buffer.from(i)}})),h=u.value((()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&80===e.witness[e.witness.length-1][0]?e.witness.slice(0,-1):e.witness.slice()})),d=u.value((()=>e.scriptTree?(0,c.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0)),p=e.network||i.bitcoin,y={name:"p2tr",network:p};if(u.prop(y,"address",(()=>{if(!y.pubkey)return;const e=l.bech32m.toWords(y.pubkey);return e.unshift(1),l.bech32m.encode(p.bech32,e)})),u.prop(y,"hash",(()=>{const e=d();if(e)return e.hash;const t=h();if(t&&t.length>1){const e=t[t.length-1],n=e[0]&a.TAPLEAF_VERSION_MASK,r=t[t.length-2],i=(0,c.tapleafHash)({output:r,version:n});return(0,c.rootHashFromPath)(e,i)}return null})),u.prop(y,"output",(()=>{if(y.pubkey)return o.compile([f.OP_1,y.pubkey])})),u.prop(y,"redeemVersion",(()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:c.LEAF_VERSION_TAPSCRIPT)),u.prop(y,"redeem",(()=>{const e=h();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&a.TAPLEAF_VERSION_MASK}})),u.prop(y,"pubkey",(()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return n().data;if(y.internalPubkey){const e=(0,c.tweakKey)(y.internalPubkey,y.hash);if(e)return e.x}})),u.prop(y,"internalPubkey",(()=>{if(e.internalPubkey)return e.internalPubkey;const t=h();return t&&t.length>1?t[t.length-1].slice(1,33):void 0})),u.prop(y,"signature",(()=>{if(e.signature)return e.signature;const t=h();return t&&1===t.length?t[0]:void 0})),u.prop(y,"witness",(()=>{if(e.witness)return e.witness;const t=d();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){const n=(0,c.tapleafHash)({output:e.redeem.output,version:y.redeemVersion}),i=(0,c.findScriptPath)(t,n);if(!i)return;const o=(0,c.tweakKey)(e.internalPubkey,t.hash);if(!o)return;const a=r.Buffer.concat([r.Buffer.from([y.redeemVersion|o.parity]),e.internalPubkey].concat(i));return[e.redeem.output,a]}return e.signature?[e.signature]:void 0})),t.validate){let t=r.Buffer.from([]);if(e.address){if(p&&p.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(1!==n().version)throw new TypeError("Invalid address version");if(32!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw new TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==f.OP_1||32!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){const n=(0,c.tweakKey)(e.internalPubkey,y.hash);if(t.length>0&&!t.equals(n.x))throw new TypeError("Pubkey mismatch");t=n.x}if(t&&t.length&&!(0,s.getEccLib)().isXOnlyPoint(t))throw new TypeError("Invalid pubkey for p2tr");const i=d();if(e.hash&&i&&!e.hash.equals(i.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&i){const t=(0,c.tapleafHash)({output:e.redeem.output,version:y.redeemVersion});if(!(0,c.findScriptPath)(i,t))throw new TypeError("Redeem script not in tree")}const u=h();if(e.redeem&&y.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==y.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");if(y.redeem.output&&!e.redeem.output.equals(y.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&y.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,y.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(1===u.length){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{const n=u[u.length-1];if(n.length<33)throw new TypeError(`The control-block length is too small. Got ${n.length}, expected min 33.`);if((n.length-33)%32!=0)throw new TypeError(`The control-block length of ${n.length} is incorrect!`);const r=(n.length-33)/32;if(r>128)throw new TypeError(`The script path is too long. Got ${r}, expected max 128.`);const i=n.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(i))throw new TypeError("Internal pubkey mismatch");if(!(0,s.getEccLib)().isXOnlyPoint(i))throw new TypeError("Invalid internalPubkey for p2tr witness");const o=n[0]&a.TAPLEAF_VERSION_MASK,l=u[u.length-2],f=(0,c.tapleafHash)({output:l,version:o}),h=(0,c.rootHashFromPath)(n,f),d=(0,c.tweakKey)(i,h);if(!d)throw new TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(d.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(d.parity!==(1&n[0]))throw new Error("Incorrect parity")}}return Object.assign(y,e)}},16410:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=void 0;const r=n(76e3),i=n(55815),o=n(78668),a=n(25735),s=n(21198),c=n(27715),u=o.OPS,l=Buffer.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(22)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(o.isCanonicalScriptSignature),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const n=s.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),r=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),f=e.network||i.bitcoin,h={name:"p2wpkh",network:f};if(s.prop(h,"address",(()=>{if(!h.hash)return;const e=c.bech32.toWords(h.hash);return e.unshift(0),c.bech32.encode(f.bech32,e)})),s.prop(h,"hash",(()=>e.output?e.output.slice(2,22):e.address?n().data:e.pubkey||h.pubkey?r.hash160(e.pubkey||h.pubkey):void 0)),s.prop(h,"output",(()=>{if(h.hash)return o.compile([u.OP_0,h.hash])})),s.prop(h,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),s.prop(h,"signature",(()=>{if(e.witness)return e.witness[0]})),s.prop(h,"input",(()=>{if(h.witness)return l})),s.prop(h,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=Buffer.from([]);if(e.address){if(f&&f.bech32!==n().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==n().version)throw new TypeError("Invalid address version");if(20!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==u.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const n=r.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");if(t=n,!(0,a.isPoint)(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,a.isPoint)(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const n=r.hash160(e.witness[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(h,e)}},19944:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=void 0;const r=n(76e3),i=n(55815),o=n(78668),a=n(25735),s=n(21198),c=n(27715),u=o.OPS,l=Buffer.alloc(0);function f(e){return!(!Buffer.isBuffer(e)||65!==e.length||4!==e[0]||!(0,a.isPoint)(e))}t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),output:a.typeforce.maybe(a.typeforce.BufferN(34)),redeem:a.typeforce.maybe({input:a.typeforce.maybe(a.typeforce.Buffer),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.BufferN(0)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const n=s.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),r=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),h=s.value((()=>o.decompile(e.redeem.input)));let d=e.network;d||(d=e.redeem&&e.redeem.network||i.bitcoin);const p={network:d};if(s.prop(p,"address",(()=>{if(!p.hash)return;const e=c.bech32.toWords(p.hash);return e.unshift(0),c.bech32.encode(d.bech32,e)})),s.prop(p,"hash",(()=>e.output?e.output.slice(2):e.address?n().data:p.redeem&&p.redeem.output?r.sha256(p.redeem.output):void 0)),s.prop(p,"output",(()=>{if(p.hash)return o.compile([u.OP_0,p.hash])})),s.prop(p,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:l,witness:e.witness.slice(0,-1)}})),s.prop(p,"input",(()=>{if(p.witness)return l})),s.prop(p,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=o.toStack(h());return p.redeem=Object.assign({witness:t},e.redeem),p.redeem.input=l,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),s.prop(p,"name",(()=>{const e=["p2wsh"];return void 0!==p.redeem&&void 0!==p.redeem.name&&e.push(p.redeem.name),e.join("-")})),t.validate){let t=Buffer.from([]);if(e.address){if(n().prefix!==d.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==n().version)throw new TypeError("Invalid address version");if(32!==n().data.length)throw new TypeError("Invalid address data");t=n().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==u.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==d)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const n=r.sha256(e.redeem.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem.input&&!o.isPushOnly(h()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&h().some(f)||e.redeem.output&&(o.decompile(e.redeem.output)||[]).some(f))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(f)||(o.decompile(t)||[]).some(f))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(p,e)}},28207:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=void 0;const r=n(95011),i=n(3493),o=n(96403),a=n(6264),s=n(74929),c=n(55815),u=n(41502),l=n(54246),f=n(78668),h=n(95262),d=n(39239),p=n(95685),y={network:c.bitcoin,maximumFeeRate:5e3};class g{static fromBase64(e,t={}){const buffer=Buffer.from(e,"base64");return this.fromBuffer(buffer,t)}static fromHex(e,t={}){const buffer=Buffer.from(e,"hex");return this.fromBuffer(buffer,t)}static fromBuffer(buffer,e={}){const t=r.Psbt.fromBuffer(buffer,b),n=new g(e,t);var i,o;return i=n.__CACHE.__TX,o=n.__CACHE,i.ins.forEach((e=>{O(o,e)})),n}constructor(e={},t=new r.Psbt(new m)){this.data=t,this.opts=Object.assign({},y,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const n=(e,t,n,r)=>Object.defineProperty(e,t,{enumerable:n,writable:r});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:(0,s.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=(0,a.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,s.cloneBuffer)(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=g.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){S(e),this.opts.maximumFeeRate=e}setVersion(e){S(e),k(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){S(e),k(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){S(t),k(this.data.inputs,"setInputSequence");const n=this.__CACHE;if(n.__TX.ins.length<=e)throw new Error("Input index too high");return n.__TX.ins[e].sequence=t,n.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,d.checkTaprootInputFields)(e,e,"addInput"),k(this.data.inputs,"addInput"),e.witnessScript&&V(e.witnessScript);const t=this.__CACHE;this.data.addInput(e);O(t,t.__TX.ins[t.__TX.ins.length-1]);const n=this.data.inputs.length-1,r=this.data.inputs[n];return r.nonWitnessUtxo&&D(this.__CACHE,r,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");k(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:n}=this.opts,r=(0,a.toOutputScript)(t,n);e=Object.assign(e,{script:r})}(0,d.checkTaprootOutputFields)(e,e,"addOutput");const n=this.__CACHE;return this.data.addOutput(e),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(_))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,n){const r=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=r*i;if(r>=n.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${r} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const n=t.__TX.clone();return M(this.data.inputs,n,t,!0),n}getFeeRate(){return x("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return x("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,o.checkForInput)(this.data.inputs,0),G(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t){const n=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(n)?this._finalizeTaprootInput(e,n,void 0,t):this._finalizeInput(e,n,t)}finalizeTaprootInput(e,t,n=d.tapScriptFinalizer){const r=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(r))return this._finalizeTaprootInput(e,r,t,n);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,n=N){const{script:r,isP2SH:i,isP2WSH:o,isSegwit:a}=function(e,t,n){const r=n.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const o=H(n,t,e),a=r.ins[e].index;i.script=o.outs[a].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);(t.witnessScript||(0,p.isP2WPKH)(i.script))&&(i.isSegwit=!0);return i}(e,t,this.__CACHE);if(!r)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:n}=e;t.forEach((e=>{const{hashType:t}=f.signature.decode(e.signature);if(n!==t)throw new Error("Signature sighash does not match input sighash type")}))}(t);const{finalScriptSig:s,finalScriptWitness:c}=n(e,t,r,a,i,o);if(s&&this.data.updateInput(e,{finalScriptSig:s}),c&&this.data.updateInput(e,{finalScriptWitness:c}),!s&&!c)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,n,r=d.tapScriptFinalizer){if(!t.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){const n=u.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),r=(0,p.witnessStackToScriptWitness)(n.witness);this.data.updateInput(e,{finalScriptWitness:r})}else{const{finalScriptWitness:i}=r(e,t,n);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){const t=(0,o.checkForInput)(this.data.inputs,e),n=q(F(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=f.decompile(e);if(!t)return;const n=t[t.length-1];if(!Buffer.isBuffer(n)||K(n)||(r=n,f.isCanonicalScriptSignature(r)))return;var r;if(!f.decompile(n))return;return n}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=j(e),n=t[t.length-1];if(K(n))return;if(!f.decompile(n))return;return n}(t.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+W(n.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,n,r){const i=F(n,t,r),{meaningfulScript:o}=q(i,n,"input",t.redeemScript,t.witnessScript);return(0,p.pubkeyInScript)(e,o)}(t,(0,o.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const n=(0,o.checkForInput)(this.data.inputs,e),r=E(t);return!!n.bip32Derivation&&n.bip32Derivation.some(r)}outputHasPubkey(e,t){return function(e,t,n,r){const i=r.__TX.outs[n].script,{meaningfulScript:o}=q(i,n,"output",t.redeemScript,t.witnessScript);return(0,p.pubkeyInScript)(e,o)}(t,(0,o.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const n=(0,o.checkForOutput)(this.data.outputs,e),r=E(t);return!!n.bip32Derivation&&n.bip32Derivation.some(r)}validateSignaturesOfAllInputs(e){(0,o.checkForInput)(this.data.inputs,0);return G(this.data.inputs.length).map((t=>this.validateSignaturesOfInput(t,e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t,n){const r=this.data.inputs[e];return(0,d.isTaprootInput)(r)?this.validateSignaturesOfTaprootInput(e,t,n):this._validateSignaturesOfInput(e,t,n)}_validateSignaturesOfInput(e,t,n){const r=this.data.inputs[e],i=(r||{}).partialSig;if(!r||!i||i.length<1)throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const o=n?i.filter((e=>e.pubkey.equals(n))):i;if(o.length<1)throw new Error("No signatures for this pubkey");const a=[];let s,c,u;for(const n of o){const i=f.signature.decode(n.signature),{hash:o,script:l}=u!==i.hashType?C(e,Object.assign({},r,{sighashType:i.hashType}),this.__CACHE,!0):{hash:s,script:c};u=i.hashType,s=o,c=l,A(n.pubkey,l,"verify"),a.push(t(n.pubkey,o,i.signature))}return a.every((e=>!0===e))}validateSignaturesOfTaprootInput(e,t,n){const r=this.data.inputs[e],i=(r||{}).tapKeySig,o=(r||{}).tapScriptSig;if(!r&&!i&&(!o||o.length))throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const a=(n=n&&(0,d.toXOnly)(n))?B(e,r,this.data.inputs,n,this.__CACHE):function(e,t,n,r){const i=[];if(t.tapInternalKey){const n=(0,d.tweakInternalPubKey)(e,t);i.push(n)}if(t.tapScriptSig){const e=t.tapScriptSig.map((e=>e.pubkey));i.push(...e)}const o=i.map((i=>B(e,t,n,i,r)));return o.flat()}(e,r,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");const s=a.find((e=>!!e.leafHash));if(i&&s){if(!t(s.pubkey,s.hash,i))return!1}if(o)for(const e of o){const n=a.find((t=>e.pubkey.equals(t.pubkey)));if(n){if(!t(e.pubkey,n.hash,e.signature))return!1}}return!0}signAllInputsHD(e,t=[h.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const n=[];for(const r of G(this.data.inputs.length))try{this.signInputHD(r,e,t),n.push(!0)}catch(e){n.push(!1)}if(n.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[h.Transaction.SIGHASH_ALL]){return new Promise(((n,r)=>{if(!e||!e.publicKey||!e.fingerprint)return r(new Error("Need HDSigner to sign input"));const i=[],o=[];for(const n of G(this.data.inputs.length))o.push(this.signInputHDAsync(n,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return r(new Error("No inputs were signed"));n()}))}))}signInputHD(e,t,n=[h.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return U(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,n))),this}signInputHDAsync(e,t,n=[h.Transaction.SIGHASH_ALL]){return new Promise(((r,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const o=U(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,n)));return Promise.all(o).then((()=>{r()})).catch(i)}))}signAllInputs(e,t){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const n=[];for(const r of G(this.data.inputs.length))try{this.signInput(r,e,t),n.push(!0)}catch(e){n.push(!1)}if(n.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise(((n,r)=>{if(!e||!e.publicKey)return r(new Error("Need Signer to sign input"));const i=[],o=[];for(const[n]of this.data.inputs.entries())o.push(this.signInputAsync(n,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return r(new Error("No inputs were signed"));n()}))}))}signInput(e,t,n){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._signTaprootInput(e,r,t,void 0,n):this._signInput(e,t,n)}signTaprootInput(e,t,n,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInput(e,i,t,n,r);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,n=[h.Transaction.SIGHASH_ALL]){const{hash:r,sighashType:i}=R(this.data.inputs,e,t.publicKey,this.__CACHE,n),o=[{pubkey:t.publicKey,signature:f.signature.encode(t.sign(r),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,n,r,i=[h.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,n,r,i),a=o.filter((e=>!e.leafHash)).map((e=>(0,d.serializeTaprootSignature)(n.signSchnorr(e.hash),t.sighashType)))[0],s=o.filter((e=>!!e.leafHash)).map((e=>({pubkey:(0,d.toXOnly)(n.publicKey),signature:(0,d.serializeTaprootSignature)(n.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash})));return a&&this.data.updateInput(e,{tapKeySig:a}),s.length&&this.data.updateInput(e,{tapScriptSig:s}),this}signInputAsync(e,t,n){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const r=(0,o.checkForInput)(this.data.inputs,e);return(0,d.isTaprootInput)(r)?this._signTaprootInputAsync(e,r,t,void 0,n):this._signInputAsync(e,t,n)}))}signTaprootInputAsync(e,t,n,r){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const i=(0,o.checkForInput)(this.data.inputs,e);if((0,d.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,n,r);throw new Error(`Input #${e} is not of type Taproot.`)}))}_signInputAsync(e,t,n=[h.Transaction.SIGHASH_ALL]){const{hash:r,sighashType:i}=R(this.data.inputs,e,t.publicKey,this.__CACHE,n);return Promise.resolve(t.sign(r)).then((n=>{const r=[{pubkey:t.publicKey,signature:f.signature.encode(n,i)}];this.data.updateInput(e,{partialSig:r})}))}async _signTaprootInputAsync(e,t,n,r,i=[h.Transaction.SIGHASH_DEFAULT]){const o=this.checkTaprootHashesForSig(e,t,n,r,i),a=[],s=o.filter((e=>!e.leafHash))[0];if(s){const e=Promise.resolve(n.signSchnorr(s.hash)).then((e=>({tapKeySig:(0,d.serializeTaprootSignature)(e,t.sighashType)})));a.push(e)}const c=o.filter((e=>!!e.leafHash));if(c.length){const e=c.map((e=>Promise.resolve(n.signSchnorr(e.hash)).then((r=>({tapScriptSig:[{pubkey:(0,d.toXOnly)(n.publicKey),signature:(0,d.serializeTaprootSignature)(r,t.sighashType),leafHash:e.leafHash}]})))));a.push(...e)}return Promise.all(a).then((t=>{t.forEach((t=>this.data.updateInput(e,t)))}))}checkTaprootHashesForSig(e,t,n,r,i){if("function"!=typeof n.signSchnorr)throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const o=B(e,t,this.data.inputs,n.publicKey,this.__CACHE,r,i);if(!o||!o.length)throw new Error(`Can not sign for input #${e} with the key ${n.publicKey.toString("hex")}`);return o}toBuffer(){return w(this.__CACHE),this.data.toBuffer()}toHex(){return w(this.__CACHE),this.data.toHex()}toBase64(){return w(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&V(t.witnessScript),(0,d.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&D(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){const n=this.data.outputs[e];return(0,d.checkTaprootOutputFields)(n,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=g;const b=buffer=>new m(buffer);class m{constructor(buffer=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=h.Transaction.fromBuffer(buffer),function(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!Buffer.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?(0,s.reverseBuffer)(Buffer.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!Buffer.isBuffer(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function w(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function v(e,t,n){if(!t)return!1;let r;if(r=n?n.map((e=>{const n=function(e){if(65===e.length){const t=1&e[64],n=e.slice(0,33);return n[0]=2|t,n}return e.slice()}(e);return t.find((e=>e.pubkey.equals(n)))})).filter((e=>!!e)):t,r.length>e)throw new Error("Too many signatures");return r.length===e}function _(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function E(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function S(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function k(e,t){e.forEach((e=>{if((0,d.isTaprootInput)(e)?(0,d.checkTaprootInputForSigs)(e,t):(0,p.checkInputForSig)(e,t))throw new Error("Can not modify transaction, signatures exist.")}))}function A(e,t,n){if(!(0,p.pubkeyInScript)(e,t))throw new Error(`Can not ${n} for this input with the key ${e.toString("hex")}`)}function O(e,t){const n=(0,s.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[n]=1}function P(e,t){return(n,r,i,o)=>{const a=e({redeem:{output:i}}).output;if(!r.equals(a))throw new Error(`${t} for ${o} #${n} doesn't match the scriptPubKey in the prevout`)}}const I=P(u.p2sh,"Redeem script"),T=P(u.p2wsh,"Witness script");function x(e,t,n,r){if(!n.every(_))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&r.__FEE_RATE)return r.__FEE_RATE;if("__FEE"===e&&r.__FEE)return r.__FEE;let i,o=!0;return r.__EXTRACTED_TX?(i=r.__EXTRACTED_TX,o=!1):i=r.__TX.clone(),M(n,i,r,o),"__FEE_RATE"===e?r.__FEE_RATE:"__FEE"===e?r.__FEE:void 0}function N(e,t,n,r,i,o){const a=W(n);if(!function(e,t,n){switch(n){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return v(1,e.partialSig);case"multisig":const n=u.p2ms({output:t});return v(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,n,a))throw new Error(`Can not finalize input #${e}`);return function(e,t,n,r,i,o){let a,s;const c=function(e,t,n){let r;switch(t){case"multisig":const t=function(e,t){const n=u.p2ms({output:e});return n.pubkeys.map((e=>(t.filter((t=>t.pubkey.equals(e)))[0]||{}).signature)).filter((e=>!!e))}(e,n);r=u.p2ms({output:e,signatures:t});break;case"pubkey":r=u.p2pk({output:e,signature:n[0].signature});break;case"pubkeyhash":r=u.p2pkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature});break;case"witnesspubkeyhash":r=u.p2wpkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature})}return r}(e,t,n),l=o?u.p2wsh({redeem:c}):null,f=i?u.p2sh({redeem:l||c}):null;r?(s=l?(0,p.witnessStackToScriptWitness)(l.witness):(0,p.witnessStackToScriptWitness)(c.witness),f&&(a=f.input)):a=f?f.input:c.input;return{finalScriptSig:a,finalScriptWitness:s}}(n,a,t.partialSig,r,i,o)}function R(e,t,n,r,i){const a=(0,o.checkForInput)(e,t),{hash:s,sighashType:c,script:u}=C(t,a,r,!1,i);return A(n,u,"sign"),{hash:s,sighashType:c}}function C(e,t,n,r,i){const o=n.__TX,a=t.sighashType||h.Transaction.SIGHASH_ALL;let s,c;if(L(a,i),t.nonWitnessUtxo){const r=H(n,t,e),i=o.ins[e].hash,a=r.getHash();if(!i.equals(a))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const s=o.ins[e].index;c=r.outs[s]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");c=t.witnessUtxo}const{meaningfulScript:l,type:f}=q(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)s=o.hashForWitnessV0(e,l,c.value,a);else if((0,p.isP2WPKH)(l)){const t=u.p2pkh({hash:l.slice(2)}).output;s=o.hashForWitnessV0(e,t,c.value,a)}else{if(void 0===t.nonWitnessUtxo&&!1===n.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${l.toString("hex")}`);r||!1===n.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),s=o.hashForSignature(e,l,a)}return{script:l,sighashType:a,hash:s}}function B(e,t,n,r,i,o,a){const s=i.__TX,c=t.sighashType||h.Transaction.SIGHASH_DEFAULT;L(c,a);const u=n.map(((e,t)=>z(t,e,i))),f=u.map((e=>e.script)),y=u.map((e=>e.value)),g=[];if(t.tapInternalKey&&!o){const n=(0,d.tweakInternalPubKey)(e,t);if((0,d.toXOnly)(r).equals(n)){const t=s.hashForWitnessV1(e,f,y,c);g.push({pubkey:r,hash:t})}}const b=(t.tapLeafScript||[]).filter((e=>(0,p.pubkeyInScript)(r,e.script))).map((e=>{const t=(0,l.tapleafHash)({output:e.script,version:e.leafVersion});return Object.assign({hash:t},e)})).filter((e=>!o||o.equals(e.hash))).map((t=>{const n=s.hashForWitnessV1(e,f,y,h.Transaction.SIGHASH_DEFAULT,t.hash);return{pubkey:r,hash:n,leafHash:t.hash}}));return g.concat(b)}function L(e,t){if(t&&t.indexOf(e)<0){const t=function(e){let t=e&h.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case h.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case h.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case h.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function U(e,t,n){const r=(0,o.checkForInput)(t,e);if(!r.bip32Derivation||0===r.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=r.bip32Derivation.map((e=>e.masterFingerprint.equals(n.fingerprint)?e:void 0)).filter((e=>!!e));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((e=>{const t=n.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function j(buffer){let e=0;function t(){const t=i.decode(buffer,e);return e+=i.decode.bytes,t}function n(){return n=t(),e+=n,buffer.slice(e-n,e);var n}return function(){const e=t(),r=[];for(let t=0;t<e;t++)r.push(n());return r}()}function D(e,t,n){e.__NON_WITNESS_UTXO_BUF_CACHE[n]=t.nonWitnessUtxo;const r=h.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[n]=r;const i=e,o=n;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function M(e,t,n,r){let i=0;e.forEach(((e,o)=>{if(r&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),r&&e.finalScriptWitness&&(t.ins[o].witness=j(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const r=H(n,e,o),a=t.ins[o].index,s=r.outs[a];i+=s.value}}));const o=t.outs.reduce(((e,t)=>e+t.value),0),a=i-o;if(a<0)throw new Error("Outputs are spending more than Inputs");const s=t.virtualSize();n.__FEE=a,n.__EXTRACTED_TX=t,n.__FEE_RATE=Math.floor(a/s)}function H(e,t,n){const r=e.__NON_WITNESS_UTXO_TX_CACHE;return r[n]||D(e,t,n),r[n]}function F(e,t,n){const{script:r}=z(e,t,n);return r}function z(e,t,n){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){const r=H(n,t,e).outs[n.__TX.ins[e].index];return{script:r.script,value:r.value}}throw new Error("Can't find pubkey in input without Utxo data")}function K(e){return 33===e.length&&f.isCanonicalPubKey(e)}function q(e,t,n,r,i){const o=(0,p.isP2SHScript)(e),a=o&&r&&(0,p.isP2WSHScript)(r),s=(0,p.isP2WSHScript)(e);if(o&&void 0===r)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((s||a)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return a?(c=i,I(t,e,r,n),T(t,r,i,n),V(c)):s?(c=i,T(t,e,i,n),V(c)):o?(c=r,I(t,e,r,n)):c=e,{meaningfulScript:c,type:a?"p2sh-p2wsh":o?"p2sh":s?"p2wsh":"raw"}}function V(e){if((0,p.isP2WPKH)(e)||(0,p.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function W(e){return(0,p.isP2WPKH)(e)?"witnesspubkeyhash":(0,p.isP2PKH)(e)?"pubkeyhash":(0,p.isP2MS)(e)?"multisig":(0,p.isP2PK)(e)?"pubkey":"nonstandard"}function G(e){return[...Array(e).keys()]}},39239:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.checkTaprootInputForSigs=t.tapTreeFromList=t.tapTreeToList=t.tweakInternalPubKey=t.checkTaprootOutputFields=t.checkTaprootInputFields=t.isTaprootOutput=t.isTaprootInput=t.serializeTaprootSignature=t.tapScriptFinalizer=t.toXOnly=void 0;const r=n(25735),i=n(95262),o=n(95685),a=n(54246),s=n(41502),c=n(95685);function u(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,o.isP2TR)(e.witnessUtxo.script))}function l(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,o.isP2TR)(t))}function f(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:function(e){let t;for(const n of e)if(t=p(n,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}(e)}function h(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||i.Transaction.SIGHASH_DEFAULT}}function d(e,t=[],n=0){if(n>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,r.isTapleaf)(e)?(t.push({depth:n,leafVersion:e.version||a.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&d(e[0],t,n+1),e[1]&&d(e[1],t,n+1),t):[]}function p(e,t,n=0){if(n>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===n)return t?void 0:{output:e.script,version:e.leafVersion};if((0,r.isTapleaf)(t))return;const i=p(e,t&&t[0],n+1);if(i)return[i,t&&t[1]];const o=p(e,t&&t[1],n+1);return o?[t&&t[0],o]:void 0}function y(e,t){if(!t)return!0;const n=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(0,a.rootHashFromPath)(e.controlBlock,n).equals(t)}function g(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}t.toXOnly=e=>32===e.length?e:e.slice(1,33),t.tapScriptFinalizer=function(e,t,n){const r=function(e,t,n){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);const r=(e.tapLeafScript||[]).sort(((e,t)=>e.controlBlock.length-t.controlBlock.length)).find((t=>function(e,t,n){const r=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(!n||n.equals(r))&&void 0!==t.find((e=>e.leafHash.equals(r)))}(t,e.tapScriptSig,n)));if(!r)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return r}(t,e,n);try{const e=function(e,t){const n=(0,a.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter((e=>e.leafHash.equals(n))).map((e=>function(e,t){return Object.assign({positionInScript:(0,o.pubkeyPositionInScript)(t.pubkey,e)},t)}(t.script,e))).sort(((e,t)=>t.positionInScript-e.positionInScript)).map((e=>e.signature))}(t,r),n=e.concat(r.script).concat(r.controlBlock);return{finalScriptWitness:(0,o.witnessStackToScriptWitness)(n)}}catch(t){throw new Error(`Can not finalize taproot input #${e}: ${t}`)}},t.serializeTaprootSignature=function(e,t){const n=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,n])},t.isTaprootInput=u,t.isTaprootOutput=l,t.checkTaprootInputFields=function(e,t,n){!function(e,t,n){const r=u(e)&&g(t),i=g(e)&&u(t),o=e===t&&u(t)&&g(t);if(r||i||o)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}(e,t,n),function(e,t,n){if(t.tapMerkleRoot){const r=(t.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot))),i=(e.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot)));if(!r||!i)throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot){if(!(t.tapLeafScript||[]).every((t=>y(t,e.tapMerkleRoot))))throw new Error(`Invalid arguments for Psbt.${n}. Tapleaf not part of taptree.`)}}(e,t,n)},t.checkTaprootOutputFields=function(e,t,n){!function(e,t,n){const r=l(e)&&g(t),i=g(e)&&l(t),o=e===t&&l(t)&&g(t);if(r||i||o)throw new Error(`Invalid arguments for Psbt.${n}. Cannot use both taproot and non-taproot fields.`)}(e,t,n),function(e,t){if(!t.tapTree&&!t.tapInternalKey)return;const n=t.tapInternalKey||e.tapInternalKey,r=t.tapTree||e.tapTree;if(n){const{script:t}=e,i=function(e,t){const n=t&&f(t.leaves),{output:r}=(0,s.p2tr)({internalPubkey:e,scriptTree:n});return r}(n,r);if(t&&!t.equals(i))throw new Error("Error adding output. Script or address missmatch.")}}(e,t)},t.tweakInternalPubKey=function(e,t){const n=t.tapInternalKey,r=n&&(0,a.tweakKey)(n,t.tapMerkleRoot);if(!r)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${n&&n.toString("hex")}`);return r.x},t.tapTreeToList=function(e){if(!(0,r.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return d(e)},t.tapTreeFromList=f,t.checkTaprootInputForSigs=function(e,t){return function(e){const t=[];e.tapKeySig&&t.push(e.tapKeySig);e.tapScriptSig&&t.push(...e.tapScriptSig.map((e=>e.signature)));if(!t.length){const n=function(e){if(!e)return;const t=e.slice(2);if(64===t.length||65===t.length)return t}(e.finalScriptWitness);n&&t.push(n)}return t}(e).some((e=>(0,c.signatureBlocksAction)(e,h,t)))}},95685:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signatureBlocksAction=t.checkInputForSig=t.pubkeyInScript=t.pubkeyPositionInScript=t.witnessStackToScriptWitness=t.isP2TR=t.isP2SHScript=t.isP2WSHScript=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=void 0;const r=n(3493),i=n(78668),o=n(95262),a=n(76e3),s=n(41502);function c(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function u(e,t){const n=(0,a.hash160)(e),r=e.slice(1,33),o=i.decompile(t);if(null===o)throw new Error("Unknown script error");return o.findIndex((t=>"number"!=typeof t&&(t.equals(e)||t.equals(n)||t.equals(r))))}function l(e,t,n){const{hashType:r}=t(e),i=[];r&o.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput");switch(31&r){case o.Transaction.SIGHASH_ALL:break;case o.Transaction.SIGHASH_SINGLE:case o.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return-1===i.indexOf(n)}t.isP2MS=c(s.p2ms),t.isP2PK=c(s.p2pk),t.isP2PKH=c(s.p2pkh),t.isP2WPKH=c(s.p2wpkh),t.isP2WSHScript=c(s.p2wsh),t.isP2SHScript=c(s.p2sh),t.isP2TR=c(s.p2tr),t.witnessStackToScriptWitness=function(e){let buffer=Buffer.allocUnsafe(0);function t(e){const t=buffer.length,n=r.encodingLength(e);buffer=Buffer.concat([buffer,Buffer.allocUnsafe(n)]),r.encode(e,buffer,t)}function n(e){t(e.length),function(e){buffer=Buffer.concat([buffer,Buffer.from(e)])}(e)}var i;return t((i=e).length),i.forEach(n),buffer},t.pubkeyPositionInScript=u,t.pubkeyInScript=function(e,t){return-1!==u(e,t)},t.checkInputForSig=function(e,t){return function(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=function(e){const t=e.finalScriptSig&&i.decompile(e.finalScriptSig)||[],n=e.finalScriptWitness&&i.decompile(e.finalScriptWitness)||[];return t.concat(n).filter((e=>Buffer.isBuffer(e)&&i.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else t=e.partialSig;return t.map((e=>e.signature))}(e).some((e=>l(e,i.signature.decode,t)))},t.signatureBlocksAction=l},41447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodingLength=void 0;const r=n(26308);function i(e){return e<r.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}t.encodingLength=i,t.encode=function(buffer,e,t){const n=i(e);return 1===n?buffer.writeUInt8(e,t):2===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA1,t),buffer.writeUInt8(e,t+1)):3===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA2,t),buffer.writeUInt16LE(e,t+1)):(buffer.writeUInt8(r.OPS.OP_PUSHDATA4,t),buffer.writeUInt32LE(e,t+1)),n},t.decode=function(buffer,e){const t=buffer.readUInt8(e);let n,i;if(t<r.OPS.OP_PUSHDATA1)n=t,i=1;else if(t===r.OPS.OP_PUSHDATA1){if(e+2>buffer.length)return null;n=buffer.readUInt8(e+1),i=2}else if(t===r.OPS.OP_PUSHDATA2){if(e+3>buffer.length)return null;n=buffer.readUInt16LE(e+1),i=3}else{if(e+5>buffer.length)return null;if(t!==r.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=buffer.readUInt32LE(e+1),i=5}return{opcode:t,number:n,size:i}}},78668:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.isPushOnly=t.OPS=void 0;const r=n(15999),i=n(26308);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return i.OPS}});const o=n(41447),a=n(43908),s=n(66925),c=n(25735),{typeforce:u}=c,l=i.OPS.OP_RESERVED;function f(e){return c.Buffer(e)||function(e){return c.Number(e)&&(e===i.OPS.OP_0||e>=i.OPS.OP_1&&e<=i.OPS.OP_16||e===i.OPS.OP_1NEGATE)}(e)}function h(e){return c.Array(e)&&e.every(f)}function d(buffer){return 0===buffer.length?i.OPS.OP_0:1===buffer.length?buffer[0]>=1&&buffer[0]<=16?l+buffer[0]:129===buffer[0]?i.OPS.OP_1NEGATE:void 0:void 0}function p(e){return Buffer.isBuffer(e)}function y(e){return Buffer.isBuffer(e)}function g(e){if(p(e))return e;u(c.Array,e);const t=e.reduce(((e,t)=>y(t)?1===t.length&&void 0!==d(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1),0),buffer=Buffer.allocUnsafe(t);let n=0;if(e.forEach((e=>{if(y(e)){const t=d(e);if(void 0!==t)return buffer.writeUInt8(t,n),void(n+=1);n+=o.encode(buffer,e.length,n),e.copy(buffer,n),n+=e.length}else buffer.writeUInt8(e,n),n+=1})),n!==buffer.length)throw new Error("Could not decode chunks");return buffer}function b(buffer){if(e=buffer,c.Array(e))return buffer;var e;u(c.Buffer,buffer);const t=[];let n=0;for(;n<buffer.length;){const e=buffer[n];if(e>i.OPS.OP_0&&e<=i.OPS.OP_PUSHDATA4){const e=o.decode(buffer,n);if(null===e)return null;if(n+=e.size,n+e.number>buffer.length)return null;const r=buffer.slice(n,n+e.number);n+=e.number;const i=d(r);void 0!==i?t.push(i):t.push(r)}else t.push(e),n+=1}return t}function m(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=h,t.compile=g,t.decompile=b,t.toASM=function(e){return p(e)&&(e=b(e)),e.map((e=>{if(y(e)){const t=d(e);if(void 0===t)return e.toString("hex");e=t}return i.REVERSE_OPS[e]})).join(" ")},t.fromASM=function(e){return u(c.String,e),g(e.split(" ").map((e=>void 0!==i.OPS[e]?i.OPS[e]:(u(c.Hex,e),Buffer.from(e,"hex")))))},t.toStack=function(e){return e=b(e),u(h,e),e.map((e=>y(e)?e:e===i.OPS.OP_0?Buffer.allocUnsafe(0):a.encode(e-l)))},t.isCanonicalPubKey=function(buffer){return c.isPoint(buffer)},t.isDefinedHashType=m,t.isCanonicalScriptSignature=function(buffer){return!!Buffer.isBuffer(buffer)&&(!!m(buffer[buffer.length-1])&&r.check(buffer.slice(0,-1)))},t.number=a,t.signature=s},43908:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0,t.decode=function(buffer,e,t){e=e||4,t=void 0===t||t;const n=buffer.length;if(0===n)return 0;if(n>e)throw new TypeError("Script number overflow");if(t&&0==(127&buffer[n-1])&&(n<=1||0==(128&buffer[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const e=buffer.readUInt32LE(0),t=buffer.readUInt8(4);return 128&t?-(4294967296*(-129&t)+e):4294967296*t+e}let r=0;for(let e=0;e<n;++e)r|=buffer[e]<<8*e;return 128&buffer[n-1]?-(r&~(128<<8*(n-1))):r},t.encode=function(e){let t=Math.abs(e);const n=(r=t)>2147483647?5:r>8388607?4:r>32767?3:r>127?2:r>0?1:0;var r;const buffer=Buffer.allocUnsafe(n),i=e<0;for(let e=0;e<n;++e)buffer.writeUInt8(255&t,e),t>>=8;return 128&buffer[n-1]?buffer.writeUInt8(i?128:0,n-1):i&&(buffer[n-1]|=128),buffer}},66925:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;const r=n(15999),i=n(25735),{typeforce:o}=i,a=Buffer.alloc(1,0);function s(e){let t=0;for(;0===e[t];)++t;return t===e.length?a:128&(e=e.slice(t))[0]?Buffer.concat([a,e],1+e.length):e}function c(e){0===e[0]&&(e=e.slice(1));const buffer=Buffer.alloc(32,0),t=Math.max(0,32-e.length);return e.copy(buffer,t),buffer}t.decode=function(buffer){const e=buffer.readUInt8(buffer.length-1),t=-129&e;if(t<=0||t>=4)throw new Error("Invalid hashType "+e);const n=r.decode(buffer.slice(0,-1)),i=c(n.r),o=c(n.s);return{signature:Buffer.concat([i,o],64),hashType:e}},t.encode=function(e,t){o({signature:i.BufferN(64),hashType:i.UInt8},{signature:e,hashType:t});const n=-129&t;if(n<=0||n>=4)throw new Error("Invalid hashType "+t);const a=Buffer.allocUnsafe(1);a.writeUInt8(t,0);const c=s(e.slice(0,32)),u=s(e.slice(32,64));return Buffer.concat([r.encode(c,u),a])}},95262:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const r=n(74929),i=n(76e3),o=n(78668),a=n(78668),s=n(25735),{typeforce:c}=s;function u(e){const t=e.length;return r.varuint.encodingLength(t)+t}const l=Buffer.allocUnsafe(0),f=[],h=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),d=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),p=Buffer.from("ffffffffffffffff","hex"),y={script:l,valueBuffer:p};class g{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(buffer,e){const t=new r.BufferReader(buffer),n=new g;n.version=t.readInt32();const i=t.readUInt8(),o=t.readUInt8();let a=!1;i===g.ADVANCED_TRANSACTION_MARKER&&o===g.ADVANCED_TRANSACTION_FLAG?a=!0:t.offset-=2;const s=t.readVarInt();for(let e=0;e<s;++e)n.ins.push({hash:t.readSlice(32),index:t.readUInt32(),script:t.readVarSlice(),sequence:t.readUInt32(),witness:f});const c=t.readVarInt();for(let e=0;e<c;++e)n.outs.push({value:t.readUInt64(),script:t.readVarSlice()});if(a){for(let e=0;e<s;++e)n.ins[e].witness=t.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=t.readUInt32(),e)return n;if(t.offset!==buffer.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return g.fromBuffer(Buffer.from(e,"hex"),!1)}static isCoinbaseHash(buffer){c(s.Hash256bit,buffer);for(let e=0;e<32;++e)if(0!==buffer[e])return!1;return!0}isCoinbase(){return 1===this.ins.length&&g.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,n,r){return c(s.tuple(s.Hash256bit,s.UInt32,s.maybe(s.UInt32),s.maybe(s.Buffer)),arguments),s.Null(n)&&(n=g.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:r||l,sequence:n,witness:f})-1}addOutput(e,t){return c(s.tuple(s.Buffer,s.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+r.varuint.encodingLength(this.ins.length)+r.varuint.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+u(t.script)),0)+this.outs.reduce(((e,t)=>e+8+u(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function(e){const t=e.length;return r.varuint.encodingLength(t)+e.reduce(((e,t)=>e+u(t)),0)}(t.witness)),0):0)}clone(){const e=new g;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,n){if(c(s.tuple(s.UInt32,s.Buffer,s.Number),arguments),e>=this.ins.length)return d;const r=o.compile(o.decompile(t).filter((e=>e!==a.OPS.OP_CODESEPARATOR))),u=this.clone();if((31&n)===g.SIGHASH_NONE)u.outs=[],u.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}));else if((31&n)===g.SIGHASH_SINGLE){if(e>=this.outs.length)return d;u.outs.length=e+1;for(let t=0;t<e;t++)u.outs[t]=y;u.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}))}n&g.SIGHASH_ANYONECANPAY?(u.ins=[u.ins[e]],u.ins[0].script=r):(u.ins.forEach((e=>{e.script=l})),u.ins[e].script=r);const buffer=Buffer.allocUnsafe(u.byteLength(!1)+4);return buffer.writeInt32LE(n,buffer.length-4),u.__toBuffer(buffer,0,!1),i.hash256(buffer)}hashForWitnessV1(e,t,n,o,a,f){if(c(s.tuple(s.UInt32,c.arrayOf(s.Buffer),c.arrayOf(s.Satoshi),s.UInt32),arguments),n.length!==this.ins.length||t.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const h=o===g.SIGHASH_DEFAULT?g.SIGHASH_ALL:o&g.SIGHASH_OUTPUT_MASK,d=(o&g.SIGHASH_INPUT_MASK)===g.SIGHASH_ANYONECANPAY,p=h===g.SIGHASH_NONE,y=h===g.SIGHASH_SINGLE;let b=l,m=l,w=l,v=l,_=l;if(!d){let e=r.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)})),b=i.sha256(e.end()),e=r.BufferWriter.withCapacity(8*this.ins.length),n.forEach((t=>e.writeUInt64(t))),m=i.sha256(e.end()),e=r.BufferWriter.withCapacity(t.map(u).reduce(((e,t)=>e+t))),t.forEach((t=>e.writeVarSlice(t))),w=i.sha256(e.end()),e=r.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach((t=>e.writeUInt32(t.sequence))),v=i.sha256(e.end())}if(p||y){if(y&&e<this.outs.length){const t=this.outs[e],n=r.BufferWriter.withCapacity(8+u(t.script));n.writeUInt64(t.value),n.writeVarSlice(t.script),_=i.sha256(n.end())}}else{const e=this.outs.map((e=>8+u(e.script))).reduce(((e,t)=>e+t)),t=r.BufferWriter.withCapacity(e);this.outs.forEach((e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)})),_=i.sha256(t.end())}const E=(a?2:0)+(f?1:0),S=174-(d?49:0)-(p?32:0)+(f?32:0)+(a?37:0),k=r.BufferWriter.withCapacity(S);if(k.writeUInt8(o),k.writeInt32(this.version),k.writeUInt32(this.locktime),k.writeSlice(b),k.writeSlice(m),k.writeSlice(w),k.writeSlice(v),p||y||k.writeSlice(_),k.writeUInt8(E),d){const r=this.ins[e];k.writeSlice(r.hash),k.writeUInt32(r.index),k.writeUInt64(n[e]),k.writeVarSlice(t[e]),k.writeUInt32(r.sequence)}else k.writeUInt32(e);if(f){const e=r.BufferWriter.withCapacity(u(f));e.writeVarSlice(f),k.writeSlice(i.sha256(e.end()))}return y&&k.writeSlice(_),a&&(k.writeSlice(a),k.writeUInt8(0),k.writeUInt32(4294967295)),i.taggedHash("TapSighash",Buffer.concat([Buffer.of(0),k.end()]))}hashForWitnessV0(e,t,n,o){c(s.tuple(s.UInt32,s.Buffer,s.Satoshi,s.UInt32),arguments);let a,l=Buffer.from([]),f=h,d=h,p=h;if(o&g.SIGHASH_ANYONECANPAY||(l=Buffer.allocUnsafe(36*this.ins.length),a=new r.BufferWriter(l,0),this.ins.forEach((e=>{a.writeSlice(e.hash),a.writeUInt32(e.index)})),d=i.hash256(l)),o&g.SIGHASH_ANYONECANPAY||(31&o)===g.SIGHASH_SINGLE||(31&o)===g.SIGHASH_NONE||(l=Buffer.allocUnsafe(4*this.ins.length),a=new r.BufferWriter(l,0),this.ins.forEach((e=>{a.writeUInt32(e.sequence)})),p=i.hash256(l)),(31&o)!==g.SIGHASH_SINGLE&&(31&o)!==g.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+u(t.script)),0);l=Buffer.allocUnsafe(e),a=new r.BufferWriter(l,0),this.outs.forEach((e=>{a.writeUInt64(e.value),a.writeVarSlice(e.script)})),f=i.hash256(l)}else if((31&o)===g.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];l=Buffer.allocUnsafe(8+u(t.script)),a=new r.BufferWriter(l,0),a.writeUInt64(t.value),a.writeVarSlice(t.script),f=i.hash256(l)}l=Buffer.allocUnsafe(156+u(t)),a=new r.BufferWriter(l,0);const y=this.ins[e];return a.writeInt32(this.version),a.writeSlice(d),a.writeSlice(p),a.writeSlice(y.hash),a.writeUInt32(y.index),a.writeVarSlice(t),a.writeUInt64(n),a.writeUInt32(y.sequence),a.writeSlice(f),a.writeUInt32(this.locktime),a.writeUInt32(o),i.hash256(l)}getHash(e){return e&&this.isCoinbase()?Buffer.alloc(32,0):i.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,r.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(buffer,e){return this.__toBuffer(buffer,e,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){c(s.tuple(s.Number,s.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){c(s.tuple(s.Number,[s.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(buffer,e,t=!1){buffer||(buffer=Buffer.allocUnsafe(this.byteLength(t)));const n=new r.BufferWriter(buffer,e||0);n.writeInt32(this.version);const i=t&&this.hasWitnesses();return i&&(n.writeUInt8(g.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(g.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach((e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)})),n.writeVarInt(this.outs.length),this.outs.forEach((e=>{void 0!==e.value?n.writeUInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)})),i&&this.ins.forEach((e=>{n.writeVector(e.witness)})),n.writeUInt32(this.locktime),void 0!==e?buffer.slice(e,n.offset):buffer}}t.Transaction=g,g.DEFAULT_SEQUENCE=4294967295,g.SIGHASH_DEFAULT=0,g.SIGHASH_ALL=1,g.SIGHASH_NONE=2,g.SIGHASH_SINGLE=3,g.SIGHASH_ANYONECANPAY=128,g.SIGHASH_OUTPUT_MASK=3,g.SIGHASH_INPUT_MASK=128,g.ADVANCED_TRANSACTION_MARKER=0,g.ADVANCED_TRANSACTION_FLAG=1},25735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Network=t.ECPoint=t.Satoshi=t.Signer=t.BIP32Path=t.UInt31=t.isPoint=t.typeforce=void 0;const r=n(48764);t.typeforce=n(2401);const i=r.Buffer.alloc(32,0),o=r.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");t.isPoint=function(e){if(!r.Buffer.isBuffer(e))return!1;if(e.length<33)return!1;const t=e[0],n=e.slice(1,33);if(0===n.compare(i))return!1;if(n.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;const a=e.slice(33);return 0!==a.compare(i)&&(!(a.compare(o)>=0)&&(4===t&&65===e.length))};const a=Math.pow(2,31)-1;function s(e){return t.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return t.typeforce.UInt32(e)&&e<=a},t.BIP32Path=s,s.toJSON=()=>"BIP32 derivation path",t.Signer=function(e){return(t.typeforce.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign};function c(e){return!(!e||!("output"in e))&&(!!r.Buffer.isBuffer(e.output)&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version))}t.Satoshi=function(e){return t.typeforce.UInt53(e)&&e<=21e14},t.ECPoint=t.typeforce.quacksLike("Point"),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8}),t.TAPLEAF_VERSION_MASK=254,t.isTapleaf=c,t.isTaptree=function e(n){return(0,t.Array)(n)?2===n.length&&n.every((t=>e(t))):c(n)},t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf},93169:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getScriptType=t.isConfidential=t.decodeType=t.getNetwork=t.toOutputScript=t.fromOutputScript=t.toConfidential=t.toBlech32=t.toBech32=t.toBase58Check=t.fromConfidential=t.fromBlech32=t.fromBech32=t.fromBase58Check=t.ScriptType=t.AddressType=void 0;const a=o(n(76272)),s=o(n(43564)),c=o(n(14627)),u=o(n(63145)),l=n(93726),f=n(27715),h=o(n(58334)),d=n(75961),{typeforce:p}=u,y=40,g=2,b=16,m=1,w=80;var v,_;function E(e){const t=h.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function S(e){let t,n;try{t=f.bech32.decode(e)}catch(e){}if(t){if(n=t.words[0],0!==n)throw new TypeError(e+" uses wrong encoding")}else if(t=f.bech32m.decode(e),n=t.words[0],0===n)throw new TypeError(e+" uses wrong encoding");const r=f.bech32.fromWords(t.words.slice(1));return{version:n,prefix:t.prefix,data:Buffer.from(r)}}function k(e){let t;try{t=l.Blech32Address.fromString(e,l.BLECH32)}catch{t=l.Blech32Address.fromString(e,l.BLECH32M)}const n=Buffer.from(t.blindingPublicKey,"hex"),r=Buffer.from(t.witness,"hex"),i=Buffer.concat([Buffer.from([t.witnessVersion?t.witnessVersion+w:t.witnessVersion,r.length]),r]);return{version:t.witnessVersion,pubkey:n,data:i}}function A(e){const t=N(e);return e.startsWith(t.blech32)?function(e,t){const n=k(e),r=I(n.data,t);return{blindingKey:n.pubkey,unconfidentialAddress:r,scriptPubKey:n.data}}(e,t):function(e,t){const n=h.decode(e),r=n.readUInt8(1);if(r!==t.pubKeyHash&&r!==t.scriptHash)throw new TypeError(e+"is not valid");if(n.length<55)throw new TypeError(e+" is too short");if(n.length>55)throw new TypeError(e+" is too long");const i=n.slice(2,35),o=n.slice(35,n.length),a=Buffer.of(r),s=Buffer.concat([a,o]),c=h.encode(s),u=T(c);return{blindingKey:i,unconfidentialAddress:c,scriptPubKey:u}}(e,t)}function O(e,t,n){const r=f.bech32.toWords(e);return r.unshift(t),0===t?f.bech32.encode(n,r):f.bech32m.encode(n,r)}function P(e,t,n,r){return l.Blech32Address.from(e.slice(2).toString("hex"),t.toString("hex"),n,r).address}function I(e,t){t=t||a.liquid;try{return s.p2pkh({output:e,network:t}).address}catch(e){}try{return s.p2sh({output:e,network:t}).address}catch(e){}try{return s.p2wpkh({output:e,network:t}).address}catch(e){}try{return s.p2wsh({output:e,network:t}).address}catch(e){}try{return function(e,t){const n=e.slice(2);if(n.length<g||n.length>y)throw new TypeError("Invalid program length for segwit address");const r=e[0]-w;if(r<m||r>b)throw new TypeError("Invalid version for segwit address");if(e[1]!==n.length)throw new TypeError("Invalid script for segwit address");return O(n,r,t.bech32)}(e,t)}catch(e){}throw new Error(c.toASM(e)+" has no matching Address")}function T(e,t){let n,r,i;t=t||N(e);try{n=E(e)}catch(e){}if(n){if(n.version===t.pubKeyHash)return s.p2pkh({hash:n.hash}).output;if(n.version===t.scriptHash)return s.p2sh({hash:n.hash}).output}else{try{r=S(e)}catch(e){}if(r){if(r.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===r.version){if(20===r.data.length)return s.p2wpkh({hash:r.data}).output;if(32===r.data.length)return s.p2wsh({hash:r.data}).output}else if(r.version>=m&&r.version<=b&&r.data.length>=g&&r.data.length<=y)return c.compile([r.version+w,r.data])}else{try{i=A(e)}catch(e){}if(i)return T(i.unconfidentialAddress,t)}}throw new Error(e+" has no matching Script")}function x(e,t){if(t.startsWith(e.blech32)||t.startsWith(e.bech32))return!0;try{const n=h.decode(t).readUInt8(0);if(n===e.confidentialPrefix||n===e.pubKeyHash||n===e.scriptHash)return!0}catch{return!1}return!1}function N(e){const t=[a.liquid,a.regtest,a.testnet];for(const n of t)if(x(n,e))return n;throw new Error(e+" has an invalid prefix")}function R(e,t){return new Error(`unknown address prefix (${e}), need ${t.pubKeyHash} or ${t.scriptHash}`)}function C(e,t){return function(e,t){return e.startsWith(t.bech32)}(e,t=t||N(e))?function(e){switch(S(e).data.length){case 20:return v.P2Wpkh;case 32:return v.P2Wsh;default:throw new Error("invalid program length")}}(e):function(e,t){return e.startsWith(t.blech32)}(e,t)?function(e){const t=k(e);switch(t.data.length-2){case 20:return v.ConfidentialP2Wpkh;case 32:return v.ConfidentialP2Wsh;default:throw new Error("invalid blech32 program length: "+(t.data.length-2))}}(e):function(e,t){const n=h.decode(e);if(n.readUInt8(0)===t.confidentialPrefix){if(20!==n.slice(35).length)throw new Error("decoded address is of unknown size");const e=n.readUInt8(1);switch(e){case t.pubKeyHash:return v.ConfidentialP2Pkh;case t.scriptHash:return v.ConfidentialP2Sh;default:throw R(e,t)}}const r=n.readUInt8(0);if(20!==n.slice(1).length)throw new Error("decoded address is of unknown size");switch(r){case t.pubKeyHash:return v.P2Pkh;case t.scriptHash:return v.P2Sh;default:throw R(r,t)}}(e,t)}!function(e){e[e.P2Pkh=0]="P2Pkh",e[e.P2Sh=1]="P2Sh",e[e.P2Wpkh=2]="P2Wpkh",e[e.P2Wsh=3]="P2Wsh",e[e.ConfidentialP2Pkh=4]="ConfidentialP2Pkh",e[e.ConfidentialP2Sh=5]="ConfidentialP2Sh",e[e.ConfidentialP2Wpkh=6]="ConfidentialP2Wpkh",e[e.ConfidentialP2Wsh=7]="ConfidentialP2Wsh"}(v=t.AddressType||(t.AddressType={})),function(e){e[e.P2Pkh=0]="P2Pkh",e[e.P2Sh=1]="P2Sh",e[e.P2Wpkh=2]="P2Wpkh",e[e.P2Wsh=3]="P2Wsh",e[e.P2Tr=4]="P2Tr"}(_=t.ScriptType||(t.ScriptType={})),t.fromBase58Check=E,t.fromBech32=S,t.fromBlech32=k,t.fromConfidential=A,t.toBase58Check=function(e,t){p(u.tuple(u.Hash160bit,u.UInt8),arguments);const n=Buffer.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),h.encode(n)},t.toBech32=O,t.toBlech32=P,t.toConfidential=function(e,t){const n=N(e);return e.startsWith(n.bech32)?function(e,t,n){const r=T(e,n),i=S(e).version;return P(r,t,n.blech32,i)}(e,t,n):function(e,t,n){const r=h.decode(e),i=r.readUInt8(0);if(21!==r.length||i!==n.pubKeyHash&&i!==n.scriptHash)throw new TypeError(e+"is not valid");if(t.length<33)throw new TypeError("Blinding key is too short");if(t.length>33)throw new TypeError("Blinding key is too long");const o=Buffer.alloc(2);o[0]=n.confidentialPrefix,o[1]=i;const a=Buffer.concat([o,t,Buffer.from(r.slice(1))]);return h.encode(a)}(e,t,n)},t.fromOutputScript=I,t.toOutputScript=T,t.getNetwork=N,t.decodeType=C,t.isConfidential=function(e){return C(e)>=4},t.getScriptType=function(e){switch(e[0]){case d.OPS.OP_0:return 20===e.slice(2).length?_.P2Wpkh:_.P2Wsh;case d.OPS.OP_HASH160:return _.P2Sh;case d.OPS.OP_DUP:return _.P2Pkh;case d.OPS.OP_1:return _.P2Tr;default:throw new Error("unknow script type")}}},51623:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.AssetHash=void 0;class r{constructor(e,t){this.prefix=e,this.value=t}static fromHex(e){const t=Buffer.from(e,"hex");return 32===t.length?this.fromBytes(t.reverse()):this.fromBytes(t)}static fromBytes(e){if(32===e.length)return new r(r.UNCONFIDENTIAL_PREFIX,e);const t=e.length>0?e[0]:0,n=e.length>1?e.slice(1):Buffer.alloc(0);if(t!==r.UNCONFIDENTIAL_PREFIX&&!r.CONFIDENTIAL_PREFIXES.includes(t))throw new Error("Invalid asset prefix");if(t===r.UNCONFIDENTIAL_PREFIX&&32!==n.length)throw new Error("Invalid unconfidential asset length");if(r.CONFIDENTIAL_PREFIXES.includes(t)&&32!==n.length)throw new Error("Invalid confidential asset length");return new r(t,n)}get hex(){return this.prefix===r.UNCONFIDENTIAL_PREFIX?(e=this.value,Buffer.from(e).reverse()).toString("hex"):Buffer.concat([Buffer.of(this.prefix),this.value]).toString("hex");var e}get bytes(){return Buffer.concat([Buffer.of(this.prefix),this.value])}get bytesWithoutPrefix(){return this.value}get isConfidential(){return this.prefix!==r.UNCONFIDENTIAL_PREFIX}}t.AssetHash=r,r.UNCONFIDENTIAL_PREFIX=1,r.CONFIDENTIAL_PREFIXES=[10,11]},3803:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.findScriptPath=t.toHashTree=t.tapLeafHash=t.BIP341Factory=t.LEAF_VERSION_TAPSCRIPT=void 0;const r=n(66438),i=n(45217),o=n(39831);function a(e){const n=e.version||t.LEAF_VERSION_TAPSCRIPT,i=Buffer.from(e.scriptHex,"hex"),a=o.BufferWriter.withCapacity(1+(0,o.varSliceSize)(i));return a.writeUInt8(n),a.writeVarSlice(i),(0,r.taggedHash)("TapLeaf/elements",a.end())}function s(e,t,n){const i=e.slice(1,33),o=Buffer.concat([i,t]),a=(0,r.taggedHash)("TapTweak/elements",o),s=n.xOnlyPointAddTweak(i,a);if(!s)throw new Error("Invalid tweaked key");return s}function c(e){return(t,n)=>{let r=Buffer.alloc(0);n&&(r=n.hash);const{xOnlyPubkey:i}=s(t,r,e);return Buffer.concat([Buffer.from([81,32]),i])}}function u(e){return(n,r,i,o)=>{const{parity:a}=s(n,i,e),c=Buffer.of(r.version||t.LEAF_VERSION_TAPSCRIPT+a),u=Buffer.concat([c,n.slice(1),...o]);return[Buffer.from(r.scriptHex,"hex"),u]}}t.LEAF_VERSION_TAPSCRIPT=196,t.BIP341Factory=function(e){return{taprootSignKey:h(e),taprootSignScriptStack:u(e),taprootOutputScript:c(e)}},t.tapLeafHash=a,t.toHashTree=function e(n,i=!1){switch(n.length){case 0:return{hash:Buffer.alloc(32)};case 1:const o=n[0];if(0!=(1&(o.version||t.LEAF_VERSION_TAPSCRIPT)))throw new Error("Invalid leaf version");return{hash:a(o),scriptHex:i?o.scriptHex:void 0};default:const s=Math.ceil(n.length/2),c=e(n.slice(0,s),i),u=e(n.slice(s),i);let l=c.hash,f=u.hash;return c.hash.compare(u.hash)>0&&([l,f]=[f,l]),{left:c,right:u,hash:(0,r.taggedHash)("TapBranch/elements",Buffer.concat([l,f]))}}},t.findScriptPath=function e(t,n){if(t.left){if(t.left.hash.equals(n))return t.right?[t.right.hash]:[];const r=e(t.left,n);if(r.length)return t.right?r.concat([t.right.hash]):r}if(t.right){if(t.right.hash.equals(n))return t.left?[t.left.hash]:[];const r=e(t.right,n);if(r.length)return t.left?r.concat([t.left.hash]):r}return[]};const l=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140","hex"),f=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex");function h(e){return(t,n)=>{const o=(0,i.ECPairFactory)(e).fromPrivateKey(n),a=2===o.publicKey[0]?o.privateKey:e.privateAdd(e.privateSub(l,n),f),s=(0,r.taggedHash)("TapTweak/elements",o.publicKey.slice(1,33)),c=e.privateAdd(a,s);if(null===c)throw new Error("Invalid Tweak");const u=e.signSchnorr(t,c);if(!e.verifySchnorr(t,(0,i.ECPairFactory)(e).fromPrivateKey(Buffer.from(c)).publicKey.slice(1),u))throw new Error("Invalid Signature");return Buffer.from(u)}}},52869:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=t.check=void 0,t.check=function(buffer){if(buffer.length<8)return!1;if(buffer.length>72)return!1;if(48!==buffer[0])return!1;if(buffer[1]!==buffer.length-2)return!1;if(2!==buffer[2])return!1;const e=buffer[3];if(0===e)return!1;if(5+e>=buffer.length)return!1;if(2!==buffer[4+e])return!1;const t=buffer[5+e];return 0!==t&&(6+e+t===buffer.length&&(!(128&buffer[4])&&(!(e>1&&0===buffer[4]&&!(128&buffer[5]))&&(!(128&buffer[e+6])&&!(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))))))},t.decode=function(buffer){if(buffer.length<8)throw new Error("DER sequence length is too short");if(buffer.length>72)throw new Error("DER sequence length is too long");if(48!==buffer[0])throw new Error("Expected DER sequence");if(buffer[1]!==buffer.length-2)throw new Error("DER sequence length is invalid");if(2!==buffer[2])throw new Error("Expected DER integer");const e=buffer[3];if(0===e)throw new Error("R length is zero");if(5+e>=buffer.length)throw new Error("R length is too long");if(2!==buffer[4+e])throw new Error("Expected DER integer (2)");const t=buffer[5+e];if(0===t)throw new Error("S length is zero");if(6+e+t!==buffer.length)throw new Error("S length is invalid");if(128&buffer[4])throw new Error("R value is negative");if(e>1&&0===buffer[4]&&!(128&buffer[5]))throw new Error("R value excessively padded");if(128&buffer[e+6])throw new Error("S value is negative");if(t>1&&0===buffer[e+6]&&!(128&buffer[e+7]))throw new Error("S value excessively padded");return{r:buffer.slice(4,4+e),s:buffer.slice(6+e)}},t.encode=function(e,t){const n=e.length,r=t.length;if(0===n)throw new Error("R length is zero");if(0===r)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(r>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(r>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");const i=Buffer.allocUnsafe(6+n+r);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+n]=2,i[5+n]=t.length,t.copy(i,6+n),i}},39831:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=t.BufferWriter=t.cloneBuffer=t.reverseBuffer=t.writeUInt64LE=t.readUInt64LE=t.varSliceSize=t.varuint=void 0;const a=o(n(63145)),{typeforce:s}=a,c=o(n(57795));t.varuint=c;function u(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function l(buffer,e){const t=buffer.readUInt32LE(e);let n=buffer.readUInt32LE(e+4);return n*=4294967296,u(n+t,0x10000000000000000),n+t}function f(buffer,e,t){return u(e,0x10000000000000000),buffer.writeInt32LE(-1&e,t),buffer.writeUInt32LE(Math.floor(e/4294967296),t+4),t+8}t.varSliceSize=function(e){const t=e.length;return c.encodingLength(t)+t},t.readUInt64LE=l,t.writeUInt64LE=f,t.reverseBuffer=function(buffer){if(buffer.length<1)return buffer;let e=buffer.length-1,t=0;for(let n=0;n<buffer.length/2;n++)t=buffer[n],buffer[n]=buffer[e],buffer[e]=t,e--;return buffer},t.cloneBuffer=function(buffer){const e=Buffer.allocUnsafe(buffer.length);return buffer.copy(e),e};class h{constructor(buffer,e=0){this.buffer=buffer,this.offset=e,s(a.tuple(a.Buffer,a.UInt32),[buffer,e])}static withCapacity(e){return new h(Buffer.alloc(e))}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=f(this.buffer,e,this.offset)}writeVarInt(e){c.encode(e,this.buffer,this.offset),this.offset+=c.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}writeConfidentialInFields(e){this.writeVarSlice(e.issuanceRangeProof||Buffer.alloc(0)),this.writeVarSlice(e.inflationRangeProof||Buffer.alloc(0)),this.writeVector(e.witness),this.writeVector(e.peginWitness||[])}writeConfidentialOutFields(e){this.writeVarSlice(e.surjectionProof||Buffer.alloc(0)),this.writeVarSlice(e.rangeProof||Buffer.alloc(0))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}t.BufferWriter=h;t.BufferReader=class{constructor(buffer,e=0){this.buffer=buffer,this.offset=e,s(a.tuple(a.Buffer,a.UInt32),[buffer,e])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=l(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=c.decode(this.buffer,this.offset);return this.offset+=c.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let n=0;n<e;n++)t.push(this.readVarSlice());return t}readConfidentialAsset(){const e=this.readUInt8(),t=this.buffer.slice(this.offset-1,this.offset);return 1===e||255===e||10===e||11===e?Buffer.concat([t,this.readSlice(32)]):t}readConfidentialNonce(){const e=this.readUInt8(),t=this.buffer.slice(this.offset-1,this.offset);return 1===e||255===e||2===e||3===e?Buffer.concat([t,this.readSlice(32)]):t}readConfidentialValue(){const e=this.readUInt8(),t=this.buffer.slice(this.offset-1,this.offset);return 1===e||255===e?Buffer.concat([t,this.readSlice(8)]):8===e||9===e?Buffer.concat([t,this.readSlice(32)]):t}readConfidentialInFields(){return{issuanceRangeProof:this.readVarSlice(),inflationRangeProof:this.readVarSlice(),witness:this.readVector(),peginWitness:this.readVector()}}readConfidentialOutFields(){return{surjectionProof:this.readVarSlice(),rangeProof:this.readVarSlice()}}readIssuance(){return{assetBlindingNonce:this.readSlice(32),assetEntropy:this.readSlice(32),assetAmount:this.readConfidentialValue(),tokenAmount:this.readConfidentialValue()}}}},56196:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.satoshiToConfidentialValue=t.confidentialValueToSatoshi=t.Confidential=void 0;const a=o(n(66438)),s=n(76235),c=n(52560);t.Confidential=class{constructor(e){this.zkp=e}nonceHash(e,t){return a.sha256(Buffer.from(this.zkp.ecdh(e,t)))}valueBlindingFactor(e,t,n,r,i,o){const a=e.concat(t),s=e.length,c=n.concat(r),u=i.concat(o);return Buffer.from(this.zkp.pedersen.blindGeneratorBlindSum(a,c,u,s))}valueCommitment(e,t,n){const{pedersen:r}=this.zkp;return Buffer.from(r.commitment(e,t,n))}assetCommitment(e,t){const{generator:n}=this.zkp;return Buffer.from(n.generateBlinded(e,t))}unblindOutputWithKey(e,t){const n=this.nonceHash(e.nonce,t);return this.unblindOutputWithNonce(e,n)}unblindOutputWithNonce(e,t){if(!e.rangeProof||0===e.rangeProof.length)throw new Error("Missing rangeproof to rewind");const n=this.zkp,{value:r,blinder:i,message:o}=n.rangeproof.rewind(e.rangeProof,e.value,e.asset,t,e.script);return{value:r,asset:Buffer.from(o.slice(0,32)),valueBlindingFactor:Buffer.from(i),assetBlindingFactor:Buffer.from(o.slice(32))}}rangeProofInfo(e){const{rangeproof:t}=this.zkp,{exp:n,mantissa:r,minValue:i,maxValue:o}=t.info(e);return{minValue:parseInt(i,10),maxValue:parseInt(o,10),ctExp:parseInt(n,10),ctBits:parseInt(r,10)}}rangeProofWithNonceHash(e,t,n,r,i,o,a,s,c,u,l,f){const h=this.nonceHash(e,t);return this.rangeProof(n,r,i,o,a,s,h,c,u,l,f)}rangeProofVerify(e,t,n,r){const{rangeproof:i}=this.zkp;return i.verify(e,t,n,r)}rangeProof(e,t,n,r,i,o,a,s,c="1",u="0",l="52"){const{rangeproof:f}=this.zkp,h=Buffer.concat([t,o]);return Buffer.from(f.sign(e,n,r,i,a,0===parseInt(e,10)?"0":c,u,l,h,s))}surjectionProof(e,t,n,r,i){const{generator:o,surjectionproof:a}=this.zkp,s=o.generateBlinded(e,t),c=n.map(((e,t)=>o.generateBlinded(e,r[t]))),u=a.initialize(n,e,100,i);return Buffer.from(a.generate(u.proof,c,s,u.inputIndex,r[u.inputIndex],t))}surjectionProofVerify(e,t,n,r,i){const{generator:o,surjectionproof:a}=this.zkp,s=e.map(((e,n)=>o.generateBlinded(e,t[n]))),c=o.generateBlinded(n,r);return a.verify(i,s,c)}blindValueProof(e,t,n,r,i){const{rangeproof:o}=this.zkp;return Buffer.from(o.sign(e,t,n,r,i,e,"-1"))}blindAssetProof(e,t,n){const{generator:r,surjectionproof:i}=this.zkp,o=r.generate(e),a=i.initialize([e],e,100,s.ZERO);return Buffer.from(i.generate(a.proof,[o],t,a.inputIndex,s.ZERO,n))}assetBlindProofVerify(e,t,n){const{generator:r,surjectionproof:i}=this.zkp,o=[r.generate(e)],a=t;return i.verify(n,o,a)}},t.confidentialValueToSatoshi=function(e){return c.ElementsValue.fromBytes(e).number},t.satoshiToConfidentialValue=function(e){return c.ElementsValue.fromNumber(e).bytes}},66438:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.taggedHash=t.hash256=t.hash160=t.sha256=t.sha1=t.ripemd160=void 0;const i=r(n(23482));function o(buffer){try{return(0,i.default)("rmd160").update(buffer).digest()}catch(e){return(0,i.default)("ripemd160").update(buffer).digest()}}function a(buffer){return(0,i.default)("sha256").update(buffer).digest()}t.ripemd160=o,t.sha1=function(buffer){return(0,i.default)("sha1").update(buffer).digest()},t.sha256=a,t.hash160=function(buffer){return o(a(buffer))},t.hash256=function(buffer){return a(a(buffer))};const s=Object.fromEntries(["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapLeaf/elements","TapBranch/elements","TapSighash","TapSighash/elements","TapTweak","TapTweak/elements","KeyAgg list","KeyAgg coefficient"].map((e=>{const t=a(Buffer.from(e,"utf-8"));return[e,Buffer.concat([t,t])]})));t.taggedHash=function(e,t){return a(Buffer.concat([s[e],t]))}},84434:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=t.opcodes=t.bip341=t.issuance=t.script=t.payments=t.networks=t.crypto=t.confidential=t.address=void 0;const s=o(n(93169));t.address=s;const c=o(n(66438));t.crypto=c;const u=o(n(76272));t.networks=u;const l=o(n(43564));t.payments=l;const f=o(n(14627));t.script=f;const h=o(n(63590));t.issuance=h;const d=o(n(3803));t.bip341=d;const p=o(n(56196));t.confidential=p;var y=n(75961);Object.defineProperty(t,"opcodes",{enumerable:!0,get:function(){return y.OPS}});var g=n(76235);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return g.Transaction}}),a(n(51623),t),a(n(52560),t),a(n(87409),t),a(n(74624),t)},63590:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.amountWithPrecisionToSatoshis=t.calculateReissuanceToken=t.calculateAsset=t.issuanceEntropyFromInput=t.generateEntropy=t.isReissuance=t.newIssuance=t.hashContract=t.validateIssuanceContract=t.hasTokenAmount=void 0;const a=n(39831),s=o(n(66438)),c=n(73694),u=n(52560);function l(e){return e.precision>=0&&e.precision<=8}function f(e){if(!l(e))throw new Error("Invalid asset contract");const t=Object.keys(e).sort().reduce(((t,n)=>({...t,[n]:e[n]})),{});return s.sha256(Buffer.from(JSON.stringify(t))).slice().reverse()}function h(e){return!e.assetBlindingNonce.equals(Buffer.alloc(32))}function d(e,t=Buffer.alloc(32)){if(32!==e.txHash.length)throw new Error("Invalid txHash length");const n=Buffer.allocUnsafe(36),r=new a.BufferWriter(n,0);r.writeSlice(e.txHash),r.writeInt32(e.vout);const i=s.hash256(r.buffer),o=Buffer.concat([i,t]);return(0,c.sha256Midstate)(o)}function p(e){return e?1:0}t.hasTokenAmount=function(e){return!!(e.tokenAmount&&e.tokenAmount.length>1)},t.validateIssuanceContract=l,t.hashContract=f,t.newIssuance=function(e,t,n){if(e<0)throw new Error("Invalid asset amount");if(t<0)throw new Error("Invalid token amount");const r=n?f(n):Buffer.alloc(32);return{assetAmount:0===e?Buffer.of(0):u.ElementsValue.fromNumber(e).bytes,tokenAmount:0===t?Buffer.of(0):u.ElementsValue.fromNumber(t).bytes,assetBlindingNonce:Buffer.alloc(32),assetEntropy:r}},t.isReissuance=h,t.generateEntropy=d,t.issuanceEntropyFromInput=function(e){if(!e.issuance)throw new Error("input does not contain issuance data");return h(e.issuance)?e.issuance.assetEntropy:d({txHash:e.hash,vout:e.index},e.issuance.assetEntropy)},t.calculateAsset=function(e){if(32!==e.length)throw new Error("Invalid entropy length");const t=Buffer.alloc(32);return(0,c.sha256Midstate)(Buffer.concat([e,t]))},t.calculateReissuanceToken=function(e,t=!1){if(32!==e.length)throw new Error("Invalid entropy length");return(0,c.sha256Midstate)(Buffer.concat([e,Buffer.of(p(t)+1),Buffer.alloc(31)]))},t.amountWithPrecisionToSatoshis=function(e,t=8){return Math.pow(10,t)*e}},76272:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.testnet=t.regtest=t.liquid=void 0;const r=e=>Buffer.from(e,"hex").reverse(),i=r("00902a6b70c2ca83b5d9c815d96a0e2f4202179316970d14ea1847dae5b1ca21"),o=r("a771da8e52ee6ad581ed1e9a99825e5b3b7992225534eaa2ae23244fe26ab1c1"),a=r("1466275836220db2944ca059a3a10ef6fd2ea684b0688d2c379296888a206003");t.liquid={messagePrefix:"Liquid Signed Message:\n",bech32:"ex",blech32:"lq",bip32:{public:76067358,private:76066276},pubKeyHash:57,scriptHash:39,wif:128,confidentialPrefix:12,assetHash:"6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d",genesisBlockHash:a,name:"liquid"},t.regtest={messagePrefix:"Liquid Signed Message:\n",bech32:"ert",blech32:"el",bip32:{public:70617039,private:70615956},pubKeyHash:235,scriptHash:75,wif:239,confidentialPrefix:4,assetHash:"5ac9f65c0efcc4775e0baec4ec03abdde22473cd3cf33c0419ca290e0751b225",genesisBlockHash:i,name:"regtest"},t.testnet={...t.regtest,bech32:"tex",blech32:"tlq",pubKeyHash:36,scriptHash:19,confidentialPrefix:23,assetHash:"144c654344aa716d6f3abcc1ca90e5641e4e2a7f633bc09fe3baf64585819a49",genesisBlockHash:o,name:"testnet"}},75961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_OPS=t.OPS=void 0;const n={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_SUBSTR_LAZY:195,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_DETERMINISTICRANDOM:192,OP_CHECKSIGFROMSTACK:193,OP_CHECKSIGFROMSTACKVERIFY:194,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP2:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_SHA256INITIALIZE:196,OP_SHA256UPDATE:197,OP_SHA256FINALIZE:198,OP_INSPECTINPUTOUTPOINT:199,OP_INSPECTINPUTASSET:200,OP_INSPECTINPUTVALUE:201,OP_INSPECTINPUTSCRIPTPUBKEY:202,OP_INSPECTINPUTSEQUENCE:203,OP_INSPECTINPUTISSUANCE:204,OP_PUSHCURRENTINPUTINDEX:205,OP_INSPECTOUTPUTASSET:206,OP_INSPECTOUTPUTVALUE:207,OP_INSPECTOUTPUTNONCE:208,OP_INSPECTOUTPUTSCRIPTPUBKEY:209,OP_INSPECTVERSION:210,OP_INSPECTLOCKTIME:211,OP_INSPECTNUMINPUTS:212,OP_INSPECTNUMOUTPUTS:213,OP_TXWEIGHT:214,OP_ADD64:215,OP_SUB64:216,OP_MUL64:217,OP_DIV64:218,OP_NEG64:219,OP_LESSTHAN64:220,OP_LESSTHANOREQUAL64:221,OP_GREATERTHAN64:222,OP_GREATERTHANOREQUAL64:223,OP_SCRIPTNUMTOLE64:224,OP_LE64TOSCRIPTNUM:225,OP_LE32TOLE64:226,OP_ECMULSCALARVERIFY:227,OP_TWEAKVERIFY:228,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};t.OPS=n;const r={};t.REVERSE_OPS=r;for(const e of Object.keys(n)){r[n[e]]=e}},12322:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2data=void 0;const a=n(76272),s=o(n(14627)),c=n(63145),u=o(n(35838)),l=s.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,c.typeforce)({network:c.typeforce.maybe(c.typeforce.Object),output:c.typeforce.maybe(c.typeforce.Buffer),data:c.typeforce.maybe(c.typeforce.arrayOf(c.typeforce.Buffer))},e);const n={name:"embed",network:e.network||a.liquid};if(u.prop(n,"output",(()=>{if(e.data)return s.compile([l.OP_RETURN].concat(e.data))})),u.prop(n,"data",(()=>{if(e.output)return s.decompile(e.output).slice(1)})),t.validate&&e.output){const t=s.decompile(e.output);if(t[0]!==l.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(c.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}},43564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=t.p2wpkh=t.p2sh=t.p2pkh=t.p2pk=t.p2ms=t.embed=void 0;const r=n(12322);Object.defineProperty(t,"embed",{enumerable:!0,get:function(){return r.p2data}});const i=n(31221);Object.defineProperty(t,"p2ms",{enumerable:!0,get:function(){return i.p2ms}});const o=n(21015);Object.defineProperty(t,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});const a=n(12411);Object.defineProperty(t,"p2pkh",{enumerable:!0,get:function(){return a.p2pkh}});const s=n(22050);Object.defineProperty(t,"p2sh",{enumerable:!0,get:function(){return s.p2sh}});const c=n(17956);Object.defineProperty(t,"p2wpkh",{enumerable:!0,get:function(){return c.p2wpkh}});const u=n(18820);Object.defineProperty(t,"p2wsh",{enumerable:!0,get:function(){return u.p2wsh}})},35838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.value=t.prop=void 0,t.prop=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}},31221:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2ms=void 0;const a=n(76272),s=o(n(14627)),c=n(63145),u=o(n(35838)),l=s.OPS,f=l.OP_RESERVED;function h(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function n(e){return s.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===l.OP_0)}t=Object.assign({validate:!0},t||{}),(0,c.typeforce)({network:c.typeforce.maybe(c.typeforce.Object),m:c.typeforce.maybe(c.typeforce.Number),n:c.typeforce.maybe(c.typeforce.Number),output:c.typeforce.maybe(c.typeforce.Buffer),pubkeys:c.typeforce.maybe(c.typeforce.arrayOf(c.isPoint)),signatures:c.typeforce.maybe(c.typeforce.arrayOf(n)),input:c.typeforce.maybe(c.typeforce.Buffer)},e);const r={network:e.network||a.liquid};let i=[],o=!1;function d(e){o||(o=!0,i=s.decompile(e),r.m=i[0]-f,r.n=i[i.length-2]-f,r.pubkeys=i.slice(1,-2))}if(u.prop(r,"output",(()=>{if(e.m&&r.n&&e.pubkeys)return s.compile([].concat(f+e.m,e.pubkeys,f+r.n,l.OP_CHECKMULTISIG))})),u.prop(r,"m",(()=>{if(r.output)return d(r.output),r.m})),u.prop(r,"n",(()=>{if(r.pubkeys)return r.pubkeys.length})),u.prop(r,"pubkeys",(()=>{if(e.output)return d(e.output),r.pubkeys})),u.prop(r,"signatures",(()=>{if(e.input)return s.decompile(e.input).slice(1)})),u.prop(r,"input",(()=>{if(e.signatures)return s.compile([l.OP_0].concat(e.signatures))})),u.prop(r,"witness",(()=>{if(r.input)return[]})),u.prop(r,"name",(()=>{if(r.m&&r.n)return`p2ms(${r.m} of ${r.n})`})),t.validate){if(e.output){if(d(e.output),!c.typeforce.Number(i[0]))throw new TypeError("Output is invalid");if(!c.typeforce.Number(i[i.length-2]))throw new TypeError("Output is invalid");if(i[i.length-1]!==l.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(r.m<=0||r.n>16||r.m>r.n||r.n!==i.length-3)throw new TypeError("Output is invalid");if(!r.pubkeys.every((e=>(0,c.isPoint)(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==r.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==r.n)throw new TypeError("n mismatch");if(e.pubkeys&&!h(e.pubkeys,r.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(r.n=e.pubkeys.length,r.n<r.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<r.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>r.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==l.OP_0)throw new TypeError("Input is invalid");if(0===r.signatures.length||!r.signatures.every(n))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!h(e.signatures,r.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(r,e)}},21015:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2pk=void 0;const a=n(76272),s=o(n(14627)),c=n(63145),u=o(n(35838)),l=s.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,c.typeforce)({network:c.typeforce.maybe(c.typeforce.Object),output:c.typeforce.maybe(c.typeforce.Buffer),pubkey:c.typeforce.maybe(c.isPoint),signature:c.typeforce.maybe(s.isCanonicalScriptSignature),input:c.typeforce.maybe(c.typeforce.Buffer)},e);const n=u.value((()=>s.decompile(e.input))),r={name:"p2pk",network:e.network||a.liquid};if(u.prop(r,"output",(()=>{if(e.pubkey)return s.compile([e.pubkey,l.OP_CHECKSIG])})),u.prop(r,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),u.prop(r,"signature",(()=>{if(e.input)return n()[0]})),u.prop(r,"input",(()=>{if(e.signature)return s.compile([e.signature])})),u.prop(r,"witness",(()=>{if(r.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==l.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,c.isPoint)(r.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(r.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(r.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!s.isCanonicalScriptSignature(r.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(r,e)}},12411:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.p2pkh=void 0;const s=o(n(66438)),c=n(76272),u=o(n(14627)),l=n(63145),f=o(n(35838)),h=a(n(58334)),d=u.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input||e.confidentialAddress))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,l.typeforce)({network:l.typeforce.maybe(l.typeforce.Object),address:l.typeforce.maybe(l.typeforce.String),hash:l.typeforce.maybe(l.typeforce.BufferN(20)),output:l.typeforce.maybe(l.typeforce.BufferN(25)),pubkey:l.typeforce.maybe(l.isPoint),signature:l.typeforce.maybe(u.isCanonicalScriptSignature),input:l.typeforce.maybe(l.typeforce.Buffer),blindkey:l.typeforce.maybe(l.isPoint),confidentialAddress:l.typeforce.maybe(l.typeforce.String)},e);const n=f.value((()=>{const t=h.default.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),r=f.value((()=>u.decompile(e.input))),i=f.value((()=>{const t=h.default.decode(e.confidentialAddress),n=t.slice(2,35),r=Buffer.concat([Buffer.from([t.readUInt8(1)]),t.slice(35)]);return{blindkey:n,unconfidentialAddress:h.default.encode(r)}})),o=e.network||c.liquid,a={name:"p2pkh",network:o};if(f.prop(a,"address",(()=>{if(!a.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(o.pubKeyHash,0),a.hash.copy(e,1),h.default.encode(e)})),f.prop(a,"hash",(()=>{if(e.output)return e.output.slice(3,23);if(e.address)return n().hash;if(e.pubkey||a.pubkey)return s.hash160(e.pubkey||a.pubkey);if(e.confidentialAddress){const e=i().unconfidentialAddress;return h.default.decode(e).slice(1)}})),f.prop(a,"output",(()=>{if(a.hash)return u.compile([d.OP_DUP,d.OP_HASH160,a.hash,d.OP_EQUALVERIFY,d.OP_CHECKSIG])})),f.prop(a,"pubkey",(()=>{if(e.input)return r()[1]})),f.prop(a,"signature",(()=>{if(e.input)return r()[0]})),f.prop(a,"input",(()=>{if(e.pubkey&&e.signature)return u.compile([e.signature,e.pubkey])})),f.prop(a,"witness",(()=>{if(a.input)return[]})),f.prop(a,"blindkey",(()=>e.confidentialAddress?i().blindkey:e.blindkey?e.blindkey:void 0)),f.prop(a,"confidentialAddress",(()=>{if(!a.address)return;if(!a.blindkey)return;const e=h.default.decode(a.address),t=Buffer.concat([Buffer.from([o.confidentialPrefix,e.readUInt8(0)]),a.blindkey,Buffer.from(e.slice(1))]);return h.default.encode(t)})),t.validate){let t=Buffer.from([]),a=Buffer.from([]);if(e.address){if(n().version!==o.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==d.OP_DUP||e.output[1]!==d.OP_HASH160||20!==e.output[2]||e.output[23]!==d.OP_EQUALVERIFY||e.output[24]!==d.OP_CHECKSIG)throw new TypeError("Output is invalid");const n=e.output.slice(3,23);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.pubkey){const n=s.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const n=r();if(2!==n.length)throw new TypeError("Input is invalid");if(!u.isCanonicalScriptSignature(n[0]))throw new TypeError("Input has invalid signature");if(!(0,l.isPoint)(n[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(n[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(n[1]))throw new TypeError("Pubkey mismatch");const i=s.hash160(n[1]);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch")}if(e.confidentialAddress){if(e.address&&e.address!==i().unconfidentialAddress)throw new TypeError("Address mismatch");if(a.length>0&&!a.equals(i().blindkey))throw new TypeError("Blindkey mismatch");a=i().blindkey}if(e.blindkey){if(!(0,l.isPoint)(e.blindkey))throw new TypeError("Blindkey is invalid");if(a.length>0&&!a.equals(e.blindkey))throw new TypeError("Blindkey mismatch");a=e.blindkey}}return Object.assign(a,e)}},22050:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2sh=void 0;const a=o(n(66438)),s=n(76272),c=o(n(14627)),u=n(63145),l=o(n(35838)),f=o(n(58334)),h=c.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input||e.confidentialAddress))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,u.typeforce)({network:u.typeforce.maybe(u.typeforce.Object),address:u.typeforce.maybe(u.typeforce.String),hash:u.typeforce.maybe(u.typeforce.BufferN(20)),output:u.typeforce.maybe(u.typeforce.BufferN(23)),redeem:u.typeforce.maybe({network:u.typeforce.maybe(u.typeforce.Object),output:u.typeforce.maybe(u.typeforce.Buffer),input:u.typeforce.maybe(u.typeforce.Buffer),witness:u.typeforce.maybe(u.typeforce.arrayOf(u.typeforce.Buffer))}),input:u.typeforce.maybe(u.typeforce.Buffer),witness:u.typeforce.maybe(u.typeforce.arrayOf(u.typeforce.Buffer)),blindkey:u.typeforce.maybe(u.isPoint),confidentialAddress:u.typeforce.maybe(u.typeforce.String)},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||s.liquid);const r={network:n},i=l.value((()=>{const t=f.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),o=l.value((()=>c.decompile(e.input))),d=l.value((()=>{const t=o();return{network:n,output:t[t.length-1],input:c.compile(t.slice(0,-1)),witness:e.witness||[]}})),p=l.value((()=>{const t=f.decode(e.confidentialAddress),n=t.slice(2,35),r=Buffer.concat([Buffer.from([t.readUInt8(1)]),t.slice(35)]);return{blindkey:n,unconfidentialAddress:f.encode(r)}}));if(l.prop(r,"address",(()=>{if(!r.hash)return;const e=Buffer.allocUnsafe(21);return e.writeUInt8(r.network.scriptHash,0),r.hash.copy(e,1),f.encode(e)})),l.prop(r,"hash",(()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(r.redeem&&r.redeem.output)return a.hash160(r.redeem.output);if(e.confidentialAddress){const e=p().unconfidentialAddress;return f.decode(e).slice(1)}})),l.prop(r,"output",(()=>{if(r.hash)return c.compile([h.OP_HASH160,r.hash,h.OP_EQUAL])})),l.prop(r,"redeem",(()=>{if(e.input)return d()})),l.prop(r,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return c.compile([].concat(c.decompile(e.redeem.input),e.redeem.output))})),l.prop(r,"witness",(()=>r.redeem&&r.redeem.witness?r.redeem.witness:r.input?[]:void 0)),l.prop(r,"name",(()=>{const e=["p2sh"];return void 0!==r.redeem&&void 0!==r.redeem.name&&e.push(r.redeem.name),e.join("-")})),l.prop(r,"blindkey",(()=>e.confidentialAddress?p().blindkey:e.blindkey?e.blindkey:void 0)),l.prop(r,"confidentialAddress",(()=>{if(!r.address)return;if(!r.blindkey)return;const e=f.decode(r.address),t=Buffer.concat([Buffer.from([n.confidentialPrefix,e.readUInt8(0)]),r.blindkey,Buffer.from(e.slice(1))]);return f.encode(t)})),t.validate){let t=Buffer.from([]),r=Buffer.from([]);if(e.address){if(i().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==i().hash.length)throw new TypeError("Invalid address");t=i().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==h.OP_HASH160||20!==e.output[1]||e.output[22]!==h.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const s=e=>{if(e.output){const n=c.decompile(e.output);if(!n||n.length<1)throw new TypeError("Redeem.output too short");const r=a.hash160(e.output);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const t=e.input.length>0,n=e.witness&&e.witness.length>0;if(!t&&!n)throw new TypeError("Empty input");if(t&&n)throw new TypeError("Input and witness provided");if(t){const t=c.decompile(e.input);if(!c.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=o();if(!e||e.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(d().output))throw new TypeError("Input is invalid");s(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){const t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}s(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.confidentialAddress){if(e.address&&e.address!==p().unconfidentialAddress)throw new TypeError("Address mismatch");if(r.length>0&&!r.equals(p().blindkey))throw new TypeError("Blindkey mismatch");r=p().blindkey}if(e.blindkey){if(!(0,u.isPoint)(e.blindkey))throw new TypeError("Blindkey is invalid");if(r.length>0&&!r.equals(e.blindkey))throw new TypeError("Blindkey mismatch");r=e.blindkey}}return Object.assign(r,e)}},17956:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2wpkh=void 0;const a=o(n(93169)),s=o(n(66438)),c=n(76272),u=o(n(14627)),l=n(63145),f=o(n(35838)),h=n(27715),d=u.OPS,p=Buffer.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness||e.confidentialAddress))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,l.typeforce)({address:l.typeforce.maybe(l.typeforce.String),hash:l.typeforce.maybe(l.typeforce.BufferN(20)),input:l.typeforce.maybe(l.typeforce.BufferN(0)),network:l.typeforce.maybe(l.typeforce.Object),output:l.typeforce.maybe(l.typeforce.BufferN(22)),pubkey:l.typeforce.maybe(l.isPoint),signature:l.typeforce.maybe(u.isCanonicalScriptSignature),witness:l.typeforce.maybe(l.typeforce.arrayOf(l.typeforce.Buffer))},e);const n=e.network||c.liquid,r=f.value((()=>{const t=h.bech32.decode(e.address),n=t.words.shift(),r=h.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),i=f.value((()=>{const t=a.fromBlech32(e.confidentialAddress);return{blindingKey:t.pubkey,unconfidentialAddress:a.toBech32(t.data.slice(2),t.version,n.bech32)}})),o={name:"p2wpkh",network:n};if(f.prop(o,"address",(()=>{if(!o.hash)return;const e=h.bech32.toWords(o.hash);return e.unshift(0),h.bech32.encode(n.bech32,e)})),f.prop(o,"hash",(()=>{if(e.output)return e.output.slice(2,22);if(e.address)return r().data;if(e.pubkey||o.pubkey)return s.hash160(e.pubkey||o.pubkey);if(e.confidentialAddress){const e=i().unconfidentialAddress;return a.fromBech32(e).data}})),f.prop(o,"output",(()=>{if(o.hash)return u.compile([d.OP_0,o.hash])})),f.prop(o,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),f.prop(o,"signature",(()=>{if(e.witness)return e.witness[0]})),f.prop(o,"input",(()=>{if(o.witness)return p})),f.prop(o,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),f.prop(o,"blindkey",(()=>e.confidentialAddress?i().blindingKey:e.blindkey?e.blindkey:void 0)),f.prop(o,"confidentialAddress",(()=>{if(!o.address)return;if(!o.blindkey)return;if(!o.network)return;const e=a.fromBech32(o.address),t=Buffer.concat([Buffer.from([e.version,e.data.length]),e.data]);return 0===e.version?a.toBlech32(t,o.blindkey,o.network.blech32,0):void 0})),t.validate){let t=Buffer.from([]),o=Buffer.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==d.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const n=s.hash160(e.pubkey);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");if(t=n,!(0,l.isPoint)(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!u.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,l.isPoint)(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const n=s.hash160(e.witness[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}if(e.confidentialAddress){if(e.address&&e.address!==i().unconfidentialAddress)throw new TypeError("Address mismatch");if(o.length>0&&!o.equals(i().blindingKey))throw new TypeError("Blindkey mismatch");o=i().blindingKey}if(e.blindkey){if(!(0,l.isPoint)(e.blindkey))throw new TypeError("Blindkey is invalid");if(o.length>0&&!o.equals(e.blindkey))throw new TypeError("Blindkey mismatch");o=e.blindkey}}return Object.assign(o,e)}},18820:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.p2wsh=void 0;const a=o(n(93169)),s=o(n(66438)),c=n(76272),u=o(n(14627)),l=n(63145),f=o(n(35838)),h=n(27715),d=u.OPS,p=Buffer.alloc(0);function y(e){return!(!Buffer.isBuffer(e)||65!==e.length||4!==e[0]||!(0,l.isPoint)(e))}t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness||e.confidentialAddress))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,l.typeforce)({network:l.typeforce.maybe(l.typeforce.Object),address:l.typeforce.maybe(l.typeforce.String),hash:l.typeforce.maybe(l.typeforce.BufferN(32)),output:l.typeforce.maybe(l.typeforce.BufferN(34)),redeem:l.typeforce.maybe({input:l.typeforce.maybe(l.typeforce.Buffer),network:l.typeforce.maybe(l.typeforce.Object),output:l.typeforce.maybe(l.typeforce.Buffer),witness:l.typeforce.maybe(l.typeforce.arrayOf(l.typeforce.Buffer))}),input:l.typeforce.maybe(l.typeforce.BufferN(0)),witness:l.typeforce.maybe(l.typeforce.arrayOf(l.typeforce.Buffer)),blindkey:l.typeforce.maybe(l.isPoint),confidentialAddress:l.typeforce.maybe(l.typeforce.String)},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||c.liquid);const r=f.value((()=>{const t=h.bech32.decode(e.address),n=t.words.shift(),r=h.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:Buffer.from(r)}})),i=f.value((()=>u.decompile(e.redeem.input))),o=f.value((()=>{const t=a.fromBlech32(e.confidentialAddress);return{blindingKey:t.pubkey,unconfidentialAddress:a.toBech32(t.data.slice(2),t.version,n.bech32)}})),g={network:n};if(f.prop(g,"address",(()=>{if(!g.hash)return;const e=h.bech32.toWords(g.hash);return e.unshift(0),h.bech32.encode(n.bech32,e)})),f.prop(g,"hash",(()=>{if(e.output)return e.output.slice(2);if(e.address)return r().data;if(g.redeem&&g.redeem.output)return s.sha256(g.redeem.output);if(e.confidentialAddress){const e=o().unconfidentialAddress;return a.fromBech32(e).data}})),f.prop(g,"output",(()=>{if(g.hash)return u.compile([d.OP_0,g.hash])})),f.prop(g,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:p,witness:e.witness.slice(0,-1)}})),f.prop(g,"input",(()=>{if(g.witness)return p})),f.prop(g,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=u.toStack(i());return g.redeem=Object.assign({witness:t},e.redeem),g.redeem.input=p,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),f.prop(g,"name",(()=>{const e=["p2wsh"];return void 0!==g.redeem&&void 0!==g.redeem.name&&e.push(g.redeem.name),e.join("-")})),f.prop(g,"blindkey",(()=>e.confidentialAddress?o().blindingKey:e.blindkey?e.blindkey:void 0)),f.prop(g,"confidentialAddress",(()=>{if(!g.address)return;if(!g.blindkey)return;const e=a.fromBech32(g.address),t=Buffer.concat([Buffer.from([e.version,e.data.length]),e.data]);return a.toBlech32(t,g.blindkey,g.network.blech32,0)})),t.validate){let t=Buffer.from([]),a=Buffer.from([]);if(e.address){if(r().prefix!==n.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==d.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===u.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const n=s.sha256(e.redeem.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem.input&&!u.isPushOnly(i()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,n)=>e.equals(t[n])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&i().some(y)||e.redeem.output&&(u.decompile(e.redeem.output)||[]).some(y))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(y)||(u.decompile(t)||[]).some(y))throw new TypeError("Witness contains uncompressed pubkey")}if(e.confidentialAddress){if(e.address&&e.address!==o().unconfidentialAddress)throw new TypeError("Address mismatch");if(a.length>0&&!a.equals(o().blindingKey))throw new TypeError("Blindkey mismatch");a=o().blindingKey}if(e.blindkey){if(!(0,l.isPoint)(e.blindkey))throw new TypeError("Blindkey is invalid");if(a.length>0&&!a.equals(e.blindkey))throw new TypeError("Blindkey mismatch");a=e.blindkey}}return Object.assign(g,e)}},63301:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBIP32Derivation=t.decodeBip32Derivation=t.hardenedKeyStart=void 0,t.hardenedKeyStart=2147483648,t.decodeBip32Derivation=function(e){if(e.length%4!=0||e.length/4-1<1)throw new Error("invalid BIP32 derivation format");const n=e.slice(0,4),r=[];for(let t=4;t<e.length;t+=4)r.push(e.slice(t,t+4).readUInt32LE());const i=function(e){const n=e.map((e=>function(e){if(e<t.hardenedKeyStart)return e.toString();return e-=t.hardenedKeyStart,e.toString()+"'"}(e)));return n.join("/")}(r);return{masterFingerprint:n,path:i}},t.encodeBIP32Derivation=function(e,n){const r=n.split("/"),i=Buffer.allocUnsafe(4+4*r.length);e.copy(i,0);let o=4;return r.forEach((e=>{const n="'"===e.slice(-1);let r=2147483647&parseInt(n?e.slice(0,-1):e,10);n&&(r+=t.hardenedKeyStart),i.writeUInt32LE(r,o),o+=4})),i}},62646:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.findTapLeafToFinalize=t.sortSignatures=t.serializeTaprootSignature=t.toXOnly=void 0;const r=n(3803),i=n(93592);t.toXOnly=e=>{switch(e.length){case 32:return e;case 33:return Buffer.from(e.slice(1));default:throw new Error("Invalid pubkey length")}},t.serializeTaprootSignature=function(e,t){const n=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,n])},t.sortSignatures=function(e,t){const n=(0,r.tapLeafHash)({scriptHex:t.script.toString("hex"),version:t.leafVersion});return(e.tapScriptSig||[]).filter((e=>e.leafHash.equals(n))).map((e=>function(e,t){return Object.assign({positionInScript:(0,i.pubkeyPositionInScript)(t.pubkey,e)},t)}(t.script,e))).sort(((e,t)=>t.positionInScript-e.positionInScript)).map((e=>e.signature))},t.findTapLeafToFinalize=function(e,t,n){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);const i=(e.tapLeafScript||[]).sort(((e,t)=>e.controlBlock.length-t.controlBlock.length)).find((t=>function(e,t,n){const i=(0,r.tapLeafHash)({scriptHex:e.script.toString("hex"),version:e.leafVersion});return(!n||n.equals(i))&&void 0!==t.find((e=>e.leafHash.equals(i)))}(t,e.tapScriptSig,n)));if(!i)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return i}},39776:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Blinder=void 0;const r=n(51623),i=n(63590),o=n(76235);t.Blinder=class{constructor(e,t,n,r){if(0===t.length)throw new Error("Missing owned inputs");e.sanityCheck(),this.pset=e,this.ownedInputs=t,this.blindingValidator=n,this.blindingGenerator=r}blindNonLast(e){this.blind(e,!1)}blindLast(e){this.blind(e,!0)}blind(e,t){if(this.pset.isFullyBlinded())return;const{issuanceBlindingArgs:n,outputBlindingArgs:r}=e;if(0===r.length)throw new Error("missing outputs blinding args");n&&n.length>0&&n.forEach((e=>this.validateIssuanceBlindingArgs(e)));const i=r.sort(((e,t)=>e.index-t.index));i.forEach(((e,n)=>{const r=t&&n===i.length-1;this.validateOutputBlindingArgs(e,r)})),this.validateBlindingData(t,r);const o=this.calculateInputScalar(n),a=this.calculateOutputScalar(i),s=this.pset.copy();n&&n.forEach((({index:e,issuanceValueCommitment:t,issuanceValueRangeProof:n,issuanceValueBlindProof:r,issuanceTokenCommitment:i,issuanceTokenRangeProof:o,issuanceTokenBlindProof:a})=>{s.inputs[e].issuanceValueCommitment=t,s.inputs[e].issuanceValueRangeproof=n,s.inputs[e].issuanceBlindValueProof=r,s.inputs[e].issuanceInflationKeysCommitment=i,s.inputs[e].issuanceInflationKeysRangeproof=o,s.inputs[e].issuanceBlindInflationKeysProof=a}));for(let e=0;e<i.length;e++){const{index:n,assetBlinder:r,assetCommitment:c,assetSurjectionProof:u,assetBlindProof:l,valueBlinder:f,nonceCommitment:h,nonce:d}=i[e];let{valueCommitment:p,valueRangeProof:y,valueBlindProof:g}=i[e];const b=s.outputs[n],m=b.value.toString(10);if(t&&e===i.length-1){const e=this.calculateLastValueBlinder(f,a,o);p=this.blindingGenerator.lastValueCommitment(m,c,e),y=this.blindingGenerator.lastValueRangeProof(m,b.asset,p,c,e,r,d,b.script||Buffer.alloc(0)),g=this.blindingGenerator.lastBlindValueProof(m,p,c,e)}s.outputs[n].valueCommitment=p,s.outputs[n].valueRangeproof=y,s.outputs[n].blindValueProof=g,s.outputs[n].assetCommitment=c,s.outputs[n].assetSurjectionProof=u,s.outputs[n].blindAssetProof=l,s.outputs[n].ecdhPubkey=h,s.outputs[n].blinderIndex=void 0}t?s.globals.scalars=void 0:(s.globals.scalars||(s.globals.scalars=[]),s.globals.scalars.push(a)),s.sanityCheck(),this.pset.globals=s.globals,this.pset.inputs=s.inputs,this.pset.outputs=s.outputs}calculateInputScalar(e){let t=Buffer.from(o.ZERO);for(const n of this.ownedInputs){t=this.blindingGenerator.computeAndAddToScalarOffset(t,n.value,n.assetBlindingFactor,n.valueBlindingFactor);const r=this.pset.inputs[n.index];if(r.hasIssuance()||r.hasReissuance()){const i=e&&e.find((({index:e})=>e===n.index));if(i){const e=i.issuanceValueBlinder&&i.issuanceValueBlinder.length>0?i.issuanceValueBlinder:o.ZERO;if(t=this.blindingGenerator.computeAndAddToScalarOffset(t,r.issuanceValue?r.issuanceValue.toString(10):"0",o.ZERO,e),r.issuanceInflationKeys>0){const e=i.issuanceTokenBlinder&&i.issuanceTokenBlinder.length>0?i.issuanceTokenBlinder:o.ZERO;t=this.blindingGenerator.computeAndAddToScalarOffset(t,r.issuanceInflationKeys.toString(10),o.ZERO,e)}}}}return t}calculateOutputScalar(e){let t=Buffer.from(o.ZERO);for(const n of e){const e=this.pset.outputs[n.index];t=this.blindingGenerator.computeAndAddToScalarOffset(t,e.value.toString(10),n.assetBlinder,n.valueBlinder)}return t}calculateLastValueBlinder(e,t,n){const r=this.blindingGenerator.subtractScalars(t,n);let i=this.blindingGenerator.subtractScalars(e,r);if(this.pset.globals.scalars)for(const e of this.pset.globals.scalars)i=this.blindingGenerator.subtractScalars(i,e);return i}validateIssuanceBlindingArgs(e){const{index:t,issuanceAsset:n,issuanceToken:r,issuanceValueCommitment:i,issuanceTokenCommitment:o,issuanceValueRangeProof:a,issuanceTokenRangeProof:s,issuanceValueBlindProof:c,issuanceTokenBlindProof:u,issuanceValueBlinder:l,issuanceTokenBlinder:f}=e;if(t<0||t>=this.pset.globals.inputCount)throw new Error("Input index out of range");const h=this.pset.inputs[t];if(!h.hasIssuance()&&!h.hasReissuance())throw new Error("Missing issuance on target input");if(0===n.length)throw new Error("Missing issuance asset");if(32!==n.length)throw new Error("Invalid issuance asset length");if(0===i.length)throw new Error("Missing issuance value commitment");if(33!==i.length)throw new Error("Invalid issuance value commitment length");if(0===l.length)throw new Error("Missing issuance value blinder");if(32!==l.length)throw new Error("Invalid issuance value blinder length");if(0===a.length)throw new Error("Missing issuance value range proof");if(0===c.length)throw new Error("Missing issuance blind value proof");if(h.issuanceInflationKeys>0){if(0===r.length)throw new Error("Missing issuance token");if(32!==r.length)throw new Error("Invalid issuance token length");if(0===o.length)throw new Error("Missing issuance token commitment");if(33!==o.length)throw new Error("Invalid issuance token commitment length");if(0===f.length)throw new Error("Missing issuance token blinder");if(32!==f.length)throw new Error("Invalid issuance token blinder length");if(0===s.length)throw new Error("Missing issuance token range proof");if(0===u.length)throw new Error("Missing issuance blind token value proof")}}async validateOutputBlindingArgs(e,t){const{index:n,nonce:r,nonceCommitment:i,valueCommitment:o,assetCommitment:a,valueRangeProof:s,assetSurjectionProof:c,valueBlindProof:u,assetBlindProof:l,valueBlinder:f,assetBlinder:h}=e;if(n<0||n>=this.pset.globals.outputCount)throw new Error("Output index out of range");const d=this.pset.outputs[n];if(!d.needsBlinding())throw new Error("Target output does not need blinding (does not have a blinding pubkey set)");if(!this.ownOutput(d.blinderIndex))throw new Error("Output is not owned by this blinder");if(0===r.length)throw new Error("Missing nonce");if(32!==r.length)throw new Error("Invalid nonce length");if(0===i.length)throw new Error("Missing nonce commitment");if(33!==i.length)throw new Error("Invalid nonce commitment length");if(0===f.length)throw new Error("Missing value blinder");if(32!==f.length)throw new Error("Invalid value blinder length");if(0===h.length)throw new Error("Missing asset blinder");if(32!==h.length)throw new Error("Invalid asset blinder length");if(0===a.length)throw new Error("Missing asset commitment");if(33!==a.length)throw new Error("Invalid asset commitment length");if(0===c.length)throw new Error("Missing asset surjection proof");if(0===l.length)throw new Error("Missing blind asset proof");if(!t){if(0===o.length)throw new Error("Missing value commitment");if(33!==o.length)throw new Error("Invalid value commitment length");if(0===s.length)throw new Error("Missing value range proof");if(0===u.length)throw new Error("Missing blind value proof")}}ownOutput(e){return void 0!==this.ownedInputs.find((({index:t})=>t===e))}validateBlindingData(e,t){const n=this.pset.inputs.map(((e,t)=>{const n=this.ownedInputs.find((({index:e})=>e===t));return n?{asset:n.asset,assetBlinder:n.assetBlindingFactor}:{asset:r.AssetHash.fromBytes(e.getUtxo().asset).bytesWithoutPrefix,assetBlinder:o.ZERO}}));for(const e of this.pset.inputs)if((e.hasIssuance()||e.hasReissuance())&&(n.push({asset:e.getIssuanceAssetHash(),assetBlinder:o.ZERO}),e.issuanceInflationKeys>0)){const t=e.getIssuanceEntropy(),r=(0,i.calculateReissuanceToken)(t,e.blindedIssuance??!0);n.push({asset:r,assetBlinder:o.ZERO})}const a=n.map((e=>e.asset)),s=n.map((e=>e.assetBlinder));for(let n=0;n<t.length;n++){const{index:r,assetBlinder:i,assetCommitment:o,assetSurjectionProof:c,assetBlindProof:u,valueCommitment:l,valueRangeProof:f,valueBlindProof:h}=t[n],d=this.pset.outputs[r],p=e&&n===t.length-1;if(!this.blindingValidator.verifyAssetSurjectionProof(a,s,d.asset,i,c))throw new Error("Invalid output asset surjection proof");if(!this.blindingValidator.verifyBlindAssetProof(d.asset,o,u))throw new Error("Invalid output asset blind proof");if(!p){if(!this.blindingValidator.verifyValueRangeProof(f,l,o,d.script))throw new Error("Invalid output value range proof");if(!this.blindingValidator.verifyBlindValueProof(h,l,o))throw new Error("Invalid output value blind proof")}}}}},84577:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Creator=t.CreatorOutput=t.CreatorInput=void 0;const i=n(50394),o=n(40116),a=n(57868),s=n(8938),c=n(39831),u=n(51623),l=n(76235),f=r(n(53288));t.CreatorInput=class{constructor(e,t,n,r,i){this.txid=e,this.txIndex=t,this.sequence=n||l.Transaction.DEFAULT_SEQUENCE,this.heightLocktime=r||0,this.timeLocktime=i||0}validate(){if(0===this.txid.length)throw new Error("missing prevout txid");if(64!==this.txid.length)throw new Error("invalid prevout txid length");if(this.txIndex<0)throw new Error("missing prevout tx index")}toPartialInput(){const e=(0,c.reverseBuffer)(Buffer.from(this.txid,"hex")),t=new a.PsetInput(e,this.txIndex,this.sequence);return t.requiredHeightLocktime=this.heightLocktime,t.requiredTimeLocktime=this.timeLocktime,t}};t.CreatorOutput=class{constructor(e,t,n,r,i){this.asset=e,this.amount=t,this.script=n,this.blindingPublicKey=r,this.blinderIndex=i}validate(){if(0===this.asset.length)throw new Error("missing asset");if(32!==Buffer.from(this.asset,"hex").length)throw new Error("invalid asset length");if(this.blindingPublicKey&&(void 0===this.blinderIndex||this.blinderIndex<0))throw new Error("missing blinder index for confidential output")}toPartialOutput(){const e=u.AssetHash.fromHex(this.asset),t=new s.PsetOutput(this.amount,e.bytesWithoutPrefix,this.script||Buffer.of());return this.blindingPublicKey&&(t.blinderIndex=this.blinderIndex,t.blindingPubkey=this.blindingPublicKey),t}};t.Creator=class{static newPset(e){const t=e?e.locktime:void 0,n=new f.default(0);n.set(0),n.set(1);const r=new i.PsetGlobal(2,0,0,2,t);r.txModifiable=n,r.xpubs=[],r.scalars=[],r.proprietaryData=[],r.unknowns=[];const a=new o.Pset(r);return e&&e.inputs&&e.inputs.forEach((e=>{e.validate(),a.addInput(e.toPartialInput())})),e&&e.outputs&&e.outputs.forEach((e=>{e.validate(),a.addOutput(e.toPartialOutput())})),a}}},1497:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Extractor=void 0;const r=n(51623),i=n(76235),o=n(52560),a=n(93592);t.Extractor=class{static extract(e){if(e.sanityCheck(),!e.isComplete())throw new Error("Pset must be completed to extract final raw transaction");const t=new i.Transaction;return t.version=e.globals.txVersion,t.locktime=e.locktime(),e.inputs.forEach((e=>{t.addInput(e.previousTxid,e.previousTxIndex,e.sequence);const n=t.ins.length-1;if(e.hasIssuance()||e.hasReissuance()){const r=e.issuanceValueCommitment&&e.issuanceValueCommitment.length>0?e.issuanceValueCommitment:e.issuanceValue>0?o.ElementsValue.fromNumber(e.issuanceValue).bytes:Buffer.of(0),i=e.issuanceInflationKeysCommitment&&e.issuanceInflationKeysCommitment.length>0?e.issuanceInflationKeysCommitment:e.issuanceInflationKeys>0?o.ElementsValue.fromNumber(e.issuanceInflationKeys).bytes:Buffer.of(0);t.ins[n].issuance={assetAmount:r,tokenAmount:i,assetEntropy:e.issuanceAssetEntropy,assetBlindingNonce:e.issuanceBlindingNonce},e.issuanceValueRangeproof&&e.issuanceValueRangeproof.length>0&&(t.ins[n].issuanceRangeProof=e.issuanceValueRangeproof),e.issuanceInflationKeysRangeproof&&e.issuanceInflationKeysRangeproof.length>0&&(t.ins[n].inflationRangeProof=e.issuanceInflationKeysRangeproof)}t.ins[n].isPegin=e.peginWitness&&e.peginWitness.length>0,t.ins[n].isPegin&&(t.ins[n].peginWitness=e.peginWitness),e.finalScriptSig&&e.finalScriptSig.length>0&&(t.ins[n].script=e.finalScriptSig),e.finalScriptWitness&&e.finalScriptWitness.length>0&&(t.ins[n].witness=(0,a.scriptWitnessToWitnessStack)(e.finalScriptWitness))})),e.outputs.forEach((e=>{const n=e.script||Buffer.from([]),i=e.valueCommitment&&e.valueCommitment.length>0?e.valueCommitment:o.ElementsValue.fromNumber(e.value).bytes,a=e.assetCommitment&&e.assetCommitment.length>0?e.assetCommitment:r.AssetHash.fromBytes(e.asset).bytes,s=e.ecdhPubkey&&e.ecdhPubkey.length>0?e.ecdhPubkey:Buffer.of(0);t.addOutput(n,i,a,s,e.valueRangeproof,e.assetSurjectionProof)})),t}}},47199:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputProprietaryTypes=t.OutputTypes=t.InputProprietaryTypes=t.InputTypes=t.GLOBAL_PROPRIETARY_TYPE_NAMES=t.GlobalProprietaryTypes=t.GlobalTypes=t.separator=void 0,t.separator=0,function(e){e[e.XPUB=1]="XPUB",e[e.TX_VERSION=2]="TX_VERSION",e[e.FALLBACK_LOCKTIME=3]="FALLBACK_LOCKTIME",e[e.INPUT_COUNT=4]="INPUT_COUNT",e[e.OUTPUT_COUNT=5]="OUTPUT_COUNT",e[e.TX_MODIFIABLE=6]="TX_MODIFIABLE",e[e.SIGHASH_SINGLE_INPUTS=7]="SIGHASH_SINGLE_INPUTS",e[e.VERSION=251]="VERSION",e[e.PROPRIETARY=252]="PROPRIETARY"}(t.GlobalTypes||(t.GlobalTypes={})),function(e){e[e.SCALAR=0]="SCALAR",e[e.TX_MODIFIABLE=1]="TX_MODIFIABLE"}(t.GlobalProprietaryTypes||(t.GlobalProprietaryTypes={})),t.GLOBAL_PROPRIETARY_TYPE_NAMES=["scalar","txModifiable"],function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.RIPEMD_160=10]="RIPEMD_160",e[e.SHA_256=11]="SHA_256",e[e.HASH_160=12]="HASH_160",e[e.HASH_256=13]="HASH_256",e[e.PREVIOUS_TXID=14]="PREVIOUS_TXID",e[e.PREVIOUS_TXINDEX=15]="PREVIOUS_TXINDEX",e[e.SEQUENCE=16]="SEQUENCE",e[e.REQUIRED_TIME_LOCKTIME=17]="REQUIRED_TIME_LOCKTIME",e[e.REQUIRED_HEIGHT_LOCKTIME=18]="REQUIRED_HEIGHT_LOCKTIME",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT",e[e.PROPRIETARY=252]="PROPRIETARY"}(t.InputTypes||(t.InputTypes={})),function(e){e[e.ISSUANCE_VALUE=0]="ISSUANCE_VALUE",e[e.ISSUANCE_VALUE_COMMITMENT=1]="ISSUANCE_VALUE_COMMITMENT",e[e.ISSUANCE_VALUE_RANGEPROOF=2]="ISSUANCE_VALUE_RANGEPROOF",e[e.ISSUANCE_INFLATION_KEYS_RANGEPROOF=3]="ISSUANCE_INFLATION_KEYS_RANGEPROOF",e[e.PEGIN_TX=4]="PEGIN_TX",e[e.PEGIN_TXOUT_PROOF=5]="PEGIN_TXOUT_PROOF",e[e.PEGIN_GENESIS_HASH=6]="PEGIN_GENESIS_HASH",e[e.PEGIN_CLAIM_SCRIPT=7]="PEGIN_CLAIM_SCRIPT",e[e.PEGIN_VALUE=8]="PEGIN_VALUE",e[e.PEGIN_WITNESS=9]="PEGIN_WITNESS",e[e.ISSUANCE_INFLATION_KEYS=10]="ISSUANCE_INFLATION_KEYS",e[e.ISSUANCE_INFLATION_KEYS_COMMITMENT=11]="ISSUANCE_INFLATION_KEYS_COMMITMENT",e[e.ISSUANCE_BLINDING_NONCE=12]="ISSUANCE_BLINDING_NONCE",e[e.ISSUANCE_ASSET_ENTROPY=13]="ISSUANCE_ASSET_ENTROPY",e[e.UTXO_RANGEPROOF=14]="UTXO_RANGEPROOF",e[e.ISSUANCE_BLIND_VALUE_PROOF=15]="ISSUANCE_BLIND_VALUE_PROOF",e[e.ISSUANCE_BLIND_INFLATION_KEYS_PROOF=16]="ISSUANCE_BLIND_INFLATION_KEYS_PROOF",e[e.EXPLICIT_VALUE=17]="EXPLICIT_VALUE",e[e.VALUE_PROOF=18]="VALUE_PROOF",e[e.EXPLICIT_ASSET=19]="EXPLICIT_ASSET",e[e.ASSET_PROOF=20]="ASSET_PROOF",e[e.BLINDED_ISSUANCE=21]="BLINDED_ISSUANCE"}(t.InputProprietaryTypes||(t.InputProprietaryTypes={})),function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.AMOUNT=3]="AMOUNT",e[e.SCRIPT=4]="SCRIPT",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION",e[e.PROPRIETARY=252]="PROPRIETARY"}(t.OutputTypes||(t.OutputTypes={})),function(e){e[e.VALUE_COMMITMENT=1]="VALUE_COMMITMENT",e[e.ASSET=2]="ASSET",e[e.ASSET_COMMITMENT=3]="ASSET_COMMITMENT",e[e.VALUE_RANGEPROOF=4]="VALUE_RANGEPROOF",e[e.ASSET_SURJECTION_PROOF=5]="ASSET_SURJECTION_PROOF",e[e.BLINDING_PUBKEY=6]="BLINDING_PUBKEY",e[e.ECDH_PUBKEY=7]="ECDH_PUBKEY",e[e.BLINDER_INDEX=8]="BLINDER_INDEX",e[e.BLIND_VALUE_PROOF=9]="BLIND_VALUE_PROOF",e[e.BLIND_ASSET_PROOF=10]="BLIND_ASSET_PROOF"}(t.OutputProprietaryTypes||(t.OutputProprietaryTypes={}))},19587:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Finalizer=void 0;const r=n(84434),i=n(62646),o=n(93592);t.Finalizer=class{constructor(e){e.sanityCheck(),this.pset=e}finalize(){const e=this.pset.copy();e.inputs.forEach(((e,t)=>{this.finalizeInput(t)})),e.sanityCheck(),this.pset.globals=e.globals,this.pset.inputs=e.inputs,this.pset.outputs=e.outputs}finalizeInput(e,t=a){if(e<0||e>=this.pset.globals.inputCount)throw new Error("Input index out of range");const n=this.pset.inputs[e];if(n.isFinalized())return this;if(void 0===n.sighashType)throw new Error("Missing input sighash type");if(!n.getUtxo())throw new Error("Missing input (non-)witness utxo");const r=this.pset.copy(),{finalScriptSig:i,finalScriptWitness:o}=t(e,r);if(i&&(r.inputs[e].finalScriptSig=i),o&&(r.inputs[e].finalScriptWitness=o),!i&&!o&&!n.finalScriptWitness)throw new Error(`Unknown error finalizing input #${e}`);return r.sanityCheck(),this.pset.globals=r.globals,this.pset.inputs=r.inputs,this.pset.outputs=r.outputs,this}};const a=(e,t)=>{const n=t.inputs[e];if(!(n.partialSigs&&0!==n.partialSigs.length||n.tapKeySig&&0!==n.tapKeySig.length||n.tapScriptSig&&0!==n.tapScriptSig.length))throw new Error(`Missing partial signatures for input at index ${e}. If the script does not have a CHECKSIG operation you must pass a custom finalizer function`);return n.isTaproot()?c(e,t):s(e,t)},s=(e,t)=>{const n=t.inputs[e],{script:i,isP2SH:a,isP2WSH:s,isSegwit:c}=function(e){const t={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};return t.isP2SH=!!e.redeemScript,t.isP2WSH=!!e.witnessScript,e.witnessScript?t.script=e.witnessScript:e.redeemScript?t.script=e.redeemScript:e.nonWitnessUtxo?t.script=e.nonWitnessUtxo.outs[e.previousTxIndex].script:e.witnessUtxo&&(t.script=e.witnessUtxo.script),(e.witnessScript||(0,o.isP2WPKH)(t.script))&&(t.isSegwit=!0),t}(n);if(!i)throw new Error(`No script found for input #${e}`);return function(e,t,n,i,a,s){const c=(0,o.classifyScript)(n);if(!function(e,t,n){switch(n){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return(0,o.hasSigs)(1,e.partialSigs);case"multisig":const n=r.payments.p2ms({output:t});return(0,o.hasSigs)(n.m,e.partialSigs,n.pubkeys);default:return!1}}(t,n,c))throw new Error(`Can not finalize input #${e}`);return function(e,t,n,i,a,s){if("nonstandard"===t)return{finalScriptSig:void 0,finalScriptWitness:void 0};let c,u;const l=(0,o.getPayment)(e,t,n),f=s?r.payments.p2wsh({redeem:l}):null,h=a?r.payments.p2sh({redeem:f||l}):null;i?(u=f?(0,o.witnessStackToScriptWitness)(f.witness):(0,o.witnessStackToScriptWitness)(l.witness),h&&(c=h.input)):c=h?h.input:l.input;return{finalScriptSig:c,finalScriptWitness:u}}(n,c,t.partialSigs,i,a,s)}(e,n,i,c,a,s)},c=(e,t)=>{const n=t.inputs[e];if(!n.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);return n.tapKeySig?{finalScriptWitness:(0,o.witnessStackToScriptWitness)([n.tapKeySig])}:function(e,t,n){const r=(0,i.findTapLeafToFinalize)(t,e,n);try{const e=(0,i.sortSignatures)(t,r).concat(r.script).concat(r.controlBlock);return{finalScriptWitness:(0,o.witnessStackToScriptWitness)(e)}}catch(t){throw new Error(`Can not finalize taproot input #${e}: ${t}`)}}(e,n)}},50394:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PsetGlobal=t.GlobalDuplicateFieldError=void 0;const i=n(47199),o=n(6516),a=n(79371),s=r(n(57795)),c=r(n(53288)),u=n(39831),l=n(40116),f=n(63301);class h extends Error{constructor(e){e&&(e="Duplicated global "+e),super(e)}}t.GlobalDuplicateFieldError=h;class d{constructor(e,t,n,r,i){this.txVersion=e||0,this.inputCount=t||0,this.outputCount=n||0,this.version=r||0,this.fallbackLocktime=i}static fromBuffer(e){let t;const n=new d;for(;;){try{t=o.KeyPair.fromBuffer(e)}catch(e){if(e instanceof Error&&e===o.ErrEmptyKey)return n.sanityCheck(),n;throw e}switch(t.key.keyType){case i.GlobalTypes.XPUB:if(79!==t.key.keyData.length&&![2,3].includes(t.key.keyData[46]))throw new Error("Invalid xpub length");const e=t.key.keyData.slice(1),{masterFingerprint:r,path:o}=(0,f.decodeBip32Derivation)(t.value);n.xpubs||(n.xpubs=[]),n.xpubs.push({extendedKey:e,masterFingerprint:r,derivationPath:o});break;case i.GlobalTypes.TX_VERSION:if(n.txVersion>0)throw new h("tx version");if(4!==t.value.length)throw new Error("Invalid global tx version length");n.txVersion=t.value.readUInt32LE();break;case i.GlobalTypes.FALLBACK_LOCKTIME:if(n.fallbackLocktime>0)throw new h("fallback locktime");if(4!==t.value.length)throw new Error("Invalid global fallback locktime length");n.fallbackLocktime=t.value.readUInt32LE();break;case i.GlobalTypes.INPUT_COUNT:if(n.inputCount>0)throw new h("input count");n.inputCount=s.default.decode(t.value);break;case i.GlobalTypes.OUTPUT_COUNT:if(n.outputCount>0)throw new h("output count");n.outputCount=s.default.decode(t.value);break;case i.GlobalTypes.TX_MODIFIABLE:if(n.txModifiable)throw new h("tx modifiable");if(1!==t.value.length)throw new Error("Invalid global tx modifiable length");n.txModifiable=new c.default(t.value[0]);break;case i.GlobalTypes.VERSION:if(n.version>0)throw new h("version");if(4!==t.value.length)throw new Error("Invalid global version length");n.version=t.value.readUInt32LE();break;case i.GlobalTypes.PROPRIETARY:const u=a.ProprietaryData.fromKeyPair(t);if(0===l.magicPrefix.compare(u.identifier))switch(u.subType){case i.GlobalProprietaryTypes.SCALAR:if(32!==u.keyData.length)throw new Error("Invalid global scalar length");n.scalars||(n.scalars=[]),n.scalars.push(u.keyData);break;case i.GlobalProprietaryTypes.TX_MODIFIABLE:if(n.modifiable)throw new h("pset modifiable");if(1!==t.value.length)throw new Error("Invalid global pset modifiable length");n.modifiable=new c.default(t.value[0]);break;default:n.proprietaryData||(n.proprietaryData=[]),n.proprietaryData.push(u)}break;default:n.unknowns||(n.unknowns=[]),n.unknowns.push(t)}}}sanityCheck(){if(this.txVersion<2)throw new Error("Global tx version must be at least 2");if(2!==this.txVersion)throw new Error("Global version must be exactly 2");if(this.txModifiable&&parseInt(this.txModifiable.toString(),2)>7)throw new Error("Invalid global tx modifiable value");if(this.modifiable&&0!==parseInt(this.modifiable.toString(),2))throw new Error("Invalid global pset modifiable value");if(this.xpubs&&this.xpubs.some(((e,t)=>{if(t===this.xpubs.length-1)return!1;return this.xpubs.slice(t+1).some((t=>0===e.extendedKey.compare(t.extendedKey)))})))throw new h("xpub");if(this.scalars&&this.scalars.some(((e,t)=>{if(t===this.scalars.length-1)return!1;return this.scalars.slice(t+1).some((t=>0===e.compare(t)))})))throw new h("scalar");return this}toBuffer(){const e=this.getKeyPairs().map((e=>e.toBuffer()));let t=0;e.forEach((e=>{t+=e.length}));const n=u.BufferWriter.withCapacity(t);return e.forEach((e=>n.writeSlice(e))),n.buffer}getKeyPairs(){const e=[];this.xpubs&&this.xpubs.length>0&&this.xpubs.forEach((({extendedKey:t,masterFingerprint:n,derivationPath:r})=>{const a=Buffer.concat([Buffer.of(t.length),t]),s=new o.Key(i.GlobalTypes.XPUB,a),c=(0,f.encodeBIP32Derivation)(n,r);e.push(new o.KeyPair(s,c))}));const t=Buffer.allocUnsafe(4);t.writeUInt32LE(this.txVersion,0);const n=new o.Key(i.GlobalTypes.TX_VERSION);if(e.push(new o.KeyPair(n,t)),void 0!==this.fallbackLocktime){const t=Buffer.allocUnsafe(4);t.writeUInt32LE(this.fallbackLocktime,0);const n=new o.Key(i.GlobalTypes.FALLBACK_LOCKTIME);e.push(new o.KeyPair(n,t))}const r=Buffer.allocUnsafe(s.default.encodingLength(this.inputCount));s.default.encode(this.inputCount,r,0);const c=new o.Key(i.GlobalTypes.INPUT_COUNT);e.push(new o.KeyPair(c,r));const u=Buffer.allocUnsafe(s.default.encodingLength(this.outputCount));s.default.encode(this.outputCount,u,0);const l=new o.Key(i.GlobalTypes.OUTPUT_COUNT);if(e.push(new o.KeyPair(l,u)),this.txModifiable){const t=Buffer.allocUnsafe(1);t.writeUInt8(Number(this.txModifiable.toString(10)),0);const n=new o.Key(i.GlobalTypes.TX_MODIFIABLE);e.push(new o.KeyPair(n,t))}if(this.scalars&&this.scalars.length>0&&this.scalars.forEach((t=>{const n=a.ProprietaryData.proprietaryKey(i.GlobalProprietaryTypes.SCALAR,t),r=new o.Key(i.GlobalTypes.PROPRIETARY,n);e.push(new o.KeyPair(r))})),this.modifiable&&parseInt(this.modifiable.toString(),2)>0){const t=Buffer.allocUnsafe(1);t.writeUInt8(Number(this.modifiable.toString(2)),0);const n=a.ProprietaryData.proprietaryKey(i.GlobalProprietaryTypes.TX_MODIFIABLE),r=new o.Key(i.GlobalTypes.PROPRIETARY,n);e.push(new o.KeyPair(r,t))}const h=Buffer.allocUnsafe(4);h.writeUInt32LE(this.version,0);const d=new o.Key(i.GlobalTypes.VERSION);return e.push(new o.KeyPair(d,h)),this.proprietaryData&&this.proprietaryData.length>0&&this.proprietaryData.forEach((t=>{const n=a.ProprietaryData.proprietaryKey(t.subType,t.keyData),r=new o.Key(i.GlobalTypes.PROPRIETARY,n);e.push(new o.KeyPair(r,t.value))})),e.concat(this.unknowns||[]),e}}t.PsetGlobal=d},87409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.classifyScript=t.scriptWitnessToWitnessStack=t.witnessStackToScriptWitness=t.ZKPValidator=t.ZKPGenerator=t.Updater=t.Signer=t.PsetOutput=t.PsetInput=t.PsetGlobal=t.Pset=t.CreatorOutput=t.CreatorInput=t.Finalizer=t.Extractor=t.Creator=t.Blinder=void 0;const r=n(50394);Object.defineProperty(t,"PsetGlobal",{enumerable:!0,get:function(){return r.PsetGlobal}});const i=n(57868);Object.defineProperty(t,"PsetInput",{enumerable:!0,get:function(){return i.PsetInput}});const o=n(8938);Object.defineProperty(t,"PsetOutput",{enumerable:!0,get:function(){return o.PsetOutput}});const a=n(40116);Object.defineProperty(t,"Pset",{enumerable:!0,get:function(){return a.Pset}});const s=n(84577);Object.defineProperty(t,"Creator",{enumerable:!0,get:function(){return s.Creator}}),Object.defineProperty(t,"CreatorInput",{enumerable:!0,get:function(){return s.CreatorInput}}),Object.defineProperty(t,"CreatorOutput",{enumerable:!0,get:function(){return s.CreatorOutput}});const c=n(13039);Object.defineProperty(t,"Updater",{enumerable:!0,get:function(){return c.Updater}});const u=n(39776);Object.defineProperty(t,"Blinder",{enumerable:!0,get:function(){return u.Blinder}});const l=n(29921);Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return l.Signer}});const f=n(19587);Object.defineProperty(t,"Finalizer",{enumerable:!0,get:function(){return f.Finalizer}});const h=n(1497);Object.defineProperty(t,"Extractor",{enumerable:!0,get:function(){return h.Extractor}});const d=n(93592);Object.defineProperty(t,"witnessStackToScriptWitness",{enumerable:!0,get:function(){return d.witnessStackToScriptWitness}}),Object.defineProperty(t,"scriptWitnessToWitnessStack",{enumerable:!0,get:function(){return d.scriptWitnessToWitnessStack}}),Object.defineProperty(t,"classifyScript",{enumerable:!0,get:function(){return d.classifyScript}});const p=n(70181);Object.defineProperty(t,"ZKPGenerator",{enumerable:!0,get:function(){return p.ZKPGenerator}}),Object.defineProperty(t,"ZKPValidator",{enumerable:!0,get:function(){return p.ZKPValidator}})},57868:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PsetInput=t.InputDuplicateFieldError=void 0;const a=n(43513),s=n(39831),c=n(63590),u=n(76235),l=n(63301),f=n(47199),h=n(6516),d=n(79371),p=n(40116),y=o(n(14627)),g=n(93592),b=n(51623),m=n(52560);class w extends Error{constructor(e){e&&(e="Duplicated input "+e),super(e)}}t.InputDuplicateFieldError=w;class v{constructor(e,t,n){this.previousTxid=e||Buffer.from([]),this.previousTxIndex=t||0,this.sequence=n}static fromBuffer(e){let t;const n=new v;for(;;){try{t=h.KeyPair.fromBuffer(e)}catch(e){if(e instanceof Error&&e===h.ErrEmptyKey)return n.sanityCheck(),n;throw e}switch(t.key.keyType){case f.InputTypes.NON_WITNESS_UTXO:if(n.nonWitnessUtxo)throw new w("non-witness utxo");n.nonWitnessUtxo=u.Transaction.fromBuffer(t.value);break;case f.InputTypes.WITNESS_UTXO:if(n.witnessUtxo)throw new w("witness utxo");n.witnessUtxo=_(t.value);break;case f.InputTypes.PARTIAL_SIG:n.partialSigs||(n.partialSigs=[]);const e=t.key.keyData;if(33!==e.length)throw new Error("Invalid partial sig's pubkey length");if(n.partialSigs.find((t=>t.pubkey.equals(e))))throw new w("partial sig");const r=t.value;y.signature.decode(r),n.partialSigs.push({pubkey:e,signature:r});break;case f.InputTypes.SIGHASH_TYPE:if(void 0!==n.sighashType)throw new w("sighash type");if(4!==t.value.length)throw new Error("Invalid input sighash type length");n.sighashType=t.value.readUInt32LE();break;case f.InputTypes.REDEEM_SCRIPT:if(n.redeemScript&&n.redeemScript.length>0)throw new w("redeem script");n.redeemScript=t.value;break;case f.InputTypes.WITNESS_SCRIPT:if(n.witnessScript&&n.witnessScript.length>0)throw new w("witness script");n.witnessScript=t.value;break;case f.InputTypes.BIP32_DERIVATION:const i=t.key.keyData;if(33!==i.length)throw new Error("Invalid input bip32 derivation pubkey length");if(n.bip32Derivation||(n.bip32Derivation=[]),n.bip32Derivation.find((e=>e.pubkey.equals(i))))throw new w("bip32 derivation");const{masterFingerprint:o,path:c}=(0,l.decodeBip32Derivation)(t.value);n.bip32Derivation.push({pubkey:i,masterFingerprint:o,path:c});break;case f.InputTypes.FINAL_SCRIPTSIG:if(n.finalScriptSig&&n.finalScriptSig.length>0)throw new w("final scriptsig");n.finalScriptSig=t.value;break;case f.InputTypes.FINAL_SCRIPTWITNESS:if(n.finalScriptWitness&&n.finalScriptWitness.length>0)throw new w("final script witness");n.finalScriptWitness=t.value;break;case f.InputTypes.RIPEMD_160:const h=t.key.keyData.toString("hex");if(20!==h.length)throw new Error("Invalid length for key of ripemd160 preimages");n.ripemd160Preimages||(n.ripemd160Preimages={}),n.ripemd160Preimages[h]=t.value;break;case f.InputTypes.SHA_256:const g=t.key.keyData.toString("hex");if(32!==g.length)throw new Error("Invalid length for key of sha256 preimages");n.sha256Preimages||(n.sha256Preimages={}),n.sha256Preimages[g]=t.value;break;case f.InputTypes.HASH_160:const b=t.key.keyData.toString("hex");if(20!==b.length)throw new Error("Invalid length for key of hash160 preimages");n.hash160Preimages||(n.hash160Preimages={}),n.hash160Preimages[b]=t.value;break;case f.InputTypes.HASH_256:const m=t.key.keyData.toString("hex");if(32!==m.length)throw new Error("Invalid length for key of hash256 preimages");n.hash256Preimages||(n.hash256Preimages={}),n.hash256Preimages[m]=t.value;break;case f.InputTypes.PREVIOUS_TXID:if(n.previousTxid&&n.previousTxid.length>0)throw new w("previous txid");if(32!==t.value.length)throw new Error("Invalid input previous txid length");n.previousTxid=t.value;break;case f.InputTypes.PREVIOUS_TXINDEX:if(n.previousTxIndex>0)throw new w("previous txindex");if(4!==t.value.length)throw new Error("Invalid input previous tx index length");n.previousTxIndex=t.value.readUInt32LE();break;case f.InputTypes.SEQUENCE:if(void 0!==n.sequence)throw new w("sequence");if(4!==t.value.length)throw new Error("Invalid input sequence length");n.sequence=t.value.readUInt32LE();break;case f.InputTypes.REQUIRED_TIME_LOCKTIME:if(n.requiredTimeLocktime>0)throw new w("time locktime");if(4!==t.value.length)throw new Error("Invalid input time-based locktime length");n.requiredTimeLocktime=t.value.readUInt32LE();break;case f.InputTypes.REQUIRED_HEIGHT_LOCKTIME:if(n.requiredHeightLocktime>0)throw new w("height locktime");if(4!==t.value.length)throw new Error("Invalid input height-based locktime length");n.requiredHeightLocktime=t.value.readUInt32LE();break;case f.InputTypes.TAP_KEY_SIG:if(n.tapKeySig&&n.tapKeySig.length>0)throw new w("taproot keysig");if(64!==t.value.length&&65!==t.value.length)throw new Error("Invalid input taproot key signature length");n.tapKeySig=t.value;break;case f.InputTypes.TAP_SCRIPT_SIG:if(n.tapScriptSig||(n.tapScriptSig=[]),64!==t.key.keyData.length)throw new Error("Invalid input TAP_SCRIPT_SIG key data length");const v=t.key.keyData.slice(0,32),E=t.key.keyData.slice(32);if(n.tapScriptSig.find((e=>e.pubkey.equals(v))))throw new w("taproot scriptsig");if(64!==t.value.length&&65!==t.value.length)throw new Error("Invalid input taproot key signature length");n.tapScriptSig.push({pubkey:v,leafHash:E,signature:t.value});break;case f.InputTypes.TAP_LEAF_SCRIPT:if(n.tapLeafScript||(n.tapLeafScript=[]),(t.key.keyData.length-1)%32!=0)throw new Error("Invalid input TAP_LEAF_SCRIPT key data length");const S=t.key.keyData,k=t.value.slice(-1)[0];if((254&S[0])!==k)throw new Error("Invalid input taproot leaf script version");n.tapLeafScript.push({controlBlock:S,leafVersion:k,script:t.value.slice(0,-1)});break;case f.InputTypes.TAP_BIP32_DERIVATION:if(33!==t.key.keyData.length)throw new Error("Invalid input bip32 derivation pubkey length");n.tapBip32Derivation||(n.tapBip32Derivation=[]);const A=t.key.keyData;if(n.tapBip32Derivation.find((e=>e.pubkey.equals(A))))throw new w("taproot bip32 derivation");const O=s.varuint.decode(t.value),P=s.varuint.encodingLength(O),I=(0,l.decodeBip32Derivation)(t.value.slice(P+32*O)),T=new Array(O);for(let e=0,n=P;e<O;e++,n+=32)T[e]=t.value.slice(n,n+32);n.tapBip32Derivation.push({pubkey:A,masterFingerprint:I.masterFingerprint,path:I.path,leafHashes:T});break;case f.InputTypes.TAP_INTERNAL_KEY:if(n.tapInternalKey&&n.tapInternalKey.length>0)throw new w("taproot internal key");if(32!==t.value.length)throw new Error("Invalid input taproot internal key length");n.tapInternalKey=t.value;break;case f.InputTypes.TAP_MERKLE_ROOT:if(n.tapMerkleRoot&&n.tapMerkleRoot.length>0)throw new w("taproot merkle root");if(32!==t.value.length)throw new Error("Invalid input taproot merkle root length");n.tapMerkleRoot=t.value;break;case f.InputTypes.PROPRIETARY:const x=d.ProprietaryData.fromKeyPair(t);if(0===Buffer.compare(x.identifier,p.magicPrefix))switch(x.subType){case f.InputProprietaryTypes.ISSUANCE_VALUE:if(n.issuanceValue>0)throw new w("issuance value");if(8!==t.value.length)throw new Error("Invalid input issuance value length");n.issuanceValue=(0,s.readUInt64LE)(t.value,0);break;case f.InputProprietaryTypes.ISSUANCE_VALUE_COMMITMENT:if(n.issuanceValueCommitment&&n.issuanceValueCommitment.length>0)throw new w("issuance value commitment");if(33!==t.value.length)throw new Error("Invalid input issuance value commitment length");n.issuanceValueCommitment=t.value;break;case f.InputProprietaryTypes.ISSUANCE_VALUE_RANGEPROOF:if(n.issuanceValueRangeproof&&n.issuanceValueRangeproof.length>0)throw new w("issuance value range proof");n.issuanceValueRangeproof=t.value;break;case f.InputProprietaryTypes.ISSUANCE_INFLATION_KEYS_RANGEPROOF:if(n.issuanceInflationKeysRangeproof&&n.issuanceInflationKeysRangeproof.length>0)throw new w("issuance inflation keys range proof");n.issuanceInflationKeysRangeproof=t.value;break;case f.InputProprietaryTypes.PEGIN_TX:if(void 0!==n.peginTx)throw new w("pegin tx");try{n.peginTx=a.Transaction.fromBuffer(t.value)}catch(e){throw new Error("Invalid input pegin tx")}break;case f.InputProprietaryTypes.PEGIN_TXOUT_PROOF:if(n.peginTxoutProof&&n.peginTxoutProof.length>0)throw new w("pegin txout proof");n.peginTxoutProof=t.value;break;case f.InputProprietaryTypes.PEGIN_GENESIS_HASH:if(n.peginGenesisHash&&n.peginGenesisHash.length>0)throw new w("pegin genesis hash");if(32!==t.value.length)throw new Error("Invalid input pegin genesis hash length");n.peginGenesisHash=t.value;break;case f.InputProprietaryTypes.PEGIN_CLAIM_SCRIPT:if(n.peginClaimScript&&n.peginClaimScript.length>0)throw new w("pegin claim script");n.peginClaimScript=t.value;break;case f.InputProprietaryTypes.PEGIN_VALUE:if(n.peginValue>0)throw new w("pegin value");if(8!==t.value.length)throw new Error("Invalid input pegin value length");n.peginValue=(0,s.readUInt64LE)(t.value,0);break;case f.InputProprietaryTypes.PEGIN_WITNESS:if(n.peginWitness&&n.peginWitness.length>0)throw new w("pegin witness");const e=new s.BufferReader(t.value);try{n.peginWitness=e.readVector()}catch(e){throw new Error("Invalid input pegin witness")}break;case f.InputProprietaryTypes.ISSUANCE_INFLATION_KEYS:if(n.issuanceInflationKeys>0)throw new w("issuance inflation keys");if(8!==t.value.length)throw new Error("Invalid input issuance inflation keys length");n.issuanceInflationKeys=(0,s.readUInt64LE)(t.value,0);break;case f.InputProprietaryTypes.ISSUANCE_INFLATION_KEYS_COMMITMENT:if(n.issuanceInflationKeysCommitment&&n.issuanceInflationKeysCommitment.length>0)throw new w("issuance inflation keys commitment");if(33!==t.value.length)throw new Error("Invalid input issuance inflation keys commitment length");n.issuanceInflationKeysCommitment=t.value;break;case f.InputProprietaryTypes.ISSUANCE_BLINDING_NONCE:if(n.issuanceBlindingNonce&&n.issuanceBlindingNonce.length>0)throw new w("issuance blinding nonce");if(32!==t.value.length)throw new Error("Invalid input issuance blinding nonce length");n.issuanceBlindingNonce=t.value;break;case f.InputProprietaryTypes.ISSUANCE_ASSET_ENTROPY:if(n.issuanceAssetEntropy&&n.issuanceAssetEntropy.length>0)throw new w("issuance asset entropy");if(32!==t.value.length)throw new Error("Invalid input issuance asset entropy length");n.issuanceAssetEntropy=t.value;break;case f.InputProprietaryTypes.UTXO_RANGEPROOF:if(n.utxoRangeProof&&n.utxoRangeProof.length>0)throw new w("utxo range proof");n.utxoRangeProof=t.value;break;case f.InputProprietaryTypes.ISSUANCE_BLIND_VALUE_PROOF:if(n.issuanceBlindValueProof&&n.issuanceBlindValueProof.length>0)throw new w("issuance blind value proof");n.issuanceBlindValueProof=t.value;break;case f.InputProprietaryTypes.ISSUANCE_BLIND_INFLATION_KEYS_PROOF:if(n.issuanceBlindInflationKeysProof&&n.issuanceBlindInflationKeysProof.length>0)throw new w("issuance blind inflation keys proof");n.issuanceBlindInflationKeysProof=t.value;break;case f.InputProprietaryTypes.EXPLICIT_VALUE:if(void 0!==n.explicitValue)throw new w("explicit value");if(8!==t.value.length)throw new Error("Invalid input explicit value length");n.explicitValue=(0,s.readUInt64LE)(t.value,0);break;case f.InputProprietaryTypes.VALUE_PROOF:if(n.explicitValueProof&&n.explicitValueProof.length>0)throw new w("explicit value proof");n.explicitValueProof=t.value;break;case f.InputProprietaryTypes.EXPLICIT_ASSET:if(n.explicitAsset&&n.explicitAsset.length>0)throw new w("explicit asset");n.explicitAsset=t.value;break;case f.InputProprietaryTypes.ASSET_PROOF:if(n.explicitAssetProof&&n.explicitAssetProof.length>0)throw new w("explicit asset proof");n.explicitAssetProof=t.value;break;case f.InputProprietaryTypes.BLINDED_ISSUANCE:if(void 0!==n.blindedIssuance)throw new w("blinded issuance");if(1!==t.value.length)throw new Error("invalid blinded issuance length");n.blindedIssuance=t.value.equals(Buffer.of(1));break;default:n.proprietaryData||(n.proprietaryData=[]),n.proprietaryData.push(x)}break;default:n.unknowns||(n.unknowns=[]),n.unknowns.push(t)}}}sanityCheck(){if(0===this.previousTxid.length)throw new Error("Missing input previous txid");if(this.previousTxIndex<0)throw new Error("Missing input previous tx index");if(!this.witnessUtxo&&this.witnessScript&&this.witnessScript.length>0)throw new Error("Input witness script cannot be set if witness utxo is unset");if(!this.witnessUtxo&&this.finalScriptWitness&&this.finalScriptWitness.length>0)throw new Error("Input final script witness cannot be set if witness utxo is unset");const e=this.issuanceValueCommitment&&this.issuanceValueCommitment.length>0,t=this.issuanceBlindValueProof&&this.issuanceBlindValueProof.length>0;if(this.issuanceValue&&e!==t)throw new Error("Missing input issuance value commitment or blind proof");const n=this.issuanceInflationKeysCommitment&&this.issuanceInflationKeysCommitment.length>0,r=this.issuanceBlindInflationKeysProof&&this.issuanceBlindInflationKeysProof.length>0;if(this.issuanceInflationKeys&&n!==r)throw new Error("Missing input issuance inflation keys commitment or blind proof");if(void 0!==this.sighashType&&this.sighashType<0)throw new Error("Invalid sighash type");if(this.explicitValue&&!this.explicitValueProof)throw new Error("Explicit value proof is required if explicit value is set");if(this.explicitValueProof&&!this.explicitValue)throw new Error("Explicit value is required if value proof is set");if(this.explicitAsset&&!this.explicitAssetProof)throw new Error("Explicit asset proof is required if explicit asset set");if(this.explicitAssetProof&&!this.explicitAsset)throw new Error("Explicit asset is required if asset proof is set");if(this.explicitAsset){if(b.AssetHash.fromBytes(this.explicitAsset).isConfidential)throw new Error("Explicit asset must be unconfidential")}const i=this.getUtxo();if(i&&this.explicitAsset&&!b.AssetHash.fromBytes(i.asset).isConfidential)throw new Error("Explicit asset must be undefined if previous utxo is unconfidential");if(i&&void 0!==this.explicitValue&&!m.ElementsValue.fromBytes(i.value).isConfidential)throw new Error("Explicit value must be undefined if previout utxo is unconfidential");return this}hasIssuance(){return!!this.issuanceBlindingNonce&&this.issuanceBlindingNonce.equals(u.ZERO)}hasIssuanceBlinded(){return this.issuanceValueCommitment.length>0}hasReissuance(){return!!this.issuanceBlindingNonce&&!this.issuanceBlindingNonce.equals(u.ZERO)}isFinalized(){return this.finalScriptSig&&this.finalScriptSig.length>0||this.finalScriptWitness&&this.finalScriptWitness.length>0}isTaproot(){return this.tapInternalKey&&this.tapInternalKey.length>0||this.tapMerkleRoot&&this.tapMerkleRoot.length>0||this.tapLeafScript&&this.tapLeafScript.length>0||this.tapBip32Derivation&&this.tapBip32Derivation.length>0||this.witnessUtxo&&(0,g.isP2TR)(this.witnessUtxo.script)}getIssuanceAssetHash(){if(!this.hasIssuance()&&!this.hasReissuance())return;if(!this.issuanceAssetEntropy)throw new Error("missing issuance asset entropy");let e=this.issuanceAssetEntropy;return this.hasReissuance()||(e=(0,c.generateEntropy)({txHash:this.previousTxid,vout:this.previousTxIndex},this.issuanceAssetEntropy)),(0,c.calculateAsset)(e)}getIssuanceEntropy(){if(!this.hasIssuance()&&!this.hasReissuance())throw new Error("input is not an (re)issuance");if(!this.issuanceAssetEntropy)throw new Error("missing issuance asset entropy");let e=this.issuanceAssetEntropy;return this.hasIssuance()&&(e=(0,c.generateEntropy)({txHash:this.previousTxid,vout:this.previousTxIndex},this.issuanceAssetEntropy)),e}getUtxo(){if(this.witnessUtxo||this.nonWitnessUtxo){if(!this.nonWitnessUtxo){const e=this.witnessUtxo;return e.rangeProof=this.utxoRangeProof,e}return this.nonWitnessUtxo.outs[this.previousTxIndex]}}toBuffer(){const e=this.getKeyPairs().map((e=>e.toBuffer()));let t=0;e.forEach((e=>{t+=e.length}));const n=s.BufferWriter.withCapacity(t);return e.forEach((e=>n.writeSlice(e))),n.buffer}getKeyPairs(){const e=[];if(this.nonWitnessUtxo){const t=new h.Key(f.InputTypes.NON_WITNESS_UTXO),n=this.nonWitnessUtxo.toBuffer();e.push(new h.KeyPair(t,n))}if(this.witnessUtxo){const t=new h.Key(f.InputTypes.WITNESS_UTXO),n=function(e){const t=e.asset.length+e.value.length+s.varuint.encodingLength(e.script.length)+e.script.length+e.nonce.length,n=Buffer.allocUnsafe(t),r=new s.BufferWriter(n,0);return r.writeSlice(e.asset),r.writeSlice(e.value),r.writeSlice(e.nonce),r.writeVarSlice(e.script),n}(this.witnessUtxo);e.push(new h.KeyPair(t,n))}if(this.partialSigs&&this.partialSigs.length>0&&this.partialSigs.forEach((({pubkey:t,signature:n})=>{const r=new h.Key(f.InputTypes.PARTIAL_SIG,t);e.push(new h.KeyPair(r,n))})),void 0!==this.sighashType){const t=new h.Key(f.InputTypes.SIGHASH_TYPE),n=Buffer.allocUnsafe(4);n.writeUInt32LE(this.sighashType),e.push(new h.KeyPair(t,n))}if(this.redeemScript&&this.redeemScript.length>0){const t=new h.Key(f.InputTypes.REDEEM_SCRIPT);e.push(new h.KeyPair(t,this.redeemScript))}if(this.witnessScript&&this.witnessScript.length>0){const t=new h.Key(f.InputTypes.WITNESS_SCRIPT);e.push(new h.KeyPair(t,this.witnessScript))}if(this.bip32Derivation&&this.bip32Derivation.length>0&&this.bip32Derivation.forEach((({pubkey:t,masterFingerprint:n,path:r})=>{const i=new h.Key(f.InputTypes.BIP32_DERIVATION,t),o=(0,l.encodeBIP32Derivation)(n,r);e.push(new h.KeyPair(i,o))})),this.finalScriptSig&&this.finalScriptSig.length>0){const t=new h.Key(f.InputTypes.FINAL_SCRIPTSIG);e.push(new h.KeyPair(t,this.finalScriptSig))}if(this.finalScriptWitness&&this.finalScriptWitness.length>0){const t=new h.Key(f.InputTypes.FINAL_SCRIPTWITNESS);e.push(new h.KeyPair(t,this.finalScriptWitness))}this.ripemd160Preimages&&Object.keys(this.ripemd160Preimages).length>0&&Object.entries(this.ripemd160Preimages).forEach((([t,n])=>{const r=new h.Key(f.InputTypes.RIPEMD_160,Buffer.from(t,"hex"));e.push(new h.KeyPair(r,n))})),this.sha256Preimages&&Object.keys(this.sha256Preimages).length>0&&Object.entries(this.sha256Preimages).forEach((([t,n])=>{const r=new h.Key(f.InputTypes.SHA_256,Buffer.from(t,"hex"));e.push(new h.KeyPair(r,n))})),this.hash160Preimages&&Object.keys(this.hash160Preimages).length>0&&Object.entries(this.hash160Preimages).forEach((([t,n])=>{const r=new h.Key(f.InputTypes.HASH_160,Buffer.from(t,"hex"));e.push(new h.KeyPair(r,n))})),this.hash256Preimages&&Object.keys(this.hash256Preimages).length>0&&Object.entries(this.hash256Preimages).forEach((([t,n])=>{const r=new h.Key(f.InputTypes.HASH_256,Buffer.from(t,"hex"));e.push(new h.KeyPair(r,n))}));const t=new h.Key(f.InputTypes.PREVIOUS_TXID);e.push(new h.KeyPair(t,this.previousTxid));const n=new h.Key(f.InputTypes.PREVIOUS_TXINDEX),r=Buffer.allocUnsafe(4);if(r.writeUInt32LE(this.previousTxIndex),e.push(new h.KeyPair(n,r)),this.sequence>0){const t=new h.Key(f.InputTypes.SEQUENCE),n=Buffer.allocUnsafe(4);n.writeUInt32LE(this.sequence),e.push(new h.KeyPair(t,n))}if(this.requiredTimeLocktime>0){const t=new h.Key(f.InputTypes.REQUIRED_TIME_LOCKTIME),n=Buffer.allocUnsafe(4);n.writeUInt32LE(this.requiredTimeLocktime),e.push(new h.KeyPair(t,n))}if(this.requiredHeightLocktime>0){const t=new h.Key(f.InputTypes.REQUIRED_HEIGHT_LOCKTIME),n=Buffer.allocUnsafe(4);n.writeUInt32LE(this.requiredHeightLocktime),e.push(new h.KeyPair(t,n))}if(this.tapKeySig&&this.tapKeySig.length>0){const t=new h.Key(f.InputTypes.TAP_KEY_SIG);e.push(new h.KeyPair(t,this.tapKeySig))}if(this.tapScriptSig&&this.tapScriptSig.length>0&&this.tapScriptSig.forEach((({pubkey:t,signature:n,leafHash:r})=>{const i=Buffer.concat([t,r]),o=new h.Key(f.InputTypes.TAP_SCRIPT_SIG,i);e.push(new h.KeyPair(o,n))})),this.tapLeafScript&&this.tapLeafScript.length>0&&this.tapLeafScript.forEach((({leafVersion:t,script:n,controlBlock:r})=>{const i=new h.Key(f.InputTypes.TAP_LEAF_SCRIPT,r),o=Buffer.concat([n,Buffer.of(t)]);e.push(new h.KeyPair(i,o))})),this.tapBip32Derivation&&this.tapBip32Derivation.length>0&&this.tapBip32Derivation.forEach((({pubkey:t,masterFingerprint:n,path:r,leafHashes:i})=>{const o=new h.Key(f.InputTypes.TAP_BIP32_DERIVATION,t),a=s.varuint.encodingLength(i.length),c=Buffer.allocUnsafe(a);s.varuint.encode(i.length,c);const u=Buffer.concat([c,...i,(0,l.encodeBIP32Derivation)(n,r)]);e.push(new h.KeyPair(o,u))})),this.tapInternalKey&&this.tapInternalKey.length>0){const t=new h.Key(f.InputTypes.TAP_INTERNAL_KEY);e.push(new h.KeyPair(t,this.tapInternalKey))}if(this.tapMerkleRoot&&this.tapMerkleRoot.length>0){const t=new h.Key(f.InputTypes.TAP_MERKLE_ROOT);e.push(new h.KeyPair(t,this.tapMerkleRoot))}if(this.issuanceValue>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_VALUE),n=new h.Key(f.InputTypes.PROPRIETARY,t),r=Buffer.allocUnsafe(8);(0,s.writeUInt64LE)(r,this.issuanceValue,0),e.push(new h.KeyPair(n,r))}if(this.issuanceValueCommitment&&this.issuanceValueCommitment.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_VALUE_COMMITMENT),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceValueCommitment))}if(this.issuanceValueRangeproof&&this.issuanceValueRangeproof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_VALUE_RANGEPROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceValueRangeproof))}if(this.issuanceInflationKeysRangeproof&&this.issuanceInflationKeysRangeproof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_INFLATION_KEYS_RANGEPROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceInflationKeysRangeproof))}if(this.peginTx){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.PEGIN_TX),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.peginTx.toBuffer()))}if(this.peginTxoutProof&&this.peginTxoutProof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.PEGIN_TXOUT_PROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.peginTxoutProof))}if(this.peginGenesisHash&&this.peginGenesisHash.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.PEGIN_GENESIS_HASH),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.peginGenesisHash))}if(this.peginClaimScript&&this.peginClaimScript.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.PEGIN_CLAIM_SCRIPT),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.peginClaimScript))}if(this.peginValue>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.PEGIN_VALUE),n=new h.Key(f.InputTypes.PROPRIETARY,t),r=Buffer.allocUnsafe(8);(0,s.writeUInt64LE)(r,this.peginValue,0),e.push(new h.KeyPair(n,r))}if(this.peginWitness&&this.peginWitness.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.PEGIN_WITNESS),n=new s.BufferWriter(Buffer.allocUnsafe(0));n.writeVector(this.peginWitness);const r=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(r,n.buffer))}if(this.issuanceInflationKeys>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_INFLATION_KEYS),n=new h.Key(f.InputTypes.PROPRIETARY,t),r=Buffer.allocUnsafe(8);(0,s.writeUInt64LE)(r,this.issuanceInflationKeys,0),e.push(new h.KeyPair(n,r))}if(this.issuanceInflationKeysCommitment&&this.issuanceInflationKeysCommitment.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_INFLATION_KEYS_COMMITMENT),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceInflationKeysCommitment))}if(this.issuanceBlindingNonce&&this.issuanceBlindingNonce.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_BLINDING_NONCE),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceBlindingNonce))}if(this.issuanceAssetEntropy&&this.issuanceAssetEntropy.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_ASSET_ENTROPY),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceAssetEntropy))}if(this.utxoRangeProof&&this.utxoRangeProof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.UTXO_RANGEPROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.utxoRangeProof))}if(this.issuanceBlindValueProof&&this.issuanceBlindValueProof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_BLIND_VALUE_PROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceBlindValueProof))}if(this.issuanceBlindInflationKeysProof&&this.issuanceBlindInflationKeysProof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ISSUANCE_BLIND_INFLATION_KEYS_PROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.issuanceBlindInflationKeysProof))}if(this.explicitValue&&this.explicitValue>=0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.EXPLICIT_VALUE),n=new h.Key(f.InputTypes.PROPRIETARY,t),r=Buffer.allocUnsafe(8);(0,s.writeUInt64LE)(r,this.explicitValue,0),e.push(new h.KeyPair(n,r))}if(this.explicitValueProof&&this.explicitValueProof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.VALUE_PROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.explicitValueProof))}if(this.explicitAsset&&this.explicitAsset.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.EXPLICIT_ASSET),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.explicitAsset))}if(this.explicitAssetProof&&this.explicitAssetProof.length>0){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.ASSET_PROOF),n=new h.Key(f.InputTypes.PROPRIETARY,t);e.push(new h.KeyPair(n,this.explicitAssetProof))}if(void 0!==this.blindedIssuance){const t=d.ProprietaryData.proprietaryKey(f.InputProprietaryTypes.BLINDED_ISSUANCE),n=new h.Key(f.InputTypes.PROPRIETARY,t),r=Buffer.of(this.blindedIssuance?1:0);e.push(new h.KeyPair(n,r))}return this.proprietaryData&&this.proprietaryData.length>0&&this.proprietaryData.forEach((t=>{const n=d.ProprietaryData.proprietaryKey(t.subType,t.keyData),r=new h.Key(f.InputTypes.PROPRIETARY,n);e.push(new h.KeyPair(r,t.value))})),e.concat(this.unknowns||[]),e}}function _(e){if(e.length<45)throw new Error("Invalid input witness utxo length");const t=new s.BufferReader(e);return{asset:t.readSlice(33),value:t.readConfidentialValue(),nonce:t.readConfidentialNonce(),script:t.readVarSlice()}}t.PsetInput=v},6516:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPair=t.Key=t.ErrEmptyKey=void 0;const r=n(39831);t.ErrEmptyKey=new Error("no more key pairs");class i{constructor(e,t){this.keyType=e,this.keyData=t||Buffer.from([])}static fromBuffer(e){const n=e.readVarSlice();if(0===n.length)throw t.ErrEmptyKey;if(n.length>1e4)throw new Error("invalid key size");return new i(n[0],n.slice(1))}toBuffer(){const e=Buffer.concat([Buffer.of(this.keyType),this.keyData]),t=r.varuint.encodingLength(e.length)+e.length,n=r.BufferWriter.withCapacity(t);return n.writeVarSlice(e),n.buffer}}t.Key=i;class o{constructor(e,t){this.key=e,this.value=t||Buffer.from([])}static fromBuffer(e){const t=i.fromBuffer(e),n=e.readVarSlice();return new o(t,n)}toBuffer(){const e=this.key.toBuffer(),t=e.length+r.varuint.encodingLength(this.value.length)+this.value.length,n=r.BufferWriter.withCapacity(t);return n.writeSlice(e),n.writeVarSlice(this.value),n.buffer}}t.KeyPair=o},8938:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.PsetOutput=t.OutputDuplicateFieldError=void 0;const r=n(39831),i=n(63301),o=n(47199),a=n(6516),s=n(79371),c=n(40116),u=n(93592);class l extends Error{constructor(e){e&&(e="Duplicated output "+e),super(e)}}t.OutputDuplicateFieldError=l;class f{constructor(e,t,n){this.value=e||0,this.asset=t||Buffer.from([]),this.script=n}static fromBuffer(e){let t;const n=new f;for(;;){try{t=a.KeyPair.fromBuffer(e)}catch(e){if(e instanceof Error&&e===a.ErrEmptyKey)return n.sanityCheck(),n;throw e}switch(t.key.keyType){case o.OutputTypes.REDEEM_SCRIPT:if(n.redeemScript&&n.redeemScript.length>0)throw new l("redeem script");n.redeemScript=t.value;break;case o.OutputTypes.WITNESS_SCRIPT:if(n.witnessScript&&n.witnessScript.length>0)throw new l("witness script");n.witnessScript=t.value;break;case o.OutputTypes.BIP32_DERIVATION:const e=t.key.keyData;if(33!==e.length)throw new Error("Invalid output bip32 pubkey length");if(n.bip32Derivation||(n.bip32Derivation=[]),n.bip32Derivation.find((t=>t.pubkey.equals(e))))throw new l("bip32 derivation");const{masterFingerprint:a,path:u}=(0,i.decodeBip32Derivation)(t.value);n.bip32Derivation.push({pubkey:e,masterFingerprint:a,path:u});break;case o.OutputTypes.AMOUNT:if(n.value>0)throw new l("value");if(8!==t.value.length)throw new Error("Invalid output amount length");n.value=(0,r.readUInt64LE)(t.value,0);break;case o.OutputTypes.SCRIPT:if(n.script&&n.script.length>0)throw new l("script");n.script=t.value;break;case o.OutputTypes.TAP_BIP32_DERIVATION:if(33!==t.key.keyData.length)throw new Error("Invalid output bip32 derivation pubkey length");n.tapBip32Derivation||(n.tapBip32Derivation=[]);const f=t.key.keyData;if(n.tapBip32Derivation.find((e=>e.pubkey.equals(f))))throw new l("taproot bip32 derivation");const h=r.varuint.decode(t.value),d=r.varuint.encodingLength(h),p=(0,i.decodeBip32Derivation)(t.value.slice(d+32*h)),y=new Array(h);for(let e=0,n=d;e<h;e++,n+=32)y[e]=t.value.slice(n,n+32);n.tapBip32Derivation.push({pubkey:f,masterFingerprint:p.masterFingerprint,path:p.path,leafHashes:y});break;case o.OutputTypes.TAP_TREE:if(n.tapTree)throw new l("taproot tree");let g=0;const b=[];for(;g<t.value.length;){const e=t.value[g++],n=t.value[g++],i=r.varuint.decode(t.value,g);g+=r.varuint.encodingLength(i),b.push({depth:e,leafVersion:n,script:t.value.slice(g,g+i)}),g+=i}n.tapTree={leaves:b};break;case o.OutputTypes.TAP_INTERNAL_KEY:if(n.tapInternalKey&&n.tapInternalKey.length>0)throw new l("taproot internal key");if(32!==t.value.length)throw new Error("Invalid output taproot internal key length");n.tapInternalKey=t.value;break;case o.OutputTypes.PROPRIETARY:const m=s.ProprietaryData.fromKeyPair(t);if(0===Buffer.compare(m.identifier,c.magicPrefix))switch(m.subType){case o.OutputProprietaryTypes.VALUE_COMMITMENT:if(n.valueCommitment&&n.valueCommitment.length>0)throw new l("value commitment");if(33!==t.value.length)throw new Error("Invalid output value commitment length");n.valueCommitment=t.value;break;case o.OutputProprietaryTypes.ASSET:if(n.asset&&n.asset.length>0)throw new l("asset");if(32!==t.value.length)throw new Error("Invalid output asset length");n.asset=t.value;break;case o.OutputProprietaryTypes.ASSET_COMMITMENT:if(n.assetCommitment&&n.assetCommitment.length>0)throw new l("asset commitment");if(33!==t.value.length)throw new Error("Invalid output asset commitment length");n.assetCommitment=t.value;break;case o.OutputProprietaryTypes.VALUE_RANGEPROOF:if(n.valueRangeproof&&n.valueRangeproof.length>0)throw new l("value range proof");n.valueRangeproof=t.value;break;case o.OutputProprietaryTypes.ASSET_SURJECTION_PROOF:if(n.assetSurjectionProof&&n.assetSurjectionProof.length>0)throw new l("asset surjection proof");n.assetSurjectionProof=t.value;break;case o.OutputProprietaryTypes.BLINDING_PUBKEY:if(n.blindingPubkey&&n.blindingPubkey.length>0)throw new l("blinding pubkey");if(33!==t.value.length)throw new Error("Invalid output blinding pubkey length");n.blindingPubkey=t.value;break;case o.OutputProprietaryTypes.ECDH_PUBKEY:if(n.ecdhPubkey&&n.ecdhPubkey.length>0)throw new l("ecdh pubkey");if(33!==t.value.length)throw new Error("Invalid output ecdh pubkey length");n.ecdhPubkey=t.value;break;case o.OutputProprietaryTypes.BLINDER_INDEX:if(void 0!==n.blinderIndex)throw new l("blinder index");if(4!==t.value.length)throw new Error("Invalid output blinder index length");n.blinderIndex=t.value.readUInt32LE();break;case o.OutputProprietaryTypes.BLIND_VALUE_PROOF:if(n.blindValueProof&&n.blindValueProof.length>0)throw new l("blind value proof");n.blindValueProof=t.value;break;case o.OutputProprietaryTypes.BLIND_ASSET_PROOF:if(n.blindAssetProof&&n.blindAssetProof.length>0)throw new l("blind asset proof");n.blindAssetProof=t.value;break;default:n.proprietaryData||(n.proprietaryData=[]),n.proprietaryData.push(m)}break;default:n.unknowns||(n.unknowns=[]),n.unknowns.push(t)}}}sanityCheck(){const e=this.valueCommitment&&this.valueCommitment.length>0,t=this.blindValueProof&&this.blindValueProof.length>0;if(this.value>0&&e!==t)throw new Error("Missing output value commitment or blind proof");const n=this.assetCommitment&&this.assetCommitment.length>0,r=this.blindAssetProof&&this.blindAssetProof.length>0;if(!(n||this.asset&&0!==this.asset.length))throw new Error("Missing output asset");if(this.asset&&this.asset.length>0&&n!==r)throw new Error("Missing output asset commitment or blind proof");if(this.isPartiallyBlinded()&&!this.isFullyBlinded())throw new Error("Output is partially blinded while it must be either unblinded or fully blinded");if(this.isFullyBlinded()&&this.blinderIndex>0)throw new Error("Blinder index must be unset for fully blinded output");return this}needsBlinding(){return this.blindingPubkey&&this.blindingPubkey.length>0}isPartiallyBlinded(){return this.valueCommitment&&this.valueCommitment.length>0||this.assetCommitment&&this.assetCommitment.length>0||this.valueRangeproof&&this.valueRangeproof.length>0||this.assetSurjectionProof&&this.assetSurjectionProof.length>0||this.ecdhPubkey&&this.ecdhPubkey.length>0}isFullyBlinded(){return this.valueCommitment&&this.valueCommitment.length>0&&this.assetCommitment&&this.assetCommitment.length>0&&this.valueRangeproof&&this.valueRangeproof.length>0&&(this.assetSurjectionProof&&this.assetSurjectionProof.length)>0&&this.ecdhPubkey&&this.ecdhPubkey.length>0}isTaproot(){return!!(this.tapInternalKey||this.tapTree||this.tapBip32Derivation&&this.tapBip32Derivation.length||this.script&&(0,u.isP2TR)(this.script))}toBuffer(){const e=this.getKeyPairs().map((e=>e.toBuffer()));let t=0;e.forEach((e=>{t+=e.length}));const n=r.BufferWriter.withCapacity(t);return e.forEach((e=>n.writeSlice(e))),n.buffer}getKeyPairs(){const e=[];if(this.redeemScript&&this.redeemScript.length>0){const t=new a.Key(o.OutputTypes.REDEEM_SCRIPT);e.push(new a.KeyPair(t,this.redeemScript))}if(this.witnessScript&&this.witnessScript.length>0){const t=new a.Key(o.OutputTypes.WITNESS_SCRIPT);e.push(new a.KeyPair(t,this.witnessScript))}if(this.bip32Derivation&&this.bip32Derivation.length>0&&this.bip32Derivation.forEach((({pubkey:t,masterFingerprint:n,path:r})=>{const s=new a.Key(o.OutputTypes.BIP32_DERIVATION,t),c=(0,i.encodeBIP32Derivation)(n,r);e.push(new a.KeyPair(s,c))})),this.tapBip32Derivation&&this.tapBip32Derivation.length>0&&this.tapBip32Derivation.forEach((({pubkey:t,masterFingerprint:n,path:s,leafHashes:c})=>{const u=new a.Key(o.OutputTypes.TAP_BIP32_DERIVATION,t),l=r.varuint.encodingLength(c.length),f=Buffer.allocUnsafe(l);r.varuint.encode(c.length,f);const h=Buffer.concat([f,...c,(0,i.encodeBIP32Derivation)(n,s)]);e.push(new a.KeyPair(u,h))})),this.tapTree){const t=new a.Key(o.OutputTypes.TAP_TREE),n=[].concat(...this.tapTree.leaves.map((e=>[Buffer.of(e.depth,e.leafVersion),r.varuint.encode(e.script.length),e.script]))),i=Buffer.concat(n);e.push(new a.KeyPair(t,i))}if(this.tapInternalKey&&this.tapInternalKey.length>0){const t=new a.Key(o.OutputTypes.TAP_INTERNAL_KEY);e.push(new a.KeyPair(t,this.tapInternalKey))}const t=new a.Key(o.OutputTypes.AMOUNT),n=Buffer.allocUnsafe(8);(0,r.writeUInt64LE)(n,this.value,0),e.push(new a.KeyPair(t,n));const c=new a.Key(o.OutputTypes.SCRIPT);if(e.push(new a.KeyPair(c,this.script||Buffer.alloc(0))),this.valueCommitment&&this.valueCommitment.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.VALUE_COMMITMENT),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.valueCommitment))}if(this.assetCommitment&&this.assetCommitment.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.ASSET_COMMITMENT),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.assetCommitment))}if(this.asset&&this.asset.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.ASSET),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.asset))}if(this.valueRangeproof&&this.valueRangeproof.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.VALUE_RANGEPROOF),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.valueRangeproof))}if(this.assetSurjectionProof&&this.assetSurjectionProof.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.ASSET_SURJECTION_PROOF),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.assetSurjectionProof))}if(this.blindingPubkey&&this.blindingPubkey.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.BLINDING_PUBKEY),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.blindingPubkey))}if(this.ecdhPubkey&&this.ecdhPubkey.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.ECDH_PUBKEY),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.ecdhPubkey))}const u=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.BLINDER_INDEX),l=new a.Key(o.OutputTypes.PROPRIETARY,u),f=Buffer.allocUnsafe(4);let h=0;if(this.blinderIndex>0&&(h=this.blinderIndex),f.writeUInt32LE(h),e.push(new a.KeyPair(l,f)),this.blindValueProof&&this.blindValueProof.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.BLIND_VALUE_PROOF),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.blindValueProof))}if(this.blindAssetProof&&this.blindAssetProof.length>0){const t=s.ProprietaryData.proprietaryKey(o.OutputProprietaryTypes.BLIND_ASSET_PROOF),n=new a.Key(o.OutputTypes.PROPRIETARY,t);e.push(new a.KeyPair(n,this.blindAssetProof))}return this.proprietaryData&&this.proprietaryData.length>0&&this.proprietaryData.forEach((t=>{const n=s.ProprietaryData.proprietaryKey(t.subType,t.keyData),r=new a.Key(o.OutputTypes.PROPRIETARY,n);e.push(new a.KeyPair(r,t.value))})),e.concat(this.unknowns||[]),e}}t.PsetOutput=f},79371:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ProprietaryData=void 0;const r=n(39831),i=n(40116);class o{constructor(e,t,n,r){this.identifier=e,this.subType=t,this.keyData=n,this.value=r}static fromKeyPair(e){if(252!==e.key.keyType)throw new Error("invalid proprietary data key type");const t=new r.BufferReader(e.key.keyData),n=e.key.keyData.length;let i=t.offset;const a=t.readVarSlice();if(0===a.length)throw new Error("invalid proprietary data identifier");const s=t.readUInt8();i=t.offset-i;const c=n-i;let u=Buffer.from([]);return c>0&&(u=t.readSlice(c)),new o(a,s,u,e.value)}static proprietaryKey(e,t){const n=function(e){const t=e?e.length:0;return r.varuint.encodingLength(i.magicPrefix.length)+i.magicPrefix.length+1+t}(t),o=Buffer.allocUnsafe(n),a=new r.BufferWriter(o);return a.writeVarSlice(i.magicPrefix),a.writeSlice(Buffer.from([e])),t&&t.length>0&&a.writeSlice(t),o}}t.ProprietaryData=o},40116:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Pset=t.magicPrefixWithSeparator=t.magicPrefix=void 0;const a=n(39831),s=n(66438),c=n(76235),u=n(47199),l=n(50394),f=n(57868),h=n(8938),d=o(n(14627)),p=n(93169),y=n(43564),g=n(52560),b=n(51623),m=n(93592);t.magicPrefix=Buffer.from([112,115,101,116]),t.magicPrefixWithSeparator=Buffer.concat([t.magicPrefix,Buffer.of(255)]);class w{constructor(e,t,n){this.inputs=t||[],this.outputs=n||[],this.globals=e||new l.PsetGlobal}static fromBase64(e){const t=Buffer.from(e,"base64");return this.fromBuffer(t)}static fromBuffer(e){const n=new a.BufferReader(e);if(!n.readSlice(t.magicPrefixWithSeparator.length).equals(t.magicPrefixWithSeparator))throw new Error("invalid magic prefix");const r=l.PsetGlobal.fromBuffer(n),i=[];for(let e=0;e<r.inputCount;e++){const e=f.PsetInput.fromBuffer(n);i.push(e)}const o=[];for(let e=0;e<r.outputCount;e++){const e=h.PsetOutput.fromBuffer(n);o.push(e)}const s=new w(r,i,o);return s.sanityCheck(),s}static ECCKeysGenerator(e){return t=>{const n=(0,m.randomBytes)(t),r=e.pointFromScalar(n);if(!r)throw new Error("Failed to generate public key");return{privateKey:n,publicKey:Buffer.from(r)}}}static ECDSASigValidator(e){return(t,n,r)=>e.verify(n,t,r)}static SchnorrSigValidator(e){return(t,n,r)=>e.verifySchnorr(n,t,r.slice(0,64))}sanityCheck(){if(this.globals.sanityCheck(),this.inputs.forEach((e=>e.sanityCheck())),this.outputs.forEach((e=>e.sanityCheck())),this.isFullyBlinded()&&this.globals.scalars&&this.globals.scalars.length>0)throw new Error("global scalars must be empty for fully blinded pset");return this}copy(){return new w(this.globals,this.inputs,this.outputs)}inputsModifiable(){return!this.globals.txModifiable||1===this.globals.txModifiable.get(0)}outputsModifiable(){return!this.globals.txModifiable||1===this.globals.txModifiable.get(1)}hasSighashSingle(){return!!this.globals.txModifiable&&1===this.globals.txModifiable.get(2)}needsBlinding(){return this.outputs.some((e=>e.needsBlinding()&&!e.isFullyBlinded()))}isFullyBlinded(){return!!this.needsBlinding()&&!this.outputs.some((e=>e.needsBlinding()&&!e.isFullyBlinded()))}isComplete(){return this.inputs.every((e=>e.isFinalized()))}locktime(){let e=0,t=0;return this.inputs.forEach((n=>{n.requiredTimeLocktime>0&&n.requiredTimeLocktime>t&&(t=n.requiredTimeLocktime),n.requiredHeightLocktime>0&&n.requiredHeightLocktime>e&&(e=n.requiredHeightLocktime)})),e>0?e:t>0?t:this.globals.fallbackLocktime||0}unsignedTx(){const e=new c.Transaction;return e.version=this.globals.txVersion,e.locktime=this.locktime(),this.inputs.forEach((t=>{let n;if(t.hasIssuance()||t.hasReissuance()){let e=t.issuanceValueCommitment;e&&0!==e.length||(e=g.ElementsValue.fromNumber(t.issuanceValue).bytes);let r=t.issuanceInflationKeysCommitment;r&&0!==r.length||(r=t.issuanceInflationKeys?g.ElementsValue.fromNumber(t.issuanceInflationKeys).bytes:Buffer.of(0));n={assetEntropy:t.issuanceAssetEntropy,assetAmount:e,tokenAmount:r,assetBlindingNonce:t.issuanceBlindingNonce}}e.addInput(t.previousTxid,t.previousTxIndex,t.sequence,void 0,n)})),this.outputs.forEach((t=>{const n=t.valueCommitment||g.ElementsValue.fromNumber(t.value).bytes,r=t.assetCommitment||b.AssetHash.fromBytes(t.asset).bytes,i=t.script||Buffer.from([]),o=t.ecdhPubkey||Buffer.of(0);e.addOutput(i,n,r,o,t.valueRangeproof,t.assetSurjectionProof)})),e}validateAllSignatures(e){return this.inputs.every(((t,n)=>this.validateInputSignatures(n,e)))}addInput(e){if(e.sanityCheck(),this.isDuplicatedInput(e))throw new Error("given input already exists in pset");if(!this.inputsModifiable())throw new Error("pset is locked for updates on inputs");if(e.requiredHeightLocktime>0||e.requiredTimeLocktime>0){const t=this.locktime();let n=e.requiredTimeLocktime,r=e.requiredHeightLocktime,i=!1;this.inputs.forEach((e=>{if(e.requiredTimeLocktime>0&&!e.requiredHeightLocktime&&(r=0,0===n))throw new Error("invalid input locktime");if(!e.requiredTimeLocktime&&e.requiredHeightLocktime>0&&(n=0,0===r))throw new Error("invalid input locktime");e.requiredTimeLocktime>0&&n>0&&(n=Math.max(n,e.requiredTimeLocktime)),e.requiredHeightLocktime>0&&r>0&&(r=Math.max(r,e.requiredHeightLocktime)),(e.partialSigs??[]).length>0&&(i=!0)}));let o=this.globals.fallbackLocktime;if(n>0&&(o=n),r>0&&(o=r),i&&t!==o)throw new Error("invalid input locktime")}return this.inputs.push(e),this.globals.inputCount++,this}addOutput(e){if(e.sanityCheck(),!this.outputsModifiable())throw new Error("pset is locked for updates on outputs");return this.outputs.push(e),this.globals.outputCount++,this}validateInputSignatures(e,t){if(e<0||e>=this.globals.inputCount)throw new Error("input index out of range");const n=this.inputs[e];return!(!n.partialSigs||0===n.partialSigs.length)&&n.partialSigs.every((n=>this.validatePartialSignature(e,t,n)))}validatePartialSignature(e,t,n){if(e<0||e>=this.globals.inputCount)throw new Error("input index out of range");const r=this.inputs[e];if(!r.partialSigs||0===r.partialSigs.length)return!1;const i=r.getUtxo();if(!i)throw new Error("missing input (non-)witness utxo");const o=n.signature[n.signature.length-1],a=this.getInputPreimage(e,o),c=r.witnessScript||r.redeemScript||i.script;!function(e,t,n){if(!function(e,t){const n=(0,s.hash160)(e),r=d.decompile(t);if(null===r)throw new Error("Unknown script error");return r.some((t=>"number"!=typeof t&&(t.equals(e)||t.equals(n))))}(e,t))throw new Error(`Cannot ${n} for this input with the key ${e.toString("hex")}`)}(n.pubkey,c,"verify");const{signature:u}=d.signature.decode(n.signature);return t(n.pubkey,a,u)}getInputPreimage(e,t,n,r){if(e<0||e>=this.globals.inputCount)throw new Error("input index out of range");const i=this.inputs[e],o=i.getUtxo();if(!o)throw new Error("missing input (non-)witness utxo");const a=this.unsignedTx();if(i.isTaproot()){if(!n||32!==n.length)throw new Error("Missing or invalid genesis block hash");const i=[],o=[];return this.inputs.forEach(((e,t)=>{const n=e.getUtxo();if(!n)throw new Error(`Missing input ${t} (non-)witness utxo`);i.push(n.script),o.push({asset:n.asset,value:n.value})})),a.hashForWitnessV1(e,i,o,t,n,r)}const s=i.redeemScript||o.script;switch((0,p.getScriptType)(s)){case p.ScriptType.P2Pkh:case p.ScriptType.P2Sh:return a.hashForSignature(e,s,t);case p.ScriptType.P2Wpkh:const n=(0,y.p2pkh)({hash:o.script.slice(2)}).output;return a.hashForWitnessV0(e,n,o.value,t);case p.ScriptType.P2Wsh:if(!i.witnessScript||0===i.witnessScript.length)throw new Error("missing witness script for p2wsh input");return a.hashForWitnessV0(e,i.witnessScript,o.value,t);default:throw new Error("unknown input (non-)witness utxo script type")}}toBase64(){return this.toBuffer().toString("base64")}toBuffer(){let e=t.magicPrefixWithSeparator.length;const n=this.globals.toBuffer();e+=n.length+1;const r=this.inputs.map((e=>e.toBuffer()));r.forEach((t=>e+=t.length+1));const i=this.outputs.map((e=>e.toBuffer()));i.forEach((t=>e+=t.length+1));const o=a.BufferWriter.withCapacity(e);return o.writeSlice(t.magicPrefixWithSeparator),o.writeSlice(n),o.writeUInt8(u.separator),r.forEach((e=>{o.writeSlice(e),o.writeUInt8(u.separator)})),i.forEach((e=>{o.writeSlice(e),o.writeUInt8(u.separator)})),o.buffer}isDuplicatedInput(e){return this.inputs.some((t=>t.previousTxid.equals(e.previousTxid)&&t.previousTxIndex===e.previousTxIndex))}}t.Pset=w},29921:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signer=void 0;const r=n(76235),i=n(13039),o=n(93592);t.Signer=class{constructor(e){e.sanityCheck(),this.pset=e}addSignature(e,t,n){if(e<0||e>=this.pset.globals.inputCount)throw new Error("Input index out of range");const i=this.pset.inputs[e];if(i.isFinalized())throw new Error("Input is already finalized");if(void 0===i.sighashType)throw new Error("Missing input sighash type");if((31&i.sighashType)===r.Transaction.SIGHASH_ALL&&this.pset.outputs.some((e=>e.needsBlinding()&&!e.isFullyBlinded())))throw new Error("Pset must be fully blinded");return i.isTaproot()?this._addTaprootSignature(e,t,n):this._addSignature(e,t,n)}_addSignature(e,t,n){const r=this.pset.inputs[e],a=this.pset.copy(),s=r.sighashType,{partialSig:c,witnessScript:u,redeemScript:l}=t;if(!c)throw new Error("Missing partial signature for input");if(c.signature.slice(-1)[0]!==s)throw new Error("Input and signature sighash types must match");const f=new i.Updater(a);if(u&&u.length>0&&(f.addInWitnessScript(e,u),r.witnessUtxo||(f.addInWitnessUtxo(e,r.nonWitnessUtxo.outs[r.previousTxIndex]),a.inputs[e].nonWitnessUtxo=void 0)),l&&l.length>0){f.addInRedeemScript(e,l);((0,o.isP2WPKH)(l)||(0,o.isP2WSH)(l))&&!r.witnessUtxo&&(f.addInWitnessUtxo(e,r.nonWitnessUtxo.outs[r.previousTxIndex]),a.inputs[e].nonWitnessUtxo=void 0)}if(a.inputs[e].nonWitnessUtxo){const t=r.nonWitnessUtxo.outs[r.previousTxIndex].script;((0,o.isP2WPKH)(t)||(0,o.isP2WSH)(t))&&(f.addInWitnessUtxo(e,r.nonWitnessUtxo.outs[r.previousTxIndex]),a.inputs[e].nonWitnessUtxo=void 0)}return f.addInPartialSignature(e,c,n),a.sanityCheck(),this.pset.globals=a.globals,this.pset.inputs=a.inputs,this.pset.outputs=a.outputs,this}_addTaprootSignature(e,t,n){const r=this.pset.copy(),{tapKeySig:o,tapScriptSigs:a,genesisBlockHash:s}=t;if(!(o||a&&a.length))throw new Error("Missing taproot signature");const c=new i.Updater(r);return o&&c.addInTapKeySig(e,o,s,n),a&&a.forEach((t=>{c.addInTapScriptSig(e,t,s,n)})),r.sanityCheck(),this.pset.globals=r.globals,this.pset.inputs=r.inputs,this.pset.outputs=r.outputs,this}}},13039:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Updater=void 0;const a=n(93169),s=n(51623),c=n(63590),u=n(84577),l=o(n(14627));function f(e){if("string"==typeof e){const t=(0,a.toOutputScript)(e);return(0,a.isConfidential)(e)?{script:t,blindingPublicKey:(0,a.fromConfidential)(e).blindingKey}:{script:t}}return e}function h(e,t){if(!e||!t)return!0;if("string"==typeof e&&"string"==typeof t){const n=(0,a.getNetwork)(e),r=(0,a.getNetwork)(t);return n.name===r.name}return!0}t.Updater=class{constructor(e){e.sanityCheck(),this.pset=e}addInputs(e){const t=this.pset.copy();return e.forEach((e=>{const n=new u.CreatorInput(e.txid,e.txIndex,e.sequence,e.heightLocktime,e.timeLocktime);n.validate(),t.addInput(n.toPartialInput());const r=t.inputs.length-1;if(e.witnessUtxo&&this.addInWitnessUtxo(r,e.witnessUtxo),e.witnessUtxo&&e.witnessUtxo.rangeProof&&this.addInUtxoRangeProof(r,e.witnessUtxo.rangeProof),e.witnessScript&&this.addInWitnessScript(r,e.witnessScript),e.nonWitnessUtxo&&this.addInNonWitnessUtxo(r,e.nonWitnessUtxo),e.nonWitnessUtxo&&e.nonWitnessUtxo.outs[e.txIndex]){const t=e.nonWitnessUtxo.outs[e.txIndex];t.rangeProof&&this.addInUtxoRangeProof(r,t.rangeProof)}void 0!==e.sighashType&&this.addInSighashType(r,e.sighashType),e.tapInternalKey&&this.addInTapInternalKey(r,e.tapInternalKey),e.tapLeafScript&&this.addInTapLeafScript(r,e.tapLeafScript),e.tapMerkleRoot&&this.addInTapMerkleRoot(r,e.tapMerkleRoot),e.issaunceOpts&&this.addInIssuance(r,e.issaunceOpts),e.reissuanceOpts&&this.addInReissuance(r,e.reissuanceOpts),e.explicitAsset&&this.addInExplicitAsset(r,e.explicitAsset,e.explicitAssetProof??Buffer.alloc(0)),e.explicitValue&&this.addInExplicitValue(r,e.explicitValue,e.explicitValueProof??Buffer.alloc(0))})),t.sanityCheck(),this.pset.globals=t.globals,this.pset.inputs=t.inputs,this.pset.outputs=t.outputs,this}addOutputs(e){const t=this.pset.copy();return e.forEach((e=>{const n=new u.CreatorOutput(e.asset,e.amount,e.script,e.blindingPublicKey,e.blinderIndex);n.validate(),t.addOutput(n.toPartialOutput())})),t.sanityCheck(),this.pset.globals=t.globals,this.pset.inputs=t.inputs,this.pset.outputs=t.outputs,this}addInNonWitnessUtxo(e,t){this.validateInputIndex(e);const n=this.pset.copy();if(!t.getHash(!1).equals(n.inputs[e].previousTxid))throw new Error("Non-witness utxo hash does not match prevout txid");return n.inputs[e].nonWitnessUtxo=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInWitnessUtxo(e,t){this.validateInputIndex(e);const n=this.pset.copy();return n.inputs[e].witnessUtxo=t,n.inputs[e].utxoRangeProof=t.rangeProof,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInRedeemScript(e,t){this.validateInputIndex(e);const n=this.pset.copy();return n.inputs[e].redeemScript=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInWitnessScript(e,t){this.validateInputIndex(e);const n=this.pset.copy();return n.inputs[e].witnessScript=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInBIP32Derivation(e,t){if(this.validateInputIndex(e),33!==t.pubkey.length)throw new Error("Invalid pubkey length");const n=this.pset.copy();if(n.inputs[e].bip32Derivation||(n.inputs[e].bip32Derivation=[]),n.inputs[e].bip32Derivation.some((({pubkey:e})=>e.equals(t.pubkey))))throw new Error("Duplicated bip32 derivation pubkey");return n.inputs[e].bip32Derivation.push(t),n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInSighashType(e,t){if(this.validateInputIndex(e),t<0)throw new Error("Invalid sighash type");const n=this.pset.copy();return n.inputs[e].sighashType=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInUtxoRangeProof(e,t){this.validateInputIndex(e);const n=this.pset.copy();return n.inputs[e].utxoRangeProof=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInIssuance(e,t){this.validateIssuanceInput(e),function(e){const t=e.assetAmount||0,n=e.tokenAmount||0;if(t<=0&&n<=0)throw new Error("Either asset or token amounts must be a positive number");if(t>0&&!e.assetAddress)throw new Error("Asset address must be defined if asset amount is non-zero");if(n>0&&!e.tokenAddress)throw new Error("Token address must be defined if token amount is non-zero");if(!h(e.assetAddress,e.tokenAddress))throw new Error("Asset and token addresses must be of same network")}(t);const n=this.pset.copy(),r=t.assetAmount||0,i=t.tokenAmount||0,o=(0,c.newIssuance)(r,i,t.contract);n.inputs[e].issuanceValue=r,n.inputs[e].issuanceInflationKeys=i,n.inputs[e].issuanceAssetEntropy=o.assetEntropy,n.inputs[e].issuanceBlindingNonce=o.assetBlindingNonce,n.inputs[e].blindedIssuance=void 0===t.blindedIssuance||t.blindedIssuance;const a=(0,c.generateEntropy)({txHash:n.inputs[e].previousTxid,vout:n.inputs[e].previousTxIndex},o.assetEntropy);if(r>0){const i=s.AssetHash.fromBytes((0,c.calculateAsset)(a)).hex,{blindingPublicKey:o,script:l}=f(t.assetAddress),h=new u.CreatorOutput(i,r,l,o,o?e:void 0);n.addOutput(h.toPartialOutput())}if(i>0){const r=s.AssetHash.fromBytes((0,c.calculateReissuanceToken)(a,t.blindedIssuance??!0)).hex,{blindingPublicKey:o,script:l}=f(t.tokenAddress),h=new u.CreatorOutput(r,i,l,o,o?e:void 0);n.addOutput(h.toPartialOutput())}return n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInReissuance(e,t){this.validateReissuanceInput(e),function(e){const t="string"==typeof e.entropy?Buffer.from(e.entropy,"hex").reverse():e.entropy;if(32!==t.length)throw new Error("Invalid entropy length");const n="string"==typeof e.tokenAssetBlinder?Buffer.from(e.tokenAssetBlinder,"hex").reverse():e.tokenAssetBlinder;if(32!==n.length)throw new Error("Invalid token asset blinder length");if(e.assetAmount<=0)throw new Error("Asset amount must be a positive number");if(e.tokenAmount<=0)throw new Error("Token amount must be a positive number");if(!e.assetAddress)throw new Error("Missing asset address");if(!e.assetAddress)throw new Error("Missing token address");if(!h(e.assetAddress,e.tokenAddress))throw new Error("Asset and token addresses must be both of same network and both confidential")}(t);const n=this.pset.copy(),r="string"==typeof t.entropy?Buffer.from(t.entropy,"hex").reverse():t.entropy,i="string"==typeof t.tokenAssetBlinder?Buffer.from(t.tokenAssetBlinder,"hex").reverse():t.tokenAssetBlinder,o=s.AssetHash.fromBytes((0,c.calculateAsset)(r)).hex,a=s.AssetHash.fromBytes((0,c.calculateReissuanceToken)(r,t.initialIssuanceBlinded??!0)).hex;if(n.inputs[e].issuanceAssetEntropy=r,n.inputs[e].issuanceBlindingNonce=i,n.inputs[e].issuanceValue=t.assetAmount,n.inputs[e].issuanceInflationKeys=0,void 0!==t.blindedIssuance&&(n.inputs[e].blindedIssuance=t.blindedIssuance),t.assetAddress){const{blindingPublicKey:r,script:i}=f(t.assetAddress),a=new u.CreatorOutput(o,t.assetAmount,i,r,r?e:void 0);n.addOutput(a.toPartialOutput())}if(t.tokenAddress){const{blindingPublicKey:r,script:i}=f(t.tokenAddress),o=new u.CreatorOutput(a,t.tokenAmount,i,r,r?e:void 0);n.addOutput(o.toPartialOutput())}return n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInPartialSignature(e,t,n){if(this.validateInputIndex(e),function(e){if(33!==e.pubkey.length)throw new Error("Invalid pubkey length");l.signature.decode(e.signature)}(t),(this.pset.inputs[e].partialSigs||[]).some((({pubkey:e})=>e.equals(t.pubkey))))throw new Error("Duplicated signature pubkey");const r=this.pset.copy(),i=t.signature.slice(-1)[0],o=r.getInputPreimage(e,i),{signature:a}=l.signature.decode(t.signature);if(!n(t.pubkey,o,a))throw new Error("Invalid signature");return r.inputs[e].partialSigs||(r.inputs[e].partialSigs=[]),r.inputs[e].partialSigs.push(t),r.sanityCheck(),this.pset.globals=r.globals,this.pset.inputs=r.inputs,this.pset.outputs=r.outputs,this}addInTimeLocktime(e,t){if(this.validateInputIndex(e),t<0)throw new Error("Invalid required time locktime");const n=this.pset.copy();return n.inputs[e].requiredTimeLocktime=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInHeightLocktime(e,t){if(this.validateInputIndex(e),t<0)throw new Error("Invalid required height locktime");const n=this.pset.copy();return n.inputs[e].requiredHeightLocktime=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInTapKeySig(e,t,n,r){if(this.validateInputIndex(e),64!==t.length&&65!==t.length)throw new Error("Invalid taproot key signature length");if(32!==n.length)throw new Error("Invalid genesis block hash length");const i=this.pset.copy(),o=i.inputs[e];if(!o.getUtxo())throw new Error("Missing input witness utxo");if(void 0===o.sighashType)throw new Error("Missing input sighash type");if(!r(o.getUtxo().script.slice(2),i.getInputPreimage(e,o.sighashType,n),t))throw new Error(`Invalid taproot key signature for input ${e}`);return i.inputs[e].tapKeySig=t,i.sanityCheck(),this.pset.globals=i.globals,this.pset.inputs=i.inputs,this.pset.outputs=i.outputs,this}addInTapScriptSig(e,t,n,r){if(this.validateInputIndex(e),32!==t.pubkey.length)throw new Error("Invalid xonly pubkey length");if(32!==t.leafHash.length)throw new Error("Invalid leaf hash length");if(64!==t.signature.length&&65!==t.signature.length)throw new Error("Invalid signature length");if(32!==n.length)throw new Error("Invalid genesis block hash length");const i=this.pset.copy(),o=i.inputs[e];if(void 0===o.sighashType)throw new Error("Missing input sighash type");const a=i.getInputPreimage(e,o.sighashType,n,t.leafHash);if(!r(t.pubkey,a,t.signature))throw new Error(`Invalid taproot script signature for input ${e}`);return i.inputs[e].tapScriptSig||(i.inputs[e].tapScriptSig=[]),i.inputs[e].tapScriptSig.push(t),i.sanityCheck(),this.pset.globals=i.globals,this.pset.inputs=i.inputs,this.pset.outputs=i.outputs,this}addInTapLeafScript(e,t){this.validateInputIndex(e);const n=this.pset.copy();return n.inputs[e].tapLeafScript||(n.inputs[e].tapLeafScript=[]),n.inputs[e].tapLeafScript.push(t),n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInTapBIP32Derivation(e,t){if(this.validateInputIndex(e),33!==t.pubkey.length)throw new Error("Invalid input taproot pubkey length");const n=this.pset.copy();if(n.inputs[e].tapBip32Derivation||(n.inputs[e].tapBip32Derivation=[]),n.inputs[e].bip32Derivation.some((({pubkey:e})=>e.equals(t.pubkey))))throw new Error("Duplicated taproot bip32 derivation pubkey");return n.inputs[e].tapBip32Derivation.push(t),n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInTapInternalKey(e,t){if(this.validateInputIndex(e),32!==t.length)throw new Error("Invalid taproot internal key length");if(this.pset.inputs[e].tapInternalKey&&this.pset.inputs[e].tapInternalKey.length>0)throw new Error("Duplicated taproot internal key");const n=this.pset.copy();return n.inputs[e].tapInternalKey=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInTapMerkleRoot(e,t){if(this.validateInputIndex(e),32!==t.length)throw new Error("Invalid taproot merkle root length");if(this.pset.inputs[e].tapMerkleRoot&&this.pset.inputs[e].tapMerkleRoot.length>0)throw new Error("Duplicated taproot merkle root");const n=this.pset.copy();return n.inputs[e].tapMerkleRoot=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addInExplicitValue(e,t,n){this.validateInputIndex(e);const r=this.pset.copy();return r.inputs[e].explicitValue=t,r.inputs[e].explicitValueProof=n,r.sanityCheck(),this.pset.globals=r.globals,this.pset.inputs=r.inputs,this.pset.outputs=r.outputs,this}addInExplicitAsset(e,t,n){this.validateInputIndex(e);const r=this.pset.copy();return r.inputs[e].explicitAsset=t,r.inputs[e].explicitAssetProof=n,r.sanityCheck(),this.pset.globals=r.globals,this.pset.inputs=r.inputs,this.pset.outputs=r.outputs,this}addOutBIP32Derivation(e,t){if(this.validateOutputIndex(e),33!==t.pubkey.length)throw new Error("Invalid pubkey length");const n=this.pset.copy();if(n.outputs[e].bip32Derivation||(n.outputs[e].bip32Derivation=[]),n.outputs[e].bip32Derivation.some((({pubkey:e})=>e.equals(t.pubkey))))throw new Error("Duplicated bip32 derivation pubkey");return n.outputs[e].bip32Derivation.push(t),n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addOutRedeemScript(e,t){this.validateOutputIndex(e);const n=this.pset.copy();return n.outputs[e].redeemScript=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addOutWitnessScript(e,t){this.validateOutputIndex(e);const n=this.pset.copy();return n.outputs[e].witnessScript=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addOutTapInternalKey(e,t){if(this.validateOutputIndex(e),32!==t.length)throw new Error("Invalid taproot internal key length");if(this.pset.outputs[e].tapInternalKey&&this.pset.outputs[e].tapInternalKey.length>0)throw new Error("Duplicated taproot internal key");const n=this.pset.copy();return n.outputs[e].tapInternalKey=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addOutTapTree(e,t){if(this.validateOutputIndex(e),this.pset.outputs[e].tapTree)throw new Error("Duplicated taproot tree");const n=this.pset.copy();return n.outputs[e].tapTree=t,n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}addOutTapBIP32Derivation(e,t){if(this.validateOutputIndex(e),33!==t.pubkey.length)throw new Error("Invalid output taproot pubkey length");const n=this.pset.copy();if(n.outputs[e].tapBip32Derivation||(n.outputs[e].tapBip32Derivation=[]),n.outputs[e].bip32Derivation.some((({pubkey:e})=>e.equals(t.pubkey))))throw new Error("Duplicated taproot bip32 derivation pubkey");return n.outputs[e].tapBip32Derivation.push(t),n.sanityCheck(),this.pset.globals=n.globals,this.pset.inputs=n.inputs,this.pset.outputs=n.outputs,this}validateIssuanceInput(e){this.validateInputIndex(e);const t=this.pset.inputs[e];if(t.issuanceAssetEntropy&&t.issuanceAssetEntropy.length>0)throw new Error("Input "+e+" already has an issuance")}validateReissuanceInput(e){this.validateInputIndex(e);const t=this.pset.inputs[e];if(t.issuanceAssetEntropy&&t.issuanceAssetEntropy.length>0)throw new Error(`Input ${e} already has an issuance`);const n=t.getUtxo();if(!n)throw new Error("Input is missing prevout (non-)witness utxo");if(n.nonce.length<=1)throw new Error("Input prevout (non-)witness utxo must be confidential")}validateOutputIndex(e){if(e<0||e>=this.pset.globals.outputCount)throw new Error("Output index out of range")}validateInputIndex(e){if(e<0||e>=this.pset.globals.inputCount)throw new Error("Input index out of range")}}},93592:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.pubkeyPositionInScript=t.isP2TR=t.isP2SH=t.isP2WSH=t.isP2WPKH=t.isP2PKH=t.isP2PK=t.isP2MS=t.classifyScript=t.scriptWitnessToWitnessStack=t.witnessStackToScriptWitness=t.hasSigs=t.getPayment=void 0;const a=o(n(61798)),s=n(84434),c=n(39831),u=n(66438),l=n(75961),f=o(n(14627));function h(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}t.getPayment=function(e,t,n){switch(t){case"multisig":const t=function(e,t){const n=s.payments.p2ms({output:e});return n.pubkeys.map((e=>(t.filter((t=>t.pubkey.equals(e)))[0]||{}).signature)).filter((e=>!!e))}(e,n);return s.payments.p2ms({output:e,signatures:t});case"pubkey":return s.payments.p2pk({output:e,signature:n[0].signature});case"pubkeyhash":return s.payments.p2pkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature});case"witnesspubkeyhash":return s.payments.p2wpkh({output:e,pubkey:n[0].pubkey,signature:n[0].signature});default:throw new Error("unknown script")}},t.hasSigs=function(e,t,n){if(!t)return!1;let r;if(r=n?n.map((e=>{const n=function(e){if(65===e.length){const t=1&e[64],n=e.slice(0,33);return n[0]=2|t,n}return e.slice()}(e);return t.find((e=>e.pubkey.equals(n)))})).filter((e=>!!e)):t,r.length>e)throw new Error(`Too many signatures, needs ${e} has ${r.length}`);return r.length===e},t.witnessStackToScriptWitness=function(e){let buffer=Buffer.allocUnsafe(0);function t(e){const t=buffer.length,n=c.varuint.encodingLength(e);buffer=Buffer.concat([buffer,Buffer.allocUnsafe(n)]),c.varuint.encode(e,buffer,t)}function n(e){t(e.length),function(e){buffer=Buffer.concat([buffer,Buffer.from(e)])}(e)}var r;return t((r=e).length),r.forEach(n),buffer},t.scriptWitnessToWitnessStack=function(buffer){let e=0;function t(){const t=c.varuint.decode(buffer,e);return e+=c.varuint.decode.bytes,t}function n(){return n=t(),e+=n,buffer.slice(e-n,e);var n}return function(){const e=t(),r=[];for(let t=0;t<e;t++)r.push(n());return r}()},t.classifyScript=function(e){return(0,t.isP2WPKH)(e)?"witnesspubkeyhash":(0,t.isP2PKH)(e)?"pubkeyhash":(0,t.isP2MS)(e)?"multisig":(0,t.isP2PK)(e)?"pubkey":"nonstandard"},t.isP2MS=h(s.payments.p2ms),t.isP2PK=h(s.payments.p2pk),t.isP2PKH=h(s.payments.p2pkh),t.isP2WPKH=h(s.payments.p2wpkh),t.isP2WSH=h(s.payments.p2wsh),t.isP2SH=h(s.payments.p2sh);t.isP2TR=e=>e[0]===l.OPS.OP_1,t.pubkeyPositionInScript=function(e,t){const n=(0,u.hash160)(e),r=e.slice(1,33),i=f.decompile(t);if(null===i)throw new Error("Unknown script error");return i.findIndex((t=>"number"!=typeof t&&(t.equals(e)||t.equals(n)||t.equals(r))))},t.randomBytes=function(e){return void 0===e&&(e={}),(e.rng||a.default)(32)}},70181:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ZKPGenerator=t.ZKPValidator=void 0;const r=n(56196),i=n(76235),o=n(52560),a=n(93592),s=n(63590),c=n(51623);t.ZKPValidator=class{constructor(e){this.confidential=new r.Confidential(e)}verifyValueRangeProof(e,t,n,r){try{return this.confidential.rangeProofVerify(e,t,n,r)}catch(e){return!1}}verifyAssetSurjectionProof(e,t,n,r,i){try{return this.confidential.surjectionProofVerify(e,t,n,r,i)}catch(e){return!1}}verifyBlindValueProof(e,t,n){try{return this.confidential.rangeProofVerify(e,t,n)}catch(e){return!1}}verifyBlindAssetProof(e,t,n){try{return this.confidential.assetBlindProofVerify(e,t,n)}catch(e){return!1}}};function u(e){e.sanityCheck(),e.inputs.forEach(((e,t)=>{if(!e.getUtxo())throw new Error("Missing (non-)witness utxo for input "+t)}))}t.ZKPGenerator=class{constructor(e,...t){this.zkp=e,this.confidential=new r.Confidential(e);for(const e of t)e(this)}static WithBlindingKeysOfInputs(e){return t=>{t.inBlindingKeys=e}}static WithMasterBlindingKey(e){return t=>{t.masterBlindingKey=e}}static WithOwnedInputs(e){return t=>{t.ownedInputs=e}}computeAndAddToScalarOffset(e,t,n,r){if(n.equals(i.ZERO)&&r.equals(i.ZERO))return e.slice();const o=this.calculateScalarOffset(t,n,r);if(e.equals(i.ZERO))return o;const{ecc:a}=this.zkp,s=o.equals(i.ZERO)?o:Buffer.from(a.privateNegate(o));return e.equals(s)?i.ZERO:Buffer.from(a.privateAdd(e,o))}subtractScalars(e,t){if(t.equals(i.ZERO))return e.slice();const{ecc:n}=this.zkp,r=Buffer.from(n.privateNegate(t));return e.equals(i.ZERO)?r:Buffer.from(n.privateAdd(e,r))}lastValueCommitment(e,t,n){return this.confidential.valueCommitment(e,t,n)}lastBlindValueProof(e,t,n,r){const i=(0,a.randomBytes)(this.opts);return this.confidential.blindValueProof(e,t,n,r,i)}lastValueRangeProof(e,t,n,r,i,o,a,s){return this.confidential.rangeProof(e,t,n,r,i,o,a,s)}unblindInputs(e,t){u(e),t&&function(e,t){t.length>0&&t.forEach((t=>{if(t<0||t>=e.globals.inputCount)throw new Error("Input index out of range")}))}(e,t);const n=t||Array.from({length:e.globals.inputCount},((e,t)=>t));if(this.ownedInputs&&this.ownedInputs.length>0)return this.ownedInputs;const r=n.map((t=>{const n=e.inputs[t].getUtxo(),r=this.unblindUtxo(n);return r.index=t,r}));return this.ownedInputs=r,r}blindIssuances(e,t){return u(e),function(e,t){Object.entries(t).forEach((([t,n])=>{const r=parseInt(t,10);if(r<0||r>=e.globals.inputCount)throw new Error("Input index out of range");if(!e.inputs[r].hasIssuance()&&!e.inputs[r].hasReissuance())throw new Error("Input does not have any issuance or reissuance to blind");if(32!==n.length)throw new Error("Invalid private blinding key length for input "+r)}))}(e,t),Object.entries(t).map((([t,n])=>{const r=e.inputs[parseInt(t,10)];let o={};if(r.issuanceValue>0){const e=r.issuanceValue.toString(10),s=r.getIssuanceAssetHash(),c=(0,a.randomBytes)(this.opts),u=this.confidential.assetCommitment(s,i.ZERO),l=this.confidential.valueCommitment(e,u,c),f=(0,a.randomBytes)(this.opts),h=this.confidential.blindValueProof(e,l,u,c,f),d=this.confidential.rangeProof(e,s,l,u,c,i.ZERO,n,Buffer.from([]));o={...o,index:parseInt(t,10),issuanceAsset:s,issuanceValueCommitment:l,issuanceValueRangeProof:d,issuanceValueBlindProof:h,issuanceValueBlinder:c}}if(r.issuanceInflationKeys>0){const e=r.issuanceInflationKeys.toString(10),t=r.getIssuanceEntropy(),c=(0,s.calculateReissuanceToken)(t,!0);if(!c)throw new Error("something went wrong during the inflation token hash computation");const u=(0,a.randomBytes)(this.opts),l=this.confidential.assetCommitment(c,i.ZERO),f=this.confidential.valueCommitment(e,l,u),h=(0,a.randomBytes)(this.opts),d=this.confidential.blindValueProof(e,f,l,u,h),p=this.confidential.rangeProof(e,c,f,l,u,i.ZERO,n,Buffer.from([]));o={...o,issuanceToken:c,issuanceTokenCommitment:f,issuanceTokenRangeProof:p,issuanceTokenBlindProof:d,issuanceTokenBlinder:u}}return o}))}blindOutputs(e,t,n){u(e),n&&function(e,t){t.length>0&&t.forEach((t=>{if(t<0||t>=e.globals.outputCount)throw new Error("Output index out of range")}))}(e,n);const r=n&&n.length>0?n:e.outputs.reduce(((e,t,n)=>(t.needsBlinding()&&e.push(n),e)),[]),{assets:i,assetBlinders:o}=this.getInputAssetsAndBlinders(e);return r.map((n=>{const r=e.outputs[n],s=(0,a.randomBytes)(this.opts),c=(0,a.randomBytes)(this.opts),u=(0,a.randomBytes)(this.opts),l=r.value.toString(10),f=this.confidential.assetCommitment(r.asset,s),h=this.confidential.valueCommitment(l,f,c),d=t(),p=d.publicKey,y=this.confidential.nonceHash(r.blindingPubkey,d.privateKey),g=r.script||Buffer.from([]),b=this.confidential.rangeProof(l,r.asset,h,f,c,s,y,g),m=this.confidential.surjectionProof(r.asset,s,i,o,u),w=(0,a.randomBytes)(this.opts);return{index:n,nonce:y,nonceCommitment:p,valueCommitment:h,assetCommitment:f,valueRangeProof:b,assetSurjectionProof:m,valueBlindProof:this.confidential.blindValueProof(l,h,f,c,w),assetBlindProof:this.confidential.blindAssetProof(r.asset,f,s),valueBlinder:c,assetBlinder:s}}))}calculateScalarOffset(e,t,n){if(0===n.length)throw new Error("missing value blinder");if(t.equals(i.ZERO))return n.slice();if("0"===e)return n.slice();const{ecc:r}=this.zkp,o=Buffer.alloc(32,0);o.writeBigUInt64BE(BigInt(e),24);const a=Buffer.from(r.privateMul(t,o));return Buffer.from(r.privateNegate(n)).equals(a)?i.ZERO:Buffer.from(r.privateAdd(a,n))}unblindUtxo(e){if(1===e.nonce.length)return{index:0,value:o.ElementsValue.fromBytes(e.value).number.toString(10),asset:e.asset.slice(1),valueBlindingFactor:i.ZERO,assetBlindingFactor:i.ZERO};if(!this.inBlindingKeys&&!this.masterBlindingKey)throw new Error("Missing either input private blinding keys or SLIP-77 master blinding key");const t=this.inBlindingKeys?this.inBlindingKeys:[this.masterBlindingKey.derive(e.script).privateKey];for(const n of t)try{const t=this.confidential.unblindOutputWithKey(e,n);return{index:0,value:t.value,asset:t.asset,valueBlindingFactor:t.valueBlindingFactor,assetBlindingFactor:t.assetBlindingFactor}}catch(e){}throw new Error("Could not unblind output with any blinding key")}getInputAssetsAndBlinders(e){const t=[],n=[],r=this.maybeUnblindInUtxos(e);for(const e of r)t.push(e.asset),n.push(e.assetBlindingFactor);return e.inputs.forEach(((e,r)=>{if(e.hasIssuance()||e.hasReissuance()){const o=e.getIssuanceAssetHash();if(!o)throw new Error(`something went wrong while getting the issuance asset hash on input #${r}`);if(t.push(o),n.push(i.ZERO),!e.hasReissuance()&&e.issuanceInflationKeys>0){const o=e.getIssuanceEntropy(),a=(0,s.calculateReissuanceToken)(o,e.blindedIssuance??!0);if(!a)throw new Error(`something went wrong computing the issuance inflation keys hash on input #${r}`);t.push(a),n.push(i.ZERO)}}})),{assets:t,assetBlinders:n}}maybeUnblindInUtxos(e){if(this.ownedInputs&&this.ownedInputs.length>0)return e.inputs.map(((e,t)=>{const n=this.ownedInputs?.find((({index:e})=>e===t));if(n)return{value:"",valueBlindingFactor:Buffer.from([]),asset:n.asset,assetBlindingFactor:n.assetBlindingFactor};const r=e.getUtxo();if(!r)throw new Error(`Missing utxo for input #${t}`);return{value:"",valueBlindingFactor:Buffer.from([]),asset:c.AssetHash.fromBytes(r.asset).bytesWithoutPrefix,assetBlindingFactor:i.ZERO}}));if(!this.inBlindingKeys&&!this.masterBlindingKey)throw new Error("Missing either input private blinding keys or SLIP-77 master blinding key");return e.inputs.map((e=>{const t=e.getUtxo();try{const e=this.unblindUtxo(t);return{value:e.value,asset:e.asset,valueBlindingFactor:e.valueBlindingFactor,assetBlindingFactor:e.assetBlindingFactor}}catch(e){return{value:"",asset:t.asset,valueBlindingFactor:Buffer.from([]),assetBlindingFactor:i.ZERO}}}))}}},24457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodingLength=void 0;const r=n(75961);function i(e){return e<r.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}t.encodingLength=i,t.encode=function(buffer,e,t){const n=i(e);return 1===n?buffer.writeUInt8(e,t):2===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA1,t),buffer.writeUInt8(e,t+1)):3===n?(buffer.writeUInt8(r.OPS.OP_PUSHDATA2,t),buffer.writeUInt16LE(e,t+1)):(buffer.writeUInt8(r.OPS.OP_PUSHDATA4,t),buffer.writeUInt32LE(e,t+1)),n},t.decode=function(buffer,e){const t=buffer.readUInt8(e);let n,i;if(t<r.OPS.OP_PUSHDATA1)n=t,i=1;else if(t===r.OPS.OP_PUSHDATA1){if(e+2>buffer.length)return null;n=buffer.readUInt8(e+1),i=2}else if(t===r.OPS.OP_PUSHDATA2){if(e+3>buffer.length)return null;n=buffer.readUInt16LE(e+1),i=3}else{if(e+5>buffer.length)return null;if(t!==r.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=buffer.readUInt32LE(e+1),i=5}return{opcode:t,number:n,size:i}}},14627:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.signature=t.number=t.isCanonicalScriptSignature=t.isDefinedHashType=t.isCanonicalPubKey=t.toStack=t.fromASM=t.toASM=t.decompile=t.compile=t.isPushOnly=t.OPS=void 0;const a=o(n(52869)),s=n(75961);Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return s.OPS}});const c=o(n(24457)),u=o(n(26251)),l=o(n(78942)),f=o(n(63145)),{typeforce:h}=f,d=s.OPS.OP_RESERVED;function p(e){return f.Buffer(e)||function(e){return f.Number(e)&&(e===s.OPS.OP_0||e>=s.OPS.OP_1&&e<=s.OPS.OP_16||e===s.OPS.OP_1NEGATE)}(e)}function y(e){return f.Array(e)&&e.every(p)}function g(buffer){return 0===buffer.length?s.OPS.OP_0:1===buffer.length?buffer[0]>=1&&buffer[0]<=16?d+buffer[0]:129===buffer[0]?s.OPS.OP_1NEGATE:void 0:void 0}function b(e){return Buffer.isBuffer(e)}function m(e){return Buffer.isBuffer(e)}function w(e){if(b(e))return e;h(f.Array,e);const t=e.reduce(((e,t)=>m(t)?1===t.length&&void 0!==g(t)?e+1:e+c.encodingLength(t.length)+t.length:e+1),0),buffer=Buffer.allocUnsafe(t);let n=0;if(e.forEach((e=>{if(m(e)){const t=g(e);if(void 0!==t)return buffer.writeUInt8(t,n),void(n+=1);n+=c.encode(buffer,e.length,n),e.copy(buffer,n),n+=e.length}else buffer.writeUInt8(e,n),n+=1})),n!==buffer.length)throw new Error("Could not decode chunks");return buffer}function v(buffer){if(e=buffer,f.Array(e))return buffer;var e;h(f.Buffer,buffer);const t=[];let n=0;for(;n<buffer.length;){const e=buffer[n];if(e>s.OPS.OP_0&&e<=s.OPS.OP_PUSHDATA4){const e=c.decode(buffer,n);if(null===e)return null;if(n+=e.size,n+e.number>buffer.length)return null;const r=buffer.slice(n,n+e.number);n+=e.number;const i=g(r);void 0!==i?t.push(i):t.push(r)}else t.push(e),n+=1}return t}function _(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=y,t.compile=w,t.decompile=v,t.toASM=function(e){return b(e)&&(e=v(e)),e.map((e=>{if(m(e)){const t=g(e);if(void 0===t)return e.toString("hex");e=t}return s.REVERSE_OPS[e]})).join(" ")},t.fromASM=function(e){return h(f.String,e),w(e.split(" ").map((e=>void 0!==s.OPS[e]?s.OPS[e]:(h(f.Hex,e),Buffer.from(e,"hex")))))},t.toStack=function(e){return e=v(e),h(y,e),e.map((e=>m(e)?e:e===s.OPS.OP_0?Buffer.allocUnsafe(0):u.encode(e-d)))},t.isCanonicalPubKey=function(buffer){return f.isPoint(buffer)},t.isDefinedHashType=_,t.isCanonicalScriptSignature=function(buffer){return!!Buffer.isBuffer(buffer)&&(!!_(buffer[buffer.length-1])&&a.check(buffer.slice(0,-1)))},t.number=u,t.signature=l},26251:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0,t.decode=function(buffer,e,t){e=e||4,t=void 0===t||t;const n=buffer.length;if(0===n)return 0;if(n>e)throw new TypeError("Script number overflow");if(t&&0==(127&buffer[n-1])&&(n<=1||0==(128&buffer[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const e=buffer.readUInt32LE(0),t=buffer.readUInt8(4);return 128&t?-(4294967296*(-129&t)+e):4294967296*t+e}let r=0;for(let e=0;e<n;++e)r|=buffer[e]<<8*e;return 128&buffer[n-1]?-(r&~(128<<8*(n-1))):r},t.encode=function(e){let t=Math.abs(e);const n=(r=t)>2147483647?5:r>8388607?4:r>32767?3:r>127?2:r>0?1:0;var r;const buffer=Buffer.allocUnsafe(n),i=e<0;for(let e=0;e<n;++e)buffer.writeUInt8(255&t,e),t>>=8;return 128&buffer[n-1]?buffer.writeUInt8(i?128:0,n-1):i&&(buffer[n-1]|=128),buffer}},78942:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;const a=o(n(52869)),s=o(n(63145)),{typeforce:c}=s,u=Buffer.alloc(1,0);function l(e){let t=0;for(;0===e[t];)++t;return t===e.length?u:128&(e=e.slice(t))[0]?Buffer.concat([u,e],1+e.length):e}function f(e){0===e[0]&&(e=e.slice(1));const buffer=Buffer.alloc(32,0),t=Math.max(0,32-e.length);return e.copy(buffer,t),buffer}t.decode=function(buffer){const e=buffer.readUInt8(buffer.length-1),t=-129&e;if(t<=0||t>=4)throw new Error("Invalid hashType "+e);const n=a.decode(buffer.slice(0,-1)),r=f(n.r),i=f(n.s);return{signature:Buffer.concat([r,i],64),hashType:e}},t.encode=function(e,t){c({signature:s.BufferN(64),hashType:s.UInt8},{signature:e,hashType:t});const n=-129&t;if(n<=0||n>=4)throw new Error("Invalid hashType "+t);const r=Buffer.allocUnsafe(1);r.writeUInt8(t,0);const i=l(e.slice(0,32)),o=l(e.slice(32,64));return Buffer.concat([a.encode(i,o),r])}},74624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},73694:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.sha256Midstate=t.hash=t.Hash=t.blockSize=t.digestLength=void 0,t.digestLength=32,t.blockSize=64;const r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(e,t,n,i,o){let a,s,c,u,l,f,h,d,p,y,g,b,m;for(;o>=64;){for(a=t[0],s=t[1],c=t[2],u=t[3],l=t[4],f=t[5],h=t[6],d=t[7],y=0;y<16;y++)g=i+4*y,e[y]=(255&n[g])<<24|(255&n[g+1])<<16|(255&n[g+2])<<8|255&n[g+3];for(y=16;y<64;y++)p=e[y-2],b=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=e[y-15],m=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[y]=(b+e[y-7]|0)+(m+e[y-16]|0);for(y=0;y<64;y++)b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&h)|0)+(d+(r[y]+e[y]|0)|0)|0,m=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&s^a&c^s&c)|0,d=h,h=f,f=l,l=u+b|0,u=c,c=s,s=a,a=b+m|0;t[0]+=a,t[1]+=s,t[2]+=c,t[3]+=u,t[4]+=l,t[5]+=f,t[6]+=h,t[7]+=d,i+=64,o-=64}return i}class o{constructor(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.finished=!1,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(i(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=i(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this}finish(e){if(!this.finished){const e=this.bytesHashed,t=this.bufferLength,n=e/536870912|0,r=e<<3,o=e%64<56?64:128;this.buffer[t]=128;for(let e=t+1;e<o-8;e++)this.buffer[e]=0;this.buffer[o-8]=n>>>24&255,this.buffer[o-7]=n>>>16&255,this.buffer[o-6]=n>>>8&255,this.buffer[o-5]=n>>>0&255,this.buffer[o-4]=r>>>24&255,this.buffer[o-3]=r>>>16&255,this.buffer[o-2]=r>>>8&255,this.buffer[o-1]=r>>>0&255,i(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}}t.Hash=o,t.hash=function(e){const t=(new o).update(e),n=t.digest();return t.clean(),n},t.sha256Midstate=function(e){let n=e;e.length>t.blockSize&&(n=e.slice(0,t.blockSize));const r=new o;r.reset(),r.update(Uint8Array.from(n));const i=Buffer.alloc(t.digestLength);for(let e=0;e<8;e++)i[4*e+0]=r.state[e]>>>24&255,i[4*e+1]=r.state[e]>>>16&255,i[4*e+2]=r.state[e]>>>8&255,i[4*e+3]=r.state[e]>>>0&255;return i}},76235:function(e,t,n){"use strict";var Buffer=n(48764).Buffer,r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=t.ZERO=void 0;const a=n(39831),s=o(n(66438)),c=o(n(14627)),u=n(14627),l=o(n(63145)),{typeforce:f}=l,h=Buffer.allocUnsafe(0),d=[];t.ZERO=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex");const p=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),y=1<<31>>>0,g=1<<30>>>0,b=1073741823,m=4294967295,w=Buffer.from("ffffffffffffffff","hex"),v={script:h,asset:t.ZERO,nonce:t.ZERO,valueBuffer:w};class _{constructor(){this.version=1,this.locktime=0,this.flag=0,this.ins=[],this.outs=[]}static fromBuffer(buffer,e){const t=new a.BufferReader(buffer),n=new _;n.version=t.readInt32(),n.flag=t.readUInt8();let r=!1;n.flag&_.ADVANCED_TRANSACTION_FLAG&&(r=!0);const i=t.readVarInt();for(let e=0;e<i;++e){const e=t.readSlice(32);let r=t.readUInt32();const i=t.readVarSlice(),o=t.readUInt32();let a,s=!1;r!==m&&(r&y&&(a=t.readIssuance()),r&g&&(s=!0),r&=b),n.ins.push({hash:e,index:r,script:i,sequence:o,witness:d,isPegin:s,issuance:a,peginWitness:d,issuanceRangeProof:h,inflationRangeProof:h})}const o=t.readVarInt();for(let e=0;e<o;++e){const e=t.readConfidentialAsset(),r=t.readConfidentialValue(),i=t.readConfidentialNonce(),o=t.readVarSlice();n.outs.push({asset:e,value:r,nonce:i,script:o,rangeProof:h,surjectionProof:h})}if(n.locktime=t.readUInt32(),r){for(let e=0;e<i;++e){const{witness:r,peginWitness:i,issuanceRangeProof:o,inflationRangeProof:a}=t.readConfidentialInFields();n.ins[e].witness=r,n.ins[e].peginWitness=i,n.ins[e].issuanceRangeProof=o,n.ins[e].inflationRangeProof=a}for(let e=0;e<o;++e){const{rangeProof:r,surjectionProof:i}=t.readConfidentialOutFields();n.outs[e].rangeProof=r,n.outs[e].surjectionProof=i}}if(e)return n;if(t.offset!==buffer.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return _.fromBuffer(Buffer.from(e,"hex"),!1)}static isCoinbaseHash(buffer){f(l.Hash256bit,buffer);for(let e=0;e<32;++e)if(0!==buffer[e])return!1;return!0}isCoinbase(){return 1===this.ins.length&&_.isCoinbaseHash(this.ins[0].hash)}validateIssuance(e,t,n,r){return f(l.Hash256bit,e),f(l.Hash256bit,t),f(l.oneOf(l.ConfidentialValue,l.ConfidentialCommitment,l.BufferOne),n),f(l.oneOf(l.ConfidentialValue,l.ConfidentialCommitment,l.BufferOne),r),!0}addInput(e,t,n,r,i){f(l.tuple(l.Hash256bit,l.UInt32,l.maybe(l.UInt32),l.maybe(l.Buffer),l.maybe(l.Object)),arguments);let o=!1;if(t!==m){if(t&y){if(!i)throw new Error("Issuance flag has been set but the Issuance object is not defined or invalid");this.validateIssuance(i.assetBlindingNonce,i.assetEntropy,i.assetAmount,i.tokenAmount)}t&g&&(o=!0),t&=b}return this.ins.push({hash:e,index:t,isPegin:o,issuance:i,script:r||h,witness:d,peginWitness:d,issuanceRangeProof:h,inflationRangeProof:h,sequence:n||_.DEFAULT_SEQUENCE})-1}addOutput(e,t,n,r,i,o){return f(l.tuple(l.Buffer,l.oneOf(l.ConfidentialValue,l.ConfidentialCommitment),l.AssetBufferWithFlag,l.oneOf(l.ConfidentialCommitment,l.BufferOne),l.maybe(l.Buffer),l.maybe(l.Buffer)),arguments),this.outs.push({script:e,value:t,asset:n,nonce:r||h,rangeProof:i||h,surjectionProof:o||h})-1}hasWitnesses(){return 1===this.flag||this.ins.some((e=>0!==e.witness.length))||this.outs.some((e=>0!==e.rangeProof.length&&0!==e.surjectionProof.length))}weight(){return 3*this.__byteLength(!1)+this.__byteLength(!0)}virtualSize(){const e=(this.weight()+4-1)/4;return Math.floor(e)}byteLength(e){return this.__byteLength(e||!0)}clone(){const e=new _;return e.version=this.version,e.locktime=this.locktime,e.flag=this.flag,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness,isPegin:e.isPegin,issuance:e.issuance,peginWitness:e.peginWitness,issuanceRangeProof:e.issuanceRangeProof,inflationRangeProof:e.inflationRangeProof}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value,asset:e.asset,nonce:e.nonce,rangeProof:e.rangeProof,surjectionProof:e.surjectionProof}))),e}hashForSignature(e,t,n){if(f(l.tuple(l.UInt32,l.Buffer,l.Number),arguments),e>=this.ins.length)return p;const r=c.compile(c.decompile(t).filter((e=>e!==u.OPS.OP_CODESEPARATOR))),i=this.clone();if((31&n)===_.SIGHASH_NONE)i.outs=[],i.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}));else if((31&n)===_.SIGHASH_SINGLE){if(e>=this.outs.length)return p;i.outs.length=e+1;for(let t=0;t<e;t++)i.outs[t]=v;i.ins.forEach(((t,n)=>{n!==e&&(t.sequence=0)}))}n&_.SIGHASH_ANYONECANPAY?(i.ins=[i.ins[e]],i.ins[0].script=r):(i.ins.forEach((e=>{e.script=h})),i.ins[e].script=r);const buffer=Buffer.allocUnsafe(i.__byteLength(!1,!0)+4);return buffer.writeInt32LE(n,buffer.length-4),i.__toBuffer(buffer,0,!1,!0,!0),s.hash256(buffer)}hashForWitnessV1(e,t,n,r,i,o,c){if(f(l.tuple(l.UInt32,f.arrayOf(l.Buffer),f.arrayOf(l.Object),l.UInt32),arguments),t.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const u=r===_.SIGHASH_DEFAULT?_.SIGHASH_ALL:r&_.SIGHASH_OUTPUT_MASK,d=(r&_.SIGHASH_INPUT_MASK)===_.SIGHASH_ANYONECANPAY,p=u===_.SIGHASH_NONE,y=u===_.SIGHASH_SINGLE;let g=h,b=h,m=h,w=h,v=h,O=h,P=h,I=h,T=h;if(d||(g=function(e){const t=a.BufferWriter.withCapacity(36*e.length);for(const n of e)t.writeSlice(n.hash),t.writeUInt32(n.index);return s.sha256(t.end())}(this.ins),O=function(e){const t=a.BufferWriter.withCapacity(e.length);for(const n of e)t.writeUInt8(S(n));return s.sha256(t.end())}(this.ins),T=function(e){const t=e.reduce(((e,t)=>e+t.asset.length+t.value.length),0),n=a.BufferWriter.withCapacity(t);for(const t of e)n.writeSlice(t.asset),n.writeSlice(t.value);return s.sha256(n.end())}(n),P=function(e){const t=e=>(0,a.varSliceSize)(e.issuanceRangeProof||Buffer.alloc(1))+(0,a.varSliceSize)(e.inflationRangeProof||Buffer.alloc(1)),n=e.reduce(((e,n)=>e+t(n)),0),r=a.BufferWriter.withCapacity(n);for(const t of e)r.writeVarSlice(t.issuanceRangeProof||Buffer.of(0)),r.writeVarSlice(t.inflationRangeProof||Buffer.of(0));return s.sha256(r.end())}(this.ins),v=function(e){const t=a.BufferWriter.withCapacity(e.map(a.varSliceSize).reduce(((e,t)=>e+t)));return e.forEach((e=>t.writeVarSlice(e))),s.sha256(t.end())}(t),b=function(e){const t=a.BufferWriter.withCapacity(4*e.length);return e.forEach((e=>t.writeUInt32(e.sequence))),s.sha256(t.end())}(this.ins),w=function(e){const t=e.reduce(((e,t)=>t.issuance?e+k(t):e+1),0),n=0===t?e.length:t,r=a.BufferWriter.withCapacity(n);return e.forEach((e=>{e.issuance?(r.writeSlice(e.issuance.assetBlindingNonce),r.writeSlice(e.issuance.assetEntropy),r.writeSlice(e.issuance.assetAmount),r.writeSlice(e.issuance.tokenAmount)):r.writeSlice(Buffer.of(0))})),s.sha256(r.end())}(this.ins)),p||y){if(y&&e<this.outs.length){const t=this.outs[e];m=A([t]),I=E([t])}}else m=A(this.outs),I=E(this.outs);const x=(o?2:0)+(c?1:0),N=74+(d?37+n[e].asset.length+n[e].value.length+(0,a.varSliceSize)(t[e])+4+(this.ins[e].issuance?k(this.ins[e]):1):4)+(d?0:224)+(p||y?0:64)+(c?32:0)+(y?64:0)+(o?37:0),R=a.BufferWriter.withCapacity(N);if(R.writeSlice(i),R.writeSlice(i),R.writeUInt8(r),R.writeInt32(this.version),R.writeUInt32(this.locktime),d||(R.writeSlice(O),R.writeSlice(g),R.writeSlice(T),R.writeSlice(v),R.writeSlice(b),R.writeSlice(w),R.writeSlice(P)),p||y||(R.writeSlice(m),R.writeSlice(I)),R.writeUInt8(x),d){const r=this.ins[e];if(R.writeUInt8(S(r)),R.writeSlice(r.hash),R.writeUInt32(r.index),R.writeSlice(n[e].asset),R.writeSlice(n[e].value),R.writeVarSlice(t[e]),R.writeUInt32(r.sequence),r.issuance){R.writeSlice(r.issuance.assetBlindingNonce),R.writeSlice(r.issuance.assetEntropy),R.writeSlice(r.issuance.assetAmount),R.writeSlice(r.issuance.tokenAmount);const e=a.BufferWriter.withCapacity((0,a.varSliceSize)(r.issuanceRangeProof)+(0,a.varSliceSize)(r.inflationRangeProof));e.writeVarSlice(r.issuanceRangeProof||Buffer.of(0)),e.writeVarSlice(r.inflationRangeProof||Buffer.of(0));const t=s.sha256(e.end());R.writeSlice(t)}else R.writeSlice(Buffer.of(0))}else R.writeUInt32(e);if(c){const e=a.BufferWriter.withCapacity((0,a.varSliceSize)(c));e.writeVarSlice(c),R.writeSlice(s.sha256(e.end()))}return y&&(R.writeSlice(m),R.writeSlice(I)),o&&(R.writeSlice(o),R.writeUInt8(0),R.writeUInt32(4294967295)),s.taggedHash("TapSighash/elements",R.end())}hashForWitnessV0(e,n,r,i){f(l.tuple(l.UInt32,l.Buffer,l.Buffer,l.UInt32),arguments);let o=t.ZERO,c=t.ZERO,u=t.ZERO,h=t.ZERO;if(!(i&_.SIGHASH_ANYONECANPAY)){const e=a.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)})),c=s.hash256(e.end())}if(!(i&_.SIGHASH_ANYONECANPAY)&&(31&i)!==_.SIGHASH_SINGLE&&(31&i)!==_.SIGHASH_NONE){const e=a.BufferWriter.withCapacity(4*this.ins.length);this.ins.forEach((t=>{e.writeUInt32(t.sequence)})),u=s.hash256(e.end())}if(!(i&_.SIGHASH_ANYONECANPAY)){const e=this.ins.reduce(((e,t)=>t.issuance?e+k(t):e+1),0),t=0===e?this.ins.length:e,n=a.BufferWriter.withCapacity(t);this.ins.forEach((e=>{e.issuance?(n.writeSlice(e.issuance.assetBlindingNonce),n.writeSlice(e.issuance.assetEntropy),n.writeSlice(e.issuance.assetAmount),n.writeSlice(e.issuance.tokenAmount)):n.writeSlice(Buffer.of(0))})),h=s.hash256(n.end())}if((31&i)!==_.SIGHASH_SINGLE&&(31&i)!==_.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+t.asset.length+t.value.length+t.nonce.length+(0,a.varSliceSize)(t.script)),0),t=a.BufferWriter.withCapacity(e);this.outs.forEach((e=>{t.writeSlice(e.asset),t.writeSlice(e.value),t.writeSlice(e.nonce),t.writeVarSlice(e.script)})),o=s.hash256(t.end())}else if((31&i)===_.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e],n=t.asset.length+t.value.length+t.nonce.length+(0,a.varSliceSize)(t.script),r=a.BufferWriter.withCapacity(n);r.writeSlice(t.asset),r.writeSlice(t.value),r.writeSlice(t.nonce),r.writeVarSlice(t.script),o=s.hash256(r.end())}const d=this.ins[e],p=void 0!==d.issuance,y=4+c.length+u.length+h.length+d.hash.length+4+(0,a.varSliceSize)(n)+r.length+4+o.length+k(d)+4+4,g=a.BufferWriter.withCapacity(y);return g.writeUInt32(this.version),g.writeSlice(c),g.writeSlice(u),g.writeSlice(h),g.writeSlice(d.hash),g.writeUInt32(d.index),g.writeVarSlice(n),g.writeSlice(r),g.writeUInt32(d.sequence),p&&(g.writeSlice(d.issuance.assetBlindingNonce),g.writeSlice(d.issuance.assetEntropy),g.writeSlice(d.issuance.assetAmount),g.writeSlice(d.issuance.tokenAmount)),g.writeSlice(o),g.writeUInt32(this.locktime),g.writeUInt32(i),s.hash256(g.end())}getHash(e){return e&&this.isCoinbase()?Buffer.alloc(32,0):s.hash256(this.__toBuffer(void 0,void 0,e,!0))}getId(){return(0,a.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(buffer,e){return this.__toBuffer(buffer,e,!0,!1)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){f(l.tuple(l.Number,l.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){f(l.tuple(l.Number,[l.Buffer]),arguments),this.ins[e].witness=t}setPeginWitness(e,t){f(l.tuple(l.Number,[l.Buffer]),arguments),this.ins[e].peginWitness=t}setInputIssuanceRangeProof(e,t){if(f(l.tuple(l.Buffer),arguments),void 0===this.ins[e].issuance)throw new Error("Issuance not set for input #"+e);this.ins[e].issuanceRangeProof=t}setInputInflationRangeProof(e,t){if(f(l.tuple(l.Buffer),arguments),void 0===this.ins[e].issuance)throw new Error("Issuance not set for input #"+e);this.ins[e].inflationRangeProof=t}setOutputNonce(e,t){f(l.tuple(l.Number,l.Buffer),arguments),this.outs[e].nonce=t}setOutputRangeProof(e,t){f(l.tuple(l.Number,l.Buffer),arguments),this.outs[e].rangeProof=t}setOutputSurjectionProof(e,t){f(l.tuple(l.Number,l.Buffer),arguments),this.outs[e].surjectionProof=t}__byteLength(e,t){let n=8+(t?0:1)+a.varuint.encodingLength(this.ins.length)+a.varuint.encodingLength(this.outs.length);for(const e of this.ins)n+=40+(0,a.varSliceSize)(e.script),e.issuance&&(n+=64+e.issuance.assetAmount.length+e.issuance.tokenAmount.length);for(const e of this.outs)n+=e.asset.length+e.value.length+e.nonce.length+(0,a.varSliceSize)(e.script);if(e&&this.hasWitnesses()){for(const e of this.ins){n+=(0,a.varSliceSize)(e.issuanceRangeProof),n+=(0,a.varSliceSize)(e.inflationRangeProof),n+=a.varuint.encodingLength(e.witness.length);for(const t of e.witness)n+=(0,a.varSliceSize)(t);n+=a.varuint.encodingLength((e.peginWitness||[]).length);for(const t of e.peginWitness||[])n+=(0,a.varSliceSize)(t)}for(const e of this.outs)n+=(0,a.varSliceSize)(e.surjectionProof),n+=(0,a.varSliceSize)(e.rangeProof)}return n}__toBuffer(buffer,e,t,n,r){buffer||(buffer=Buffer.allocUnsafe(this.__byteLength(t,r)));const i=new a.BufferWriter(buffer,e||0);i.writeInt32(this.version);const o=t&&this.hasWitnesses();if(!r){let e=0;o&&!n&&(e|=_.ADVANCED_TRANSACTION_FLAG),i.writeUInt8(e)}return i.writeVarInt(this.ins.length),this.ins.forEach((e=>{i.writeSlice(e.hash);let t=e.index;e.issuance&&(t=(t|y)>>>0),e.isPegin&&(t=(t|g)>>>0),i.writeUInt32(t),i.writeVarSlice(e.script),i.writeUInt32(e.sequence),e.issuance&&(i.writeSlice(e.issuance.assetBlindingNonce),i.writeSlice(e.issuance.assetEntropy),i.writeSlice(e.issuance.assetAmount),i.writeSlice(e.issuance.tokenAmount))})),i.writeVarInt(this.outs.length),this.outs.forEach((e=>{const t=r&&o?Buffer.alloc(1):e.value;i.writeSlice(e.asset),i.writeSlice(t),i.writeSlice(e.nonce),r&&o&&i.writeUInt64(0),i.writeVarSlice(e.script)})),i.writeUInt32(this.locktime),!r&&o&&(this.ins.forEach((e=>{i.writeConfidentialInFields(e)})),this.outs.forEach((e=>{i.writeConfidentialOutFields(e)}))),void 0!==e?buffer.slice(e,i.offset):buffer}}function E(e){const t=e.reduce(((e,t)=>e+(e=>(0,a.varSliceSize)(e.rangeProof||Buffer.alloc(0))+(0,a.varSliceSize)(e.surjectionProof||Buffer.alloc(0)))(t)),0),n=a.BufferWriter.withCapacity(t);for(const t of e)n.writeVarSlice(t.surjectionProof||Buffer.of(0)),n.writeVarSlice(t.rangeProof||Buffer.of(0));return s.sha256(n.end())}function S(e){return(void 0!==e.issuance?y>>>24:0)|(e.isPegin?g>>>24:0)}function k(e){return e.issuance?e.issuance.assetBlindingNonce.length+e.issuance.assetEntropy.length+e.issuance.assetAmount.length+e.issuance.tokenAmount.length:0}function A(e){const t=e.reduce(((e,t)=>e+t.asset.length+t.value.length+t.nonce.length+(0,a.varSliceSize)(t.script)),0),n=a.BufferWriter.withCapacity(t);return e.forEach((e=>{n.writeSlice(e.asset),n.writeSlice(e.value),n.writeSlice(e.nonce),n.writeVarSlice(e.script)})),s.sha256(n.end())}t.Transaction=_,_.DEFAULT_SEQUENCE=4294967295,_.SIGHASH_DEFAULT=0,_.SIGHASH_ALL=1,_.SIGHASH_NONE=2,_.SIGHASH_SINGLE=3,_.SIGHASH_ANYONECANPAY=128,_.SIGHASH_OUTPUT_MASK=3,_.SIGHASH_INPUT_MASK=128,_.ADVANCED_TRANSACTION_FLAG=1},63145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneOf=t.Null=t.BufferN=t.Function=t.UInt32=t.UInt8=t.tuple=t.maybe=t.Object=t.Hex=t.Buffer=t.String=t.Boolean=t.Array=t.Number=t.BufferOne=t.ConfidentialValue=t.AssetBuffer=t.AssetBufferWithFlag=t.ConfidentialCommitment=t.Hash256bit=t.Hash160bit=t.Buffer256bit=t.isTaptree=t.isTapleaf=t.TAPLEAF_VERSION_MASK=t.Network=t.ECPoint=t.Satoshi=t.Signer=t.BIP32Path=t.UInt31=t.isPoint=t.typeforce=void 0;const r=n(48764);t.typeforce=n(2401);const i=r.Buffer.alloc(32,0),o=r.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");t.isPoint=function(e){if(!r.Buffer.isBuffer(e))return!1;if(e.length<33)return!1;const t=e[0],n=e.slice(1,33);if(0===n.compare(i))return!1;if(n.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;const a=e.slice(33);return 0!==a.compare(i)&&(!(a.compare(o)>=0)&&(4===t&&65===e.length))};const a=Math.pow(2,31)-1;function s(e){return t.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return t.typeforce.UInt32(e)&&e<=a},t.BIP32Path=s,s.toJSON=()=>"BIP32 derivation path",t.Signer=function(e){return(t.typeforce.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign};function c(e){return!(!e||!("output"in e))&&(!!r.Buffer.isBuffer(e.output)&&(void 0===e.version||(e.version&t.TAPLEAF_VERSION_MASK)===e.version))}t.Satoshi=function(e){return t.typeforce.UInt53(e)&&e<=21e14},t.ECPoint=t.typeforce.quacksLike("Point"),t.Network=t.typeforce.compile({messagePrefix:t.typeforce.oneOf(t.typeforce.Buffer,t.typeforce.String),bip32:{public:t.typeforce.UInt32,private:t.typeforce.UInt32},pubKeyHash:t.typeforce.UInt8,scriptHash:t.typeforce.UInt8,wif:t.typeforce.UInt8,assetHash:t.typeforce.String,confidentialPrefix:t.typeforce.UInt8,name:t.typeforce.String}),t.TAPLEAF_VERSION_MASK=254,t.isTapleaf=c,t.isTaptree=function e(n){return(0,t.Array)(n)?2===n.length&&n.every((t=>e(t))):c(n)},t.Buffer256bit=t.typeforce.BufferN(32),t.Hash160bit=t.typeforce.BufferN(20),t.Hash256bit=t.typeforce.BufferN(32),t.ConfidentialCommitment=t.typeforce.BufferN(33),t.AssetBufferWithFlag=t.typeforce.BufferN(33),t.AssetBuffer=t.typeforce.BufferN(32),t.ConfidentialValue=t.typeforce.BufferN(9),t.BufferOne=t.typeforce.BufferN(1),t.Number=t.typeforce.Number,t.Array=t.typeforce.Array,t.Boolean=t.typeforce.Boolean,t.String=t.typeforce.String,t.Buffer=t.typeforce.Buffer,t.Hex=t.typeforce.Hex,t.Object=t.typeforce.Object,t.maybe=t.typeforce.maybe,t.tuple=t.typeforce.tuple,t.UInt8=t.typeforce.UInt8,t.UInt32=t.typeforce.UInt32,t.Function=t.typeforce.Function,t.BufferN=t.typeforce.BufferN,t.Null=t.typeforce.Null,t.oneOf=t.typeforce.oneOf},52560:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsValue=void 0;const r=n(39831);class i{constructor(e,t){this.prefix=e,this.value=t}static fromNumber(e){if(e<0)throw new Error("Invalid negative number");const t=Buffer.allocUnsafe(8);return(0,r.writeUInt64LE)(t,e,0),new i(this.UNCONFIDENTIAL_PREFIX,t.reverse())}static fromHex(e){const t=Buffer.from(e,"hex");return this.fromBytes(t)}static fromBytes(e){if(8===e.length)return new i(i.UNCONFIDENTIAL_PREFIX,e);const t=e.length>0?e[0]:0,n=e.length>1?e.slice(1):Buffer.alloc(0);if(t!==i.UNCONFIDENTIAL_PREFIX&&!i.CONFIDENTIAL_PREFIXES.includes(t))throw new Error("Invalid value prefix");if(t===i.UNCONFIDENTIAL_PREFIX&&8!==n.length)throw new Error("Invalid unconfidential value length");if(i.CONFIDENTIAL_PREFIXES.includes(t)&&32!==n.length)throw new Error("Invalid confidential value length");return new i(t,n)}get hex(){return Buffer.concat([Buffer.of(this.prefix),this.value]).toString("hex")}get bytes(){return Buffer.concat([Buffer.of(this.prefix),this.value])}get number(){if(this.prefix!==i.UNCONFIDENTIAL_PREFIX)throw new Error("Invalid value prefix");return(0,r.readUInt64LE)((e=this.value,Buffer.from(e).reverse()),0);var e}get isConfidential(){return this.prefix!==i.UNCONFIDENTIAL_PREFIX}}t.ElementsValue=i,i.UNCONFIDENTIAL_PREFIX=1,i.CONFIDENTIAL_PREFIXES=[8,9]},72378:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",u="[object Null]",l="[object Object]",f="[object Proxy]",h="[object Undefined]",d=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[o]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[s]=y["[object Map]"]=y["[object Number]"]=y[l]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,b="object"==typeof self&&self&&self.Object===Object&&self,m=g||b||Function("return this")(),w=t&&!t.nodeType&&t,v=w&&e&&!e.nodeType&&e,_=v&&v.exports===w,E=_&&g.process,S=function(){try{var e=v&&v.require&&v.require("util").types;return e||E&&E.binding&&E.binding("util")}catch(e){}}(),k=S&&S.isTypedArray;var A,O,P,I=Array.prototype,T=Function.prototype,x=Object.prototype,N=m["__core-js_shared__"],R=T.toString,C=x.hasOwnProperty,B=(A=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",L=x.toString,U=R.call(Object),j=RegExp("^"+R.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=_?m.Buffer:void 0,D=m.Symbol,M=m.Uint8Array,H=Buffer?Buffer.allocUnsafe:void 0,F=(O=Object.getPrototypeOf,P=Object,function(e){return O(P(e))}),z=Object.create,K=x.propertyIsEnumerable,q=I.splice,V=D?D.toStringTag:void 0,W=function(){try{var e=me(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),G=Buffer?Buffer.isBuffer:void 0,$=Math.max,Y=Date.now,Z=me(m,"Map"),X=me(Object,"create"),J=function(){function e(){}return function(t){if(!xe(t))return{};if(z)return z(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function re(e,t){var n=Ae(e),r=!n&&ke(e),i=!n&&!r&&Pe(e),o=!n&&!r&&!i&&Re(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!C.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||we(u,c))||s.push(u);return s}function ie(e,t,n){(void 0!==n&&!Se(e[t],n)||void 0===n&&!(t in e))&&se(e,t,n)}function oe(e,t,n){var r=e[t];C.call(e,t)&&Se(r,n)&&(void 0!==n||t in e)||se(e,t,n)}function ae(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function se(e,t,n){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Q.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},Q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Q.prototype.get=function(e){var t=this.__data__;if(X){var n=t[e];return n===r?void 0:n}return C.call(t,e)?t[e]:void 0},Q.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:C.call(t,e)},Q.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&void 0===t?r:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=ae(t,e);return!(n<0)&&(n==t.length-1?t.pop():q.call(t,n,1),--this.size,!0)},ee.prototype.get=function(e){var t=this.__data__,n=ae(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return ae(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,r=ae(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(Z||ee),string:new Q}},te.prototype.delete=function(e){var t=be(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return be(this,e).get(e)},te.prototype.has=function(e){return be(this,e).has(e)},te.prototype.set=function(e,t){var n=be(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var r=n.__data__;if(!Z||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};var ce,ue=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[ce?a:++r];if(!1===t(i[s],s,i))break}return e};function le(e){return null==e?void 0===e?h:u:V&&V in Object(e)?function(e){var t=C.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(e){}var i=L.call(e);r&&(t?e[V]=n:delete e[V]);return i}(e):function(e){return L.call(e)}(e)}function fe(e){return Ne(e)&&le(e)==o}function he(e){return!(!xe(e)||function(e){return!!B&&B in e}(e))&&(Ie(e)?j:d).test(function(e){if(null!=e){try{return R.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function de(e){if(!xe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ve(e),n=[];for(var r in e)("constructor"!=r||!t&&C.call(e,r))&&n.push(r);return n}function pe(e,t,n,r,i){e!==t&&ue(t,(function(o,a){if(i||(i=new ne),xe(o))!function(e,t,n,r,i,o,a){var s=_e(e,n),c=_e(t,n),u=a.get(c);if(u)return void ie(e,n,u);var f=o?o(s,c,n+"",e,t,a):void 0,h=void 0===f;if(h){var d=Ae(c),p=!d&&Pe(c),y=!d&&!p&&Re(c);f=c,d||p||y?Ae(s)?f=s:Ne(w=s)&&Oe(w)?f=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(s):p?(h=!1,f=function(buffer,e){if(e)return buffer.slice();var t=buffer.length,n=H?H(t):new buffer.constructor(t);return buffer.copy(n),n}(c,!0)):y?(h=!1,g=c,buffer=!0?(b=g.buffer,m=new b.constructor(b.byteLength),new M(m).set(new M(b)),m):g.buffer,f=new g.constructor(buffer,g.byteOffset,g.length)):f=[]:function(e){if(!Ne(e)||le(e)!=l)return!1;var t=F(e);if(null===t)return!0;var n=C.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&R.call(n)==U}(c)||ke(c)?(f=s,ke(s)?f=function(e){return function(e,t,n,r){var i=!n;n||(n={});var o=-1,a=t.length;for(;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?se(n,s,c):oe(n,s,c)}return n}(e,Ce(e))}(s):xe(s)&&!Ie(s)||(f=function(e){return"function"!=typeof e.constructor||ve(e)?{}:J(F(e))}(c))):h=!1}var g,buffer,b,m;var w;h&&(a.set(c,f),i(f,c,r,o,a),a.delete(c));ie(e,n,f)}(e,t,a,n,pe,r,i);else{var s=r?r(_e(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),ie(e,a,s)}}),Ce)}function ye(e,t){return Ee(function(e,t,n){return t=$(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=$(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,Ue),e+"")}var ge=W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ue;function be(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}function we(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&p.test(e))&&e>-1&&e%1==0&&e<t}function ve(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||x)}function _e(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ee=function(e){var t=0,n=0;return function(){var r=Y(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ge);function Se(e,t){return e===t||e!=e&&t!=t}var ke=fe(function(){return arguments}())?fe:function(e){return Ne(e)&&C.call(e,"callee")&&!K.call(e,"callee")},Ae=Array.isArray;function Oe(e){return null!=e&&Te(e.length)&&!Ie(e)}var Pe=G||function(){return!1};function Ie(e){if(!xe(e))return!1;var t=le(e);return t==s||t==c||t==a||t==f}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ne(e){return null!=e&&"object"==typeof e}var Re=k?function(e){return function(t){return e(t)}}(k):function(e){return Ne(e)&&Te(e.length)&&!!y[le(e)]};function Ce(e){return Oe(e)?re(e,!0):de(e)}var Be,Le=(Be=function(e,t,n){pe(e,t,n)},ye((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Be.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!xe(n))return!1;var r=typeof t;return!!("number"==r?Oe(n)&&we(t,n.length):"string"==r&&t in n)&&Se(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Be(e,a,n,i)}return e})));function Ue(e){return e}e.exports=Le},25030:(e,t,n)=>{var r=9007199254740991,i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")();function f(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var h=Object.prototype,d=h.hasOwnProperty,p=h.toString,y=l.Symbol,g=h.propertyIsEnumerable,b=y?y.isConcatSpreadable:void 0,m=Math.max;function w(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=v),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?w(s,t-1,n,r,i):f(i,s):r||(i[i.length]=s)}return i}function v(e){return E(e)||function(e){return function(e){return S(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?p.call(e):"";return t==o||t==a}(e)}(e)}(e)&&d.call(e,"callee")&&(!g.call(e,"callee")||p.call(e)==i)}(e)||!!(b&&e&&e[b])}function _(e){if("string"==typeof e||function(e){return"symbol"==typeof e||S(e)&&p.call(e)==s}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var E=Array.isArray;function S(e){return!!e&&"object"==typeof e}var k,A,O=(k=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=e[a];n(s,a)&&(o[a]=s)}return o}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(w(t,1),_))},A=m(void 0===A?k.length-1:A,0),function(){for(var e=arguments,t=-1,n=m(e.length-A,0),r=Array(n);++t<n;)r[t]=e[A+t];t=-1;for(var i=Array(A+1);++t<A;)i[t]=e[t];return i[A]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(k,this,i)});e.exports=O},47044:(e,t,n)=>{var r=1/0,i="[object Symbol]",o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\ud800-\\udfff",c="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",l="A-Z\\xc0-\\xd6\\xd8-\\xde",f="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h="[']",d="["+f+"]",p="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",y="\\d+",g="["+c+"]",b="["+u+"]",m="[^"+s+f+y+c+u+l+"]",w="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",_="["+l+"]",E="(?:"+b+"|"+m+")",S="(?:"+_+"|"+m+")",k="(?:['](?:d|ll|m|re|s|t|ve))?",A="(?:['](?:D|LL|M|RE|S|T|VE))?",O="(?:"+p+"|\\ud83c[\\udffb-\\udfff])"+"?",P="[\\ufe0e\\ufe0f]?",I=P+O+("(?:\\u200d(?:"+["[^"+s+"]",w,v].join("|")+")"+P+O+")*"),T="(?:"+[g,w,v].join("|")+")"+I,x=RegExp(h,"g"),N=RegExp(p,"g"),R=RegExp([_+"?"+b+"+"+k+"(?="+[d,_,"$"].join("|")+")",S+"+"+A+"(?="+[d,_+E,"$"].join("|")+")",_+"?"+E+"+"+k,_+"+"+A,y,T].join("|"),"g"),C=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,B="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,L="object"==typeof self&&self&&self.Object===Object&&self,U=B||L||Function("return this")();var j,D=(j={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},function(e){return null==j?void 0:j[e]});var M=Object.prototype.toString,H=U.Symbol,F=H?H.prototype:void 0,z=F?F.toString:void 0;function K(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&M.call(e)==i}(e))return z?z.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}function q(e){return null==e?"":K(e)}var V,W=(V=function(e,t,n){return e+(n?"_":"")+t.toLowerCase()},function(e){return function(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}(function(e,t,n){return e=q(e),void 0===(t=n?void 0:t)?function(e){return C.test(e)}(e)?function(e){return e.match(R)||[]}(e):function(e){return e.match(o)||[]}(e):e.match(t)||[]}(function(e){return(e=q(e))&&e.replace(a,D).replace(N,"")}(e).replace(x,"")),V,"")});e.exports=W},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),c=n(34309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),c=n(36719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&a(e),h=!n&&!l&&!f&&c(e),d=n||l||f||h,p=d?r(e.length,String):[],y=p.length;for(var g in e)!t&&!u.call(e,g)||d&&("length"==g||f&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,y))||p.push(g);return p}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},34865:(e,t,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},44037:(e,t,n)=>{var r=n(98363),i=n(3674);e.exports=function(e,t){return e&&r(t,i(t),e)}},63886:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e,t){return e&&r(t,i(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),i=n(77412),o=n(34865),a=n(44037),s=n(63886),c=n(64626),u=n(278),l=n(18805),f=n(1911),h=n(58234),d=n(46904),p=n(64160),y=n(43824),g=n(29148),b=n(38517),m=n(1469),w=n(44144),v=n(56688),_=n(13218),E=n(72928),S=n(3674),k=n(81704),A="[object Arguments]",O="[object Function]",P="[object Object]",I={};I[A]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[P]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[O]=I["[object WeakMap]"]=!1,e.exports=function e(t,n,T,x,N,R){var C,B=1&n,L=2&n,U=4&n;if(T&&(C=N?T(t,x,N,R):T(t)),void 0!==C)return C;if(!_(t))return t;var j=m(t);if(j){if(C=y(t),!B)return u(t,C)}else{var D=p(t),M=D==O||"[object GeneratorFunction]"==D;if(w(t))return c(t,B);if(D==P||D==A||M&&!N){if(C=L||M?{}:b(t),!B)return L?f(t,s(C,t)):l(t,a(C,t))}else{if(!I[D])return N?t:{};C=g(t,D,B)}}R||(R=new r);var H=R.get(t);if(H)return H;R.set(t,C),E(t)?t.forEach((function(r){C.add(e(r,n,T,r,t,R))})):v(t)&&t.forEach((function(r,i){C.set(i,e(r,n,T,i,t,R))}));var F=j?void 0:(U?L?d:h:L?k:S)(t);return i(F||t,(function(r,i){F&&(r=t[i=r]),o(C,i,e(r,n,T,i,t,R))})),C}},3118:(e,t,n)=>{var r=n(13218),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},25588:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},28458:(e,t,n)=>{var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},29221:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var r=n(13218),i=n(25726),o=n(33498),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,Buffer=o&&o.exports===i?r.Buffer:void 0,a=Buffer?Buffer.allocUnsafe:void 0;e.exports=function(buffer,e){if(e)return buffer.slice();var t=buffer.length,n=a?a(t):new buffer.constructor(t);return buffer.copy(n),n}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var buffer=t?r(e.buffer):e.buffer;return new e.constructor(buffer,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var buffer=t?r(e.buffer):e.buffer;return new e.constructor(buffer,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),i=n(89465);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=o?o(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?i(n,u,l):r(n,u,l)}return n}},18805:(e,t,n)=>{var r=n(98363),i=n(99551);e.exports=function(e,t){return r(e,i(e),t)}},1911:(e,t,n)=>{var r=n(98363),i=n(51442);e.exports=function(e,t){return r(e,i(e),t)}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},46904:(e,t,n)=>{var r=n(68866),i=n(51442),o=n(81704);e.exports=function(e){return r(e,o,i)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},51442:(e,t,n)=>{var r=n(62488),i=n(85924),o=n(99551),a=n(70479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),c=n(44239),u=n(80346),l="[object Map]",f="[object Promise]",h="[object Set]",d="[object WeakMap]",p="[object DataView]",y=u(r),g=u(i),b=u(o),m=u(a),w=u(s),v=c;(r&&v(new r(new ArrayBuffer(1)))!=p||i&&v(new i)!=l||o&&v(o.resolve())!=f||a&&v(new a)!=h||s&&v(new s)!=d)&&(v=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case y:return p;case g:return l;case b:return f;case m:return h;case w:return d}return t}),e.exports=v},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),i=n(57157),o=n(93147),a=n(40419),s=n(77133);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},38517:(e,t,n)=>{var r=n(3118),i=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},50361:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,5)}},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,Buffer=a&&a.exports===o?r.Buffer:void 0,s=(Buffer?Buffer.isBuffer:void 0)||i;e.exports=s},23560:(e,t,n)=>{var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var r=n(25588),i=n(7518),o=n(31167),a=o&&o.isMap,s=a?i(a):r;e.exports=s},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},72928:(e,t,n)=>{var r=n(29221),i=n(7518),o=n(31167),a=o&&o.isSet,s=a?i(a):r;e.exports=s},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},81704:(e,t,n)=>{var r=n(14636),i=n(10313),o=n(98612);e.exports=function(e){return o(e)?r(e,!0):i(e)}},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},43720:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?b:g;if(t){if(e<0)return b;if(e>=d)return E}else{if(e<=-p)return S;if(e+1>=p)return _}return e<0?s(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=c;var u=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var i=s(u(n,8)),o=g,a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),f=parseInt(e.substring(a,a+c),n);if(c<8){var h=s(u(n,c));o=o.mul(h).add(s(f))}else o=(o=o.mul(i)).add(s(f))}return o.unsigned=t,o}function f(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=f;var h=4294967296,d=h*h,p=d/2,y=a(1<<24),g=a(0);n.ZERO=g;var b=a(0,!0);n.UZERO=b;var m=a(1);n.ONE=m;var w=a(1,!0);n.UONE=w;var v=a(-1);n.NEG_ONE=v;var _=c(-1,2147483647,!1);n.MAX_VALUE=_;var E=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=E;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var k=n.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(u(e,6),this.unsigned),o=this,a="";;){var c=o.div(i),l=(o.sub(c.mul(i)).toInt()>>>0).toString(e);if((o=c).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(m)},k.neg=k.negate,k.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,h=0,d=0,p=0;return d+=(p+=o+(65535&e.low))>>>16,h+=(d+=i+u)>>>16,l+=(h+=n+s)>>>16,l+=t+a,c((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=f(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,u=e.high>>>16,l=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,b=0,m=0,w=0;return m+=(w+=a*d)>>>16,b+=(m+=o*d)>>>16,m&=65535,b+=(m+=a*h)>>>16,p+=(b+=i*d)>>>16,b&=65535,p+=(b+=o*h)>>>16,b&=65535,p+=(b+=a*l)>>>16,p+=n*d+i*h+o*l+a*u,c((m&=65535)<<16|(w&=65535),(p&=65535)<<16|(b&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return w;o=b}else{if(this.eq(S))return e.eq(m)||e.eq(v)?S:e.eq(S)?m:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?m:v:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(S))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:u(2,a-48),h=s(n),d=h.mul(e);d.isNegative()||d.gt(i);)d=(h=s(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=m),o=o.add(h),i=i.sub(d)}return o},k.div=k.divide,k.modulo=function(e){return r(e)||(e=f(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return c(~this.low,~this.high,this.unsigned)},k.and=function(e){return r(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return r(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return r(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},62318:(e,t,n)=>{"use strict";var r=n(35717),i=n(3349),Buffer=n(89509).Buffer,o=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,i,o,a){return s(e+(t&n|~t&r)+i+o|0,a)+t|0}function u(e,t,n,r,i,o,a){return s(e+(t&r|n&~r)+i+o|0,a)+t|0}function l(e,t,n,r,i,o,a){return s(e+(t^n^r)+i+o|0,a)+t|0}function f(e,t,n,r,i,o,a){return s(e+(n^(t|~r))+i+o|0,a)+t|0}r(a,i),a.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,i=this._c,a=this._d;n=c(n,r,i,a,e[0],3614090360,7),a=c(a,n,r,i,e[1],3905402710,12),i=c(i,a,n,r,e[2],606105819,17),r=c(r,i,a,n,e[3],3250441966,22),n=c(n,r,i,a,e[4],4118548399,7),a=c(a,n,r,i,e[5],1200080426,12),i=c(i,a,n,r,e[6],2821735955,17),r=c(r,i,a,n,e[7],4249261313,22),n=c(n,r,i,a,e[8],1770035416,7),a=c(a,n,r,i,e[9],2336552879,12),i=c(i,a,n,r,e[10],4294925233,17),r=c(r,i,a,n,e[11],2304563134,22),n=c(n,r,i,a,e[12],1804603682,7),a=c(a,n,r,i,e[13],4254626195,12),i=c(i,a,n,r,e[14],2792965006,17),n=u(n,r=c(r,i,a,n,e[15],1236535329,22),i,a,e[1],4129170786,5),a=u(a,n,r,i,e[6],3225465664,9),i=u(i,a,n,r,e[11],643717713,14),r=u(r,i,a,n,e[0],3921069994,20),n=u(n,r,i,a,e[5],3593408605,5),a=u(a,n,r,i,e[10],38016083,9),i=u(i,a,n,r,e[15],3634488961,14),r=u(r,i,a,n,e[4],3889429448,20),n=u(n,r,i,a,e[9],568446438,5),a=u(a,n,r,i,e[14],3275163606,9),i=u(i,a,n,r,e[3],4107603335,14),r=u(r,i,a,n,e[8],1163531501,20),n=u(n,r,i,a,e[13],2850285829,5),a=u(a,n,r,i,e[2],4243563512,9),i=u(i,a,n,r,e[7],1735328473,14),n=l(n,r=u(r,i,a,n,e[12],2368359562,20),i,a,e[5],4294588738,4),a=l(a,n,r,i,e[8],2272392833,11),i=l(i,a,n,r,e[11],1839030562,16),r=l(r,i,a,n,e[14],4259657740,23),n=l(n,r,i,a,e[1],2763975236,4),a=l(a,n,r,i,e[4],1272893353,11),i=l(i,a,n,r,e[7],4139469664,16),r=l(r,i,a,n,e[10],3200236656,23),n=l(n,r,i,a,e[13],681279174,4),a=l(a,n,r,i,e[0],3936430074,11),i=l(i,a,n,r,e[3],3572445317,16),r=l(r,i,a,n,e[6],76029189,23),n=l(n,r,i,a,e[9],3654602809,4),a=l(a,n,r,i,e[12],3873151461,11),i=l(i,a,n,r,e[15],530742520,16),n=f(n,r=l(r,i,a,n,e[2],3299628645,23),i,a,e[0],4096336452,6),a=f(a,n,r,i,e[7],1126891415,10),i=f(i,a,n,r,e[14],2878612391,15),r=f(r,i,a,n,e[5],4237533241,21),n=f(n,r,i,a,e[12],1700485571,6),a=f(a,n,r,i,e[3],2399980690,10),i=f(i,a,n,r,e[10],4293915773,15),r=f(r,i,a,n,e[1],2240044497,21),n=f(n,r,i,a,e[8],1873313359,6),a=f(a,n,r,i,e[15],4264355552,10),i=f(i,a,n,r,e[6],2734768916,15),r=f(r,i,a,n,e[13],1309151649,21),n=f(n,r,i,a,e[4],4149444226,6),a=f(a,n,r,i,e[11],3174756917,10),i=f(i,a,n,r,e[2],718787259,15),r=f(r,i,a,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+a|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer.allocUnsafe(16);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer},e.exports=a},79746:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},34504:(e,t)=>{"use strict";var n=t;function r(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}return n},n.zero2=r,n.toHex=i,n.encode=function(e,t){return"hex"===t?i(e):e}},34155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],u=!1,l=-1;function f(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||u||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},1798:function(e,t,n){e=n.nmd(e),function(n,r){"use strict";var i={};n.PubSub?(i=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=i,function(e){var t={},n=-1,r="*";function i(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function o(e){return function(){throw e}}function a(e,t,n){try{e(t,n)}catch(e){setTimeout(o(e),0)}}function s(e,t,n){e(t,n)}function c(e,n,r,i){var o,c=t[n],u=i?s:a;if(Object.prototype.hasOwnProperty.call(t,n))for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&u(c[o],e,r)}function u(e,t,n){return function(){var i=String(e),o=i.lastIndexOf(".");for(c(e,e,t,n);-1!==o;)o=(i=i.substr(0,o)).lastIndexOf("."),c(e,i,t,n);c(e,r,t,n)}}function l(e){var n=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,n)&&i(t[n]))}function f(e){for(var t=String(e),n=l(t)||l(r),i=t.lastIndexOf(".");!n&&-1!==i;)i=(t=t.substr(0,i)).lastIndexOf("."),n=l(t);return n}function h(e,t,n,r){var i=u(e="symbol"==typeof e?e.toString():e,t,r);return!!f(e)&&(!0===n?i():setTimeout(i,0),!0)}e.publish=function(t,n){return h(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return h(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var i="uid_"+String(++n);return t[e][i]=r,i},e.subscribeAll=function(t){return e.subscribe(r,t)},e.subscribeOnce=function(t,n){var r=e.subscribe(t,(function(){e.unsubscribe(r),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&delete t[n]},e.countSubscriptions=function(e){var n,r,i=0;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)){for(r in t[n])i++;break}return i},e.getSubscriptions=function(e){var n,r=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&r.push(n);return r},e.unsubscribe=function(n){var r,i,o,a=function(e){var n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e))return!0;return!1},s="string"==typeof n&&(Object.prototype.hasOwnProperty.call(t,n)||a(n)),c=!s&&"string"==typeof n,u="function"==typeof n,l=!1;if(!s){for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(i=t[r],c&&i[n]){delete i[n],l=n;break}if(u)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&i[o]===n&&(delete i[o],l=!0)}return l}e.clearSubscriptions(n)}}(i)),void 0!==e&&e.exports&&(t=e.exports=i),t.PubSub=i,e.exports=t=i}("object"==typeof window&&window||this)},61798:(e,t,n)=>{"use strict";var r=n(34155),i=65536,o=4294967295;var Buffer=n(89509).Buffer,a=n.g.crypto||n.g.msCrypto;a&&a.getRandomValues?e.exports=function(e,t){if(e>o)throw new RangeError("requested too many random bytes");var n=Buffer.allocUnsafe(e);if(e>0)if(e>i)for(var s=0;s<e;s+=i)a.getRandomValues(n.slice(s,s+i));else a.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},72408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function m(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=b.prototype;var v=w.prototype=new m;v.constructor=w,y(v,b.prototype),v.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===o?"."+I(c,0):o,_(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(O(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(c=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var l=o+I(s=e[u],u);c+=T(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=T(s=s.value,t,i,l=o+I(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function x(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},C={transition:null},B={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:C,ReactCurrentOwner:S};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.transition;C.transition={};try{e()}finally{C.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},94281:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,a,s;if("string"==typeof t&&(o="not ",t.substr(!a||a<0?0:+a,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(r(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},56753:(e,t,n)=>{"use strict";var r=n(34155),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(79481),a=n(64229);n(35717)(l,o);for(var s=i(a.prototype),c=0;c<s.length;c++){var u=s[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},82725:(e,t,n)=>{"use strict";e.exports=i;var r=n(74605);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(35717)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},79481:(e,t,n)=>{"use strict";var r,i=n(34155);e.exports=k,k.ReadableState=S;n(17187).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(22503),Buffer=n(48764).Buffer,s=n.g.Uint8Array||function(){};var c,u=n(94616);c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,f,h,d=n(57327),p=n(61195),y=n(82457).getHighWaterMark,g=n(94281).q,b=g.ERR_INVALID_ARG_TYPE,m=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(35717)(k,a);var _=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(e,t,i){r=r||n(56753),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=n(32553).s),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function k(e){if(r=r||n(56753),!(this instanceof k))return new k(e);var t=this instanceof r;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function A(e,t,n,r,i){c("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,x(e)))}(e,a);else if(i||(o=function(e,t){var n;r=t,Buffer.isBuffer(r)||r instanceof s||"string"==typeof t||void 0===t||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(a,t)),o)_(e,o);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===Buffer.prototype||(t=function(e){return Buffer.from(e)}(t)),r)a.endEmitted?_(e,new v):O(e,a,t,!0);else if(a.ended)_(e,new m);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?O(e,a,t,!1):N(e,a)):O(e,a,t,!1)}else r||(a.reading=!1,N(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),N(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=Buffer.from(e,t),t=""),n=!0),A(this,e,t,!1,n)},k.prototype.unshift=function(e){return A(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){l||(l=n(32553).s);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var P=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(x,e))}function x(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,U(e)}function N(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function C(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function B(e){c("readable nexttick read 0"),e.read(0)}function L(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function D(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(M,t,e))}function M(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function H(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):T(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){_(this,new w("_read()"))},k.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,c("pipe count=%d opts=%j",r.pipesCount,t);var a=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?u:g;function s(t,i){c("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",y),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",h),f=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}r.endEmitted?i.nextTick(a):n.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,U(e))}}(n);e.on("drain",l);var f=!1;function h(t){c("ondata");var i=e.write(t);c("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==H(r.pipes,e))&&!f&&(c("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function d(t){c("onerror",t),g(),e.removeListener("error",d),0===o(e,"error")&&_(e,t)}function p(){e.removeListener("finish",y),g()}function y(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",y),e.emit("pipe",n),r.flowing||(c("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=H(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,c("on readable",r.length,r.reading),r.length?T(this):r.reading||i.nextTick(B,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(C,this),n},k.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(C,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(L,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=n(45850)),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===h&&(h=n(15167)),h(k,e,t)})},74605:(e,t,n)=>{"use strict";e.exports=l;var r=n(94281).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(56753);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(35717)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},64229:(e,t,n)=>{"use strict";var r,i=n(34155);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=k,k.WritableState=S;var a={deprecate:n(94927)},s=n(22503),Buffer=n(48764).Buffer,c=n.g.Uint8Array||function(){};var u,l=n(61195),f=n(82457).getHighWaterMark,h=n(94281).q,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,y=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,m=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function E(){}function S(e,t,a){r=r||n(56753),e=e||{},"boolean"!=typeof a&&(a=t instanceof r),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(x,e,t),e._writableState.errorEmitted=!0,_(e,r)):(o(r),e._writableState.errorEmitted=!0,_(e,r),x(e,t))}(e,n,r,t,o);else{var a=I(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||P(e,n),r?i.nextTick(O,e,n,a,o):O(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function k(e){var t=this instanceof(r=r||n(56753));if(!t&&!u.call(k,this))return new k(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function A(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),x(e,t)}function P(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,buffer=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var a=0,s=!0;n;)buffer[a]=n,n.isBuf||(s=!1),n=n.next,a+=1;buffer.allBuffers=s,A(e,t,!0,t.length,buffer,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,l=n.callback;if(A(e,t,!1,t.objectMode?1:c.length,c,u,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(35717)(k,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===k&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},k.prototype.pipe=function(){_(this,new g)},k.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,s=!o.objectMode&&(r=e,Buffer.isBuffer(r)||r instanceof c);return s&&!Buffer.isBuffer(e)&&(e=function(e){return Buffer.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=E),o.ending?function(e,t){var n=new w;_(e,n),i.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var o;return null===n?o=new m:"string"==typeof n||t.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o||(_(e,o),i.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,s,r,i,o);return c}(this,o,s,e,t,n)),a},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||P(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new p("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=l.destroy,k.prototype._undestroy=l.undestroy,k.prototype._destroy=function(e,t){t(e)}},45850:(e,t,n)=>{"use strict";var r,i=n(34155);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(8610),s=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function y(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[f]=null,e[s]=null,e[c]=null,t(p(n,!1)))}}function g(e){i.nextTick(y,e)}var b=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((o(r={get stream(){return this[d]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[u]?n(e[u]):t(p(void 0,!0))}))}));var n,r=this[f];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(p(void 0,!0)):t[h](n,r)}),r)}}(r,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[h])}return this[f]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),r),b);e.exports=function(e){var t,n=Object.create(m,(o(t={},d,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var r=n[d].read();r?(n[f]=null,n[s]=null,n[c]=null,e(p(r,!1))):(n[s]=e,n[c]=t)},writable:!0}),t));return n[f]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[f]=null,n[s]=null,n[c]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[f]=null,n[s]=null,n[c]=null,r(p(void 0,!0))),n[l]=!0})),e.on("readable",g.bind(null,n)),n}},57327:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Buffer=n(48764).Buffer,a=n(52361).inspect,s=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return Buffer.alloc(0);for(var t,n,r,i=Buffer.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,Buffer.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=Buffer.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:s,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),c&&o(t,c),e}()},61195:(e,t,n)=>{"use strict";var r=n(34155);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,e)):r.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(o,n),t(e)):r.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var r=n(94281).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){s=!1,u=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},y=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?y():t.on("request",y)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",y),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}},15167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},59946:(e,t,n)=>{"use strict";var r;var i=n(94281).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var l,f=function(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var h=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(8610)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}(e,o,i>0,(function(e){l||(l=e),e&&h.forEach(c),o||(h.forEach(c),f(l))}))}));return t.reduce(u)}},82457:(e,t,n)=>{"use strict";var r=n(94281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},22503:(e,t,n)=>{e.exports=n(17187).EventEmitter},88473:(e,t,n)=>{(t=e.exports=n(79481)).Stream=t,t.Readable=t,t.Writable=n(64229),t.Duplex=n(56753),t.Transform=n(74605),t.PassThrough=n(82725),t.finished=n(8610),t.pipeline=n(59946)},63694:(e,t,n)=>{var r,Buffer=n(48764).Buffer;e.exports=function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,r){"use strict";var i=e("domexception"),o=e("typeson"),a=e("typeson-registry/dist/presets/structured-cloning-throwing"),s="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:void 0!==n.g?n.g:Function("return this;")();s.DOMException||(s.DOMException=i);var c=(new o).register(a);function u(e){return c.revive(c.encapsulate(e))}t.exports=u},{domexception:5,typeson:8,"typeson-registry/dist/presets/structured-cloning-throwing":7}],2:[function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=e("./legacy-error-codes.json"),s=e("./utils.js");n.implementation=function(){function e(t){var n=r(t,2),i=n[0],a=n[1];o(this,e),this.name=a,this.message=i}return i(e,[{key:"code",get:function(){return a[this.name]||0}}]),e}(),n.init=function(e){if(Error.captureStackTrace){var t=s.wrapperForImpl(e);Error.captureStackTrace(t,t.constructor)}}},{"./legacy-error-codes.json":4,"./utils.js":6}],3:[function(e,t,n){"use strict";var r=e("webidl-conversions"),i=e("./utils.js"),o=i.implSymbol;function a(){for(var e=[],t=0;t<arguments.length&&t<2;++t)e[t]=arguments[t];void 0!==e[0]?e[0]=r.DOMString(e[0],{context:"Failed to construct 'DOMException': parameter 1"}):e[0]="",void 0!==e[1]?e[1]=r.DOMString(e[1],{context:"Failed to construct 'DOMException': parameter 2"}):e[1]="Error",s.setup(this,e)}Object.defineProperty(a,"prototype",{value:a.prototype,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(a.prototype,"name",{get:function(){return this[o].name},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"message",{get:function(){return this[o].message},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"code",{get:function(){return this[o].code},enumerable:!0,configurable:!0}),Object.defineProperty(a,"INDEX_SIZE_ERR",{value:1,enumerable:!0}),Object.defineProperty(a.prototype,"INDEX_SIZE_ERR",{value:1,enumerable:!0}),Object.defineProperty(a,"DOMSTRING_SIZE_ERR",{value:2,enumerable:!0}),Object.defineProperty(a.prototype,"DOMSTRING_SIZE_ERR",{value:2,enumerable:!0}),Object.defineProperty(a,"HIERARCHY_REQUEST_ERR",{value:3,enumerable:!0}),Object.defineProperty(a.prototype,"HIERARCHY_REQUEST_ERR",{value:3,enumerable:!0}),Object.defineProperty(a,"WRONG_DOCUMENT_ERR",{value:4,enumerable:!0}),Object.defineProperty(a.prototype,"WRONG_DOCUMENT_ERR",{value:4,enumerable:!0}),Object.defineProperty(a,"INVALID_CHARACTER_ERR",{value:5,enumerable:!0}),Object.defineProperty(a.prototype,"INVALID_CHARACTER_ERR",{value:5,enumerable:!0}),Object.defineProperty(a,"NO_DATA_ALLOWED_ERR",{value:6,enumerable:!0}),Object.defineProperty(a.prototype,"NO_DATA_ALLOWED_ERR",{value:6,enumerable:!0}),Object.defineProperty(a,"NO_MODIFICATION_ALLOWED_ERR",{value:7,enumerable:!0}),Object.defineProperty(a.prototype,"NO_MODIFICATION_ALLOWED_ERR",{value:7,enumerable:!0}),Object.defineProperty(a,"NOT_FOUND_ERR",{value:8,enumerable:!0}),Object.defineProperty(a.prototype,"NOT_FOUND_ERR",{value:8,enumerable:!0}),Object.defineProperty(a,"NOT_SUPPORTED_ERR",{value:9,enumerable:!0}),Object.defineProperty(a.prototype,"NOT_SUPPORTED_ERR",{value:9,enumerable:!0}),Object.defineProperty(a,"INUSE_ATTRIBUTE_ERR",{value:10,enumerable:!0}),Object.defineProperty(a.prototype,"INUSE_ATTRIBUTE_ERR",{value:10,enumerable:!0}),Object.defineProperty(a,"INVALID_STATE_ERR",{value:11,enumerable:!0}),Object.defineProperty(a.prototype,"INVALID_STATE_ERR",{value:11,enumerable:!0}),Object.defineProperty(a,"SYNTAX_ERR",{value:12,enumerable:!0}),Object.defineProperty(a.prototype,"SYNTAX_ERR",{value:12,enumerable:!0}),Object.defineProperty(a,"INVALID_MODIFICATION_ERR",{value:13,enumerable:!0}),Object.defineProperty(a.prototype,"INVALID_MODIFICATION_ERR",{value:13,enumerable:!0}),Object.defineProperty(a,"NAMESPACE_ERR",{value:14,enumerable:!0}),Object.defineProperty(a.prototype,"NAMESPACE_ERR",{value:14,enumerable:!0}),Object.defineProperty(a,"INVALID_ACCESS_ERR",{value:15,enumerable:!0}),Object.defineProperty(a.prototype,"INVALID_ACCESS_ERR",{value:15,enumerable:!0}),Object.defineProperty(a,"VALIDATION_ERR",{value:16,enumerable:!0}),Object.defineProperty(a.prototype,"VALIDATION_ERR",{value:16,enumerable:!0}),Object.defineProperty(a,"TYPE_MISMATCH_ERR",{value:17,enumerable:!0}),Object.defineProperty(a.prototype,"TYPE_MISMATCH_ERR",{value:17,enumerable:!0}),Object.defineProperty(a,"SECURITY_ERR",{value:18,enumerable:!0}),Object.defineProperty(a.prototype,"SECURITY_ERR",{value:18,enumerable:!0}),Object.defineProperty(a,"NETWORK_ERR",{value:19,enumerable:!0}),Object.defineProperty(a.prototype,"NETWORK_ERR",{value:19,enumerable:!0}),Object.defineProperty(a,"ABORT_ERR",{value:20,enumerable:!0}),Object.defineProperty(a.prototype,"ABORT_ERR",{value:20,enumerable:!0}),Object.defineProperty(a,"URL_MISMATCH_ERR",{value:21,enumerable:!0}),Object.defineProperty(a.prototype,"URL_MISMATCH_ERR",{value:21,enumerable:!0}),Object.defineProperty(a,"QUOTA_EXCEEDED_ERR",{value:22,enumerable:!0}),Object.defineProperty(a.prototype,"QUOTA_EXCEEDED_ERR",{value:22,enumerable:!0}),Object.defineProperty(a,"TIMEOUT_ERR",{value:23,enumerable:!0}),Object.defineProperty(a.prototype,"TIMEOUT_ERR",{value:23,enumerable:!0}),Object.defineProperty(a,"INVALID_NODE_TYPE_ERR",{value:24,enumerable:!0}),Object.defineProperty(a.prototype,"INVALID_NODE_TYPE_ERR",{value:24,enumerable:!0}),Object.defineProperty(a,"DATA_CLONE_ERR",{value:25,enumerable:!0}),Object.defineProperty(a.prototype,"DATA_CLONE_ERR",{value:25,enumerable:!0}),Object.defineProperty(a.prototype,Symbol.toStringTag,{value:"DOMException",writable:!1,enumerable:!1,configurable:!0});var s={mixedInto:[],is:function(e){if(e){if(e[o]instanceof c.implementation)return!0;for(var n=0;n<t.exports.mixedInto.length;++n)if(e instanceof t.exports.mixedInto[n])return!0}return!1},isImpl:function(e){if(e){if(e instanceof c.implementation)return!0;for(var n=i.wrapperForImpl(e),r=0;r<t.exports.mixedInto.length;++r)if(n instanceof t.exports.mixedInto[r])return!0}return!1},convert:function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).context,r=void 0===n?"The provided value":n;if(t.exports.is(e))return i.implForWrapper(e);throw new TypeError(r+" is not of type 'DOMException'.")},create:function(e,t){var n=Object.create(a.prototype);return this.setup(n,e,t),n},createImpl:function(e,t){var n=Object.create(a.prototype);return this.setup(n,e,t),i.implForWrapper(n)},_internalSetup:function(e){},setup:function(e,t,n){n||(n={}),n.wrapper=e,this._internalSetup(e),Object.defineProperty(e,o,{value:new c.implementation(t,n),writable:!1,enumerable:!1,configurable:!0}),e[o][i.wrapperSymbol]=e,c.init&&c.init(e[o],n)},interface:a,expose:{Window:{DOMException:a},Worker:{DOMException:a}}};t.exports=s;var c=e(".//DOMException-impl.js")},{".//DOMException-impl.js":2,"./utils.js":6,"webidl-conversions":9}],4:[function(e,t,n){t.exports={IndexSizeError:1,DOMStringSizeError:2,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NoDataAllowedError:6,NoModificationAllowedError:7,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,SyntaxError:12,InvalidModificationError:13,NamespaceError:14,InvalidAccessError:15,ValidationError:16,TypeMismatchError:17,SecurityError:18,NetworkError:19,AbortError:20,URLMismatchError:21,QuotaExceededError:22,TimeoutError:23,InvalidNodeTypeError:24,DataCloneError:25}},{}],5:[function(e,t,n){"use strict";t.exports=e("./DOMException").interface,Object.setPrototypeOf(t.exports.prototype,Error.prototype)},{"./DOMException":3}],6:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e||"function"==typeof e}function o(e){return Object.getPrototypeOf(e)===Buffer.prototype?e:e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(e.buffer,e.byteOffset,e.byteLength)}function a(e){return Buffer.from(o(e))}function s(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;++r)n[r]in e||Object.defineProperty(e,n[r],Object.getOwnPropertyDescriptor(t,n[r]))}var c=Symbol("wrapper"),u=Symbol("impl"),l=Symbol("SameObject caches");function f(e,t,n){return e[l]||(e[l]=Object.create(null)),t in e[l]||(e[l][t]=n()),e[l][t]}function h(e){return e?e[c]:null}function d(e){return e?e[u]:null}function p(e){var t=h(e);return t||e}function y(e){var t=d(e);return t||e}var g=Symbol("internal"),b=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));t.exports={isObject:i,getReferenceToBytes:o,getCopyToBytes:a,mixin:s,wrapperSymbol:c,implSymbol:u,getSameObject:f,wrapperForImpl:h,implForWrapper:d,tryWrapperForImpl:p,tryImplForWrapper:y,iterInternalSymbol:g,IteratorPrototype:b}},{}],7:[function(e,t,i){"use strict";var o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=void 0,a=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function e(t){l(this,e),this.p=new Promise(t)};w.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(w.prototype[Symbol.toStringTag]="TypesonPromise"),w.prototype.then=function(e,t){var n=this;return new w((function(r,i){n.p.then((function(t){r(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))},w.prototype.catch=function(e){return this.then(null,e)},w.resolve=function(e){return new w((function(t){t(e)}))},w.reject=function(e){return new w((function(t,n){n(e)}))},["all","race"].forEach((function(e){w[e]=function(t){return new w((function(n,r){Promise[e](t.map((function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(n,r)}))}}));var v={}.toString,_={}.hasOwnProperty,E=Object.getPrototypeOf,S=_.toString;function k(e,t){return I(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function A(e){return v.call(e).slice(8,-1)}function O(e,t){if(!e||"object"!==u(e))return!1;var n=E(e);if(!n)return null===t;var r=_.call(n,"constructor")&&n.constructor;return"function"!=typeof r?null===t:t===r||null!==t&&S.call(r)===S.call(t)||"function"==typeof t&&"string"==typeof r.__typeson__type__&&r.__typeson__type__===t.__typeson__type__}function P(e){return!(!e||"Object"!==A(e))&&(!E(e)||O(e,Object))}function I(e){return e&&"object"===u(e)}function T(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function x(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function N(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[x(t.slice(0,n))];return void 0===r?void 0:N(r,t.slice(n+1))}return e[x(t)]}function R(e,t,n){if(""===t)return n;var r=t.indexOf(".");return r>-1?R(e[x(t.slice(0,r))],t.slice(r+1),n):(e[x(t)]=n,e)}function C(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var B=Object.keys,L=Array.isArray,U={}.hasOwnProperty,j=["type","replaced","iterateIn","iterateUnsetNumeric"];function D(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function M(e,t){if(""===e.keypath)return-1;var n=e.keypath.match(/\./g)||0,r=t.keypath.match(/\./g)||0;return n&&(n=n.length),r&&(r=r.length),n>r?-1:n<r?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var H=function(){function e(t){l(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(e,[{key:"stringify",value:function(e,t,n,r){r=p(p(p({},this.options),r),{},{stringification:!0});var i=this.encapsulate(e,null,r);return L(i)?JSON.stringify(i[0],t,n):i.then((function(e){return JSON.stringify(e,t,n)}))}},{key:"stringifySync",value:function(e,t,n,r){return this.stringify(e,t,n,p(p({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,n,r){return this.stringify(e,t,n,p(p({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"parse",value:function(e,t,n){return n=p(p(p({},this.options),n),{},{parse:!0}),this.revive(JSON.parse(e,t),n)}},{key:"parseSync",value:function(e,t,n){return this.parse(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"parseAsync",value:function(e,t,n){return this.parse(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)}},{key:"rootTypeName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)}},{key:"encapsulate",value:function(t,n,r){var i=D((function(e,t){return C(Promise.all(t.map((function(e){return e[1].p}))),(function(n){return C(Promise.all(n.map(D((function(n){var r=!1,o=[],a=y(t.splice(0,1),1),s=y(a[0],7),c=s[0],u=s[2],l=s[3],f=s[4],h=s[5],d=s[6],p=_(c,n,u,l,o,!0,d),g=O(p,w);return function(e,t){var n=e();return n&&n.then?n.then(t):t(n)}((function(){if(c&&g)return C(p.p,(function(t){return f[h]=t,r=!0,i(e,o)}))}),(function(t){return r?t:(c?f[h]=p:e=g?p.p:p,i(e,o))}))})))),(function(){return e}))}))})),o=(r=p(p({sync:!0},this.options),r)).sync,a=this,s={},c=[],l=[],f=[],h=!("cyclic"in r)||r.cyclic,d=r.encapsulateObserver,b=_("",t,h,n||{},f);function m(t){var n=Object.values(s);if(r.iterateNone)return n.length?n[0]:e.getJSONType(t);if(n.length){if(r.returnTypeNames)return g(new Set(n));t&&P(t)&&!U.call(t,"$types")?t.$types=s:t={$:t,$types:{$:s}}}else I(t)&&U.call(t,"$types")&&(t={$:t,$types:!0});return!r.returnTypeNames&&t}function v(e,t,n){Object.assign(e,t);var r=j.map((function(t){var n=e[t];return delete e[t],n}));n(),j.forEach((function(t,n){e[t]=r[n]}))}function _(t,n,i,o,f,h,p){var y,g={},b=u(n),m=d?function(r){var a=p||o.type||e.getJSONType(n);d(Object.assign(r||g,{keypath:t,value:n,cyclic:i,stateObj:o,promisesData:f,resolvingTypesonPromise:h,awaitingTypesonPromise:O(n,w)},{type:a}))}:null;if(["string","boolean","number","undefined"].includes(b))return void 0===n||Number.isNaN(n)||n===Number.NEGATIVE_INFINITY||n===Number.POSITIVE_INFINITY?(y=o.replaced?n:E(t,n,o,f,!1,h,m))!==n&&(g={replaced:y}):y=n,m&&m(),y;if(null===n)return m&&m(),n;if(i&&!o.iterateIn&&!o.iterateUnsetNumeric&&n&&"object"===u(n)){var S=c.indexOf(n);if(!(S<0))return s[t]="#",m&&m({cyclicKeypath:l[S]}),"#"+l[S];!0===i&&(c.push(n),l.push(t))}var k,A=P(n),I=L(n),x=(A||I)&&(!a.plainObjectReplacers.length||o.replaced)||o.iterateIn?n:E(t,n,o,f,A||I,null,m);if(x!==n?(y=x,g={replaced:x}):""===t&&O(n,w)?(f.push([t,n,i,o,void 0,void 0,o.type]),y=n):I&&"object"!==o.iterateIn||"array"===o.iterateIn?(k=new Array(n.length),g={clone:k}):(["function","symbol"].includes(u(n))||"toJSON"in n||O(n,w)||O(n,Promise)||O(n,ArrayBuffer))&&!A&&"object"!==o.iterateIn?y=n:(k={},o.addLength&&(k.length=n.length),g={clone:k}),m&&m(),r.iterateNone)return k||y;if(!k)return y;if(o.iterateIn){var N=function(e){var r={ownKeys:U.call(n,e)};v(o,r,(function(){var r=t+(t?".":"")+T(e),a=_(r,n[e],Boolean(i),o,f,h);O(a,w)?f.push([r,a,Boolean(i),o,k,e,o.type]):void 0!==a&&(k[e]=a)}))};for(var R in n)N(R);m&&m({endIterateIn:!0,end:!0})}else B(n).forEach((function(e){var r=t+(t?".":"")+T(e);v(o,{ownKeys:!0},(function(){var t=_(r,n[e],Boolean(i),o,f,h);O(t,w)?f.push([r,t,Boolean(i),o,k,e,o.type]):void 0!==t&&(k[e]=t)}))})),m&&m({endIterateOwn:!0,end:!0});if(o.iterateUnsetNumeric){for(var C=n.length,j=function(e){if(!(e in n)){var r=t+(t?".":"")+e;v(o,{ownKeys:!1},(function(){var t=_(r,void 0,Boolean(i),o,f,h);O(t,w)?f.push([r,t,Boolean(i),o,k,e,o.type]):void 0!==t&&(k[e]=t)}))}},D=0;D<C;D++)j(D);m&&m({endIterateUnsetNumeric:!0,end:!0})}return k}function E(e,t,n,r,i,c,u){for(var l=i?a.plainObjectReplacers:a.nonplainObjectReplacers,f=l.length;f--;){var d=l[f];if(d.test(t,n)){var p=d.type;if(a.revivers[p]){var y=s[e];s[e]=y?[p].concat(y):p}return Object.assign(n,{type:p,replaced:!0}),!o&&d.replaceAsync||d.replace?(u&&u({replacing:!0}),_(e,d[o||!d.replaceAsync?"replace":"replaceAsync"](t,n),h&&"readonly",n,r,c,p)):(u&&u({typeDetected:!0}),_(e,t,h&&"readonly",n,r,c,p))}}return t}return f.length?o&&r.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(i(b,f)).then(m):!o&&r.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r.stringification&&o?[m(b)]:o?m(b):Promise.resolve(m(b))}},{key:"encapsulateSync",value:function(e,t,n){return this.encapsulate(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,n){return this.encapsulate(e,t,p(p({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"revive",value:function(e,t){var n=e&&e.$types;if(!n)return e;if(!0===n)return e.$;var r=(t=p(p({sync:!0},this.options),t)).sync,i=[],o={},a=!0;n.$&&P(n.$)&&(e=e.$,n=n.$,a=!1);var s=this;function c(e,t){var n=y(s.revivers[e]||[],1)[0];if(!n)throw new Error("Unregistered type: "+e);return r&&!("revive"in n)?t:n[r&&n.revive?"revive":!r&&n.reviveAsync?"reviveAsync":"revive"](t,o)}var u=[];function l(e){return O(e,F)?void 0:e}var f,h=function(){var t=[];if(Object.entries(n).forEach((function(e){var r=y(e,2),i=r[0],o=r[1];"#"!==o&&[].concat(o).forEach((function(e){y(s.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete n[i])}))})),t.length)return t.sort(M).reduce((function t(n,r){var i=r.keypath,o=r.type;if(k(n))return n.then((function(e){return t(e,{keypath:i,type:o})}));var a=N(e,i);if(O(a=c(o,a),w))return a.then((function(t){var n=R(e,i,t);n===t&&(e=n)}));var s=R(e,i,a);s===a&&(e=s)}),void 0)}();return O(h,w)?f=h.then((function(){return e})):(f=function e(t,r,o,s,l){if(!a||"$types"!==t){var f=n[t],h=L(r);if(h||P(r)){var d=h?new Array(r.length):{};for(B(r).forEach((function(n){var i=e(t+(t?".":"")+T(n),r[n],o||d,d,n),a=function(e){return O(e,F)?d[n]=void 0:void 0!==e&&(d[n]=e),e};O(i,w)?u.push(i.then((function(e){return a(e)}))):a(i)})),r=d;i.length;){var p=y(i[0],4),g=p[0],b=p[1],m=p[2],v=p[3],_=N(g,b);if(void 0===_)break;m[v]=_,i.splice(0,1)}}if(!f)return r;if("#"===f){var E=N(o,r.slice(1));return void 0===E&&i.push([o,r.slice(1),s,l]),E}return[].concat(f).reduce((function e(t,n){return O(t,w)?t.then((function(t){return e(t,n)})):c(n,t)}),r)}}("",e,null),u.length&&(f=w.resolve(f).then((function(e){return w.all([e].concat(u))})).then((function(e){return y(e,1)[0]})))),k(f)?r&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():O(f,w)?f.p.then(l):f:!r&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r?l(f):Promise.resolve(l(f))}},{key:"reviveSync",value:function(e,t){return this.revive(e,p(p({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,p(p({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function(t,n){return n=n||{},[].concat(t).forEach((function t(r){var i=this;if(L(r))return r.map((function(e){return t.call(i,e)}));r&&B(r).forEach((function(t){if("#"===t)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(e.JSON_TYPES.includes(t))throw new TypeError("Plain JSON object types are reserved as type names");var i=r[t],o=i&&i.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,a=o.filter((function(e){return e.type===t}));if(a.length&&(o.splice(o.indexOf(a[0]),1),delete this.revivers[t],delete this.types[t]),"function"==typeof i){var s=i;i={test:function(e){return e&&e.constructor===s},replace:function(e){return p({},e)},revive:function(e){return Object.assign(Object.create(s.prototype),e)}}}else if(L(i)){var c=y(i,3);i={test:c[0],replace:c[1],revive:c[2]}}if(i&&i.test){var u={type:t,test:i.test.bind(i)};i.replace&&(u.replace=i.replace.bind(i)),i.replaceAsync&&(u.replaceAsync=i.replaceAsync.bind(i));var l="number"==typeof n.fallback?n.fallback:n.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?this.plainObjectReplacers.splice(l,0,u):this.nonplainObjectReplacers.splice(l,0,u),i.revive||i.reviveAsync){var f={};i.revive&&(f.revive=i.revive.bind(i)),i.reviveAsync&&(f.reviveAsync=i.reviveAsync.bind(i)),this.revivers[t]=[f,{plain:i.testPlainObjects}]}this.types[t]=i}}),this)}),this),this}}]),e}(),F=function e(){l(this,e)};F.__typeson__type__="TypesonUndefined",H.Undefined=F,H.Promise=w,H.isThenable=k,H.toStringTag=A,H.hasConstructorOf=O,H.isObject=I,H.isPlainObject=P,H.isUserObject=function e(t){if(!t||"Object"!==A(t))return!1;var n=E(t);return!n||O(t,Object)||e(n)},H.escapeKeyPathComponent=T,H.unescapeKeyPathComponent=x,H.getByKeyPath=N,H.getJSONType=function(e){return null===e?"null":Array.isArray(e)?"array":u(e)},H.JSON_TYPES=["null","boolean","number","string","array","object"];for(var z={userObject:{test:function(e,t){return H.isUserObject(e)},replace:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)},revive:function(e){return e}}},K=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some((function(e){return String(Number.parseInt(e))!==e}))&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach((function(n){var r=e[n];t[n]=r})),t}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return 0},revive:function(e){}}}],q={undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new H.Undefined}}},V={StringObject:{test:function(t){return"String"===H.toStringTag(t)&&"object"===e(t)},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===H.toStringTag(t)&&"object"===e(t)},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===H.toStringTag(t)&&"object"===e(t)},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},W=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],G={date:{test:function(e){return"Date"===H.toStringTag(e)},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(Number.NaN):new Date(e)}}},$={regexp:{test:function(e){return"RegExp"===H.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},Y={map:{test:function(e){return"Map"===H.toStringTag(e)},replace:function(e){return a(e.entries())},revive:function(e){return new Map(e)}}},Z={set:{test:function(e){return"Set"===H.toStringTag(e)},replace:function(e){return a(e.values())},revive:function(e){return new Set(e)}}},X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J=new Uint8Array(256),Q=0;Q<X.length;Q++)J[X.charCodeAt(Q)]=Q;var ee=function(e,t,n){null==n&&(n=e.byteLength);for(var r=new Uint8Array(e,t||0,n),i=r.length,o="",a=0;a<i;a+=3)o+=X[r[a]>>2],o+=X[(3&r[a])<<4|r[a+1]>>4],o+=X[(15&r[a+1])<<2|r[a+2]>>6],o+=X[63&r[a+2]];return i%3==2?o=o.slice(0,-1)+"=":i%3==1&&(o=o.slice(0,-2)+"=="),o},te=function(e){var t,n,r,i,o=e.length,a=.75*e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var c=new ArrayBuffer(a),u=new Uint8Array(c),l=0;l<o;l+=4)t=J[e.charCodeAt(l)],n=J[e.charCodeAt(l+1)],r=J[e.charCodeAt(l+2)],i=J[e.charCodeAt(l+3)],u[s++]=t<<2|n>>4,u[s++]=(15&n)<<4|r>>2,u[s++]=(3&r)<<6|63&i;return c},ne={arraybuffer:{test:function(e){return"ArrayBuffer"===H.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),ee(e))},revive:function(t,n){if(n.buffers||(n.buffers=[]),"object"===e(t))return n.buffers[t.index];var r=te(t);return n.buffers.push(r),r}}},re="undefined"==typeof self?n.g:self,ie={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=re[t];n&&(ie[e.toLowerCase()]={test:function(e){return H.toStringTag(e)===t},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:ee(n),byteOffset:r,length:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var r,i=e.byteOffset,o=e.length,a=e.encoded,s=e.index;return"index"in e?r=t.buffers[s]:(r=te(a),t.buffers.push(r)),new n(r,i,o)}})}));var oe={dataview:{test:function(e){return"DataView"===H.toStringTag(e)},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:ee(n),byteOffset:r,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n,r=e.byteOffset,i=e.byteLength,o=e.encoded,a=e.index;return"index"in e?n=t.buffers[a]:(n=te(o),t.buffers.push(n)),new DataView(n,r,i)}}},ae={IntlCollator:{test:function(e){return H.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return H.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return H.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function se(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var ce={file:{test:function(e){return"File"===H.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified;return new File([se(r)],t,{type:n,lastModified:i})},replaceAsync:function(e){return new H.Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(e)}))}}},ue={bigint:{test:function(e){return"bigint"==typeof e},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},le={bigintObject:{test:function(t){return"object"===e(t)&&H.hasConstructorOf(t,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},fe={cryptokey:{test:function(e){return"CryptoKey"===H.toStringTag(e)&&e.extractable},replaceAsync:function(e){return new H.Promise((function(t,n){crypto.subtle.exportKey("jwk",e).catch((function(e){n(e)})).then((function(n){t({jwk:n,algorithm:e.algorithm,usages:e.usages})}))}))},revive:function(e){var t=e.jwk,n=e.algorithm,r=e.usages;return crypto.subtle.importKey("jwk",t,n,!0,r)}}};return[z,q,K,V,W,G,$,{imagedata:{test:function(e){return"ImageData"===H.toStringTag(e)},replace:function(e){return{array:a(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===H.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",(function(){n.drawImage(r,0,0)})),r.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",(function(){n.drawImage(r,0,0)})),r.src=e,createImageBitmap(t)}}},ce,{file:ce.file,filelist:{test:function(e){return"FileList"===H.toStringTag(e)},replace:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function(e){return new(function(){function e(){t(this,e),this._files=arguments[0],this.length=this._files.length}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"item",value:function(e){return this._files[e]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),e}())(e)}}},{blob:{test:function(e){return"Blob"===H.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,n=e.stringContents;return new Blob([se(n)],{type:t})},replaceAsync:function(e){return new H.Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(e)}))}}}].concat("function"==typeof Map?Y:[],"function"==typeof Set?Z:[],"function"==typeof ArrayBuffer?ne:[],"function"==typeof Uint8Array?ie:[],"function"==typeof DataView?oe:[],"undefined"!=typeof Intl?ae:[],"undefined"!=typeof crypto?fe:[],"undefined"!=typeof BigInt?[ue,le]:[]).concat({checkDataCloneException:{test:function(t){var n={}.toString.call(t).slice(8,-1);if(["symbol","function"].includes(e(t))||["Arguments","Module","Error","Promise","WeakMap","WeakSet","Event","MessageChannel"].includes(n)||t&&"object"===e(t)&&"number"==typeof t.nodeType&&"function"==typeof t.insertBefore)throw new DOMException("The object cannot be cloned.","DataCloneError");return!1}}})},"object"==(void 0===i?"undefined":s(i))&&void 0!==t?t.exports=a():"function"==typeof r&&r.amd?r(a):((o="undefined"!=typeof globalThis?globalThis:o||self).Typeson=o.Typeson||{},o.Typeson.presets=o.Typeson.presets||{},o.Typeson.presets.structuredCloningThrowing=a())},{}],8:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return(i="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function e(t){o(this,e),this.p=new Promise(t)};p.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(p.prototype[Symbol.toStringTag]="TypesonPromise"),p.prototype.then=function(e,t){var n=this;return new p((function(r,i){n.p.then((function(t){r(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))},p.prototype.catch=function(e){return this.then(null,e)},p.resolve=function(e){return new p((function(t){t(e)}))},p.reject=function(e){return new p((function(t,n){n(e)}))},["all","race","allSettled"].forEach((function(e){p[e]=function(t){return new p((function(n,r){Promise[e](t.map((function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(n,r)}))}}));var y={}.toString,g={}.hasOwnProperty,b=Object.getPrototypeOf,m=g.toString;function w(e,t){return S(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function v(e){return y.call(e).slice(8,-1)}function _(e,t){if(!e||"object"!==i(e))return!1;var n=b(e);if(!n)return null===t;var r=g.call(n,"constructor")&&n.constructor;return"function"!=typeof r?null===t:t===r||null!==t&&m.call(r)===m.call(t)||"function"==typeof t&&"string"==typeof r.__typeson__type__&&r.__typeson__type__===t.__typeson__type__}function E(e){return!(!e||"Object"!==v(e))&&(!b(e)||_(e,Object))}function S(e){return e&&"object"===i(e)}function k(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function A(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function O(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[A(t.slice(0,n))];return void 0===r?void 0:O(r,t.slice(n+1))}return e[A(t)]}function P(e,t,n){if(""===t)return n;var r=t.indexOf(".");return r>-1?P(e[A(t.slice(0,r))],t.slice(r+1),n):(e[A(t)]=n,e)}function I(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var T=Object.keys,x=Array.isArray,N={}.hasOwnProperty,R=["type","replaced","iterateIn","iterateUnsetNumeric"];function C(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function B(e,t){if(""===e.keypath)return-1;var n=e.keypath.match(/\./g)||0,r=t.keypath.match(/\./g)||0;return n&&(n=n.length),r&&(r=r.length),n>r?-1:n<r?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var L=function(){function e(t){o(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"stringify",value:function(e,t,n,r){r=u(u(u({},this.options),r),{},{stringification:!0});var i=this.encapsulate(e,null,r);return x(i)?JSON.stringify(i[0],t,n):i.then((function(e){return JSON.stringify(e,t,n)}))}},{key:"stringifySync",value:function(e,t,n,r){return this.stringify(e,t,n,u(u({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,n,r){return this.stringify(e,t,n,u(u({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"parse",value:function(e,t,n){return n=u(u(u({},this.options),n),{},{parse:!0}),this.revive(JSON.parse(e,t),n)}},{key:"parseSync",value:function(e,t,n){return this.parse(e,t,u(u({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"parseAsync",value:function(e,t,n){return this.parse(e,t,u(u({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)}},{key:"rootTypeName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)}},{key:"encapsulate",value:function(t,n,r){var o=C((function(e,t){return I(Promise.all(t.map((function(e){return e[1].p}))),(function(n){return I(Promise.all(n.map(C((function(n){var r=!1,i=[],a=l(t.splice(0,1),1),s=l(a[0],7),c=s[0],u=s[2],f=s[3],h=s[4],d=s[5],y=s[6],g=A(c,n,u,f,i,!0,y),b=_(g,p);return function(e,t){var n=e();return n&&n.then?n.then(t):t(n)}((function(){if(c&&b)return I(g.p,(function(t){return h[d]=t,r=!0,o(e,i)}))}),(function(t){return r?t:(c?h[d]=g:e=b?g.p:g,o(e,i))}))})))),(function(){return e}))}))})),a=(r=u(u({sync:!0},this.options),r)).sync,s=this,c={},h=[],d=[],y=[],g=!("cyclic"in r)||r.cyclic,b=r.encapsulateObserver,m=A("",t,g,n||{},y);function w(t){var n=Object.values(c);if(r.iterateNone)return n.length?n[0]:e.getJSONType(t);if(n.length){if(r.returnTypeNames)return f(new Set(n));t&&E(t)&&!N.call(t,"$types")?t.$types=c:t={$:t,$types:{$:c}}}else S(t)&&N.call(t,"$types")&&(t={$:t,$types:!0});return!r.returnTypeNames&&t}function v(e,t,n){Object.assign(e,t);var r=R.map((function(t){var n=e[t];return delete e[t],n}));n(),R.forEach((function(t,n){e[t]=r[n]}))}function A(t,n,o,a,u,l,f){var y,g={},m=i(n),w=b?function(r){var i=f||a.type||e.getJSONType(n);b(Object.assign(r||g,{keypath:t,value:n,cyclic:o,stateObj:a,promisesData:u,resolvingTypesonPromise:l,awaitingTypesonPromise:_(n,p)},{type:i}))}:null;if(["string","boolean","number","undefined"].includes(m))return void 0===n||Number.isNaN(n)||n===Number.NEGATIVE_INFINITY||n===Number.POSITIVE_INFINITY?(y=a.replaced?n:O(t,n,a,u,!1,l,w))!==n&&(g={replaced:y}):y=n,w&&w(),y;if(null===n)return w&&w(),n;if(o&&!a.iterateIn&&!a.iterateUnsetNumeric&&n&&"object"===i(n)){var S=h.indexOf(n);if(!(S<0))return c[t]="#",w&&w({cyclicKeypath:d[S]}),"#"+d[S];!0===o&&(h.push(n),d.push(t))}var P,I=E(n),R=x(n),C=(I||R)&&(!s.plainObjectReplacers.length||a.replaced)||a.iterateIn?n:O(t,n,a,u,I||R,null,w);if(C!==n?(y=C,g={replaced:C}):""===t&&_(n,p)?(u.push([t,n,o,a,void 0,void 0,a.type]),y=n):R&&"object"!==a.iterateIn||"array"===a.iterateIn?(P=new Array(n.length),g={clone:P}):(["function","symbol"].includes(i(n))||"toJSON"in n||_(n,p)||_(n,Promise)||_(n,ArrayBuffer))&&!I&&"object"!==a.iterateIn?y=n:(P={},a.addLength&&(P.length=n.length),g={clone:P}),w&&w(),r.iterateNone)return P||y;if(!P)return y;if(a.iterateIn){var B=function(e){var r={ownKeys:N.call(n,e)};v(a,r,(function(){var r=t+(t?".":"")+k(e),i=A(r,n[e],Boolean(o),a,u,l);_(i,p)?u.push([r,i,Boolean(o),a,P,e,a.type]):void 0!==i&&(P[e]=i)}))};for(var L in n)B(L);w&&w({endIterateIn:!0,end:!0})}else T(n).forEach((function(e){var r=t+(t?".":"")+k(e);v(a,{ownKeys:!0},(function(){var t=A(r,n[e],Boolean(o),a,u,l);_(t,p)?u.push([r,t,Boolean(o),a,P,e,a.type]):void 0!==t&&(P[e]=t)}))})),w&&w({endIterateOwn:!0,end:!0});if(a.iterateUnsetNumeric){for(var U=n.length,j=function(e){if(!(e in n)){var r=t+(t?".":"")+e;v(a,{ownKeys:!1},(function(){var t=A(r,void 0,Boolean(o),a,u,l);_(t,p)?u.push([r,t,Boolean(o),a,P,e,a.type]):void 0!==t&&(P[e]=t)}))}},D=0;D<U;D++)j(D);w&&w({endIterateUnsetNumeric:!0,end:!0})}return P}function O(e,t,n,r,i,o,u){for(var l=i?s.plainObjectReplacers:s.nonplainObjectReplacers,f=l.length;f--;){var h=l[f];if(h.test(t,n)){var d=h.type;if(s.revivers[d]){var p=c[e];c[e]=p?[d].concat(p):d}return Object.assign(n,{type:d,replaced:!0}),!a&&h.replaceAsync||h.replace?(u&&u({replacing:!0}),A(e,h[a||!h.replaceAsync?"replace":"replaceAsync"](t,n),g&&"readonly",n,r,o,d)):(u&&u({typeDetected:!0}),A(e,t,g&&"readonly",n,r,o,d))}}return t}return y.length?a&&r.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(o(m,y)).then(w):!a&&r.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r.stringification&&a?[w(m)]:a?w(m):Promise.resolve(w(m))}},{key:"encapsulateSync",value:function(e,t,n){return this.encapsulate(e,t,u(u({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,n){return this.encapsulate(e,t,u(u({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"revive",value:function(e,t){var n=e&&e.$types;if(!n)return e;if(!0===n)return e.$;var r=(t=u(u({sync:!0},this.options),t)).sync,i=[],o={},a=!0;n.$&&E(n.$)&&(e=e.$,n=n.$,a=!1);var s=this;function c(e,t){var n=l(s.revivers[e]||[],1)[0];if(!n)throw new Error("Unregistered type: "+e);return r&&!("revive"in n)?t:n[r&&n.revive?"revive":!r&&n.reviveAsync?"reviveAsync":"revive"](t,o)}var f=[];function h(e){return _(e,U)?void 0:e}var d,y=function(){var t=[];if(Object.entries(n).forEach((function(e){var r=l(e,2),i=r[0],o=r[1];"#"!==o&&[].concat(o).forEach((function(e){l(s.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete n[i])}))})),t.length)return t.sort(B).reduce((function t(n,r){var i=r.keypath,o=r.type;if(w(n))return n.then((function(e){return t(e,{keypath:i,type:o})}));var a=O(e,i);if(_(a=c(o,a),p))return a.then((function(t){var n=P(e,i,t);n===t&&(e=n)}));var s=P(e,i,a);s===a&&(e=s)}),void 0)}();return _(y,p)?d=y.then((function(){return e})):(d=function e(t,r,o,s,u){if(!a||"$types"!==t){var h=n[t],d=x(r);if(d||E(r)){var y=d?new Array(r.length):{};for(T(r).forEach((function(n){var i=e(t+(t?".":"")+k(n),r[n],o||y,y,n),a=function(e){return _(e,U)?y[n]=void 0:void 0!==e&&(y[n]=e),e};_(i,p)?f.push(i.then((function(e){return a(e)}))):a(i)})),r=y;i.length;){var g=l(i[0],4),b=g[0],m=g[1],w=g[2],v=g[3],S=O(b,m);if(void 0===S)break;w[v]=S,i.splice(0,1)}}if(!h)return r;if("#"===h){var A=O(o,r.slice(1));return void 0===A&&i.push([o,r.slice(1),s,u]),A}return[].concat(h).reduce((function e(t,n){return _(t,p)?t.then((function(t){return e(t,n)})):c(n,t)}),r)}}("",e,null),f.length&&(d=p.resolve(d).then((function(e){return p.all([e].concat(f))})).then((function(e){return l(e,1)[0]})))),w(d)?r&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():_(d,p)?d.p.then(h):d:!r&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r?h(d):Promise.resolve(h(d))}},{key:"reviveSync",value:function(e,t){return this.revive(e,u(u({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,u(u({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function(t,n){return n=n||{},[].concat(t).forEach((function t(r){var i=this;if(x(r))return r.map((function(e){return t.call(i,e)}));r&&T(r).forEach((function(t){if("#"===t)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(e.JSON_TYPES.includes(t))throw new TypeError("Plain JSON object types are reserved as type names");var i=r[t],o=i&&i.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,a=o.filter((function(e){return e.type===t}));if(a.length&&(o.splice(o.indexOf(a[0]),1),delete this.revivers[t],delete this.types[t]),"function"==typeof i){var s=i;i={test:function(e){return e&&e.constructor===s},replace:function(e){return u({},e)},revive:function(e){return Object.assign(Object.create(s.prototype),e)}}}else if(x(i)){var c=l(i,3);i={test:c[0],replace:c[1],revive:c[2]}}if(i&&i.test){var f={type:t,test:i.test.bind(i)};i.replace&&(f.replace=i.replace.bind(i)),i.replaceAsync&&(f.replaceAsync=i.replaceAsync.bind(i));var h="number"==typeof n.fallback?n.fallback:n.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?this.plainObjectReplacers.splice(h,0,f):this.nonplainObjectReplacers.splice(h,0,f),i.revive||i.reviveAsync){var d={};i.revive&&(d.revive=i.revive.bind(i)),i.reviveAsync&&(d.reviveAsync=i.reviveAsync.bind(i)),this.revivers[t]=[d,{plain:i.testPlainObjects}]}this.types[t]=i}}),this)}),this),this}}]),e}(),U=function e(){o(this,e)};U.__typeson__type__="TypesonUndefined",L.Undefined=U,L.Promise=p,L.isThenable=w,L.toStringTag=v,L.hasConstructorOf=_,L.isObject=S,L.isPlainObject=E,L.isUserObject=function e(t){if(!t||"Object"!==v(t))return!1;var n=b(t);return!n||_(t,Object)||e(n)},L.escapeKeyPathComponent=k,L.unescapeKeyPathComponent=A,L.getByKeyPath=O,L.getJSONType=function(e){return null===e?"null":Array.isArray(e)?"array":i(e)},L.JSON_TYPES=["null","boolean","number","string","array","object"],t.exports=L},{}],9:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){return(t&&t.context?t.context:"Value")+" "+e+"."}function o(e){if(null===e)return"Null";switch(void 0===e?"undefined":r(e)){case"undefined":return"Undefined";case"boolean":return"Boolean";case"number":return"Number";case"string":return"String";case"symbol":return"Symbol";default:return"Object"}}function a(e){return l(e>0&&e%1==.5&&0==(1&e)||e<0&&e%1==-.5&&1==(1&e)?Math.floor(e):Math.round(e))}function s(e){return l(Math.trunc(e))}function c(e){return e<0?-1:1}function u(e,t){var n=e%t;return c(t)!==c(n)?n+t:n}function l(e){return 0===e?0:e}function f(e,t){var n=!t.unsigned,r=void 0,o=void 0;64===e?(o=Math.pow(2,53)-1,r=n?1-Math.pow(2,53):0):n?(r=-Math.pow(2,e-1),o=Math.pow(2,e-1)-1):(r=0,o=Math.pow(2,e)-1);var c=Math.pow(2,e),f=Math.pow(2,e-1);return function(e,t){void 0===t&&(t={});var h=+e;if(h=l(h),t.enforceRange){if(!Number.isFinite(h))throw new TypeError(i("is not a finite number",t));if((h=s(h))<r||h>o)throw new TypeError(i("is outside the accepted range of "+r+" to "+o+", inclusive",t));return h}return!Number.isNaN(h)&&t.clamp?h=a(h=Math.min(Math.max(h,r),o)):Number.isFinite(h)&&0!==h?(h=s(h))>=r&&h<=o?h:(h=u(h,c),n&&h>=f?h-c:h):0}}function h(e,t){if("function"!=typeof e)throw new TypeError(i("is not a function",t));return e}n.any=function(e){return e},n.void=function(){},n.boolean=function(e){return!!e},n.byte=f(8,{unsigned:!1}),n.octet=f(8,{unsigned:!0}),n.short=f(16,{unsigned:!1}),n["unsigned short"]=f(16,{unsigned:!0}),n.long=f(32,{unsigned:!1}),n["unsigned long"]=f(32,{unsigned:!0}),n["long long"]=f(64,{unsigned:!1}),n["unsigned long long"]=f(64,{unsigned:!0}),n.double=function(e,t){var n=+e;if(!Number.isFinite(n))throw new TypeError(i("is not a finite floating-point value",t));return n},n["unrestricted double"]=function(e){return+e},n.float=function(e,t){var n=+e;if(!Number.isFinite(n))throw new TypeError(i("is not a finite floating-point value",t));if(Object.is(n,-0))return n;var r=Math.fround(n);if(!Number.isFinite(r))throw new TypeError(i("is outside the range of a single-precision floating-point value",t));return r},n["unrestricted float"]=function(e){var t=+e;return isNaN(t)||Object.is(t,-0)?t:Math.fround(t)},n.DOMString=function(e,t){if(void 0===t&&(t={}),t.treatNullAsEmptyString&&null===e)return"";if("symbol"===(void 0===e?"undefined":r(e)))throw new TypeError(i("is a symbol, which cannot be converted to a string",t));return String(e)},n.ByteString=function(e,t){for(var r=n.DOMString(e,t),o=void 0,a=0;void 0!==(o=r.codePointAt(a));++a)if(o>255)throw new TypeError(i("is not a valid ByteString",t));return r},n.USVString=function(e,t){for(var r=n.DOMString(e,t),i=r.length,o=[],a=0;a<i;++a){var s=r.charCodeAt(a);if(s<55296||s>57343)o.push(String.fromCodePoint(s));else if(56320<=s&&s<=57343)o.push(String.fromCodePoint(65533));else if(a===i-1)o.push(String.fromCodePoint(65533));else{var c=r.charCodeAt(a+1);if(56320<=c&&c<=57343){var u=1023&s,l=1023&c;o.push(String.fromCodePoint(65536+1024*u+l)),++a}else o.push(String.fromCodePoint(65533))}}return o.join("")},n.object=function(e,t){if("Object"!==o(e))throw new TypeError(i("is not an object",t));return e},[Error,ArrayBuffer,DataView,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach((function(e){var t=e.name,r=/^[AEIOU]/.test(t)?"an":"a";n[t]=function(n,o){if(!(n instanceof e))throw new TypeError(i("is not "+r+" "+t+" object",o));return n}})),n.ArrayBufferView=function(e,t){if(!ArrayBuffer.isView(e))throw new TypeError(i("is not a view on an ArrayBuffer object",t));return e},n.BufferSource=function(e,t){if(!(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))throw new TypeError(i("is not an ArrayBuffer object or a view on one",t));return e},n.DOMTimeStamp=n["unsigned long long"],n.Function=h,n.VoidFunction=h},{}]},{},[1])(1)},79785:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer,r=n(35717),i=n(3349),o=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(e,t){return e<<t|e>>>32-t}function p(e,t,n,r,i,o,a,s){return d(e+(t^n^r)+o+a|0,s)+i|0}function y(e,t,n,r,i,o,a,s){return d(e+(t&n|~t&r)+o+a|0,s)+i|0}function g(e,t,n,r,i,o,a,s){return d(e+((t|~n)^r)+o+a|0,s)+i|0}function b(e,t,n,r,i,o,a,s){return d(e+(t&r|n&~r)+o+a|0,s)+i|0}function m(e,t,n,r,i,o,a,s){return d(e+(t^(n|~r))+o+a|0,s)+i|0}r(h,i),h.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,i=0|this._c,h=0|this._d,w=0|this._e,v=0|this._a,_=0|this._b,E=0|this._c,S=0|this._d,k=0|this._e,A=0;A<80;A+=1){var O,P;A<16?(O=p(n,r,i,h,w,e[a[A]],l[0],c[A]),P=m(v,_,E,S,k,e[s[A]],f[0],u[A])):A<32?(O=y(n,r,i,h,w,e[a[A]],l[1],c[A]),P=b(v,_,E,S,k,e[s[A]],f[1],u[A])):A<48?(O=g(n,r,i,h,w,e[a[A]],l[2],c[A]),P=g(v,_,E,S,k,e[s[A]],f[2],u[A])):A<64?(O=b(n,r,i,h,w,e[a[A]],l[3],c[A]),P=y(v,_,E,S,k,e[s[A]],f[3],u[A])):(O=m(n,r,i,h,w,e[a[A]],l[4],c[A]),P=p(v,_,E,S,k,e[s[A]],f[4],u[A])),n=w,w=h,h=d(i,10),i=r,r=O,v=k,k=S,S=d(E,10),E=_,_=P}var I=this._b+i+S|0;this._b=this._c+h+k|0,this._c=this._d+w+v|0,this._d=this._e+n+_|0,this._e=this._a+r+E|0,this._a=I},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=Buffer.alloc?Buffer.alloc(20):new Buffer(20);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer.writeInt32LE(this._e,16),buffer},e.exports=h},89509:(e,t,n)=>{var buffer=n(48764),Buffer=buffer.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return Buffer(e,t,n)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?e.exports=buffer:(r(buffer,t),t.Buffer=i),i.prototype=Object.create(Buffer.prototype),r(Buffer,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Buffer(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=Buffer(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Buffer(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(e)}},17221:(e,t,n)=>{e.exports=n(59119)(n(58573))},58573:(e,t,n)=>{const r=new(0,n(86266).ec)("secp256k1"),i=r.curve,o=i.n.constructor;function a(e){const t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){let n=new o(t);if(n.cmp(i.p)>=0)return null;n=n.toRed(i.red);let a=n.redSqr().redIMul(n).redIAdd(i.b).redSqrt();return 3===e!==a.isOdd()&&(a=a.redNeg()),r.keyPair({pub:{x:n,y:a}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,n){let a=new o(t),s=new o(n);if(a.cmp(i.p)>=0||s.cmp(i.p)>=0)return null;if(a=a.toRed(i.red),s=s.toRed(i.red),(6===e||7===e)&&s.isOdd()!==(7===e))return null;const c=a.redSqr().redIMul(a);return s.redSqr().redISub(c.redIAdd(i.b)).isZero()?r.keyPair({pub:{x:a,y:s}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function s(e,t){const n=t.encode(null,33===e.length);for(let t=0;t<e.length;++t)e[t]=n[t]}e.exports={contextRandomize:()=>0,privateKeyVerify(e){const t=new o(e);return t.cmp(i.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){const t=new o(e),n=i.n.sub(t).umod(i.n).toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakAdd(e,t){const n=new o(t);if(n.cmp(i.n)>=0)return 1;if(n.iadd(new o(e)),n.cmp(i.n)>=0&&n.isub(i.n),n.isZero())return 1;const r=n.toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakMul(e,t){let n=new o(t);if(n.cmp(i.n)>=0||n.isZero())return 1;n.imul(new o(e)),n.cmp(i.n)>=0&&(n=n.umod(i.n));const r=n.toArrayLike(Uint8Array,"be",32);return e.set(r),0},publicKeyVerify:e=>null===a(e)?1:0,publicKeyCreate(e,t){const n=new o(t);if(n.cmp(i.n)>=0||n.isZero())return 1;return s(e,r.keyFromPrivate(t).getPublic()),0},publicKeyConvert(e,t){const n=a(t);if(null===n)return 1;return s(e,n.getPublic()),0},publicKeyNegate(e,t){const n=a(t);if(null===n)return 1;const r=n.getPublic();return r.y=r.y.redNeg(),s(e,r),0},publicKeyCombine(e,t){const n=new Array(t.length);for(let e=0;e<t.length;++e)if(n[e]=a(t[e]),null===n[e])return 1;let r=n[0].getPublic();for(let e=1;e<n.length;++e)r=r.add(n[e].pub);return r.isInfinity()?2:(s(e,r),0)},publicKeyTweakAdd(e,t,n){const r=a(t);if(null===r)return 1;if((n=new o(n)).cmp(i.n)>=0)return 2;const c=r.getPublic().add(i.g.mul(n));return c.isInfinity()?2:(s(e,c),0)},publicKeyTweakMul(e,t,n){const r=a(t);if(null===r)return 1;if((n=new o(n)).cmp(i.n)>=0||n.isZero())return 2;return s(e,r.getPublic().mul(n)),0},signatureNormalize(e){const t=new o(e.subarray(0,32)),n=new o(e.subarray(32,64));return t.cmp(i.n)>=0||n.cmp(i.n)>=0?1:(1===n.cmp(r.nh)&&e.set(i.n.sub(n).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){const n=t.subarray(0,32),r=t.subarray(32,64);if(new o(n).cmp(i.n)>=0)return 1;if(new o(r).cmp(i.n)>=0)return 1;const{output:a}=e;let s=a.subarray(4,37);s[0]=0,s.set(n,1);let c=33,u=0;for(;c>1&&0===s[u]&&!(128&s[u+1]);--c,++u);if(s=s.subarray(u),128&s[0])return 1;if(c>1&&0===s[0]&&!(128&s[1]))return 1;let l=a.subarray(39,72);l[0]=0,l.set(r,1);let f=33,h=0;for(;f>1&&0===l[h]&&!(128&l[h+1]);--f,++h);return l=l.subarray(h),128&l[0]||f>1&&0===l[0]&&!(128&l[1])?1:(e.outputlen=6+c+f,a[0]=48,a[1]=e.outputlen-2,a[2]=2,a[3]=s.length,a.set(s,4),a[4+c]=2,a[5+c]=l.length,a.set(l,6+c),0)},signatureImport(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;const n=t[3];if(0===n)return 1;if(5+n>=t.length)return 1;if(2!==t[4+n])return 1;const r=t[5+n];if(0===r)return 1;if(6+n+r!==t.length)return 1;if(128&t[4])return 1;if(n>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[n+6])return 1;if(r>1&&0===t[n+6]&&!(128&t[n+7]))return 1;let a=t.subarray(4,4+n);if(33===a.length&&0===a[0]&&(a=a.subarray(1)),a.length>32)return 1;let s=t.subarray(6+n);if(33===s.length&&0===s[0]&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let c=new o(a);c.cmp(i.n)>=0&&(c=new o(0));let u=new o(t.subarray(6+n));return u.cmp(i.n)>=0&&(u=new o(0)),e.set(c.toArrayLike(Uint8Array,"be",32),0),e.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,n,a,s){if(s){const e=s;s=r=>{const i=e(t,n,null,a,r);if(!(i instanceof Uint8Array&&32===i.length))throw new Error("This is the way");return new o(i)}}const c=new o(n);if(c.cmp(i.n)>=0||c.isZero())return 1;let u;try{u=r.sign(t,n,{canonical:!0,k:s,pers:a})}catch(e){return 1}return e.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),e.recid=u.recoveryParam,0},ecdsaVerify(e,t,n){const s={r:e.subarray(0,32),s:e.subarray(32,64)},c=new o(s.r),u=new o(s.s);if(c.cmp(i.n)>=0||u.cmp(i.n)>=0)return 1;if(1===u.cmp(r.nh)||c.isZero()||u.isZero())return 3;const l=a(n);if(null===l)return 2;const f=l.getPublic();return r.verify(t,s,f)?0:3},ecdsaRecover(e,t,n,a){const c={r:t.slice(0,32),s:t.slice(32,64)},u=new o(c.r),l=new o(c.s);if(u.cmp(i.n)>=0||l.cmp(i.n)>=0)return 1;if(u.isZero()||l.isZero())return 2;let f;try{f=r.recoverPubKey(a,c,n)}catch(e){return 2}return s(e,f),0},ecdh(e,t,n,s,c,u,l){const f=a(t);if(null===f)return 1;const h=new o(n);if(h.cmp(i.n)>=0||h.isZero())return 2;const d=f.getPublic().mul(h);if(void 0===c){const t=d.encode(null,!0),n=r.hash().update(t).digest();for(let t=0;t<32;++t)e[t]=n[t]}else{u||(u=new Uint8Array(32));const t=d.getX().toArray("be",32);for(let e=0;e<32;++e)u[e]=t[e];l||(l=new Uint8Array(32));const n=d.getY().toArray("be",32);for(let e=0;e<32;++e)l[e]=n[e];const r=c(u,l,s);if(!(r instanceof Uint8Array&&r.length===e.length))return 2;e.set(r)}return 0}}},59119:e=>{const t="Impossible case. Please create issue.",n="The tweak was out of range or the resulted private key is invalid",r="The tweak was out of range or equal to zero",i="Unknow error on context randomization",o="Private Key is invalid",a="Public Key could not be parsed",s="Public Key serialization error",c="The sum of the public keys is not valid",u="Signature could not be parsed",l="The nonce generation function failed, or the private key was invalid",f="Public key could not be recover",h="Scalar was invalid (zero or overflow)";function d(e,t){if(!e)throw new Error(t)}function p(e,t,n){if(d(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),void 0!==n)if(Array.isArray(n)){const r=`Expected ${e} to be an Uint8Array with length [${n.join(", ")}]`;d(n.includes(t.length),r)}else{const r=`Expected ${e} to be an Uint8Array with length ${n}`;d(t.length===n,r)}}function y(e){d("Boolean"===b(e),"Expected compressed to be a Boolean")}function g(e=(e=>new Uint8Array(e)),t){return"function"==typeof e&&(e=e(t)),p("output",e,t),e}function b(e){return Object.prototype.toString.call(e).slice(8,-1)}e.exports=e=>({contextRandomize(t){if(d(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&p("seed",t,32),1===e.contextRandomize(t))throw new Error(i)},privateKeyVerify:t=>(p("private key",t,32),0===e.privateKeyVerify(t)),privateKeyNegate(n){switch(p("private key",n,32),e.privateKeyNegate(n)){case 0:return n;case 1:throw new Error(t)}},privateKeyTweakAdd(t,r){switch(p("private key",t,32),p("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(n)}},privateKeyTweakMul(t,n){switch(p("private key",t,32),p("tweak",n,32),e.privateKeyTweakMul(t,n)){case 0:return t;case 1:throw new Error(r)}},publicKeyVerify:t=>(p("public key",t,[33,65]),0===e.publicKeyVerify(t)),publicKeyCreate(t,n=!0,r){switch(p("private key",t,32),y(n),r=g(r,n?33:65),e.publicKeyCreate(r,t)){case 0:return r;case 1:throw new Error(o);case 2:throw new Error(s)}},publicKeyConvert(t,n=!0,r){switch(p("public key",t,[33,65]),y(n),r=g(r,n?33:65),e.publicKeyConvert(r,t)){case 0:return r;case 1:throw new Error(a);case 2:throw new Error(s)}},publicKeyNegate(n,r=!0,i){switch(p("public key",n,[33,65]),y(r),i=g(i,r?33:65),e.publicKeyNegate(i,n)){case 0:return i;case 1:throw new Error(a);case 2:throw new Error(t);case 3:throw new Error(s)}},publicKeyCombine(t,n=!0,r){d(Array.isArray(t),"Expected public keys to be an Array"),d(t.length>0,"Expected public keys array will have more than zero items");for(const e of t)p("public key",e,[33,65]);switch(y(n),r=g(r,n?33:65),e.publicKeyCombine(r,t)){case 0:return r;case 1:throw new Error(a);case 2:throw new Error(c);case 3:throw new Error(s)}},publicKeyTweakAdd(t,r,i=!0,o){switch(p("public key",t,[33,65]),p("tweak",r,32),y(i),o=g(o,i?33:65),e.publicKeyTweakAdd(o,t,r)){case 0:return o;case 1:throw new Error(a);case 2:throw new Error(n)}},publicKeyTweakMul(t,n,i=!0,o){switch(p("public key",t,[33,65]),p("tweak",n,32),y(i),o=g(o,i?33:65),e.publicKeyTweakMul(o,t,n)){case 0:return o;case 1:throw new Error(a);case 2:throw new Error(r)}},signatureNormalize(t){switch(p("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(u)}},signatureExport(n,r){p("signature",n,64);const i={output:r=g(r,72),outputlen:72};switch(e.signatureExport(i,n)){case 0:return r.slice(0,i.outputlen);case 1:throw new Error(u);case 2:throw new Error(t)}},signatureImport(n,r){switch(p("signature",n),r=g(r,64),e.signatureImport(r,n)){case 0:return r;case 1:throw new Error(u);case 2:throw new Error(t)}},ecdsaSign(n,r,i={},o){p("message",n,32),p("private key",r,32),d("Object"===b(i),"Expected options to be an Object"),void 0!==i.data&&p("options.data",i.data),void 0!==i.noncefn&&d("Function"===b(i.noncefn),"Expected options.noncefn to be a Function");const a={signature:o=g(o,64),recid:null};switch(e.ecdsaSign(a,n,r,i.data,i.noncefn)){case 0:return a;case 1:throw new Error(l);case 2:throw new Error(t)}},ecdsaVerify(t,n,r){switch(p("signature",t,64),p("message",n,32),p("public key",r,[33,65]),e.ecdsaVerify(t,n,r)){case 0:return!0;case 3:return!1;case 1:throw new Error(u);case 2:throw new Error(a)}},ecdsaRecover(n,r,i,o=!0,a){switch(p("signature",n,64),d("Number"===b(r)&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),p("message",i,32),y(o),a=g(a,o?33:65),e.ecdsaRecover(a,n,r,i)){case 0:return a;case 1:throw new Error(u);case 2:throw new Error(f);case 3:throw new Error(t)}},ecdh(t,n,r={},i){switch(p("public key",t,[33,65]),p("private key",n,32),d("Object"===b(r),"Expected options to be an Object"),void 0!==r.data&&p("options.data",r.data),void 0!==r.hashfn?(d("Function"===b(r.hashfn),"Expected options.hashfn to be a Function"),void 0!==r.xbuf&&p("options.xbuf",r.xbuf,32),void 0!==r.ybuf&&p("options.ybuf",r.ybuf,32),p("output",i)):i=g(i,32),e.ecdh(i,t,n,r.data,r.hashfn,r.xbuf,r.ybuf)){case 0:return i;case 1:throw new Error(a);case 2:throw new Error(h)}}})},24189:(e,t,n)=>{var Buffer=n(89509).Buffer;function r(e,t){this._block=Buffer.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}r.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=Buffer.from(e,t));for(var n=this._block,r=this._blockSize,i=e.length,o=this._len,a=0;a<i;){for(var s=o%r,c=Math.min(i-a,r-s),u=0;u<c;u++)n[s+u]=e[a+u];a+=c,(o+=c)%r==0&&this._update(n)}return this._len+=i,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=r},89072:(e,t,n)=>{var r=e.exports=function(e){e=e.toLowerCase();var t=r[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};r.sha=n(74448),r.sha1=n(18336),r.sha224=n(48432),r.sha256=n(67499),r.sha384=n(51686),r.sha512=n(87816)},74448:(e,t,n)=>{var r=n(35717),i=n(24189),Buffer=n(89509).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function s(){this.init(),this._w=a,i.call(this,64,56)}function c(e){return e<<30|e>>>2}function u(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(s,i),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,l=0|this._e,f=0;f<16;++f)n[f]=e.readInt32BE(4*f);for(;f<80;++f)n[f]=n[f-3]^n[f-8]^n[f-14]^n[f-16];for(var h=0;h<80;++h){var d=~~(h/20),p=0|((t=r)<<5|t>>>27)+u(d,i,a,s)+l+n[h]+o[d];l=s,s=a,a=c(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},s.prototype._hash=function(){var e=Buffer.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=s},18336:(e,t,n)=>{var r=n(35717),i=n(24189),Buffer=n(89509).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function s(){this.init(),this._w=a,i.call(this,64,56)}function c(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function l(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(s,i),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,f=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=(t=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|t>>>31;for(var d=0;d<80;++d){var p=~~(d/20),y=c(r)+l(p,i,a,s)+f+n[d]+o[p]|0;f=s,s=a,a=u(i),i=r,r=y}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=f+this._e|0},s.prototype._hash=function(){var e=Buffer.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=s},48432:(e,t,n)=>{var r=n(35717),i=n(67499),o=n(24189),Buffer=n(89509).Buffer,a=new Array(64);function s(){this.init(),this._w=a,o.call(this,64,56)}r(s,i),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var e=Buffer.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=s},67499:(e,t,n)=>{var r=n(35717),i=n(24189),Buffer=n(89509).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function s(){this.init(),this._w=a,i.call(this,64,56)}function c(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function l(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(s,i),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,d=0|this._e,p=0|this._f,y=0|this._g,g=0|this._h,b=0;b<16;++b)n[b]=e.readInt32BE(4*b);for(;b<64;++b)n[b]=0|(((t=n[b-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[b-7]+h(n[b-15])+n[b-16];for(var m=0;m<64;++m){var w=g+f(d)+c(d,p,y)+o[m]+n[m]|0,v=l(r)+u(r,i,a)|0;g=y,y=p,p=d,d=s+w|0,s=a,a=i,i=r,r=w+v|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=d+this._e|0,this._f=p+this._f|0,this._g=y+this._g|0,this._h=g+this._h|0},s.prototype._hash=function(){var e=Buffer.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=s},51686:(e,t,n)=>{var r=n(35717),i=n(87816),o=n(24189),Buffer=n(89509).Buffer,a=new Array(160);function s(){this.init(),this._w=a,o.call(this,128,112)}r(s,i),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var e=Buffer.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=s},87816:(e,t,n)=>{var r=n(35717),i=n(24189),Buffer=n(89509).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function s(){this.init(),this._w=a,i.call(this,128,112)}function c(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function l(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function p(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function y(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function g(e,t){return e>>>0<t>>>0?1:0}r(s,i),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},s.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,a=0|this._dh,s=0|this._eh,b=0|this._fh,m=0|this._gh,w=0|this._hh,v=0|this._al,_=0|this._bl,E=0|this._cl,S=0|this._dl,k=0|this._el,A=0|this._fl,O=0|this._gl,P=0|this._hl,I=0;I<32;I+=2)t[I]=e.readInt32BE(4*I),t[I+1]=e.readInt32BE(4*I+4);for(;I<160;I+=2){var T=t[I-30],x=t[I-30+1],N=h(T,x),R=d(x,T),C=p(T=t[I-4],x=t[I-4+1]),B=y(x,T),L=t[I-14],U=t[I-14+1],j=t[I-32],D=t[I-32+1],M=R+U|0,H=N+L+g(M,R)|0;H=(H=H+C+g(M=M+B|0,B)|0)+j+g(M=M+D|0,D)|0,t[I]=H,t[I+1]=M}for(var F=0;F<160;F+=2){H=t[F],M=t[F+1];var z=u(n,r,i),K=u(v,_,E),q=l(n,v),V=l(v,n),W=f(s,k),G=f(k,s),$=o[F],Y=o[F+1],Z=c(s,b,m),X=c(k,A,O),J=P+G|0,Q=w+W+g(J,P)|0;Q=(Q=(Q=Q+Z+g(J=J+X|0,X)|0)+$+g(J=J+Y|0,Y)|0)+H+g(J=J+M|0,M)|0;var ee=V+K|0,te=q+z+g(ee,V)|0;w=m,P=O,m=b,O=A,b=s,A=k,s=a+Q+g(k=S+J|0,S)|0,a=i,S=E,i=r,E=_,r=n,_=v,n=Q+te+g(v=J+ee|0,J)|0}this._al=this._al+v|0,this._bl=this._bl+_|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+k|0,this._fl=this._fl+A|0,this._gl=this._gl+O|0,this._hl=this._hl+P|0,this._ah=this._ah+n+g(this._al,v)|0,this._bh=this._bh+r+g(this._bl,_)|0,this._ch=this._ch+i+g(this._cl,E)|0,this._dh=this._dh+a+g(this._dl,S)|0,this._eh=this._eh+s+g(this._el,k)|0,this._fh=this._fh+b+g(this._fl,A)|0,this._gh=this._gh+m+g(this._gl,O)|0,this._hh=this._hh+w+g(this._hl,P)|0},s.prototype._hash=function(){var e=Buffer.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=s},12267:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(58355);t.hmacSHA512=function(e,t){const n=r("sha512",e);return t.forEach((e=>n.update(e))),n.digest()},t.hmacSHA256=function(e,t){const n=r("sha256",e);return t.forEach((e=>n.update(e))),n.digest()}},432:(e,t,n)=>{"use strict";var Buffer=n(48764).Buffer;const r=n(2401),i=n(12267),o=Buffer.from("Symmetric key seed"),a=Buffer.from("SLIP-0077"),s=Buffer.alloc(1,0);t.e=function(e){return{fromSeed(t){r(r.anyOf("Buffer","String"),t);const n=Buffer.isBuffer(t)?t:Buffer.from(t,"hex"),u=i.hmacSHA512(o,[n]),l=i.hmacSHA512(u.slice(0,32),[s,a]);return new c(l.slice(32),l.slice(0,32),void 0,void 0,void 0,e)},fromMasterBlindingKey(t){r(r.anyOf("Buffer","String"),t);const n=Buffer.isBuffer(t)?t:Buffer.from(t,"hex");return new c(n,void 0,void 0,void 0,void 0,e)}}};class c{constructor(e,t,n,i,o,a){this._masterKey=e,this._extra=t,this._script=n,this._privateKey=i,this._publicKey=o,this._ecc=a,r(r.BufferN(32),e)}get masterKey(){return this._masterKey}get extra(){return this._extra}get script(){return this._script}get privateKey(){return this._privateKey}get publicKey(){return this._publicKey}derive(e){return function(e,t,n,r){const o=Buffer.isBuffer(n)?n:Buffer.from(n,"hex"),a=i.hmacSHA256(e,[o]),s=r.pointFromScalar(a);return new c(e,t,o,a,s?Buffer.from(s):void 0,r)}(this.masterKey,this.extra,e,this._ecc)}}},42830:(e,t,n)=>{e.exports=i;var r=n(17187).EventEmitter;function i(){r.call(this)}n(35717)(i,r),i.Readable=n(79481),i.Writable=n(64229),i.Duplex=n(56753),i.Transform=n(74605),i.PassThrough=n(82725),i.finished=n(8610),i.pipeline=n(59946),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",u),e.on("error",u),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},32553:(e,t,n)=>{"use strict";var Buffer=n(89509).Buffer,r=Buffer.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(Buffer.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=l,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=o(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},96647:(e,t,n)=>{var r=n(30247);function i(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function o(e){return r.Nil(e)?"":i(e.constructor)}function a(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function s(e){return r.Function(e)?e.toJSON?e.toJSON():i(e):r.Array(e)?"Array":e&&r.Object(e)?"Object":void 0!==e?e:""}function c(e,t,n){var i=function(e){return r.Function(e)?"":r.String(e)?JSON.stringify(e):e&&r.Object(e)?"":e}(t);return"Expected "+s(e)+", got"+(""!==n?" "+n:"")+(""!==i?" "+i:"")}function u(e,t,n){n=n||o(t),this.message=c(e,t,n),a(this,u),this.__type=e,this.__value=t,this.__valueTypeName=n}function l(e,t,n,r,i){e?(i=i||o(r),this.message=function(e,t,n,r,i){var o='" of type ';return"key"===t&&(o='" with key type '),c('property "'+s(n)+o+s(e),r,i)}(e,n,t,r,i)):this.message='Unexpected property "'+t+'"',a(this,u),this.__label=n,this.__property=t,this.__type=e,this.__value=r,this.__valueTypeName=i}u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,l.prototype=Object.create(Error.prototype),l.prototype.constructor=u,e.exports={TfTypeError:u,TfPropertyTypeError:l,tfCustomError:function(e,t){return new u(e,{},t)},tfSubError:function(e,t,n){return e instanceof l?(t=t+"."+e.__property,e=new l(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof u&&(e=new l(e.__type,t,n,e.__value,e.__valueTypeName)),a(e),e},tfJSON:s,getValueTypeName:o}},74307:(e,t,n)=>{var Buffer=n(48764).Buffer,r=n(30247),i=n(96647);function o(e){return Buffer.isBuffer(e)}function a(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function s(e,t){var n=e.toJSON();function r(r){if(!e(r))return!1;if(r.length===t)return!0;throw i.tfCustomError(n+"(Length: "+t+")",n+"(Length: "+r.length+")")}return r.toJSON=function(){return n},r}var c=s.bind(null,r.Array),u=s.bind(null,o),l=s.bind(null,a),f=s.bind(null,r.String);var h=Math.pow(2,53)-1;var d={ArrayN:c,Buffer:o,BufferN:u,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:a,HexN:l,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-h&&e<=h&&Math.floor(e)===e},Range:function(e,t,n){function i(r,i){return n(r,i)&&r>e&&r<t}return n=n||r.Number,i.toJSON=function(){return`${n.toJSON()} between [${e}, ${t}]`},i},StringN:f,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=h&&Math.floor(e)===e}};for(var p in d)d[p].toJSON=function(e){return e}.bind(null,p);e.exports=d},2401:(e,t,n)=>{var r=n(96647),i=n(30247),o=r.tfJSON,a=r.TfTypeError,s=r.TfPropertyTypeError,c=r.tfSubError,u=r.getValueTypeName,l={arrayOf:function(e,t){function n(n,r){return!!i.Array(n)&&(!i.Nil(n)&&(!(void 0!==t.minLength&&n.length<t.minLength)&&(!(void 0!==t.maxLength&&n.length>t.maxLength)&&((void 0===t.length||n.length===t.length)&&n.every((function(t,n){try{return h(e,t,r)}catch(e){throw c(e,n)}}))))))}return e=f(e),t=t||{},n.toJSON=function(){var n="["+o(e)+"]";return void 0!==t.length?n+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(n+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),n},n},maybe:function e(t){function n(n,r){return i.Nil(n)||t(n,r,e)}return t=f(t),n.toJSON=function(){return"?"+o(t)},n},map:function(e,t){function n(n,r){if(!i.Object(n))return!1;if(i.Nil(n))return!1;for(var o in n){try{t&&h(t,o,r)}catch(e){throw c(e,o,"key")}try{var a=n[o];h(e,a,r)}catch(e){throw c(e,o)}}return!0}return e=f(e),t&&(t=f(t)),n.toJSON=t?function(){return"{"+o(t)+": "+o(e)+"}"}:function(){return"{"+o(e)+"}"},n},object:function(e){var t={};for(var n in e)t[n]=f(e[n]);function r(e,n){if(!i.Object(e))return!1;if(i.Nil(e))return!1;var r;try{for(r in t){h(t[r],e[r],n)}}catch(e){throw c(e,r)}if(n)for(r in e)if(!t[r])throw new s(void 0,r);return!0}return r.toJSON=function(){return o(t)},r},anyOf:function(){var e=[].slice.call(arguments).map(f);function t(t,n){return e.some((function(e){try{return h(e,t,n)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(o).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(f);function t(t,n){return e.every((function(e){try{return h(e,t,n)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(o).join(" & ")},t},quacksLike:function(e){function t(t){return e===u(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(f);function t(t,n){return!i.Nil(t)&&(!i.Nil(t.length)&&((!n||t.length===e.length)&&e.every((function(e,r){try{return h(e,t[r],n)}catch(e){throw c(e,r)}}))))}return t.toJSON=function(){return"("+e.map(o).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function f(e){if(i.String(e))return"?"===e[0]?l.maybe(e.slice(1)):i[e]||l.quacksLike(e);if(e&&i.Object(e)){if(i.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return l.arrayOf(e[0])}return l.object(e)}return i.Function(e)?e:l.value(e)}function h(e,t,n,r){if(i.Function(e)){if(e(t,n))return!0;throw new a(r||e,t)}return h(f(e),t,n)}for(var d in l.oneOf=l.anyOf,i)h[d]=i[d];for(d in l)h[d]=l[d];var p=n(74307);for(d in p)h[d]=p[d];h.compile=f,h.TfTypeError=a,h.TfPropertyTypeError=s,e.exports=h},30247:e=>{var t={Array:function(e){return null!=e&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var n in t.Null=t.Nil,t)t[n].toJSON=function(e){return e}.bind(null,n);e.exports=t},53250:(e,t,n)=>{"use strict";var r=n(67294);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})}),[e,n,t]),a((function(){return u(i)&&l({inst:i}),e((function(){u(i)&&l({inst:i})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},50139:(e,t,n)=>{"use strict";var r=n(67294),i=n(61688);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,c=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=s(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=u((function(){function e(e){if(!c){if(c=!0,a=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,c=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var d=a(e,f[0],f[1]);return c((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},61688:(e,t,n)=>{"use strict";e.exports=n(53250)},52798:(e,t,n)=>{"use strict";e.exports=n(50139)},94927:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},57795:(e,t,n)=>{"use strict";var Buffer=n(89509).Buffer,r=9007199254740991;function i(e){if(e<0||e>r||e%1!=0)throw new RangeError("value out of range")}function o(e){return i(e),e<253?1:e<=65535?3:e<=4294967295?5:9}e.exports={encode:function e(t,buffer,n){if(i(t),buffer||(buffer=Buffer.allocUnsafe(o(t))),!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(buffer.writeUInt8(t,n),e.bytes=1):t<=65535?(buffer.writeUInt8(253,n),buffer.writeUInt16LE(t,n+1),e.bytes=3):t<=4294967295?(buffer.writeUInt8(254,n),buffer.writeUInt32LE(t,n+1),e.bytes=5):(buffer.writeUInt8(255,n),buffer.writeUInt32LE(t>>>0,n+1),buffer.writeUInt32LE(t/4294967296|0,n+5),e.bytes=9),buffer},decode:function e(buffer,t){if(!Buffer.isBuffer(buffer))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var n=buffer.readUInt8(t);if(n<253)return e.bytes=1,n;if(253===n)return e.bytes=3,buffer.readUInt16LE(t+1);if(254===n)return e.bytes=5,buffer.readUInt32LE(t+1);e.bytes=9;var r=buffer.readUInt32LE(t+1),o=4294967296*buffer.readUInt32LE(t+5)+r;return i(o),o},encodingLength:o}},71739:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},93150:function(e,t){var n,r,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],n=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},a=e=>1==e?"argument":"arguments",s=(e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((i,a)=>{if(t.fallbackToNoCallback)try{n[e](...r,o({resolve:i,reject:a},t))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,i()}else t.noCallback?(n[e](...r),i()):n[e](...r,o({resolve:i,reject:a},t))}))},c=(e,t,n)=>new Proxy(t,{apply:(t,r,i)=>n.call(r,e,...i)});let u=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},n={})=>{let r=Object.create(null),i={has:(t,n)=>n in e||n in r,get(i,o,a){if(o in r)return r[o];if(!(o in e))return;let f=e[o];if("function"==typeof f)if("function"==typeof t[o])f=c(e,e[o],t[o]);else if(u(n,o)){let t=s(o,n[o]);f=c(e,e[o],t)}else f=f.bind(e);else if("object"==typeof f&&null!==f&&(u(t,o)||u(n,o)))f=l(f,t[o],n[o]);else{if(!u(n,"*"))return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(t){e[o]=t}}),f;f=l(f,t[o],n["*"])}return r[o]=f,f},set:(t,n,i,o)=>(n in r?r[n]=i:e[n]=i,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},o=Object.create(e);return new Proxy(o,i)},f=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),h=new r((e=>"function"!=typeof e?e:function(t){const n=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)})),d=new r((e=>"function"!=typeof e?e:function(t,n,r){let o,a,s=!1,c=new Promise((e=>{o=function(t){s=!0,e(t)}}));try{a=e(t,n,o)}catch(e){a=Promise.reject(e)}const u=!0!==a&&i(a);if(!0!==a&&!u&&!s)return!1;const l=e=>{e.then((e=>{r(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(u?a:c),!0})),p=({reject:n,resolve:r},i)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(new Error(e.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?n(new Error(i.message)):r(i)},y=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,t)=>{const i=p.bind(null,{resolve:e,reject:t});r.push(i),n.sendMessage(...r)}))},g={devtools:{network:{onRequestFinished:f(h)}},runtime:{onMessage:f(d),onMessageExternal:f(d),sendMessage:y.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:y.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},b={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":b},services:{"*":b},websites:{"*":b}},l(e,g,n)};e.exports=n(chrome)}else e.exports=globalThis.browser},void 0===(i="function"==typeof n?n.apply(t,r):n)||(e.exports=i)},37174:(e,t,n)=>{var Buffer=n(48764).Buffer,r=n(58334);function i(buffer,e){if(void 0!==e&&buffer[0]!==e)throw new Error("Invalid network version");if(33===buffer.length)return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:!1};if(34!==buffer.length)throw new Error("Invalid WIF length");if(1!==buffer[33])throw new Error("Invalid compression flag");return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:!0}}function o(e,t,n){var r=new Buffer(n?34:33);return r.writeUInt8(e,0),t.copy(r,1),n&&(r[33]=1),r}e.exports={decode:function(e,t){return i(r.decode(e),t)},decodeRaw:i,encode:function(e,t,n){return"number"==typeof e?r.encode(o(e,t,n)):r.encode(o(e.version,e.privateKey,e.compressed))},encodeRaw:o}},26996:()=>{},46601:()=>{},89214:()=>{},42480:()=>{},46403:()=>{},52361:()=>{},94616:()=>{},18597:e=>{"use strict";e.exports={i8:"6.5.4"}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=i,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"js/"+e+".bundle.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="lightning-browser-extension:",a.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==r+i){s=f;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+i),s.src=e),n[e]=[t];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(d);var i=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(r))),t)return t(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"})(),(()=>{var e={352:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,s,c]=n,u=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)c(a)}for(t&&t(n);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunklightning_browser_extension=self.webpackChunklightning_browser_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};a.r(e),a.d(e,{dQ:()=>ci,ci:()=>Xr,bytesToNumberBE:()=>ni,ty:()=>ri,eV:()=>si,n$:()=>fi,ql:()=>ai,hexToBytes:()=>ti,_t:()=>Yr,tL:()=>ii,S5:()=>oi,FF:()=>di});var t={};a.r(t),a.d(t,{dQ:()=>Ws,ci:()=>js,bytesToNumberBE:()=>Hs,ty:()=>Fs,eV:()=>Vs,n$:()=>Ys,ql:()=>qs,hexToBytes:()=>Ms,tL:()=>zs,S5:()=>Ks,FF:()=>Xs});var n={};a.r(n),a.d(n,{isPoint:()=>uv,isPrivate:()=>fv,pointCompress:()=>lv,pointFromScalar:()=>ov,privateAdd:()=>dv,privateNegate:()=>pv,privateSub:()=>av,sign:()=>yv,signSchnorr:()=>sv,verify:()=>gv,verifySchnorr:()=>cv,xOnlyPointAddTweak:()=>hv});var r,i=a(93150),o=a.n(i),s="User rejected";function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function l(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e){return h.apply(this,arguments)}function h(){return(h=u((function(e){var t,n,r,i,a,s,c;return l(this,(function(u){switch(u.label){case 0:return[4,y(t=400,n=600)];case 1:return r=u.sent(),i=r.top,a=r.left,s={url:e,type:"popup",width:t,height:n,top:i,left:a},[4,o().windows.create(s)];case 2:return[2,(c=u.sent()).tabs&&c.tabs[0].id]}}))}))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=u((function(e){var t;return l(this,(function(n){switch(n.label){case 0:return t={url:e},[4,o().tabs.create(t)];case 1:return[2,n.sent().id]}}))}))).apply(this,arguments)}function y(e,t){return g.apply(this,arguments)}function g(){return(g=u((function(e,t){var n,r,i,a,s,c;return l(this,(function(u){switch(u.label){case 0:n=0,r=0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o().windows.getLastFocused()];case 2:return(i=u.sent())&&null!=i.top&&null!=i.left&&null!=i.width&&null!=i.height&&(r=Math.round(i.top+(i.height-t)/2),n=Math.round(i.left+(i.width-e)/2)),[3,4];case 3:return u.sent(),a=window.screenX,s=window.screenY,c=window.outerWidth,r=Math.max(s,0),n=Math.max(a+(c-e),0),[3,4];case 4:return[2,{top:r,left:n}]}}))}))).apply(this,arguments)}function b(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function m(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}!function(e){e.AED="AED",e.AFN="AFN",e.ALL="ALL",e.AMD="AMD",e.ANG="ANG",e.AOA="AOA",e.ARS="ARS",e.AUD="AUD",e.AWG="AWG",e.AZN="AZN",e.BAM="BAM",e.BBD="BBD",e.BDT="BDT",e.BGN="BGN",e.BHD="BHD",e.BIF="BIF",e.BMD="BMD",e.BND="BND",e.BOB="BOB",e.BRL="BRL",e.BSD="BSD",e.BTN="BTN",e.BWP="BWP",e.BZD="BZD",e.CAD="CAD",e.CDF="CDF",e.CHF="CHF",e.CNY="CNY",e.COP="COP",e.CRC="CRC",e.CUP="CUP",e.CVE="CVE",e.CZK="CZK",e.DJF="DJF",e.DKK="DKK",e.DOP="DOP",e.DZD="DZD",e.EGP="EGP",e.ERN="ERN",e.ETB="ETB",e.EUR="EUR",e.FJD="FJD",e.GBP="GBP",e.GEL="GEL",e.GHS="GHS",e.GIP="GIP",e.GMD="GMD",e.GNF="GNF",e.GTQ="GTQ",e.GYD="GYD",e.HKD="HKD",e.HNL="HNL",e.HRK="HRK",e.HTG="HTG",e.HUF="HUF",e.IDR="IDR",e.ILS="ILS",e.INR="INR",e.IQD="IQD",e.IRR="IRR",e.ISK="ISK",e.JMD="JMD",e.JOD="JOD",e.JPY="JPY",e.KES="KES",e.KGS="KGS",e.KHR="KHR",e.KMF="KMF",e.KPW="KPW",e.KRW="KRW",e.KWD="KWD",e.KYD="KYD",e.KZT="KZT",e.LAK="LAK",e.LBP="LBP",e.LKR="LKR",e.LRD="LRD",e.LSL="LSL",e.LYD="LYD",e.MAD="MAD",e.MDL="MDL",e.MGA="MGA",e.MKD="MKD",e.MMK="MMK",e.MNT="MNT",e.MOP="MOP",e.MUR="MUR",e.MVR="MVR",e.MWK="MWK",e.MXN="MXN",e.MYR="MYR",e.NAD="NAD",e.NGN="NGN",e.NIO="NIO",e.NOK="NOK",e.NPR="NPR",e.NZD="NZD",e.OMR="OMR",e.PAB="PAB",e.PEN="PEN",e.PGK="PGK",e.PHP="PHP",e.PKR="PKR",e.PLN="PLN",e.PYG="PYG",e.QAR="QAR",e.RON="RON",e.RSD="RSD",e.RUB="RUB",e.RWF="RWF",e.SAR="SAR",e.SBD="SBD",e.SCR="SCR",e.SDG="SDG",e.SEK="SEK",e.SGD="SGD",e.SHP="SHP",e.SLL="SLL",e.SOS="SOS",e.SRD="SRD",e.SVC="SVC",e.SYP="SYP",e.SZL="SZL",e.THB="THB",e.TMT="TMT",e.TND="TND",e.TOP="TOP",e.TRY="TRY",e.TTD="TTD",e.TWD="TWD",e.TZS="TZS",e.UAH="UAH",e.UGX="UGX",e.USD="USD",e.UYU="UYU",e.UZS="UZS",e.VND="VND",e.VUV="VUV",e.WST="WST",e.XAF="XAF",e.XCD="XCD",e.XOF="XOF",e.XPF="XPF",e.ZAR="ZAR",e.ZMW="ZMW",e.ZWL="ZWL"}(r||(r={}));var w,v={base64ToHex:function(e){for(var t=[],n=0,r=atob(e.replace(/[ \r\n]+$/,""));n<r.length;++n){var i=r.charCodeAt(n).toString(16);1===i.length&&(i="0"+i),t[t.length]=i}return t.join("")},urlSafeBase64ToHex:function(e){return v.base64ToHex(e.replace(/_/g,"/").replace(/-/g,"+"))},bytesToHexString:function(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join("")},bytesToString:function(e){return String.fromCharCode.apply(null,e)},hexToUint8Array:function(e){var t=e.match(/.{1,2}/g);if(t)return new Uint8Array(t.map((function(e){return parseInt(e,16)})))},stringToUint8Array:function(e){return Uint8Array.from(e,(function(e){return e.charCodeAt(0)}))},deferredPromise:function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}},openPage:function(e){o().tabs.create({url:o().runtime.getURL(e)})},redirectPage:function(e){o().tabs.update({url:o().runtime.getURL(e)})},openUrl:function(e){o().tabs.create({url:e})},openPrompt:(w=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){b(o,r,i,a,s,"next",e)}function s(e){b(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,a;return m(this,(function(s){switch(s.label){case 0:return t=new URLSearchParams,e.args&&t.set("args",JSON.stringify(e.args)),e.origin&&t.set("origin",JSON.stringify(e.origin)),t.set("action",e.action),n="".concat(o().runtime.getURL("prompt.html"),"?").concat(t.toString()),(r=!(!o().windows||!o().windows.create))?[4,f(n)]:[3,2];case 1:return a=s.sent(),[3,4];case 2:return[4,d(n)];case 3:a=s.sent(),s.label=4;case 4:return i=a,[2,new Promise((function(e,t){var n=function(n,s){if(n&&n.response&&s.tab&&s.tab.id===i&&s.tab.windowId)return o().tabs.onRemoved.removeListener(a),(r?o().windows.remove(s.tab.windowId):o().tabs.remove(i)).then((function(){return n.error?t(new Error(n.error)):e(n)}))},a=function(e){i===e&&(o().runtime.onMessage.removeListener(n),t(new Error("Prompt was closed")))};o().runtime.onMessage.addListener(n),o().tabs.onRemoved.addListener(a)}))]}}))})),function(e){return w.apply(this,arguments)}),getBoostagramFromInvoiceCustomRecords:function(e){try{var t,n=null==e?void 0:e[7629169];return n&&(t=atob(n)),t?JSON.parse(t):void 0}catch(e){return void console.error(e)}}};const _=v;var E=3===o().runtime.getManifest().manifest_version;function S(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function k(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var A=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){S(o,r,i,a,s,"next",e)}function s(e){S(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){var e;return k(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,chrome.scripting.registerContentScripts([{id:"inpageScript",matches:["file://*/*","http://*/*","https://*/*"],js:["js/inpageScript.bundle.js"],runAt:"document_start",world:"MAIN",allFrames:!0}])];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.warn("Dropped attempt to register inpage content script. ".concat(e)),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),O=a(72378),P=a.n(O),I=a(25030),T=a.n(I);const x=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,i,o);return o},N=e=>e?x(e):x;var R=a(67294),C=a(52798);const{useDebugValue:B}=R,{useSyncExternalStoreWithSelector:L}=C;let U=!1;const j=e=>e;const D=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?N(e):e,n=(e,n)=>function(e,t=j,n){n&&!U&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),U=!0);const r=L(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return B(r),r}(t,e,n);return Object.assign(n,t),n},M=e=>e?D(e):D;var H=a(81354);function F(e,t){return H.AES.encrypt(JSON.stringify(e),t).toString()}function z(e,t){var n=H.AES.decrypt(e,t);return JSON.parse(n.toString(H.enc.Utf8))}a(98507),a(17427),a(67763),a(47822),a(96023),a(77573),a(15551),a(15473),a(81987),a(57548),a(91876),a(33852);const K={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||K,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new q(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new q(this.logger,e)}}var V=new q;class W{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let e=0;e<r;e++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[r,i]=t;for(let t=0;t<i;t++)r.apply(r,[e,...n])}))}}}function G(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}function $(e){return null==e?"":""+e}const Y=/###/g;function Z(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(Y,"."):e}function i(){return!e||"string"==typeof e}const o="string"!=typeof t?t:t.split(".");let a=0;for(;a<o.length-1;){if(i())return{};const t=r(o[a]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return i()?{}:{obj:e,k:r(o[a])}}function X(e,t,n){const{obj:r,k:i}=Z(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let o=t[t.length-1],a=t.slice(0,t.length-1),s=Z(e,a,Object);for(;void 0===s.obj&&a.length;)o=`${a[a.length-1]}.${o}`,a=a.slice(0,a.length-1),s=Z(e,a,Object),s&&s.obj&&void 0!==s.obj[`${s.k}.${o}`]&&(s.obj=void 0);s.obj[`${s.k}.${o}`]=n}function J(e,t){const{obj:n,k:r}=Z(e,t);if(n)return n[r]}function Q(e,t,n){for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Q(e[r],t[r],n):e[r]=t[r]);return e}function ee(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ne(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(e=>te[e])):e}const re=[" ",",","?","!",";"],ie=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20);function oe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let e=0;e<r.length;){if(!i||"object"!=typeof i)return;let t,o="";for(let a=e;a<r.length;++a)if(a!==e&&(o+=n),o+=r[a],t=i[o],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&a<r.length-1)continue;e+=a-e+1;break}i=t}return i}function ae(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class se extends W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):"string"==typeof n&&i?a.push(...n.split(i)):a.push(n)));const s=J(this.data,a);return!s&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),s||!o||"string"!=typeof n?s:oe(this.data&&this.data[e]&&this.data[e][t],n,i)}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),X(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let s=J(this.data,a)||{};r?Q(s,n,i):s={...s,...n},X(this.data,a,s),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var ce={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))})),t}};const ue={};class le extends W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(e,t,n){e.forEach((e=>{t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=V.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";const r=re.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const i=ie.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let o=!i.test(e);if(!o){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(o=!0)}return o}(e,n,r));if(o&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:i};const o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],t),s=a[a.length-1],c=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(u){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:`${s}${e}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:`${s}${e}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:o}const l=this.resolve(e,t);let f=l&&l.res;const h=l&&l.usedKey||o,d=l&&l.exactUsedKey||o,p=Object.prototype.toString.apply(f),y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject;if(g&&f&&("string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(p)<0&&("string"!=typeof y||"[object Array]"!==p)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,f,{...t,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(l.res=e,l.usedParams=this.getUsedParamsDetails(t),l):e}if(i){const e="[object Array]"===p,n=e?[]:{},r=e?d:h;for(const e in f)if(Object.prototype.hasOwnProperty.call(f,e)){const o=`${r}${i}${e}`;n[e]=this.translate(o,{...t,joinArrays:!1,ns:a}),n[e]===o&&(n[e]=f[e])}f=n}}else if(g&&"string"==typeof y&&"[object Array]"===p)f=f.join(y),f&&(f=this.extendTranslation(f,e,t,n));else{let r=!1,a=!1;const u=void 0!==t.count&&"string"!=typeof t.count,h=le.hasDefaultValue(t),d=u?this.pluralResolver.getSuffix(c,t.count,t):"",p=t.ordinal&&u?this.pluralResolver.getSuffix(c,t.count,{ordinal:!1}):"",y=u&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=y&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${d}`]||t[`defaultValue${p}`]||t.defaultValue;!this.isValidLookup(f)&&h&&(r=!0,f=g),this.isValidLookup(f)||(a=!0,f=o);const b=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:f,m=h&&g!==f&&this.options.updateMissing;if(a||r||m){if(this.logger.log(m?"updateKey":"missingKey",c,s,o,m?g:f),i){const e=this.resolve(o,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=h&&r!==f?r:b;this.options.missingKeyHandler?this.options.missingKeyHandler(e,s,n,i,m,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,s,n,i,m,t),this.emit("missingKey",e,s,n,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);y&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{r([e],o+n,t[`defaultValue${n}`]||g)}))})):r(e,o,g))}f=this.extendTranslation(f,e,t,l,n),a&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${s}:${o}`),(a||r)&&this.options.parseMissingKeyHandler&&(f="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}:${o}`:o,r?f:void 0):this.options.parseMissingKeyHandler(f))}return r?(l.res=f,l.usedParams=this.getUsedParamsDetails(t),l):f}extendTranslation(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const a="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(a){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),a){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null):o.translate(...r,t)}),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,s="string"==typeof a?[a]:a;return null!=e&&s&&s.length&&!1!==n.applyPostProcessor&&(e=ce.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const s=this.extractFromKey(e,a),c=s.key;n=c;let u=s.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const l=void 0!==a.count&&"string"!=typeof a.count,f=l&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==a.context&&("string"==typeof a.context||"number"==typeof a.context)&&""!==a.context,d=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);u.forEach((e=>{this.isValidLookup(t)||(o=e,!ue[`${d[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(ue[`${d[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${d.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((n=>{if(this.isValidLookup(t))return;i=n;const o=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,n,e,a);else{let e;l&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(o.push(c+e),a.ordinal&&0===e.indexOf(r)&&o.push(c+e.replace(r,this.options.pluralSeparator)),f&&o.push(c+t)),h){const n=`${c}${this.options.contextSeparator}${a.context}`;o.push(n),l&&(o.push(n+e),a.ordinal&&0===e.indexOf(r)&&o.push(n+e.replace(r,this.options.pluralSeparator)),f&&o.push(n+t))}}let s;for(;s=o.pop();)this.isValidLookup(t)||(r=s,t=this.getResource(n,e,s,a))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&"string"!=typeof e.replace;let r=n?e.replace:e;if(n&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}function fe(e){return e.charAt(0).toUpperCase()+e.slice(1)}class he{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=V.create("languageUtils")}getScriptPartFromCode(e){if(!(e=ae(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=ae(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if("string"==typeof e&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=fe(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=fe(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=fe(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:0===e.indexOf(n)?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return"string"==typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))})),r}}let de=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],pe={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};const ye=["v1","v2","v3"],ge=["v4"],be={zero:0,one:1,two:2,few:3,many:4,other:5};class me{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=V.create("pluralResolver"),this.options.compatibilityJSON&&!ge.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){const e={};return de.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:pe[t.fc]}}))})),e}()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(ae("dev"===e?"en":e),{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>be[e]-be[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?`_plural_${r.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!ye.includes(this.options.compatibilityJSON)}}function we(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(e,t,n){const r=J(e,n);return void 0!==r?r:J(t,n)}(e,t,n);return!o&&i&&"string"==typeof n&&(o=oe(e,n,r),void 0===o&&(o=oe(t,n,r))),o}class ve{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=V.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const t=e.interpolation;this.escape=void 0!==t.escape?t.escape:ne,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?ee(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?ee(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?ee(t.nestingPrefix):t.nestingPrefixEscaped||ee("$t("),this.nestingSuffix=t.nestingSuffix?ee(t.nestingSuffix):t.nestingSuffixEscaped||ee(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,o,a;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}const u=e=>{if(e.indexOf(this.formatSeparator)<0){const i=we(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),o=i.shift().trim(),a=i.join(this.formatSeparator).trim();return this.format(we(t,s,o,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...r,...t,interpolationkey:o})};this.resetRegExp();const l=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>c(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?c(this.escape(e)):c(e)}].forEach((t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(o=u(n),void 0===o)if("function"==typeof l){const t=l(e,i,r);o="string"==typeof t?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(f){o=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else"string"==typeof o||this.useRawValueToEscape||(o=$(o));const s=t.safeValue(o);if(e=e.replace(i[0],s),f?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}})),e}nest(e,t){let n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function a(e,t){const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let o=`{${r[1]}`;e=r[0],o=this.interpolate(o,i);const a=o.match(/'/g),s=o.match(/"/g);(a&&a.length%2==0&&!s||s.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i={...t,...i})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${o}`}return delete i.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){let s=[];i={...o},i=i.replace&&"string"!=typeof i.replace?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),s=e,c=!0}if(r=t(a.call(this,n[1].trim(),i),i),r&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=$(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),c&&(r=s.reduce(((e,t)=>this.format(e,t,o.lng,{...o,interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}function _e(e){const t={};return function(n,r,i){const o=r+JSON.stringify(i);let a=t[o];return a||(a=e(ae(r),i),t[o]=a),a(n)}}class Ee{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=V.create("formatter"),this.options=e,this.formats={number:_e(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:_e(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:_e(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:_e(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:_e(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=_e(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator).reduce(((e,t)=>{const{formatName:i,formatOptions:o}=function(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(!e)return;const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,"");n[t.trim()]||(n[t.trim()]=i),"false"===i&&(n[t.trim()]=!1),"true"===i&&(n[t.trim()]=!0),isNaN(i)||(n[t.trim()]=parseInt(i,10))}))}return{formatName:t,formatOptions:n}}(t);if(this.formats[i]){let t=e;try{const a=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},s=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,s,{...o,...r,...a})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e}),e);return i}}class Se extends W{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=V.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},o={},a={},s={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===o[a]&&(o[a]=!0):(this.state[a]=1,r=!1,void 0===o[a]&&(o[a]=!0),void 0===i[a]&&(i[a]=!0),void 0===s[t]&&(s[t]=!0)))})),r||(a[e]=!0)})),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;const a={};this.queue.forEach((n=>{!function(e,t,n,r){const{obj:i,k:o}=Z(e,t,Object);i[o]=i[o]||[],r&&(i[o]=i[o].concat(n)),r||i[o].push(n)}(n.loaded,[i],o),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:o});this.readingCalls++;const a=(a,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&s&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*i,o)}),i):o(a,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,a);try{const n=s(e,t);n&&"function"==typeof n.then?n.then((e=>a(null,e))).catch(a):a(null,n)}catch(e){a(e)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,((n,o)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,o),this.loaded(e,n,o)}))}saveMissing(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const s={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,n,r,s):c(e,t,n,r),i&&"function"==typeof i.then?i.then((e=>a(null,e))).catch(a):a(null,i)}catch(e){a(e)}else c(e,t,n,r,a,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}function ke(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if("object"==typeof e[1]&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Ae(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Oe(){}class Pe extends W{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=Ae(e),this.services={},this.logger=V,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=ke();function i(e){return e?"function"==typeof e?new e:e:null}if(this.options={...r,...this.options,...Ae(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){let t;this.modules.logger?V.init(i(this.modules.logger),this.options):V.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=Ee);const n=new he(this.options);this.store=new se(this.options.resources,this.options);const o=this.services;o.logger=V,o.resourceStore=this.store,o.languageUtils=n,o.pluralResolver=new me(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(o.formatter=i(t),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new ve(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new Se(i(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.languageDetector&&(o.languageDetector=i(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=i(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new le(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=Oe),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const o=G(),a=()=>{const e=(e,t)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe;const n="string"==typeof e?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}this.options.preload&&this.options.preload.forEach((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=G();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Oe),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&ce.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=G();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(e,o)=>{o?(i(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const n="string"==typeof t?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||i(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{o(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const i=function(e,t){let o;if("object"!=typeof t){for(var a=arguments.length,s=new Array(a>2?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];o=r.options.overloadTranslationOptionHandler([e,t].concat(s))}else o={...t};o.lng=o.lng||i.lng,o.lngs=o.lngs||i.lngs,o.ns=o.ns||i.ns,o.keyPrefix=o.keyPrefix||n||i.keyPrefix;const u=r.options.keySeparator||".";let l;return l=o.keyPrefix&&Array.isArray(e)?e.map((e=>`${o.keyPrefix}${u}${e}`)):o.keyPrefix?`${o.keyPrefix}${u}${e}`:e,r.t(l,o)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const o=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||2===n};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(n,e)||r&&!o(i,e)))}loadNamespaces(e,t){const n=G();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=G();"string"==typeof e&&(e=[e]);const r=this.options.preload||[],i=e.filter((e=>r.indexOf(e)<0));return i.length?(this.options.preload=r.concat(i),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new he(ke());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new Pe(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new se(this.store.data,r),i.services.resourceStore=i.store),i.translator=new le(i.services,r),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)})),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ie=Pe.createInstance();Ie.createInstance=Pe.createInstance;Ie.createInstance,Ie.dir,Ie.init,Ie.loadResources,Ie.reloadResources,Ie.use,Ie.changeLanguage,Ie.getFixedT,Ie.t,Ie.exists,Ie.setDefaultNamespace,Ie.hasLoadedNamespace,Ie.loadNamespaces,Ie.loadLanguages;function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function xe(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:String(t)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xe(r.key),r)}}var Re=[],Ce=Re.forEach,Be=Re.slice;var Le=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ue=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=encodeURIComponent(t),o="".concat(e,"=").concat(i);if(r.maxAge>0){var a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(r.domain){if(!Le.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(r.domain)}if(r.path){if(!Le.test(r.path))throw new TypeError("option path is invalid");o+="; Path=".concat(r.path)}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}(e,encodeURIComponent(t),i)},je=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},De={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=je(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&Ue(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},Me={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");if(o>0)r[i].substring(0,o)===e.lookupQuerystring&&(t=r[i].substring(o+1))}}return t}},He=null,Fe=function(){if(null!==He)return He;try{He="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){He=!1}return He},ze={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&Fe()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&Fe()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Ke=null,qe=function(){if(null!==Ke)return Ke;try{Ke="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Ke=!1}return Ke},Ve={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&qe()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&qe()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},We={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Ge={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},$e={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},Ye={name:"subdomain",lookup:function(e){var t="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}};var Ze=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}var t,n,r;return t=e,n=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=function(e){return Ce.call(Be.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(e){return e.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(De),this.addDetector(Me),this.addDetector(ze),this.addDetector(Ve),this.addDetector(We),this.addDetector(Ge),this.addDetector($e),this.addDetector(Ye)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),n=n.map((function(e){return t.options.convertDetectedLanguage(e)})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}],n&&Ne(t.prototype,n),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ze.type="languageDetector";a(71739);Object.create(null);const Xe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Je={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Qe=e=>Je[e];let et,tt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Xe,Qe)};const nt={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tt={...tt,...e}}(e.options.react),function(e){et=e}(e)}};(0,R.createContext)();const rt=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Zvolte pin pro odemykn:"},"confirm_password":{"label":"Ovte, e heslo je zadno sprvn:"},"errors":{"enter_password":"Prosm, zadejte pin.","confirm_password":"Prosm potvrte svj pin.","mismatched_password":"Zadan piny se neshoduj."}},"test_connection":{"ready":"Skvle, ve je pipraveno!","initializing":"Inicializace vaeho tu. Prosm ekejte, chvli to zabere...","connection_error":"Chyba spojen","review_connection_details":"Prosm pekontrolujte nastaven vaeho spojen.","connection_taking_long":"Pipojovn zabralo vce, ne bylo oekvno... Zadali jste daje o pipojen sprvn? Je v uzel dostupn?","contact_support":"Pokud potebujete pomoct, prosm kontaktujte support@getalby.com","actions":{"delete_edit_account":"Smate nevalidn et a zmny provete znovu"}},"pin_extension":{"title":"Pipnout rozen Alby","explanation":"1. Zvolte <0/> v pravm rohu svho prohlee<1/>2. Najdte Alby a zvolte pipnout k toolbaru<1/>3. To je ve. Pro pstup k Alby pouze kliknte na <2/> ikonu","description":"U jste skoro na konci. Aby se vm Alby pouvalo pohodln, nezapomete si doplnk pipnout do toolbaru prohlee:"}},"choose_connector":{"description":"Pipojte svou extern ligtning penenku nebo uzel","lnd":{"title":"LND","page":{"title":"Pipojt se ke svmu LND uzlu","description":"Potebujete URL svho uzlu a macaroon s oprvnnm pro ten a odesln (napklad admin.macaroon)"},"url":{"label":"REST API host a port","placeholder":"https://url-vaseho-uzlu:8080"},"macaroon":{"label":"Macaroon (v hexadecimlnm formtu)"},"drag_and_drop":"Pethnte svj macaroon zde nebo ho <0>vyhledejte</0>","errors":{"connection_failed":"Pipojen se nezdailo. Jsou vae daje pro LND zadny sprvn?"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Pipojit k LNDHub","description":"Vlote svou LNDHub URI nebo naskenujte QR kd svou webkamerou."},"uri":{"label":"LNDHub Export URI"},"errors":{"invalid_uri":"Nevalidn LNDHub URI","connection_failed":"Pipojen se nezdailo. Je vae LNDHub URI zadna sprvn?"}},"lnbits":{"title":"LNbits","page":{"title":"Pipojen k <0>LNbits</0>","instructions":"V LNbits vyberte penenku, ke kter se chcete pipojit, otevete ji, zvolte Informace o API, zkoprujte administran kl. Vlote ho zde:"},"admin_key":{"label":"LNbits Administran kl","placeholder":"V 32-mstn administran kl"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Pipojen se nezdailo. Zadali jste sprvnou URL a administran kl?"}},"eclair":{"title":"Eclair","page":{"title":"Pipojen k <0>Eclair</0>","instructions":"Potebujete svou Eclair URL a heslo."},"password":{"label":"Eclair heslo"},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"Pipojen k uzlu <0>Citadel</0>","instructions":"Aktuln nefunguje v ppad, e mte zapnutou dvoufaktorovou autentizaci (2FA)."},"password":{"label":"Heslo k Citadel"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Pipojen k uzlu <0>Umbrel</0>","instructions":"V dashboardu Umbrell pejdte do <0>Pipojit pnenku (Connect Wallet)</0>. Vyberte volbu <0>lndconnect REST</0> a zkoprujte <0>lndconnect URL</0>. (V zvislosti na vaem nastaven mete vyut bu loklnho spojen nebo pipojen pes Tor.)"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://vas-uzel:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Pipojen k <0>myNode</0>","instructions":"Na va domovsk strnce myNode kliknte na tlatko <0>Pnenka (Wallet)</0> sluby <0>lightning</0>.<1/> Dle zvolte <0>Provat penenku (Pair Wallet)</0> pod zlokou <0>Stav (Status)</0>. S dotznm vlote vae heslo.<1/> Z rozbalovac nabdky vyberte volbu provn. V zvislosti na vaem nastaven mete zvolit bu pipojen pes <0>lightning (REST + Local IP)</0> nebo <0>lightning (REST + Tor)</0>."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://vas-uzel:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Pipojen k vaemu uzlu <0>StartOS</0>","instructions":"<0>Pozn.:</0> Aktuln podporujeme pouze LND, ale v budoucnu plnujeme pidvat podporu c-lightning!<1/>V dashboardu vaeho StartOS zvolte slubu <0>Lightning Network Daemon</0>.<1/>Vyberte zloku <0>Vlastnosti (Properties)</0>.<1/>Nsledn zkoprujte <0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://vas-uzel:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Pipojen k vaemu uzlu <0>RaspiBlitz</0>","instructions1":"Nsledujte tyto kroky:<1/> 1. <0>Pipojte se pes SSH</0> k vaemu <0>RaspiBlitz</0><1/>2. Vyberte <0>Pipojit aplikace a zobrazit pstupov daje (Connect Apps & Show Credentials)</0> ze seznamu<1/><0/>3. Vyberte <0>Pipojit Alby k tomuto uzlu</0><1/>4. Stisknte <0>OK</0>pro zobrazen detail pipojen<1/><1/>Zkoprujte <0>REST API</0> nebo <0>.onion</0> adresu pro pipojen pes Tor a vlote ji do vstupnho pole ne.","instructions2":"Zkoprujte (administran) <0>macaroon</0> do pole ne."},"rest_api_host":{"label":"REST API host","placeholder":"onion-adresa-vaseho-uzlu:port"}},"blink":{"title":"Blink","page":{"title":"Pipojen k <0>Blink Wallet</0>"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"Pipojen k <0>Bitcoin Jungle Wallet</0>"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Konfiguran data"},"errors":{"connection_failed":"Pipojen se nezdailo. Je BTCPay URL zadna sprvn a je pstupn?"}},"commando":{"title":"Core Lightning","page":{"title":"Pipojen k vaemu uzlu Core Lightning","instructions":"Ujistte se, e pouvte Core Lightning verze 0.12.0 (nebo novj), dle e vm b doplnk commando a v uzel je pstupn pes s lightning. Vytvote novou \\"runu\\" sputnm pkazu \'lightning-cli commando-rune\'."},"host":{"label":"Host"},"pubkey":{"label":"Veejn kl"},"rune":{"label":"Runa"},"port":{"label":"Port"},"proxy":{"label":"Websocket proxy"},"privKey":{"label":"Lokln privtn kl (automaticky generovan)"},"config":{"label":"Konfiguran data","placeholder":"config=https://vas-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Pipojen se nezdailo. Je v Core Lightning uzel online a se zapnutm doplkem commando?"}},"title":"Pipojte Lightning penenku","lnc":{"title":"Lightning terminl (LNC)","pairing_phrase":{"label":"Vae provac frze ","placeholder":"tajn frze"}},"umbrel_lightning_node":{"title":"Lightning uzel"}},"home":{"actions":{"send_satoshis":" Odeslat satoshi ","enable_now":"Povolit nyn"},"allowance_view":{"sats":"sat","total_spent":"Cekov utraceno","total_payments":"Platby celkem","permissions":"Oprvnn"},"default_view":{"is_blocked_hint":"Alby je v souasnosti zakzan na {host}}","block_removed":"Povolen {{host}}. Prosm znovu natte webovou strnku."}},"accounts":{"account_view":{"nostr":{"errors":{"failed_to_load":"Nepodailo se nast Nostr kl. Zadali jste validn Nostr kl?"},"generate_keys":{"hint":"Mete vygenerovat nov nhodn generovan kl nebo derivovat kl ze svho tu (s vyuitm podepsan kanonick frze). <0>Dozvdt se vce </0>","screen_reader":"Vygenerovat nov Nostr kl pro v et","actions":{"random_keys":"Vygenerovat nhodn kl","derived_keys":"Derivovat kl z vaeho tu"},"title":"Vygenerujte nov Nostr kl"},"private_key":{"title":"Sprva vaeho kle","subtitle":"Vlote svj privtn kl nebo si vygenerujte nov. Pedtm, ne budete generovat nov kl, ujistte se, e mte svj kl zazalohovan. <0>Dozvdt se vce </0>","success":"Privtn kl byl spn zaifrovn a uloen.","successfully_removed":"Privtn kl byl odstrann.","label":"Privtn kl","failed_to_remove":"Zadan jmno tu se neshoduje, v star privtn kl byl obnoven."},"actions":{"generate":"Vygenerovat nov kl"},"hint":"je jednoduch oteven protokol, jeho snahou je vytvoit necenzurovateln sociln st. Nostr pracuje s kryptografickmi kli. Pro publikovn jakkoliv zpravy pes tento protokol, je vdy nutn zprvu podepsat svm klem a odeslat ji nkolika tzv. rel. Alby mete pout ke sprv svho Nostr kle. Vtina Nostr aplikac vm pak umon jednoduch pouit kle pmo z doplku Alby.","title":"Nostr","public_key":{"label":"Veejn kl"},"settings":{"label":"Nastaven Nostru","remove":"Odstranit souasn kle","title":"Nastaven Nostru"}},"actions":{"export":"Export"},"export":{"screen_reader":"Exportovat detaily tu","title":"Exportovat et","export_uri":"LNDHub povovac URI","waiting":"ekn na data z LndHub...","your_ln_address":"Vae Lightning adresa:","scan_qr":"Importujte tuto penenku do Zeus nebo BlueWallet naskenovnm QR kdu."},"title2":"Upravit et","name":{"title":"Jmno","placeholder":"Jmno tu"},"mnemonic":{"generate":{"button":"Vygenerovat Master kl","title":"Vygenerovn novho Master kle"},"saved":"Master kl byl zaifrovn a spn uloen.","lnurl":{"use_mnemonic":"Pouvat Master kl pro pihlaovn do aplikac podporujcch autentizaci pes Lightning (LNURL Auth)","title":"Pihlen pes Lightning"},"backup":{"protocols":{"nostr":"Nostr"},"save":"Uloit Master kl","button":"Zobrazit zlon frzi"},"title":" Sprva kl","import":{"button":"Importovat Master kl","title":"Import Master kle"}},"network":{"options":{"testnet":"Testnet","bitcoin":"Mainnet","regtest":"Regtest"},"title":"S"}}},"unlock":{"unlock_to_continue":"Odemknout pro pokraovn","unlock_password":"Vae heslo pro odemen","help_contact":{"part1":"Potebujete pomoc? Kontaktujte","part2":"podporu Alby"},"unlock_error":{"help":"Data vaeho tu jsou ifrovna vam heslem pro odemen. Pokud sv heslo pro odemen zapomenete, budete muset resetovat a znovu vytvoit svj lightning et.","link":"Resetovat a vytvoit nov et"},"errors":{"invalid_password":"Nesprvn heslo"}},"settings":{"browser_notifications":{"title":"Upozornn prohlee","subtitle":"Platebn notifikace a notifikace tkajc se autentizace."},"website_enhancements":{"title":"Vylepen webov strnky","subtitle":"Monosti tipovn pro Twitter, YouTube, apod."},"lnurl_auth":{"title":"LNURL-Auth","hint":"je obecn autentizan protokol. Ovuje uivatele pomoc digitlnch podpisu. Protkol nevyaduje dn dal identifikan daje jako jsou hesla, e-maily, uivatelsk jmna a podobn. S Alby mete pouvat sv lightning ty k bezpenmu pihlen k webovm strnkm. Abychom byli kompatibiln s jinmi penenkami, museli jsme udlat nkolik zmn, kter mete nakonfigurovat zde. <0>V idelnm ppad jsou vechny tyto monosti vypnut.</0> Pouvejte je pouze v ppad, e mte star ty.","legacy_lnurl_auth_202207":{"title":"Star verze LNURL-Auth","subtitle":"Generovn kle pro LNURL-auth se zmnilo (ervenec 2022). Alby nebylo kompatibiln s jinmi implementacemi. To bylo zmnno, ale nyn se pouvaj jin pihlaovac kle. Pokud jste dve pouvali LNURL-auth pro pihlaovn, mete stle zapnout star chovn. Tato volba bude v budoucnu odstranna. Ujistte se, e jste peli na nov typ pihlen."},"legacy_lnurl_auth":{"title":"Star verze podepisovn pro LNDhub aLNbits","subtitle":"Podepisovn zprv a pihlaovn pes LNDhub (napklad BlueWallet) a LNbits ty bylo zmnno (Bezen 2022). Pokud jste se pes tyto ty pihlaovali, mete stle zapnout podporu star pihlaovac metody. Tato volba bude v budoucnu odstranna, proto se ujistte, e jste peli na novou metodu pihlaovn."}},"camera_access":{"title":"Pstup kamery","subtitle":"Pro skenovn QR kd","allow":"Povolit pstup kamee","granted":"Oprvnn udleno"},"language":{"title":"Jazyk","subtitle":"Peklady jet nejsou stoprocentn hotov. <0>Pomote nm peloit Alby do vaeho jazyka!<0>"},"theme":{"title":"Tma","subtitle":"Pouvejte Alby v tmavm nebo svtlm mdu","options":{"dark":"Tmav","light":"Svtl","system":"Systm"}},"show_fiat":{"title":"Saty do fiatu","subtitle":"Vdy provdt smnu do vybran mny z vybran smnrny"},"currency":{"title":"Mna","subtitle":"Zobrazovat stky v tto mn"},"exchange":{"title":"Zdroj kurzu","subtitle":"Zdroj bitcoinovho smnnho kurzu"},"personal_data":{"title":"Osobn data","description":"Pjemci plateb mohou dat o dodaten data, kter se odelou spolu s plabou. Tato data nejsou s nikm sdlena bez vaeho souhlasu, vdy budete dotzn, zda si opravdu pejete tato data odeslat zrove s vai platbou."},"name":{"title":"Jmno","subtitle":"","placeholder":"Vlote sv jmno"},"email":{"title":"Email","subtitle":"","placeholder":"Vlote svou e-mailovou adresu"},"change_password":{"title":"Zmnit heslo pro odemen","subtitle":"","screen_reader":"Zmnit heslo pro odemen","choose_password":{"label":"Vlote nov heslo pro odemen:"},"confirm_password":{"label":"Potvrte nov heslo:"},"submit":{"label":"Zmnit"},"errors":{"enter_password":"Prosm vlote nov heslo pro odemen.","confirm_password":"Prosm potvrte sv heslo.","mismatched_password":"Hesla se neshoduj."},"success":"Zmna hesla probhla spn"}},"send":{"title":"Odeslat","input":{"label":"Pjemce","hint":"Faktura, Lightning adresa nebo LNURL"}},"lnurlpay":{"amount":{"label":"stka"},"comment":{"label":"Koment"},"name":{"label":"Jmno"},"email":{"label":"Email"},"success":"spch, platba byla odeslna!"},"lnurlauth":{"title":"Autentizace","content_message":{"heading":"Chcete se pihlsit do"},"submit":"Pihlsit","success":"spn pihlen na {{name}}","errors":{"status":"Chyba: Stav autentizace nen v podku"}},"lnurlchannel":{"title":"dost o kanl","content_message":{"heading":"dost o kanl z uzlu"},"success":"dost o kanl odeslna spn na {{name}}"},"lnurlwithdraw":{"title":"Vbr","content_message":{"heading":"stka"},"amount":{"label":"stka"},"success":"dost o vber stky {{amount}} byla spn odeslna {{sender}}"},"receive":{"title":"Pijmout","actions":{"create_invoice":"Vytvoit fakturu"},"amount":{"label":"stka","placeholder":"stka v satoshi..."},"description":{"label":"Popisek","placeholder":"Nap. kdo tuto platbu odesl?"},"success":"Platba pijata!","payment":{"waiting":"ekn na platbu...","status":"Zkontrolovat stav platby"}},"publishers":{"publisher":{"allowance":{"title":"Pspvek","used_budget":"pouit satoshi"}},"title":"Vae  webov strnky","description":"Webov strnky, na kterch jste v minulosti pouili Alby","no_info":"Vypad to, e jste Alby jet na dn webov strnce nepouili.","discover":"Prozkoumat webov strnky"},"make_invoice":{"title":"Vytvoit fakturu","amount":{"label":"stka (v satoshi)"},"memo":{"label":"Poznmka"},"errors":{"amount_too_small":"stka je men ne minimum","amount_too_big":"stka pevyuje maximum"}},"confirm_sign_message":{"title":"Podepsat","content":"Tato webov strnka vs d o podpis:"},"confirm_keysend":{"title":"Schvlit platbu","success":"Platba odeslna! Preimage: {{preimage}}","payment_summary":{"description":"Platba odeslna na: {{destination}}"}},"keysend":{"title":"Odeslat","success":"Platba odeslna! Preimage: {{preimage}}","receiver":{"label":"Platba odeslna na"},"amount":{"label":"stka (v satoshi)"}},"confirm_payment":{"title":"Schvlit platbu","success":"Platba v hodnote {{amount}} byla spn!","actions":{"pay_now":"Zaplatit"}},"confirm_request_permission":{"title":"Schvlit dost","allow":"Dovolit tto strnce spustit:","always_allow":"Zapamatovat si m volby a nikdy se u neptat"},"nostr":{"title":"Nostr","allow":"Dovolit tto strnce:","block_and_ignore":"Zablokovat a ignorovat {{host}}","allow_sign":"Povolit {{host}} podepsn:","block_added":"{{host}} pidn do seznamu blokovanch, prosm znovu natte webovou strnku.","content":"Tato webov strnka vs d o podpis:"},"choose_path":{"other":{"title":"Jin penenky","connect":"Pipojit"},"alby":{"title":"Alby","connect":"Pipojit se s Alby"}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Heslo"},"confirm_password":{"label":"Potvrte heslo"},"errors":{"enter_password":"Prosm zadejte heslo.","confirm_password":"Prosm potvrte sv heslo.","mismatched_password":"Hesla se neshoduj."}}}},"distributions":{"title":"Pipojit k {{name}}","raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"btcpay":{"name":"BTCPay"},"startos":{"name":"StartOS"},"umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"}}},"y0":{"password":"Heslo","success":"spch","error":"Chyba","connected_sites":"","sats_one":"sat","sats_other":"sat","loading":"natn","amount":"stka","optional":"Voliten","feedback":"Zptn vazba","copied":"Zkoprovno!","description":"Popis","description_full":"Pln popis","success_message":"{{amount}}{{fiatAmount}} odeslna na {{destination}}","response":"Odezva","message":"Zprva","help":"Pomoc","actions":{"back":"Zpt","delete":"Smazat","edit":"Upravit","next":"Dal","open":"Otevt","cancel":"Zruit","confirm":"Potvrdit","continue":"Pokraovat","connect":"Pipojit","lock":"Uzamt","unlock":"Odemknout","send":"Odeslat","save":"Uloit","receive":"Pijmout","close":"Zavt","export":"Exportovat","remove":"Odstranit","copy":"Zkoprovat","copy_invoice":"","log_in":"Pihlsit se","receive_again":"Pijmout dal platbu","remember":"Zapamatovat moji volbu a nikdy se u neptat"},"errors":{"connection_failed":"Pipojen se nezdailo","payment_failed":"Platba se nezdaila"},"confirm_password":"Potvrte heslo","accounts":"ty","discover":"Objevovat"},"wx":{"allowance_menu":{"confirm_delete":"Jste si jisti, e chcete tuto webovou strnku smazat?","hint":"Tato akce vyresetuje v aktuln rozpoet","new_budget":{"label":"Nov rozpoet"},"enable_login":{"title":"Povolit pihlen k webovm strnkm","subtitle":"Automaticky pihlsit bez potvrzen, kdy to webov strnka vyd."},"edit_allowance":{"title":"Upravit pspvek","screen_reader":"Monosti pspvku"}},"qrcode_scanner":{"title":"Skenovat QR kd","actions":{"start_scanning":"Zat skenovat","stop_scanning":"Zastavit skenovn"},"errors":{"allow_camera_access":"Prosm povolte pstup kamery ve svm nastaven."}},"transactions_table":{"fee":"Poplatek","preimage":"Preimage","received":"Pijato","sent":"Odeslno","boostagram":{"sender":"Odeslatel","message":"Zprva","app":"Aplikace","podcast":"Podcast"},"open_location":"Otevt webovou strnku"},"budget_control":{"remember":{"label":"Zapamatovat a nastavit rozpoet","description":"Mete nastavit zstatek tak, aby nebylo poadovno potvrzen o platbch, dokud nebude vyerpn."},"budget":{"label":"Rozpoet"}},"toasts":{"connection_error":{"what_you_can_do":"Co mete dlat:","double_check":"Znovu pekontrolujte detaily spojen","if_ssl_errors":"a pokud vidte SSL chyby (napklad ERR_CERT_AUTHORITY_INVALID), kliknte na \\"pokroil\\" a pokraujte pijetm certifiktu.","visit_guides":"Navtivte nae nvody pro dal pomoc"},"login_failed":{"password_reset":"Zapomnli jste heslo? Kliknte zde"},"errors":{"invalid_credentials":"Chybn heslo. Prosm zkontrolujte sv heslo a emailovou adresu a zkuste to znovu."}},"account_menu":{"screen_reader":"Pepnout rozbalovac nabdku"},"publishers_table":{"payments":"platby"},"badge":{"label":{"auth":"PIHLEN"}}},"mk":{"lnd":{"lookupinvoice":"Vyhledat detaily o faktue","getinfo":"Zskat informace o uzlu","disconnectpeer":"Odpojit se od vzdlenho uzlu","listpeers":"Zskat seznam vech aktuln aktivnch peer","connectpeer":"Navzet spojen se vzdlenm uzlem","listchannels":"Zskat popis vech otevench kanl","estimatefee":"Odhadnout sazbu poplatku a celkov poplatky za transakci","listinvoices":"Zskat seznam vech faktur","channelbalance":"Zskat pehled o celkovch prostedcch nap vemi otevenmi kanly","walletbalance":"Zskat celkov neutracen vstupy (UTXO) penenky","getnetworkinfo":"Zskat zkladn statistiky o znmm grafu kanl","openchannel":"Otevt nov kanl","listpayments":"Zskat seznam vech odchozch plateb","verifymessage":"Verifikovat podpis zprvy","sendtoroute":"Provst platbu pes zadanou cestu","addinvoice":"Vytvoit nov faktury","routermc":"Pest vnitn kontroln stav","getchaninfo":"Zskat oznmen st pro dan kanl","getnodeinfo":"Zskat informace o kanlu pro dan uzel","queryroutes":"Vyhledat mon cesty","gettransactions":"Zskat seznam vech transakc tkajcch se dan penenky","decodepayreq":"Dekdovat etzec dosti o platbu"},"commando":{"setchannel":"Konfigurace poplatk / rozsahu htlc oznamovanho pro kanl","disconnect":"Uzavt existujc spojen s uzlem","connect":"Navzat nov spojen s jinm uzlem","bkpr-listbalances":"Seznam vech souasnch i minulch zstatk tu","checkmessage":"Zkontrolovat, e byl podpis vygenerovn zadanm uzlem","decode":"Dekdovat etzec bolt11/bolt12/runu","decodepay":"Zkontrolovat a zparsovat etzec bolt11","feerates":"Vrtit sazby poplatk, kter CLN pouije","fundchannel":"Otevt platebn kanl s uzlem provedenm tzv. funding transakce","getinfo":"Zskat souhrn o uzlu","offer":"Vytvoit nabdku","sendpay":"Odeslat platbu pes danou cestu","listpeers":"Zobrazit uzly, kter jsou pipojeny nebo maj oteven kanl s tmto uzlem","listsendpays":"Zsk stav vech sendpay pkaz","listpays":"Zsk stav vech platebnch pkaz","listtransactions":"Seznam transakc sledovanch v penence","pay":"Odeslat platbu na BOLT11 fakturu","keysend":"Odeslat platbu na jin uzel","listinvoices":"Zskat status vech faktur","listnodes":"Vypsat uzly, o kterch se uzel dozvdl prostednictvm gossip zprv","listoffers":"Vypsat vechy nabdky nebo zskat konkrtn nabdku","multifundchannel":"Otevt vce platebnch kanl s uzly provedenm jedn (funding) transakce","signmessage":"Vytvoit podpis z tohoto uzlu","getroute":"Najt nejlep cestu pro platbu na lightning uzel","listfunds":"Vypsat seznam vech dostupnch prostedk","listforwards":"Zobrazit seznam vech htlc, kter se uzel pokusil pedat dle","invoice":"Vytvoit novou platebn fakturu"},"lnc":{"estimatefee":"Odhadnout sazbu poplatku a celkov poplatky za transakci","lookupinvoice":"Vyhledat detaily o faktue","queryroutes":"Vyhledat mon cesty","verifymessage":"Verifikovat podpis zprvy","sendtoroute":"Provst platbu pes zadanou cestu","decodepayreq":"Dekdovat etzec dosti o platbu","routermc":"Pest vnitn kontroln stav","getinfo":"Zskat informace o uzlu","walletbalance":"Zskat celkov neutracen vstupy (UTXO) penenky","listpeers":"Zskat seznam vech aktuln aktivnch peer","addinvoice":"Vytvoit nov faktury","listchannels":"Zskat popis vech otevench kanl","listinvoices":"Zskat seznam vech faktur","channelbalance":"Zskat pehled o celkovch prostedcch nap vemi otevenmi kanly","openchannel":"Otevt nov kanl","disconnectpeer":"Odpojit se od vzdlenho uzlu","getchaninfo":"Zskat oznmen st pro dan kanl","getnetworkinfo":"Zskat zkladn statistiky o znmm grafu kanl","getnodeinfo":"Zskat informace o kanlu pro dan uzel","gettransactions":"Zskat seznam vech transakc tkajcch se dan penenky","listpayments":"Zskat seznam vech odchozch plateb","connectpeer":"Navzet spojen se vzdlenm uzlem"}}}'),it=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Vlg en nglekode:"},"confirm_password":{"label":"Lad os se, om du skrev det korrekt:"},"errors":{"enter_password":"Indtast en adgangskode.","confirm_password":"Bekrft din adgangskode.","mismatched_password":"Adgangskoderne er forskellige."}},"test_connection":{"ready":"Super, s er du klar!","initializing":"Forbereder din konto. Vent venligst, dette tager et jeblik...","connection_error":"Fejl p forbindelse","review_connection_details":"Kontroller dine forbindelsesoplysninger.","connection_taking_long":"Etablering af forbindelse gr lidt langsomt...Er dine oplysninger korrekte? Er der kontakt til din node?","contact_support":"Kontakt support@getalby.com hvis du behver hjlp","actions":{"delete_edit_account":"Slet ugyldig konto og rediger igen"}}},"choose_path":{"alby":{"title":"Alby"},"other":{"title":"Andre wallets","connect":"Opret forbindelse"}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Adgangskode"},"confirm_password":{"label":"Bekrft adgangskoden"},"errors":{"enter_password":"Indtast en adgangskode.","confirm_password":"Bekrft din adgangskode.","mismatched_password":"Adgangskoderne er forskellige."}}}},"choose_connector":{"title":"Opret forbindelse til Lightning-wallet","description":"Opret forbindelse til din eksterne Lightning-wallet eller node","lnd":{"title":"LND","page":{"title":"Opret forbindelse til din LND-node","description":"Du skal bruge din nodes URL og en macaroon med tilladelse til at lse og sende (fx admin.macaroon)"},"url":{"label":"REST API vrt og port","placeholder":"https://din-nodes-url:8080"},"macaroon":{"label":"Macaroon (HEX-format)"},"drag_and_drop":"Trk din macaroon herhen eller <0>find den</0>","errors":{"connection_failed":"Forbindelse kunne ikke oprettes. Er dine LND-oplysninger korrekte?"}},"lnc":{"title":"LND med LNC","pairing_phrase":{"label":"Din forbindelseskode ","placeholder":"hemmelig kode til sats-samlingen"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Opret forbindelse til LNDHub","description":"Indst dine adgangsoplysninger til LNDHub her, eller afls QR-koden med dit webkamera."},"uri":{"label":"LNDHub export URI"},"errors":{"invalid_uri":"Ugyldig LNDHub URI","connection_failed":"Forbindelse kunne ikke oprettes. Er din LNDHub URI korrekt?"}},"lnbits":{"title":"LNbits","page":{"title":"Opret forbindelse til <0>LNbits</0>","instructions":"Vlg den wallet du vil oprette forbindelse til i LNbits, bn den, klik p API-oplysninger og kopier Admin-nglen. Indst den herunder:"},"admin_key":{"label":"LNbits Admin-ngle","placeholder":"Din admin-ngle med 32 tegn"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Forbindelse kunne ikke oprettes. Er URL og admin-ngle korrekte?"}},"eclair":{"title":"Eclair","page":{"title":"Opret forbindelse til <0>Eclair</0>","instructions":"Du skal bruge din adgangskode og URL til Eclair."},"password":{"label":"Eclair adgangskode"},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"Opret forbindelse til <0>Citadel</0> node","instructions":"Dette virker i jeblikket ikke, hvis 2FA er slet til."},"password":{"label":"Citadel adgangskode"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Opret forbindelse til <0>Umbrel</0> node","instructions":"Find <0>Connect Wallet</0> i din Umbrels indstillingsmenu. Vlg <0>lndconnect REST</0> og kopier <0>lndconnect URL</0>. (Afhngigt af din opstning kan du enten bruge den lokale forbindelse eller Tor-forbindelsen.)"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://dinnode:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Opret forbindelse til <0>myNode</0>","instructions":"P din myNode-side klikker du p <0>Wallet</0> knappen til din <0>lightning</0> service.<1/> Klik s p knappen <0>Pair Wallet</0> under <0>Status</0> fanen. Skriv din adgangskode, nr du bliver spurgt.<1/> Vlg rullemenuen og vlg en koblingstype. Afhngigt af din opstning kan du enten bruge forbindelsen <0>lightning (REST + Lokal IP)</0> eller forbindelsen <0>lightning (REST + Tor)</0> ."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://dinnode:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Opret forbindelse til din <0>StartOS</0> node","instructions":"<0>Note:</0> I jeblikket understtter vi kun LND, men vi vil fremover ogs tilfje support af c-lightning!<1/>I din StartOSs indstillingsmenu klikker du p servicen <0>Lightning Network Daemon</0>.<1/>Vlg fanen <0>Properties</0>.<1/>Kopier s <0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://dinnode:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Opret forbindelse til din <0>RaspiBlitz</0> node","instructions1":"Du skal bruge din nodes onion-adresse og port samt en macaroon med tilladelse til at lse og sende (fx admin.macaroon).<1/><1/><0>SSH</0> ind til din <0>RaspiBlitz</0>.<1/>Udfr instruktionen <0>sudo cat /mnt/hdd/tor/lndrest/hostname</0>.<1/>Kopier og indst <0>.onion</0> adressen i nedenstende indtastningsfelt.<1/>Tilfj din <0>port</0> efter onion-adressen, standardporten er <0>:8080</0>.","instructions2":"Vlg <0>CONNECT</0>.<1/>Vlg <0>EXPORT</0>.<1/>Vlg <0>HEX</0>.<1/>Kopier <0>adminMacaroon</0>.<1/>St din macaroon ind i indtastningsfeltet nedenunder."},"rest_api_host":{"label":"REST API host","placeholder":"din-nodes-onion-adresse:port"}},"blink":{"title":"Blink Wallet","page":{"title":"Opret forbindelse til <0>Blink Wallet</0>"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"Opret forbindelse til <0>Bitcoin Jungle Wallet</0>"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Konfigurationsoplysninger"},"errors":{"connection_failed":"Forbindelsen kunne ikke oprettes. Er BTCPay-forbindelsens URL korrekt og tilgngelig?"}},"commando":{"title":"Core Lightning","page":{"title":"Opret forbindelse til din Core Lightning-node","instructions":"Srg for at have Core Lightning-versionen 0.12.0 eller nyere, at kommandomodulet krer og at din node kan tilgs p lightning-netvrket. Opret en rune ved at kre \'lightning-cli commando-rune\'."},"host":{"label":"Vrt"},"pubkey":{"label":"Offentlig ngle"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Websocket-proxy"},"privKey":{"label":"Lokal privat ngle (autogenereret)"},"config":{"label":"Konfigurationsdata","placeholder":"config=https://din-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Forbindelse kunne ikke oprettes. Er din Core Lightning-node online, og er kommandomodulet i brug?"}}},"home":{"actions":{"send_satoshis":" Send Satoshi ","enable_now":"Aktiver nu"},"default_view":{"is_blocked_hint":"Alby er i jeblikket deaktiveret p {{vrt}}","block_removed":"{{vrt}} blev aktiveret. Indls hjemmesiden igen."}},"accounts":{"account_view":{"title2":"Rediger konto","name":{"title":"Navn","placeholder":"Kontonavn"},"export":{"title":"Eksporter konto","screen_reader":"Eksporter kontooplysninger","waiting":"venter p LndHub-data...","your_ln_address":"Din lightningadresse:","export_uri":"URI til LNDHub-adgangsoplysninger","scan_qr":"Importer denne wallet til Zeus eller BlueWallet ved at skanne QR-koden."},"nostr":{"title":"Nostr","hint":"er en enkel og ben protokol, der bruges til at skabe u-censorerbare sociale netvrk. Nostr anvender kryptografisk kode. Nr du publicerer noget, underskriver du det med din ngle, og sender det til flere netvrksreler. Du kan bruge Alby til opbevaring af din Nostr-ngle. Mange Nostr-applikationer vil derefter lade dig bruge nglen direkte fra Alby.","private_key":{"title":"Opbevar din ngle","subtitle":"Indst din private ngle eller generer en ny. Husk at tage en sikkerhedskopi af din private ngle, fr du genererer en ny. <0>Ls mere </0>","success":"Den private ngle blev krypteret & gemt.","successfully_removed":"Den private ngle blev fjernet.","label":"Privat ngle"},"public_key":{"label":"Offentlig ngle"},"generate_keys":{"title":"Generer en ny Nostr-ngle","screen_reader":"Generer en ny Nostr-ngle til din konto","hint":"Du kan generere en vilkrlig ngle eller f nglen fra kontooplysningerne (med et underskrevet standardudtryk). <0>Ls mere </0>","actions":{"random_keys":"Generer en vilkrlig ngle","derived_keys":"F en kontospecifik ngle"}},"actions":{"generate":"Generer en ny ngle"},"errors":{"failed_to_load":"Nostr-nglen kunne ikke anvendes. Er det en gyldig Nostr-ngle?"}},"actions":{"export":"Eksporter"}}},"unlock":{"unlock_to_continue":"Ls op for at fortstte","unlock_password":"Din nglekode","help_contact":{"part1":"Brug for hjlp? Kontakt","part2":"Albys support"},"unlock_error":{"help":"Dine kontooplysninger er krypteret med din nglekode. Hvis du er sikker p at du har glemt din nglekode, m du nulstille og tilfje din lightning konto igen.","link":"Nulstil nu, og tilfj en ny konto"},"errors":{"invalid_password":"Ugyldig adgangskode"}},"settings":{"browser_notifications":{"title":"Browsermeddelelser","subtitle":"Meddelelser om betaling og godkendelser."},"website_enhancements":{"title":"Ekstra hjemmesidefunktioner","subtitle":"Donationer p Twitter, YouTube, etc."},"lnurl_auth":{"title":"LNURL-Auth","hint":"er en generisk autentifikationsprotokol. Den autentificerer brugeren med digital signatur. Protokollen krver ikke andre autentifikationsoplysninger som fx adgangskode, e-mail, brugernavn eller lignende. Med Alby kan du bruge dine lightning-konti til at logge sikkert ind p hjemmesider. For at blive kompatible med andre wallets mtte vi ndre et par ting, som du kan konfigurere her. <0>Disse indstillinger skal helst sls fra.</0> Brug dem kun, hvis du har gamle konti.","legacy_lnurl_auth_202207":{"title":"Gamle LNURL-Auth","subtitle":"Generering af ngle med LNURL-auth er ndret (juli 2022). Alby var ikke kompatibel med andre implementeringer. Dette blev ndret, men nu bruges der andre ngler til at logge ind. Hvis du tidligere brugte LNURL-auth til at logge ind, kan du fortsat aktivere den gamle metode. Denne mulighed vil blive fjernet, husk at skifte til det nye log ind."},"legacy_lnurl_auth":{"title":"Forldet signatur til LNDhub and LNbits","subtitle":"Signatur og log ind med LNDhub (fx BlueWallet) og LNBits-konti er blevet ndret (marts 2022). Hvis du loggede ind med disse konti, kan du fortsat aktivere den gamle signatur-metode. Denne mulighed vil blive fjernet, husk at skifte til det nye log ind."}},"camera_access":{"title":"Adgang til kamera","subtitle":"Til at skanne QR-koder","allow":"Tillad adgang til kamera","granted":"Tilladelse givet"},"language":{"title":"Sprog","subtitle":"Oversttelsen er endnu ikke 100% frdig. <0>Hjlp os med at overstte Alby til dit sprog!</0>"},"theme":{"title":"Tema","subtitle":"Brug Alby med mrk eller lys indstilling","options":{"dark":"Mrk","light":"Lys","system":"System"}},"show_fiat":{"title":"Sats til fiat","subtitle":"Konverter altid til den valgte valuta fra den valgte brs"},"currency":{"title":"Valuta","subtitle":"Vis ogs belb i denne valuta"},"exchange":{"title":"Brs-kilde","subtitle":"Kilde til bitcoinkurser"},"personal_data":{"title":"Personoplysninger","description":"Betalingsmodtagere kan anmode om at yderligere oplysninger medsendes en betaling. Oplysningerne deles ikke med nogen uden dit samtykke, du bliver altid spurgt fr oplysningerne medsendes en betaling."},"name":{"title":"Navn","subtitle":"","placeholder":"Indtast dit navn"},"email":{"title":"E-mail","subtitle":"","placeholder":"Indtast din e-mailadresse"},"change_password":{"title":"ndring af nglekode","subtitle":"","screen_reader":"ndring af nglekode","choose_password":{"label":"Indtast en ny nglekode:"},"confirm_password":{"label":"Bekrft ny kode:"},"submit":{"label":"ndring"},"errors":{"enter_password":"Indtast en ny nglekode.","confirm_password":"Bekrft din kode.","mismatched_password":"Koderne er forskellige."},"success":"Koden blev ndret"}},"send":{"title":"Send","input":{"label":"Modtager","hint":"Faktura, lightningadresse eller LNURL"}},"lnurlpay":{"amount":{"label":"Belb"},"comment":{"label":"Kommentar"},"name":{"label":"Navn"},"email":{"label":"E-mail"},"success":"Hurra, betalingen er sendt!"},"lnurlauth":{"title":"Godkendelse","content_message":{"heading":"Vil du logge ind p"},"submit":"Log ind","success":"Logget ind p {{navn}}","errors":{"status":"Fejl: Auth-status er ikke ok"}},"lnurlchannel":{"title":"Anmodning om kanal","content_message":{"heading":"Anmod noden om en kanal"},"success":"Anmodning om kanal blev sendt til {{navn}}"},"lnurlwithdraw":{"title":"Hv","content_message":{"heading":"Belb"},"amount":{"label":"Belb"},"success":"Hveanmodning om {{belb}} blev sendt til {{afsender}}"},"receive":{"title":"Modtag","actions":{"create_invoice":"Generer faktura"},"amount":{"label":"Belb","placeholder":"Belb i Satoshi..."},"description":{"label":"Beskrivelse","placeholder":"Fx hvem sender denne betaling?"},"success":"Betaling modtaget!","payment":{"waiting":"venter p betaling...","status":"Tjek betalingsstatus"}},"publishers":{"title":"Dine  hjemmesider","description":"Hjemmesider, hvor du tidligere har brugt Alby","no_info":"Det ser ud til, at du endnu ikke har brugt Alby p nogen hjemmesider.","discover":"Opdag hjemmesider","publisher":{"allowance":{"title":"Pulje","used_budget":"sats brugt"}}},"make_invoice":{"title":"Generer faktura","amount":{"label":"Belb (Satoshi)"},"memo":{"label":"Besked"},"errors":{"amount_too_small":"Belb er under minimum","amount_too_big":"Belb overstiger maksimum"}},"confirm_sign_message":{"title":"Underskriv","content":"Denne hjemmeside beder dig underskrive:"},"confirm_keysend":{"title":"Godkend betaling","success":"Betaling sendt! Preimage: {{preimage}}","payment_summary":{"description":"Send betaling til: {{bestemmelsessted}}"}},"keysend":{"title":"Send","success":"Betaling sendt! Preimage: {{preimage}}","receiver":{"label":"Send betaling til"},"amount":{"label":"Belb (Satoshi)"}},"confirm_payment":{"title":"Godkend betaling","success":"Betaling af {{belb}} blev udfrt!","actions":{"pay_now":"Betal nu"}},"confirm_request_permission":{"title":"Godkend anmodning","allow":"Tillad denne hjemmeside at udfre:","always_allow":"Husk mit valg, og sprg ikke igen"},"nostr":{"title":"Nostr","allow":"Tillad denne hjemmeside at:","content":"Denne hjemmeside beder dig underskrive:","allow_sign":"Tillad {{vrt}} at underskrive:","block_and_ignore":"Bloker og ignorer {{vrt}}","block_added":"{{vrt}} blev fjet til blokeringslisten, indls hjemmesiden igen."}},"y0":{"password":"Adgangskode","confirm_password":"Bekrft adgangskode","success":"Succes","error":"Fejl","accounts":"Konti","discover":"Opdag","connected_sites":"","sats_one":"sat","sats_other":"sat","loading":"indlser","amount":"Belb","optional":"Valgfri","feedback":"Tilbagemelding","copied":"Kopieret!","description":"Beskrivelse","description_full":"Komplet beskrivelse","success_message":"{{belb}}{{fiatBelb}} sendt til {{bestemmelsessted}}","response":"Svar","message":"Besked","help":"Hjlp","actions":{"back":"Tilbage","delete":"Slet","edit":"Rediger","next":"Nste","open":"bn","cancel":"Annuller","confirm":"Bekrft","continue":"Fortst","connect":"Opret forbindelse","lock":"Ls","unlock":"Ls op","send":"Send","save":"Gem","receive":"Modtag","receive_again":"Modtag en ny betaling","close":"Luk","export":"Eksporter","remove":"Fjern","copy":"Kopier","copy_invoice":"","log_in":"Log ind","remember":"Husk mit valg, og sprg ikke igen"},"errors":{"connection_failed":"Forbindelse kunne ikke oprettes","payment_failed":"Betaling fejlede"}},"wx":{"allowance_menu":{"confirm_delete":"Er du sikker p, du vil slette denne hjemmeside?","hint":"Dette nulstiller det aktuelle budget","new_budget":{"label":"Nyt budget"},"enable_login":{"title":"Aktiver log ind til hjemmeside","subtitle":"Log ind automatisk uden bekrftelse efter anmodning fra hjemmesiden."},"edit_allowance":{"title":"Rediger pulje","screen_reader":"Indstillinger for pulje"}},"qrcode_scanner":{"title":"Skan QR-kode","actions":{"start_scanning":"Start med at skanne","stop_scanning":"Stop med at skanne"},"errors":{"allow_camera_access":"Giv adgang til kameraet i indstillingsvinduet."}},"transactions_table":{"fee":"Betaling","preimage":"Pr-visning","received":"Modtaget","sent":"Sendt","boostagram":{"sender":"Afsender","message":"Meddelelse","app":"App","podcast":"Podcast"},"open_location":"bn hjemmeside"},"budget_control":{"remember":{"label":"Husk og fastlg et budget","description":"Du kan angive et belb, s du ikke behver bekrfte betalinger indtil det er opbrugt."},"budget":{"label":"Budget"}},"toasts":{"connection_error":{"what_you_can_do":"Dette kan du gre:","double_check":"Dobbelttjek dine forbindelsesoplysninger","if_ssl_errors":"og hvis der er SSL-fejl (fx RR_CERT_AUTHORITY_INVALID), s klik p \\"avanceret\\" og fortst med at acceptere certifikatet.","visit_guides":"Find yderligere hjlp i vores vejledninger"},"login_failed":{"password_reset":"Glemt din adgangskode? Klik her"},"errors":{"invalid_credentials":"Ugyldig adgangskode. Kontroller din adgangskode og e-mailadresse, og prv igen."}},"account_menu":{"screen_reader":"Skift drop-down"},"publishers_table":{"payments":"betalinger"},"badge":{"label":{"auth":"LOG IND"}}},"mk":{"commando":{"bkpr-listbalances":"Liste over alle nuvrende og tidligere kontosaldi","checkmessage":"Verificer, at signaturen blev genereret af en bestemt node","connect":"Opret en ny forbindelse til en anden node","decode":"Afkod en bolt11/bolt12/rune-streng","decodepay":"Tjek og parse en bolt11-streng","disconnect":"Luk en eksisterende forbindelse til en peer","feerates":"Vis de betalingstakster CLN vil anvende","fundchannel":"bn en betalingskanal til en peer ved at sende en betalingstransaktion","getinfo":"F nodens ngleoplysninger","getroute":"Find den bedste betalingsrute til en lightning-node","invoice":"Opret en betalingsforventning","keysend":"Send en betaling til en anden node","listforwards":"Vis alle de htlc, der er forsgt sendt","listfunds":"Vis alle tilgngelige midler","listinvoices":"F status p alle faktura","listnodes":"Vis de noder, som noden har kendskab til via gossip-beskeder","listoffers":"Vis alle tilbud eller f et specifikt tilbud","listpays":"Giver status for alle betalingsinstruktioner","listpeers":"Vis noder, der er forbundne med eller har bne kanaler til denne node","listsendpays":"Giver status for alle sendpay-instruktioner","listtransactions":"Viser transaktioner, der er gemt i din wallet","multifundchannel":"bn flere betalingskanaler til noder ved at sende en enkelt betalingstransaktion","offer":"Opret et tilbud","pay":"Send en betaling til en BOLT11-faktura","sendpay":"Send en betaling via en rute","setchannel":"Konfigurer den betaling/ det htlc-interval, der annonceres for kanalen","signmessage":"Lav en signatur fra denne node"},"lnd":{"getinfo":"Hent node-oplysningerne","listchannels":"F en beskrivelse af alle bne kanaler","listinvoices":"Hent en oversigt over alle faktura","channelbalance":"Hent en rapport over samlede midler i alle bne kanaler","walletbalance":"Hent summen af ubrugte output i denne wallet","openchannel":"bn en ny kanal","connectpeer":"Opret forbindelse til en peer p nettet","disconnectpeer":"Afbryd forbindelsen til en peer p nettet","estimatefee":"Beregn betalingstakst og samlet betaling for en transaktion","getchaninfo":"Hent netvrksannonceringen for den givne kanal","getnetworkinfo":"Hent basisoplysningerne for det kendte kanalsystem","getnodeinfo":"Hent oplysninger om en nodes kanaler","gettransactions":"Hent en liste over alle transaktioner, der er relevante for denne wallet","listpayments":"Hent en liste over udgende betalinger","listpeers":"Hent en liste over alle aktive peers","lookupinvoice":"Se faktura-oplysningerne","queryroutes":"Foresprg om en mulig rute","verifymessage":"Verificer en signatur over en meddelelse","sendtoroute":"Foretag en betaling via den angivne rute","decodepayreq":"Afkod en betalingsanmodnings-streng","routermc":"Afls tilstanden for den interne mission control","addinvoice":"Opret nye faktura"},"lnc":{"getinfo":"Hent oplysninger om noden","listchannels":"Hent en beskrivelse af alle bne kanaler","listinvoices":"Hent en liste over alle faktura","channelbalance":"Hent en rapport over samtlige midler i alle bne kanaler","walletbalance":"Hent summen af ubrugte output i denne wallet","openchannel":"bn en ny kanal","connectpeer":"Opret forbindelse til en peer p nettet","disconnectpeer":"Afbryd forbindelsen til en peer p nettet","estimatefee":"Beregn betalingstaksten og samlet betaling for en transaktion","getchaninfo":"Hent netvrksannonceringen for den givne kanal","getnetworkinfo":"Hent basisoplysningerne for det kendte kanalsystem","getnodeinfo":"Hent oplysninger om en nodes kanaler","gettransactions":"Hent en liste over alle transaktioner, der er relevante for denne wallet","listpayments":"Hent en liste over alle udgende betalinger","listpeers":"Hent en liste over alle de peers, der er aktive nu","lookupinvoice":"Se faktura-oplysningerne","queryroutes":"Foresprg om en mulig rute","verifymessage":"Verificer en signatur over en meddelelse","sendtoroute":"Foretag en betaling via den angivne rute","decodepayreq":"Afkod en betalingsanmodnings-streng","routermc":"Afls tilstanden for den interne mission control","addinvoice":"Opret nye faktura"}}}'),ot=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Whle einen Passcode zum Entsperren:"},"errors":{"mismatched_password":"Die Passcodes stimmen nicht berein.","enter_password":"Bitte gebe einen Passcode ein.","confirm_password":"Bitte besttige deinen Passcode."},"confirm_password":{"label":"Vergewisse dich, dass du es richtig eingegeben hast:"},"description1":"Lege ein Password fest, um die Alby-Erweiterung in diesem Browser zu entsperren","description2":"Das Password zum Entsperren kann nicht wiederhergestellt, aber gendert werden. ","title":"Passwort zum Entsperren der Erweiterung festlegen"},"test_connection":{"review_connection_details":"Bitte berprfe deine Verbindungsdaten.","actions":{"delete_edit_account":"Ungltiges Konto lschen und erneut bearbeiten"},"ready":"Groartig, du kannst jetzt loslegen!","initializing":"Dein Konto wird initialisiert. Bitte warte, dies kann eine Minute dauern...","connection_error":"Verbindungsfehler","connection_taking_long":"Der Verbindungsversuch dauert lnger als erwartet... Sind deine Angaben korrekt? Ist deine Node erreichbar?","contact_support":"Wenn du Hilfe bentigst, wende dich bitte an support@getalby.com"},"pin_extension":{"title":"Die Alby Erweiterung anpinnen","description":"Fast fertig. Damit du Alby bequem nutzen kannst, musst du die Erweiterung an die Browser Symbolleiste anheften:","next_btn":"Beginne mit Alby {{icon}}","explanation":"1. Klicke auf <0/> in der oberen rechten Ecke deines Browsers<1/>2. Suche das Symbol fr Alby und klicke, um es an die Symbolleiste anzuheften<1/>3. Das war es. Um auf Alby zuzugreifen, klicke einfach auf das Symbol <2/>"}},"choose_connector":{"lnd":{"drag_and_drop":"Ziehe und lege deine Macaroon hier ab oder <0>durchsuche</0>","errors":{"connection_failed":"Verbindung fehlgeschlagen. Sind deine LND-Anmeldeinformationen korrekt?"},"url":{"label":"REST-API-Host und -Port","placeholder":"https://dein-node-url:8080"},"macaroon":{"label":"Macaroon (HEX-Format)"},"page":{"description":"Du bentigst deine Node-URL und einen Macaroon mit Lese- und Sendeberechtigung (z.B. admin.macaroon)","title":"Verbinden mit deiner LND Node"},"title":"LND"},"lndhub_go":{"title":"LNDHub","uri":{"label":"LNDHub-Export-URI"},"errors":{"invalid_uri":"Ungltiger LNDHub-URI","connection_failed":"Verbindung fehlgeschlagen. Ist dein LNDHub-URI korrekt?"},"page":{"title":"Verbinden mit LNDHub","description":"Gebe hier deine LNDHub-Zugangsdaten-URI ein oder scanne den QR-Code mit deiner Webcam."}},"lnbits":{"admin_key":{"label":"LNbits Admin Schlssel","placeholder":"Dein 32-stelliger Admin-Schlssel"},"title":"LNbits","page":{"title":"Verbinden mit <0>LNbits</0>","instructions":"Whle in LNbits die Wallet, die du verbinden mchtest, ffne sie, klicke auf API Info und kopiere den Admin Key. Fge ihn unten ein:"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Verbindung fehlgeschlagen. Hast du die richtige URL und den richtigen Admin-Schlssel?"}},"mynode":{"page":{"instructions":"Klicke auf deiner myNode Startseite auf die Schaltflche <0>Wallet</0> fr deinen <0>Lightning</0> Service.<1/> Klicke nun auf die Schaltflche <0>Pair Wallet</0> unter dem Reiter <0>Status</0>. Gib dein Kennwort ein, wenn du dazu aufgefordert wirst.<1/> Whle das Dropdown-Men und whle eine Kopplungsoption. Abhngig von deiner Einrichtung kannst du entweder die <0>lightning (REST + Local IP)</0> Verbindung oder die <0>lightning (REST + Tor)</0> Verbindung verwenden.","title":"Verbinden mit <0>myNode</0>"},"rest_url":{"label":"Indconnect REST URL","placeholder":"lndconnect://deinenode:8080?..."},"title":"myNode"},"umbrel":{"page":{"instructions":"In deinem Lightning Node Dashboard gehst du auf <0>Brieftasche verbinden</0><1/>2. Whle <0>REST (Tor)</0> oder <0>REST (Lokales Netzwerk)</0> Modus<1/>3. Kopiere die <0>lndconnect URL</0> und fge sie unten ein","title":"Verbinden mit <0>Umbrel</0> Node"},"rest_url":{"label":"Indconnect-REST URL","placeholder":"lndconnect://deinenode:8080?..."},"title":"Umbrel"},"description":"Verbinden mit deinem externen Lightning Wallet oder Node","citadel":{"page":{"instructions":"Das funktioniert aktuell nicht, wenn 2FA ausgewhlt ist.","title":"Verbinden mit <0>Citadel</0> Node"},"title":"Citadel","password":{"label":"Citadel Kennwort"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"raspiblitz":{"page":{"instructions1":"Folge diese Schritte:<1/> 1. <0>SSH</0> in deinem <0>Raspiblitz</0><1/>2. Whle <0>Connect Apps & Show Credentials</0> aus der Liste<1/><0/>3. Whle <0>Connect Alby to this node</0><1/>4. Drcke <0>OK</0>, um die Verbindungsdaten anzuzeigen<1/><1/>Kopiere den <0>REST API-Host</0> oder die <0>.onion</0>-Adresse, um dich ber Tor zu verbinden, und fge sie in das Feld darunter ein.","title":"Verbinden mit deiner <0>RaspiBlitz</0> Node","instructions2":"Kopiere das (admin) <0>Macaroon</0> in die untenstehende Eingabe."},"title":"RaspiBlitz","rest_api_host":{"label":"REST API Host","placeholder":"deine-node-onion-adresse:port"}},"eclair":{"title":"Eclair","page":{"title":"Verbinden mit <0>Eclair</0>","instructions":"Du brauchst deine Eclair URL und dein Kennwort."},"password":{"label":"Eclair Kennwort"},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"startos":{"page":{"instructions":"Klicke in deinem StartOS Dashboard auf den <0>Lightning Network Daemon</0> Service.<1/>Whle den Reiter <0>Properties</0>.<1/>Kopiere nun die <0>LND Connect REST URL.</0>","title":"Verbinden mit <0>StartOS</0>"},"rest_url":{"placeholder":"lndconnect://deinenode:8080?...","label":"Indconnect REST URL"},"title":"StartOS"},"blink":{"title":"Blink Wallet","page":{"title":"Verbinden mit <0>Blink Wallet</0>"},"token":{"info":"Um deine Brieftasche zu verbinden, generiere einen API-Schlssel im <0>Blink Dashboard (dashboard.blink.sv)</0>:<br>- logge dich mit deiner E-Mail oder Telefonnummer ein, wenn du Blink bereits nutzt<br>- wenn du noch keinen Account hast, kannst du einen neuen erstellen, indem du dich mit einer Telefonnummer einloggst<br>- erstelle einen neuen Key auf der Registerkarte API Keys<br>- gib ihm einen Namen und whle den Lese- und Schreibbereich<br>- belasse die Standardeinstellung ohne Ablaufdatum oder whle einen langen Zeitraum, um zu vermeiden, dass du deine Wallet regelmig neu verbinden musst<br>- kopiere den Key (beginnend mit blink_ ) und fge ihn in die Textbox unten ein.<br>","label":"Gebe deinen API-Schlssel ein"},"currency":{"label":"Wallet auswhlen"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"Verbinden mit <0>Bitcoin Jungle Wallet</0>"},"token":{"info":"Die {{label}}-Integration mit Alby befindet sich in der Alpha-Phase und wird nur fr fortgeschrittene Benutzer empfohlen.<br><br>du kannst deinen Zugriffstoken abrufen, indem du die mobile App aufrufst, auf das Einstellungssymbol klicken und dann dreimal auf die Build-Nummer tippen, um das Entwicklermen zu ffnen.<br><br>Das Zugriffstoken kann von hier kopiert werden.<br><br>","label":"Gebe deien Access-Token ein"},"currency":{"label":"Wallet auswhlen"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Konfigurationsdaten","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.co"},"errors":{"connection_failed":"Verbindung fehlgeschlagen. Ist die BTCPay Verbindungs URL korrekt und zugnglich?"},"page":{"instructions":"Navigiere zu deinem BTCPayServer und melde dich als Administrator an. Gehe zu Servereinstellungen > Dienste > LND REST - Informationen anzeigen. Klicke dann auf \\"QR-Code-Informationen anzeigen\\" und kopiere die QR-Code-Daten. Fgen sie unten ein:","title":"Verbindung zu BTCPay LND"}},"commando":{"title":"Core Lightning","page":{"title":"Verbinden mit deiner Core Lightning Node","instructions":"Stelle sicher, dass du die Core Lightning Version 0.12.0 oder neuer hast, das Commando-Plugin ausgefhrt wird und deine Node ber das Llightning Network zugnglich ist. Erstelle eine Rune, indem du lightning-cli commando-rune ausfhrst."},"host":{"label":"Host"},"pubkey":{"label":"ffentlicher Schlssel"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Websocket-Proxy"},"privKey":{"label":"Lokaler privater Schlssel (automatisch generiert)"},"config":{"label":"Konfigurationsdaten","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Verbindung fehlgeschlagen. Ist deine Core Lightning Node online und verwendet diese das Commando Plugin?"}},"title":"Verbinde Lightning Wallet","lnc":{"title":"Lightning Terminal (LNC)","pairing_phrase":{"label":"Deine pairing phrase ","placeholder":"geheimer stack sats phrase"},"page":{"title":"Anschlieen an Lightning Terminal (LNC)","description":"1. Whle in der Seitenleiste von Lightning Terminal <0>Lightning Node Connect</0>.<1/> 2. Klicke auf <0>Erstelle eine neue Sitzung</0><1/>3. Beschrifte die Sitzung, whle die gewnschte Berechtigung und senden sie ab<1/>4. <0>Kopiere die Pairing-Phrase</0> und fge sie unten ein."}},"umbrel_lightning_node":{"title":"Lightning Node"},"galoy":{"sms_code":{"label":"Gebe deinen SMS-Verifizierungscode ein"},"actions":{"login":"Anmeldung"},"phone_number":{"label":"Gebe deine Rufnummer ein"},"errors":{"setup_failed":"Einrichtung fehlgeschlagen","invalid_token":"Autorisierung fehlgeschlagen. Bitte berprfe deinen API-Schlssel und versuche es erneut.","missing_token":"Zugriffstoken fehlt, konnte sich nicht anmelden."}},"voltage":{"macaroon":{"label":"Admin Macaroon (hex)"},"url":{"label":"Node URL","placeholder":"https://your-node.m.voltageapp.io:8080"},"page":{"title":"Verbinde dich mit Voltage Node","description":"Lightning-Node-Hosting der Enterprise-Klasse. Erreiche das Lightning Network schneller als je zuvor. Vllige Kontrolle mit null Verwaltung. <0>Erfahre mehr in unserer Einrichtungsanleitung</0>"},"title":"Voltage","errors":{"connection_failed":"Verbindung fehlgeschlagen. Sind deine Anmeldedaten korrekt?"}},"nwc":{"title":"Nostr Wallet Verbindung","page":{"url":{"label":"Nostr Wallet Verbindung URL","placeholder":"nostr+walletconnect://69effe..."},"instructions":"Einfgen einer NWC-Verbindungszeichenfolge von <0>Alby Nostr Wallet Connect</0>, <1>Umbrel Nostr Wallet Connect</1> oder <2>Mutiny Wallet</2>","errors":{"connection_failed":"Verbindung fehlgeschlagen. Ist deine NWC-Geldbrse online und die App-Verbindung aktiviert?"}}}},"unlock":{"unlock_error":{"link":"Jetzt zurcksetzen und ein neues Konto hinzufgen","help":"Deine Kontodaten werden mit deinem Entsperr-Passcode verschlsselt. Wenn du deinen Entsperr-Passcode wirklich vergessen hast, musst du dein Lightning Account zurcksetzen und erneut hinzufgen."},"errors":{"invalid_password":"Ungltiger Passcode"},"unlock_to_continue":"Entsperren um fortzufahren","help_contact":{"part1":"Brauchst du Hilfe? Kontaktiere uns unter","part2":"Alby Support"},"unlock_password":"Dein Entsperr-Passcode"},"settings":{"lnurl_auth":{"legacy_lnurl_auth":{"title":"Legacy Signatur fr LNDhub und LNbits","subtitle":"Das Signieren von Nachrichten und die Anmeldung mit LNDhub- (z.B. BlueWallet) und LNbits-Konten wurde gendert (Mrz 2022). Wenn du dich mit diesen Konten angemeldet hast, kannst du noch die alte Signiermethode aktivieren. Diese Option wird spter entfernt werden, stelle also sicher, dass du auf das neue Login umsteigst."},"legacy_lnurl_auth_202207":{"subtitle":"Die Schlsselerzeugung fr LNURL-auth hat sich gendert (Juli 2022). Alby war nicht kompatibel mit anderen Implementierungen. Dies wurde gendert, aber jetzt werden andere Anmeldeschlssel verwendet. Wenn du dich bisher mit LNURL-auth angemeldet hast, kannst du noch die alte Methode aktivieren. Diese Option wird spter entfernt werden, stelle sicher, dass du auf die neue Anmeldung umsteigst.","title":"Vererbte LNURL-Authentifizierung"},"title":"LNURL Authentifizierung","hint":"ist ein allgemeines Authentifizierungsprotokoll. Es authentifiziert den Benutzer anhand digitaler Signaturen. Das Protokoll erfordert keine anderen identifizierenden Informationen wie Kennwrter, E-Mails, Benutzernamen oder hnliches. Mit Alby kannst du deine Lightning-Konten verwenden, um dich sicher auf Webseiten anzumelden. Um mit anderen Wallets kompatibel zu sein, mussten wir ein paar nderungen vornehmen, die du hier konfigurieren kannst. <0>In der Regel sind alle diese Optionen ausgeschaltet.</0> Verwende sie nur, wenn du alte Konten hast."},"browser_notifications":{"subtitle":"Zahlungs- und Authentifizierungsbezogene Benachrichtigungen.","title":"Browser Benachrichtigungen"},"website_enhancements":{"title":"Erweiterungen der Webseite","subtitle":"Verbesserungen fr X, YouTube, etc."},"title":"Einstellungen der Erweiterung","change_password":{"choose_password":{"label":"Gebe einen neuen Passcode zum Entsperren ein:"},"submit":{"label":"ndern"},"errors":{"enter_password":"Bitte gebe einen neuen Passcode zum Entsperren ein.","confirm_password":"Bitte besttige dein Passcode.","mismatched_password":"Die Passwrter stimmen nicht berein."},"success":"Passcode erfolgreich gendert","title":"Passcode zum Entsperren ndern","screen_reader":"Passcode zum Entsperren ndern","confirm_password":{"label":"Besttige den neuen Passcode:"}},"theme":{"options":{"dark":"Dunkel","light":"Hell","system":"System-Einstellungen verwenden"},"title":"Design","subtitle":"Alby im dunklen oder hellen Modus verwenden"},"exchange":{"title":"Quelle fr den Wechselkurs","subtitle":"Quelle fr Bitcoin Wechselkurse"},"language":{"title":"Sprache","subtitle":"Die bersetzungen sind noch nicht zu 100% fertig. <0>Hilf uns, Alby in deine Sprache zu bersetzen!</0>"},"currency":{"title":"Whrung","subtitle":"Zeige die Betrge zustzlich in dieser Whrung an"},"camera_access":{"title":"Kamerazugriff","subtitle":"Zum Scannen von QR-Codes","allow":"Kamerazugriff zulassen","granted":"Erlaubnis erteilt"},"show_fiat":{"title":"Sats in Fiat","subtitle":"Betrge in die ausgewhlte Whrung umrechnen (z.B.: EUR)"},"personal_data":{"title":"Persnliche Daten","description":"Zahlungsempfnger knnen beantragen, dass zustzliche Daten mit einer Zahlung bermittelt werden. Diese Daten werden ohne deiner Zustimmung an niemanden weitergegeben. Du wirst immer aufgefordert, bevor diese Daten zusammen mit einer Zahlung gesendet werden."},"name":{"title":"Name","placeholder":"Gib deinen Namen ein","subtitle":""},"email":{"title":"E-Mail","placeholder":"Gib deine E-Mail Adresse ein"}},"home":{"default_view":{"is_blocked_hint":"Alby ist derzeit auf dem {{host}} deaktiviert","block_removed":"{{host}} aktiviert. Bitte lade die Webseite neu.","see_all":"Alle sehen","no_transactions":"Noch keine Transaktionen fr dieses Konto.","actions":{"get_started":{"title":"Erste Schritte mit Alby Extension","description":"Neu bei Alby Extension? Sehe dir unsere Anleitungen, Videos und Erklrungen an"},"receive_bitcoin":{"title":"Bitcoin erhalten","description":"Zahle dein Konto ein und erhalten ber deine Blitzadresse oder eine Rechnung"},"setup_keys":{"title":"Einrichten deiner Schlssel","description":"Kmmer dich um deinen Master Key oder importiere dein bestehendes Nostr-Konto"}}},"allowance_view":{"sats":"sats","budget_spent":"Budget","total_spent":"Insgesamt ausgegeben","total_payments":"Anzahl Zahlungen","permissions":"Berechtigungen"},"actions":{"send_satoshis":" Satoshis senden ","enable_now":"Jetzt aktivieren"}},"accounts":{"account_view":{"title2":"Konto","title1":"Wallet Einstellungen","name":{"title":"Name anzeigen","placeholder":"Konto Anzeigename"},"export":{"title":"Verbinde deine mobile Wallet","screen_reader":"Kontodaten exportieren","waiting":"Warten auf LndHub Daten...","your_ln_address":"Deine Lightning Adresse:","export_uri":"LNDHub Anmeldeinformationen URI","scan_qr":"Importiere diese Wallet in Zeus oder BlueWallet, indem du den QRCode scannst.","description":"Ermglicht es dir, dieses Konto mit mobilen Wallets wie <0>Blue Wallet</0> und <1>Zeus</1> zu verbinden und zu verwenden."},"nostr":{"title":"Nostr","private_key":{"title":"Verwalte deinen privaten Nostr-Schlssel","subtitle":"Fge deinen eigenen privaten Schlssel ein oder erzeuge einen neuen. <0>Mehr erfahren\\"</0>","success":"Der private Schlssel von Nostr wurde erfolgreich verschlsselt und gespeichert.","successfully_removed":"Der private Schlssel von Nostr wurde erfolgreich entfernt.","label":"Nostr Privater Schlssel","failed_to_remove":"Der eingegebene Kontoname stimmt nicht berein, dein alter privater Nostr-Schlssel wurde wiederhergestellt.","warning":"Bitte gebe den Namen des Kontos ein, um die Lschung des privaten Schlssels von nostr zu besttigen:\\n\\n{{ Name }}"},"public_key":{"label":"Nostr ffentlicher Schlssel"},"generate_keys":{"title":"Erzeugen eines neuen Nostr Schlssels","screen_reader":"Erzeuge einen neuen Nostr-Schlssel fr dein Konto","hint":"Du kannst einen zuflligen Satz von Nostr Schlsseln generieren oder Schlssel aus diesen Kontodaten ableiten (unter Verwendung einer signierten kanonischen Phrase). <0>Mehr erfahren\\"</0>","actions":{"random_keys":"Generieren eines Zufallsschlssels","derived_keys":"Ableitung eines Schlssels aus dem Konto"}},"actions":{"generate":"Erzeugen eines neuen Schlssels"},"hint":"ist ein einfaches und offenes Protokoll, das darauf abzielt, zensurresistente soziale Netzwerke zu schaffen. Nostr arbeitet mit kryptographischen Schlsseln. Um etwas zu verffentlichen, signiere es mit deinem Schlssel und senden es an mehrere Relays. Du kannst Alby verwenden, um seinen Nostr-Schlssel zu verwalten. Viele Nostr-Anwendungen erlauben dir dann, einfach den Schlssel aus der Alby-Erweiterung zu verwenden.","errors":{"failed_to_load":"Der Nostr Schlssel konnte nicht geladen werden. Ist es ein gltiger Nostr Schlssel?"},"settings":{"label":"Nostr Einstellungen","title":"Nostr Einstellungen","description":"Leite deinen Nostr-Schlssel von deinem Hauptschlssel ab oder importiere den bestehenden privaten Schlssel, indem du ihn in das Feld \\"Nostr Private Key\\" einfgst.","imported_key_warning":" Du verwendest derzeit einen importierten oder zufllig generierten Nostr-Schlssel. Dein privater Nostr-Schlssel kann nicht durch deine Wiederherstellungsphrase wiederhergestellt werden, also denke daran, deinen privaten Nostr-Schlssel separat zu sichern.","can_restore":" Nostr-Schlssel, abgeleitet von Ihrem Hauptschlssel","derive":"Vom Hauptschlssel ableiten","no_secret_key":"Du hast noch keinen Hauptschlssel. <0>Klicke hier</0></div>, um deinen Hauptschlssel zu erstellen und deine Nostr-Schlssel abzuleiten.","remove":"Aktuelle Schlssel entfernen"},"setup":{"title":"Einrichten der Nostr-Schlssel","description":"Whle, ob du ein neues Nostr-Konto (ein Paar privater und ffentlicher Schlssel) erstellen oder ein bestehendes importieren mchtest.","new":{"description":"Generiere einen Hauptschlssel mit einem Paar neuer Nostr-Schlssel.","label":"Ein neues Nostr-Konto erstellen"},"description2":"Jedes Nostr-Konto, das in Alby erstellt wird, wird mit einer <0>Recovery Phrase</0> geliefert - eine Reihe von 12 Wrtern, die es dir ermglicht, jederzeit wieder Zugang zu deinen privaten Nostr-Schlsseln zu erhalten."}},"remove":{"error":"Der eingegebene Kontoname stimmte nicht berein.","confirm":"Bitte gebe den Namen des Kontos ein, um die Lschung deines Kontos zu besttigen:\\n\\n{{ Name }}\\n\\n Wenn du fortfhrst, werden alle zugehrigen Schlssel (Hauptschlssel, Nostr, etc.) gelscht. Bitte vergewissern dich, dass du eine Sicherungskopie erstellt hast, denn es gibt keine andere Mglichkeit, sie wiederherzustellen.","subtitle":"Entfernt alle Zertifikate, Zahlungsdaten und Schlssel, die mit dieser Wallet verbunden sind.","title":"Trenne deine Verbindung zu deiner Wallet"},"actions":{"export":"Exportieren","remove_secretkey":"Hauptschlssel entfernen","disconnect_wallet":"Wallet abtrennen"},"mnemonic":{"title":" Schlsselverwaltung","backup":{"protocols":{"nostr":"Nostr"},"save":"Hauptschlssel speichern","button":"Zeige Wiederherstellungsphrase","warning":" Vergesse nicht, deine Wiederherstellungsphrase zu sichern! Wird sie nicht gesichert, kann dies dazu fhren, dass du den Zugang zu deinem Hauptschlssel, dein Nostr-Identitt oder den von dir mit diesem Schlssel verwalteten Assets dauerhaft verlierst.","description":"Notiere deine Wiederherstellungsphrase, um deinen Hauptschlssel auf einem neuen Gert wiederherstellen zu knnen oder fr den Fall, dass du den Zugriff auf dein Konto verlierst.","title":"Sichere deinen Hauptschlssel"},"saved":"Hauptschlssel erfolgreich verschlsselt und gespeichert.","generate":{"title":"Neuen Hauptschlssel generieren","button":"Hauptschlssel generieren","description":"Hauptschlssel ermglicht dir die Interaktion mit verschiedenen Protokollen wie z.B.: Nostr, Basisschicht von Bitcoin oder LNURL-Auth."},"import":{"title":"Importiere deinen Hauptschlssel","description":"Verwende die Wiederherstellungsphrase, um deinen Hauptschlssel in Alby zu importieren.","button":"Hauptschlssel importieren"},"existing_nostr_key_notice":" Fr dieses Konto ist bereits ein privater Nostr-Schlssel festgelegt, der nicht von diesem Hauptschlssel abgeleitet wird. Du kannst dein Nostr-Schlssel ber deine Kontoeinstellungen verwalten.","lnurl":{"title":"Anmeldung mit Lightning","use_mnemonic":"Hauptschlssel fr die Anmeldung bei Lightning-Anwendungen verwenden (LNURL Auth)"},"new":{"title":"Masterschlssel einrichten","items":{"usage":"Du kannst denselben Hauptschlssel in <0>jede angeschlossene Brieftasche in Alby</0> importieren und verwenden","keys":"Master Key ermglicht die Interaktion mit Protokollen wie <0>Nostr</0>, <0>Liquid</0> oder <0>Basisschicht von Bitcoin</0>","nostr_key":"Du kannst jederzeit vorhandene Nostr-Schlssel importieren und die von Master Key erzeugten berschreiben"},"nostr":"Ein bestehendes Nostr-Konto importieren","secure":{"title":"Sichere deinen Hauptschlssel","description":"Erfahre, was Master Key ist und sichere deine 12-Wrter-Wiederherstellungsphrase"},"import":{"title":"Hast du bereits einen Hauptschlssel?","description":"Gebe deine Wiederherstellungsphrase ein, um den Master Key in diese Wallet zu importieren."}},"inputs":{"title":"Wiederherstellungsphrase fr deinen Master Key"},"description":{"secure_recovery_phrase":"Schreibe sie an einem sicheren Ort auf und bewahren sie privat auf.","recovery_phrase":"Die Wiederherstellungsphrase besteht aus 12 Wrtern, die <0>Ihren Hauptschlssel sichern</0>","warning":"<0>Es kann diese Brieftasche oder das darin befindliche Guthaben nicht wiederherstellen,</0> es wird nur der Zugriff auf das oben genannte Protokoll wiederhergestellt"},"error_confirm":"Bitte vergewisser dich, dass du eine Sicherungskopie der Wiederherstellungsphrase erstellt hast.","confirm":"Ich habe die Wiederherstellungsphrase zu meinem Hauptschlssel an einem privaten und sicheren Ort gesichert."},"remove_secretkey":{"title":"Hauptschlssel entfernen","subtitle":"Entfernt den Hauptschlssel aus diesem Konto.","success":"Der Hauptschlssel wurde erfolgreich entfernt.","confirm":"Bitte gebe den Namen des Kontos ein, um die Lschung deines Hauptschlssels zu besttigen:\\n\\n{{ Name }}"},"network":{"subtitle":"Whle ein Netzwerk zur Ableitung von Adressen und zur Entschlsselung von Bitcoin- und Liquid-Transaktionen","options":{"bitcoin":"Mainnet","testnet":"Testnet","regtest":"Regtest"},"title":"Netzwerk"},"no_mnemonic_hint":" Du hast noch keinen Hauptschlssel. <0>Klicken Sie hier</0></div>, um deinen Hauptschlssel zu erstellen und diese Einstellungen freizuschalten."},"actions":{"connect_a_wallet":"Verbinde deine Wallet"},"title":"Wallets"},"receive":{"amount":{"placeholder":"Betrag in Satoshis...","label":"Betrag"},"payment":{"waiting":"Warten auf Zahlung...","status":"Zahlungsstatus prfen"},"title":"Empfangen","actions":{"create_invoice":"Rechnung erstellen","redeem":{"description":"Einen Bitcoin-Gutschein ber einen LNURL-Code empfangen","title":"Einlsen"},"invoice":{"title":"Lightning Rechnung","description":"Sofortige Bitcoin Zahlungen mit einem bestimmten Betrag anfordern"},"bitcoin_address":{"description":"Empfang ber eine Bitcoin-Adresse mit Hilfe eines Wechseldienstes","title":"Bitcoin-Adresse"}},"description":{"label":"Beschreibung","placeholder":"Zum Beispiel: Wer schickt diese Zahlung?"},"success":"Zahlung erhalten!"},"publishers":{"publisher":{"allowance":{"title":"Erlaubnis","used_budget":"verwendete Sats"}},"title":"Deine  Webseiten","description":"Webseiten, auf denen du Alby bereits verwendet hast","no_info":"Es sieht so aus, als httest du Alby noch auf keiner Webseite verwendet.","discover":"Webseiten entdecken"},"send":{"input":{"label":"Rechnung, Lightning-Adresse oder LNURL","hint":"Rechnung, Lightning-Adresse, LNURL","hint_with_bitcoin_address":"Rechnung, Lightning-Adresse, LNURL oder Bitcoin-Adresse"},"title":"Senden"},"make_invoice":{"errors":{"amount_too_big":"Der Betrag bersteigt den Hchstbetrag","amount_too_small":"Der Betrag liegt unter dem Mindestbetrag"},"title":"Rechnung erstellen","amount":{"label":"Betrag (Satoshi)"},"memo":{"label":"Notiz"}},"lnurlwithdraw":{"content_message":{"heading":"Betrag"},"amount":{"label":"Betrag"},"success":"Abbuchungsauftrag von {{amount}} erfolgreich an {{sender}} gesendet","title":"Abheben"},"nostr":{"title":"Nostr","allow":"Erlaube dieser Webseite:","content":"Auf dieser Webseite wirst du aufgefordert zu signieren:","block_and_ignore":"Blockieren und Ignorieren von {{host}}","block_added":"{{host}} zur Blockliste hinzugefgt, bitte lade deine Webseite neu.","allow_sign":"Erlaube dein {{host}} zu unterschreiben:","view_details":"Details anzeigen","hide_details":"Details ausblenden","allow_sign_event":"Erlaube {{Gastgeber}}, ein <0>{{kind}}</0> Ereignis zu unterzeichnen","allow_encrypt":"Erlaube {{host}}, die Nachricht zu verschlsseln:","recipient":"Empfnger","kinds":{"0":{"title":"Profil aktualisieren","description":"Aktualisiere deinen Namen, deine Beschreibung, dein Profilbild, deine Nostr-Adresse und weitere Profil-Metadaten."},"1":{"title":"kurze Notiz","description":"Unterschreiben deine kurze Textnotiz"},"2":{"title":"Relais empfehlen","description":"Ein empfohlenes Relais teilen"},"3":{"title":"Verfolgungsliste aktualisieren","description":"Aktualisiere die Liste der Konten, denen du folgst"},"4":{"title":"direkte Nachricht","description":"Eine verschlsselte Direktnachricht senden"},"5":{"title":"Notiz lschen","description":"Relays zum Lschen eines Ereignisses auffordern"},"7":{"title":"reagieren","description":"Unterschreibe eine Reaktion auf eine Notiz"},"8":{"title":"Anstecknadel","description":"Verleihung eines Abzeichens an ein Nostr-Profil"},"40":{"title":"Channel erstellen","description":"Einen ffentlichen Channel-Chat erstellen"},"41":{"title":"Update-Channel","description":"Name, Beschreibung, Bild und zustzliche Metadaten des Channel aktualisieren"},"42":{"description":"Senden einer Textnachricht an einen Channel","title":"Channelnachricht senden"},"43":{"title":"Channelmeldung ausblenden","description":"Ausblenden einer Textnachricht in einem Channel"},"44":{"title":"Channelbenutzer stummschalten","description":"Alle Nachrichten eines Nostr-Profils ausblenden"},"1984":{"title":"Berichtsnotiz","description":"Melde einen Hinweis auf Spam, illegalen oder expliziten Inhalt "},"9734":{"title":"Anfrage zappen","description":"Anforderung einer Lightningzahlung"},"9735":{"title":"Rechnung zappen","description":"Anzeige einer Besttigung einer bezahlten Lightningrechnung"},"10002":{"title":"Relaisliste","description":"Aktualisiere die bevorzugten Relais, um deine Notizen zu entdecken und die Notizen anderer zu empfangen"},"22242":{"title":"authentifizieren","description":"Authentifizierung bei einem Relais"},"24133":{"title":"Fernanzeige","description":"Ereignisse aus der Ferne anfordern und unterzeichnen"},"30008":{"description":"Akzeptieren, Ablehnen und ndern der Anzeigereihenfolge von verliehenen Abzeichen","title":"Profilabzeichen"},"30009":{"title":"Ausweis erstellen","description":"Ein neues Abzeichen erstellen"},"30023":{"title":"lange Notiz","description":"Unterschreibe deine langen Notizen wie Artikel oder Blogbeitrge"},"30078":{"title":"Anwendungsdaten","description":"Unterschreibe eine anwendungsspezifische Datei"},"unknown":{"description":"Nicht identifizierte Aktion","title":"Art {{kind}}"}}},"confirm_request_permission":{"title":"Antrag genehmigen","allow":"Erlaube die Ausfhrung dieser Webseite:","always_allow":"Meine Wahl merken und nicht erneut nachfragen"},"lnurlauth":{"submit":"Anmeldung","content_message":{"heading":"Mchtest du dich anmelden bei"},"errors":{"status":"Fehler: Auth-Status ist nicht in Ordnung"},"success":"Anmeldung bei {{name}} erfolgreich","title":"Authentifizierung"},"keysend":{"amount":{"label":"Betrag (Satoshi)"},"success":"Zahlung gesendet! Preimage: {{preimage}}","title":"Senden","receiver":{"label":"Sende die Zahlung an"}},"confirm_sign_message":{"title":"Unterschrift","content":"Auf dieser Webseite wirst du aufgefordert, zu signieren:"},"confirm_keysend":{"title":"Zahlung genehmigen","success":"Zahlung gesendet! Preimage: {{preimage}}","payment_summary":{"description":"Sende Zahlung an: {{destination}}"}},"confirm_payment":{"title":"Zahlung genehmigen","actions":{"pay_now":"Jetzt bezahlen"},"success":"Zahlung von {{amount}} erfolgreich!"},"lnurlpay":{"amount":{"label":"Betrag"},"comment":{"label":"Kommentar"},"name":{"label":"Name"},"email":{"label":"E-Mail"},"success":"Zahlung erfolgreich gesendet!"},"lnurlchannel":{"title":"Kanal-Anfrage","content_message":{"heading":"Anforderung eines Kanals von der Node"},"success":"Kanalanfrage erfolgreich an {{name}} gesendet","private_channel":{"label":"Einen privaten Channel erffnen?"}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Kennwort"},"confirm_password":{"label":"Kennwort besttigen"},"errors":{"enter_password":"Bitte gib ein Kennwort ein.","confirm_password":"Bitte besttige dein Kennwort.","mismatched_password":"Kennwrter stimmen nicht berein."}}}},"choose_path":{"other":{"title":"Bringe dein eigenes Wallet mit","connect":"Verbinden","description":"Am besten, wenn du bereits eine Wallet hast oder ein hohes Zahlungsvolumen abwickeln mchtest.","point1":"Sofortiger Start, kein Warten auf eine Einladung","point4":"Kein lightning und nostr Adresse","point3":"Sowohl Selbstverwahrungs- als auch Verwahrungsoptionen","point2":"Keine Transaktions- oder Volumenbeschrnkungen"},"alby":{"title":"Alby Konto","connect":"Mit Alby verbinden","description":"Ideal fr Einsteiger oder alle, die ein tolles Wallet fr den tglichen Gebrauch suchen.","point3":"Einrichten und Anmelden mit deiner E-Mail","point1":"Neue Anmeldungen erfordern einen Einladungscode","point4":"Eindeutige Lightning- und Nostr-Adresse","point2":"Es gelten Grenzen fr das Transaktionsvolumen"},"title":"Wallet mit Alby-Erweiterung verbinden"},"transactions":{"title":"Transaktionen","description":"Buchungen fr dieses Konto"},"distributions":{"title":"Verbinden mit {{Name}}","description":"Whle die {{Name}} App, mit der du dich verbinden mchtest","umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"},"btcpay":{"name":"BTCPay"},"raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"startos":{"name":"StartOS"}},"confirm_add_account":{"title":"Konto hinzufgen","content":"Diese Webseite mchte ein Konto hinzufgen ({{connector}}):","tor_info":"Um sich ber das TOR-Netzwerk zu verbinden, musst du zunchst die Alby-Begleit-App installieren:"},"on_chain":{"title":"Empfangen ber Bitcoin Adresse","instructions2":"Du kannst deine Bitcoin-Adresse auf der Seite <0>Empfangen</0> finden.","go":"Gehe zu deinem Alby Account ","instructions1":"Um Bitcoin ber eine Bitcoin-Adresse zu erhalten, melde dich bei deinem <0>Alby-Account</0> auf getalby.com an"},"lnurlredeem":{"errors":{"invalid_withdraw_request":"Ungltige LNURL-Abfrage","invalid_lnurl":"Ungltige LNURL"},"title":"Bitcoin einlsen","input":{"label":"LNURL-Code","placeholder":"LNURL..."},"actions":{"withdraw":"Abheben"}},"scan_qrcode":{"title":"Warten auf den Scan"},"confirm_sign_pset":{"title":"Unterschrift","allow_sign":"Auf dieser Webseite wirst du aufgefordert, eine Liquid-Transaktion zu unterzeichnen","view_details":"Details anzeigen","hide_details":"Details ausblenden","view_raw_transaction":"Rohtransaktion anzeigen (Base64)","hide_raw_transaction":"Rohtransaktion ausblenden (Base64)","inputs":"Eingaben","outputs":"Ausgnge","amount":"{{Betrag}} {{ticker}}"},"bitcoin":{"confirm_get_address":{"title":"Adresse abrufen"},"allow":"Erlaube dieser Webseite:","allow_sign":"Erlaube {{host}} zu unterschreiben:","block_and_ignore":"Blockieren und Ignorieren von {{host}}","block_added":"{{host}} zur Blockliste hinzugefgt, bitte lade die Webseite neu.","confirm_sign_psbt":{"title":"Unterschrift","hide_raw_transaction":"Rohtransaktion ausblenden (Hex)","view_raw_transaction":"Rohtransaktion anzeigen (Hex)","inputs":"Eingaben","fee":"Gebhr","hide_details":"Details ausblenden","allow_sign":"Diese Webseite fordert dich auf, eine Bitcoin-Transaktion zu unterzeichnen","view_details":"Details anzeigen","outputs":"Ausgnge"}},"liquid":{"title":"Liquid","allow":"Erlaube dieser Webseite:","block_and_ignore":"Blockieren und Ignorieren von {{host}}","allow_sign":"Erlaube {{host}} zu unterschreiben:","block_added":"{{host}} zur Blockliste hinzugefgt, bitte lade die Webseite neu."},"send_to_bitcoin_address":{"time_estimate":" Transaktionen werden in der Regel innerhalb von 10-30 Minuten bearbeitet.","service_unavailable":"Der Dienst ist vorbergehend nicht verfgbar, bitte versuche es in ein paar Minuten erneut.","title":"An Bitcoin-Adresse senden","recipient":{"label":"Empfnger"},"amount":{"label":"Betrag (sats)"},"network_fee":{"label":"Netzgebhr"},"service_fee":{"label":"Servicegebhr"},"total":{"label":"Insgesamt"},"total_fee":{"label":"Gebhr"},"provider":{"label":"Wechseldienst"},"view_on_explorer":"Ansicht auf mempool explorer"},"webln_enable":{"title":"Mit WebLN verbinden","request2":"Rechnungen und Lightning Informationen anfordern"},"onboard":{"request2":"Du hast deinen Schlssel noch nicht eingerichtet","request1":"Diese Webseite erfordert eine wichtige Interaktion","request3":"Die Einrichtung ist schnell und einfach","title":"Deine Schlssel einrichten","actions":{"start_setup":"Einrichtung starten"}},"liquid_enable":{"request2":"Rechnungen von Liquid anfordern","title":"Mit Liquid verbinden"},"nostr_enable":{"title":"Mit Nostr verbinden"},"webbtc_enable":{"request2":"Rechnungen und Webbtc-Informationen anfordern","title":"Mit WebBTC verbinden"},"alby_enable":{"title":"Mit Alby verbinden","request2":"Rechnungen und Alby Informationen anfordern"},"confirm_payment_async":{"title":"Zahlung genehmigen","description":"Dies ist eine HOLD-Rechnung. <0>Mehr erfahren\\"</0>","actions":{"pay_now":"Jetzt bezahlen"}}},"wx":{"account_menu":{"options":{"account":{"go_to_web_wallet":"Verwalte dein Web-Konto","wallet_settings":"Wallet-Einstellungen","add":"Verbinde deine Wallet"}},"screen_reader":"Dropdown umschalten","title":"Wallet wechseln"},"publishers_table":{"payments":"Zahlungen","budget":"Budget","total":"insgesamt"},"toasts":{"connection_error":{"double_check":"berprfe nochmals deine Verbindungseinstellungen","if_ssl_errors":"und wenn es SSL-Fehler gibt (z.B. ERR_CERT_AUTHORITY_INVALID), klicke auf \\"Erweitert\\" und fahre fort, das Zertifikat zu akzeptieren.","visit_guides":"Besuche unsere Leitfden fr weitere Hilfe","what_you_can_do":"Das kannst du tun:"},"errors":{"invalid_credentials":"Ungltiges Kennwort. Bitte berprfe dein Kennwort und deine E-Mail-Adresse und versuche es erneut."},"login_failed":{"password_reset":"Dein Kennwort vergessen? Klicke hier"}},"companion_download_info":{"download":"Download","companion":{"title":"Begleitende App","description":"Leichte Anwendung, die deinem Browser mit dem TOR-Netzwerk verbindet."},"tor_native":{"title":"TOR (native)","description":"Whle diese Option, wenn dieser Browser bereits mit dem TOR-Netzwerk verbunden ist."},"heading":"Wie willst du dich mit dem TOR-Netzwerk verbinden?"},"allowance_menu":{"edit_allowance":{"title":"Seiten Einstellung","screen_reader":"Zulssigkeitsoptionen","always_allow":"Immer erlauben"},"enable_login":{"title":"Anmeldung auf der Webseite aktivieren","subtitle":"Automatisches Einloggen ohne Besttigung, wenn die Webseite dazu auffordert."},"hint":"Durch die nderung dieser Zahl wird das aktuelle Budget zurckgesetzt.","new_budget":{"label":"Budget fr Ein-Klick-Zahlungen","link_label":"Festlegen eines Budgets fr Ein-Klick-Zahlungen"},"confirm_delete":"Bist du dir sicher, dass du die Verbindung zu dieser Webseite unterbrechen willst?","website_permissions":"Website-Berechtigungen"},"qrcode_scanner":{"actions":{"stop_scanning":"Scannen beenden","start_scanning":"Scannen starten"},"errors":{"allow_camera_access":"Bitte erlaube den Kamerazugriff in den Einstellungen."},"title":"QR-Code scannen"},"transactions_table":{"sent":"Gesendet","boostagram":{"sender":"Sende","app":"App\'s","podcast":"Podcast","message":"Nachricht","episode":"Folge","action":"Aktion","totalAmount":"Gesamtbetrag","timestamp":"Zeitstempel"},"preimage":"Vorschaubild","received":"Empfang","fee":"Gebhr","open_location":"Webseite ffnen","payment_hash":"Zahlung hHash","date_time":"Datum & Uhrzeit","no_transactions":"Noch keine Transaktionen."},"budget_control":{"remember":{"description":"Du kannst dein Guthaben so einstellen, dass du erst dann um eine Zahlungsbesttigung gebeten wirst, wenn es aufgebraucht ist.","label":"Erinnere dich und lege ein Budget fest"},"budget":{"label":"Budget"}},"badge":{"label":{"auth":"login","imported":"importiert","budget":"Haushalt"}},"permissions_modal":{"content_label":"Berechtigungen","set_permissions":"Berechtigungen festlegen:","ask_everytime":"Jedes Mal um <0>{{Erlaubnis}}</0> bitten","dont_ask_current":"Bitte nicht mehr um <0>{{Erlaubnis}}</0>","dont_ask_any":"Frag nicht wieder nach <0>irgendwelchen Nostr-Anforderungen</0>"}},"y0":{"optional":"Optional","feedback":"Rckmeldung","error":"Fehler","connected_sites":"Verbundene Webseiten","loading":"Laden","sats_one":"sat","success":"Erfolgreich","password":"Kennwort","description_full":"Vollstndige Beschreibung","amount":"Betrag","copied":"Kopiert!","description":"Beschreibung","settings":"Einstellungen der Erweiterung","sats_other":"sats","confirm_password":"Kennwort besttigen","help":"Alby Hilfe","actions":{"back":"Zurck","open":"ffnen","cancel":"Abbrechen","confirm":"Besttigen","send":"Senden","unlock":"Entsperren","receive":"Empfangen","delete":"Lschen","edit":"Bearbeiten","next":"Weiter","export":"Exportieren","log_in":"Einloggen","close":"Schlieen","remove":"entfernen","continue":"Weiter","lock":"Sperren","connect":"Verbinden","save":"Speichern","copy":"Kopieren","copy_invoice":"Rechnung kopieren","remember":"Denke an meine Wahl und frage nicht noch einmal","receive_again":"Eine weitere Zahlung erhalten","transactions":"Transaktionen","more":"Mehr","download":"Download","import":"Importieren","copy_clipboard":"In die Zwischenablage kopieren","paste":"Einfgen","paste_clipboard":"Einfgen aus der Zwischenablage","review":"berprfung","disconnect":"Verbindung trennen","copied_to_clipboard":"In die Zwischenablage kopiert","hide":"Ausblenden","finish":"Oberflche"},"discover":"Apps entdecken","errors":{"connection_failed":"Verbindung fehlgeschlagen","payment_failed":"Zahlung fehlgeschlagen"},"message":"Nachricht","response":"Antwort","success_message":"{{Betrag}}{{fiatAmount}} sind auf dem Weg zum {{Ziel}}","accounts":"Konten","range":{"between":"zwischen {{min}} und {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"balance":"Kontostand","wallet":"Wallet","connectors":{"lnd":"LND","nativelnd":"LND (ber Tor)","citadel":"Citadel","nativecitadel":"Citadel (ber Tor)","commando":"Kommando","lnbits":"LNBits","lndhub":"LNDHub","nativelndhub":"LNDHub (ber Tor)","nativelnbits":"LNBits (ber Tor)","galoy":"Galoy","eclair":"Eclair"},"or":"oder","pasted":"Eingefgt!","enable":{"block_added":"{{host}} zur Blockliste hinzugefgt, bitte lade die Webseite neu.","request1":"Genehmigung von Transaktionen beantragen","allow":"Erlaube dieser Webseite:","block_and_ignore":"Blockieren und Ignorieren von {{host}}","insecure_domain_warn":" Du stellst eine Verbindung zu einer unsicheren Domne her."},"website":"Website","apps":"Apps","full_screen":"Vollbild","hide_advanced":"Erweiterte Einstellungen ausblenden","advanced":"Erweiterte Einstellungen anzeigen"},"mk":{"commando":{"bkpr-listbalances":"Liste aller aktuellen und historischen Kontostnde","checkmessage":"berprfe, ob die Signatur von einem bestimmten Node erstellt wurde","fundchannel":"ffne einen Zahlungskanal mit einem Peer, indem du eine Finanzierungstransaktion durchfhrst","getroute":"Finde die beste Route fr die Zahlung an eine Lightning Node","invoice":"Schaffe die Erwartung einer Zahlung","keysend":"Sende eine Zahlung an eine andere Node","listoffers":"Alle Angebote auflisten oder ein bestimmtes Angebot erhalten","listpays":"Ruft den Status aller Zahlungsbefehle ab","signmessage":"Erstellen Sie eine Signatur von dieser Node","feerates":"Rckgabe der Fee Rate, die bei CLN verwenden wird","listforwards":"Auflistung aller versuchten bermittlungsversuche","listfunds":"Listet alle verfgbaren Mittel auf","listinvoices":"Abrufen des Status aller Rechnungen","sendpay":"Sende eine Zahlung ber eine Route","multifundchannel":"ffne mehrere Zahlungskanle mit Nodes, indem du eine einzige Finanzierungstransaktion durchfhrst","disconnect":"Schlieen einer bestehenden Verbindung zu einem Peer","decodepay":"Prfe und analysiere einen Bolt11-String","getinfo":"Abrufen der Zusammenfassung der Node","listtransactions":"Liste der in der Wallet verfolgten Transaktionen","offer":"Erstelle ein Angebot","connect":"Stellen Sie eine neue Verbindung mit einer anderen Node her","decode":"Dekodiere eine Bolt11/Bolt12/Rune-Kette","listpeers":"Liste der Nodes, die mit dieser Node verbunden sind oder offene Kanle haben","listsendpays":"Ruft den Status aller sendpay-Befehle ab","pay":"Sende eine Zahlung an eine BOLT11-Rechnung","setchannel":"Konfiguriere die fr einen Kanal beworbenen Gebhren / htlc-Bereiche","listnodes":"Auflistung von Nodes, von denen der Node durch Gossip-Nachrichten erfahren hat"},"lnd":{"channelbalance":"Du erhltst einen Bericht ber den Gesamtbetrag der Mittel fr alle offenen Kanle","walletbalance":"Ermittel die gesamten nicht verbrauchten Ausgaben der Wallet","listchannels":"Erhalte eine Beschreibung aller offenen Kanle","openchannel":"ffne einen neuen Kanal","estimatefee":"Schtze den Gebhrensatz und die Gesamtgebhren fr eine Transaktion","getchaninfo":"Ermittelt die Netzansage fr den angegebenen Kanal","getinfo":"Abrufen der Node-Informationen","listinvoices":"Erhalte eine Liste aller Rechnungen","connectpeer":"Stelle eine Verbindung zu einer entfernten Gegenstelle her","disconnectpeer":"Trenne die Verbindung zu einer entfernten Gegenstelle","getnetworkinfo":"Abrufen grundlegender Statistiken ber die bekannte Kanalkurve","getnodeinfo":"Abrufen der Kanalinformationen fr einen Node","gettransactions":"Abrufen einer Liste aller fr die Wallets relevanten Transaktionen","listpeers":"Erhalte eine Liste aller derzeit aktiven Peers","lookupinvoice":"Rechnungsdetails nachschlagen","queryroutes":"Abfrage nach einer mglichen Route","sendtoroute":"Fhre eine Zahlung ber die angegebene Route durch","routermc":"Lese den internen Status der Missionskontrolle","decodepayreq":"Entschlssel eine Zahlungsanforderungszeichenfolge","addinvoice":"Erstelle neue Rechnungen","listpayments":"Erhalte eine Liste aller ausgehenden Zahlungen","verifymessage":"berprfe eine Signatur ber eine Nachricht","addholdinvoice":"Erstelle eine neue HODL-Rechnungen","settleinvoice":"Begleiche eine akzeptierte Rechnung","listunspent":"Liste aller utxos, die von der Brieftasche ausgegeben werden knnen","listaddresses":"Erhalte alle Adressen zusammen mit deinem Guthaben","newaddress":"Abrufen einer neuen Onchain-Adresse","nextaddr":"Abrufen der nchsten unbenutzten Adresse in der Wallet"},"lnc":{"connectpeer":"Stelle eine Verbindung zu einer Gegenstelle her","disconnectpeer":"Trenne die Verbindung zu einer entfernten Gegenstelle","estimatefee":"Schtze den Gebhrensatz und die Gesamtgebhren fr eine Transaktion","getnodeinfo":"Abrufen der Kanalinformationen fr eine Node","getchaninfo":"Ermittelt die Netzansage fr den angegebenen Kanal","listpayments":"Erhalte eine Liste aller ausgehenden Zahlungen","queryroutes":"Abfrage nach einer mglichen Route","verifymessage":"berprfung einer Signatur ber eine Nachricht","listpeers":"Ermittelt eine Liste aller derzeit aktiven Peers","sendtoroute":"Nehme eine Zahlung ber die angegebene Route vor","decodepayreq":"Dekodierung einer Zahlungsanforderungszeichenfolge","addinvoice":"Neue Rechnungen erstellen","routermc":"Lese den internen Status der Missionskontrolle","gettransactions":"Abrufen einer Liste aller fr die Wallet relevanten Transaktionen","getnetworkinfo":"Abrufen grundlegender Statistiken ber die bekannte Kanalkurve","lookupinvoice":"Rechnungsdetails nachschlagen","getinfo":"Abrufen der Node-Informationen","listchannels":"Erhalte eine Beschreibung aller offenen Kanle","listinvoices":"Erhalte eine Liste aller Rechnungen","channelbalance":"Erhalte einen Bericht ber den Gesamtbetrag der Mittel fr alle offenen Kanle","walletbalance":"Ermittle die gesamten nicht verbrauchten Ausgaben deiner Wallet","openchannel":"ffne einen neuen Kanal","addholdinvoice":"Neue HODL-Rechnungen erstellen","settleinvoice":"Begleiche eine akzeptierte Rechnung","listunspent":"Liste aller utxos, die von der Wallet ausgegeben werden knnen","nextaddr":"Abrufen der nchsten unbenutzten Onchain-Adresse innerhalb der Wallet","listaddresses":"Alle Onchain-Adressen zusammen mit ihrem Guthaben abrufen","newaddress":"Abrufen einer neuen Onchain-Adresse"},"webln":{"getbalance":{"description":"Lese den Saldo deines Kontos ab","title":"das Gleichgewicht erhalten"}},"bitcoin":{"getaddress":{"title":"Adresse abrufen","description":"Lese deine Bitcoin-Empfangsadresse"}},"liquid":{"getaddress":{"title":"Adresse abrufen","description":"Lese deine Liquid-Empfangsadresse"},"signschnorr":{"title":"Zeichen schnorr","description":"Nachricht mit deinem Schlssel unterschreiben"}},"nostr":{"getpublickey":{"title":"ffentlichen Schlssel lesen","description":"Lese deinen ffentlichen Schlssel"},"nip04decrypt":{"title":"entschlsseln (nip04)","description":"Daten entschlsseln"},"nip04encrypt":{"title":"verschlsseln (nip04)","description":"Daten verschlsseln"},"nip44encrypt":{"title":"verschlsseln (nip44)","description":"Daten verschlsseln"},"decrypt":"Daten entschlsseln","nip44decrypt":{"title":"entschlsseln (nip44)","description":"Daten entschlsseln"}}}}'),at=JSON.parse('{"xk":{"welcome":{"set_password":{"title":"Set extension unlock passcode","description1":"Set a passcode to unlock Alby Extension in this browser","description2":"Unlock passcode cannot be recovered, but may be changed ","choose_password":{"label":"Choose an unlock passcode:"},"confirm_password":{"label":"Let\'s confirm you typed it correct:"},"errors":{"enter_password":"Please enter a passcode.","confirm_password":"Please confirm your passcode.","mismatched_password":"Passcodes don\'t match."}},"test_connection":{"ready":"Awesome, you\'re ready to go!","initializing":"Initializing your account. Please wait, this can take a minute...","connection_error":"Connection Error","review_connection_details":"Please review your connection details.","connection_taking_long":"Trying to connect takes longer than expected... Are your details correct? Is your node reachable?","contact_support":"If you need help please contact support@getalby.com","actions":{"delete_edit_account":"Delete invalid account and edit again"}},"pin_extension":{"title":"Pin your Alby extension","description":"You\'re almost there. To use Alby conveniently, remember to pin your extension to the browser toolbar:","explanation":"1. Click on <0/> in the top right corner of your browser<1/>2. Find Alby and click to pin it to the toolbar<1/>3. That\'s it. To access Alby just click on the <2/> icon","next_btn":"Start buzzin\' {{icon}} with Alby"}},"choose_path":{"title":"Connect Wallet to Alby Extension","other":{"title":"Bring Your Own Wallet","description":"Best if you already have a wallet or need to do high-volume payments.","connect":"Connect","point1":"Start instantly, no waiting for an invite","point2":"No transaction or volume limits","point3":"Both self-custody and custodial options","point4":"No lightning and nostr address"},"alby":{"title":"Alby Account","description":"Ideal for beginners or anyone looking for a great daily spending wallet.","connect":"Connect with Alby","point1":"New signups require an invite code","point2":"Transaction volume limits apply","point3":"Set up and login with your email","point4":"Unique lightning and nostr address"}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Password"},"confirm_password":{"label":"Confirm Password"},"errors":{"enter_password":"Please enter a password.","confirm_password":"Please confirm your password.","mismatched_password":"Passwords don\'t match."}}}},"choose_connector":{"title":"Connect Lightning Wallet","description":"Connect to your external lightning wallet or node","lnd":{"title":"LND","page":{"title":"Connect to your LND node","description":"You need your node URL and a macaroon with read and send permissions (e.g. admin.macaroon)"},"url":{"label":"REST API host and port","placeholder":"https://your-node-url:8080"},"macaroon":{"label":"Macaroon (HEX format)"},"drag_and_drop":"Drag and drop your macaroon here or <0>browse</0>","errors":{"connection_failed":"Connection failed. Are your LND credentials correct?"}},"umbrel_lightning_node":{"title":"Lightning Node"},"lnc":{"title":"Lightning Terminal (LNC)","page":{"title":"Connect to Lightning Terminal (LNC)","description":"1. On Lightning Terminal sidebar choose <0>Lightning Node Connect</0>.<1/> 2. Click <0>Create a new session</0><1/>3. Label the session, choose desired permissions and submit<1/>4. <0>Copy pairing phrase</0> and paste it below."},"pairing_phrase":{"label":"Your pairing phrase ","placeholder":"secret stack sats phrase"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Connect to LNDHub","description":"Input your LNDHub credential URI here or scan the QR code with your webcam."},"uri":{"label":"LNDHub Export URI"},"errors":{"invalid_uri":"Invalid LNDHub URI","connection_failed":"Connection failed. Is your LNDHub URI correct?"}},"lnbits":{"title":"LNbits","page":{"title":"Connect to <0>LNbits</0>","instructions":"In LNbits, choose the wallet you want to connect, open it, click on API Info and copy the Admin Key. Paste it below:"},"admin_key":{"label":"LNbits Admin Key","placeholder":"Your 32 digit admin key"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Connection failed. Do you have the correct URL and Admin Key?"}},"eclair":{"title":"Eclair","page":{"title":"Connect to <0>Eclair</0>","instructions":"You need your Eclair URL and password."},"password":{"label":"Eclair Password"},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"Connect to <0>Citadel</0> node","instructions":"This currently doesn\'t work if 2FA is enabled."},"password":{"label":"Citadel Password"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Connect to <0>Umbrel</0> node","instructions":"1. In your Lightning Node dashboard go to <0>Connect wallet</0><1/>2. Select <0>REST (Tor)</0> or <0>REST (Local Network)</0> mode<1/>3. Copy the <0>lndconnect URL</0> and paste it below"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Connect to <0>myNode</0>","instructions":"On your myNode homepage click on the <0>Wallet</0> button for your <0>lightning</0> service.<1/> Now click on the <0>Pair Wallet</0> button under the <0>Status</0> tab. Enter your password when prompted.<1/> Select the dropdown menu and choose a pairing option. Depending on your setup you can either use the <0>lightning (REST + Local IP)</0> connection or the <0>lightning (REST + Tor)</0> connection."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Connect to <0>StartOS</0>","instructions":"On your StartOS dashboard click on the <0>Lightning Network Daemon</0> service.<1/>Select the <0>Properties</0> tab.<1/>Now copy the <0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Connect to your <0>RaspiBlitz</0> node","instructions1":"Follow these steps:<1/> 1. <0>SSH</0> into your <0>Raspiblitz</0><1/>2. Select <0>Connect Apps & Show Credentials</0> from the list<1/><0/>3. Choose <0>Connect Alby to this node</0><1/>4. Press <0>OK</0> to display the connection credentials<1/><1/>Copy and paste the <0>REST API host</0> or the <0>.onion</0> address to connect through Tor into the input below.","instructions2":"Copy the (admin) <0>macaroon</0> into the input below."},"rest_api_host":{"label":"REST API host","placeholder":"your-node-onion-address:port"}},"blink":{"title":"Blink Wallet","page":{"title":"Connect to <0>Blink Wallet</0>"},"token":{"label":"Enter your API key","info":"To connect your wallet generate an API key in the <0>Blink Dashboard (dashboard.blink.sv)</0>:<br>- log in with email or phone number if you are using Blink already<br>- if you have no account yet can create a new one by logging in with a phone number<br>- create a new key on the API Keys tab<br>- give it a Name and choose the Read and Write Scope<br>- leave the default no expiry or choose a long timeframe to avoid needing to reconnect your wallet periodically<br>- copy the key (starting with blink_ ) and paste it to the textbox below.<br>"},"currency":{"label":"Select wallet"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"Connect to <0>Bitcoin Jungle Wallet</0>"},"token":{"label":"Enter your Access token","info":"The {{label}} integration with Alby is in alpha and only recommended for advanced users.<br><br>You can grab your Access token by going into the mobile app, clicking on the settings icon, and then tapping 3 times on the build number to open the developer menu.<br><br>The access token can be copied from here.<br><br>"},"currency":{"label":"Select wallet"}},"galoy":{"phone_number":{"label":"Enter your phone number"},"sms_code":{"label":"Enter your SMS verification code"},"actions":{"login":"Login"},"errors":{"setup_failed":"Setup failed","missing_token":"Access token missing, couldn\'t log in.","invalid_token":"Authorization failed. Please check your API key and try again."}},"btcpay":{"title":"BTCPay Server","page":{"title":"Connect to BTCPay LND","instructions":"Navigate to your BTCPayServer and log in as an admin. Go to Server Settings > Services > LND REST - See information. Then Click \\"See QR Code information\\" and copy the QR Code data. Paste it below:"},"config":{"label":"Config data","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.co"},"errors":{"connection_failed":"Connection failed. Is the BTCPay connection URL correct and accessible?"}},"commando":{"title":"Core Lightning","page":{"title":"Connect to your Core Lightning node","instructions":"Make sure you have Core Lightning version 0.12.0 or newer, the commando plugin is running and your node is accessible over the lightning network. Create a rune by running \'lightning-cli commando-rune\'."},"host":{"label":"Host"},"pubkey":{"label":"Public key"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Websocket proxy"},"privKey":{"label":"Local private key (autogenerated)"},"config":{"label":"Config data","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Connection failed. Is your Core Lightning node online and using the commando plugin?"}},"voltage":{"title":"Voltage","page":{"title":"Connect to your Voltage node","description":"Enterprise-grade lightning node hosting. Get on Lightning Network faster than ever. Total control with zero management. <0>Learn more in our setup guide</0>"},"url":{"label":"Node URL","placeholder":"https://your-node.m.voltageapp.io:8080"},"macaroon":{"label":"Admin Macaroon (hex)"},"errors":{"connection_failed":"Connection failed. Are your credentials correct?"}},"nwc":{"title":"Nostr Wallet Connect","page":{"instructions":"Paste a NWC connection string from <0>Alby Nostr Wallet Connect</0>, <1>Umbrel Nostr Wallet Connect</1>, or <2>Mutiny Wallet</2>","url":{"label":"Nostr Wallet Connect URL","placeholder":"nostr+walletconnect://69effe..."},"errors":{"connection_failed":"Connection failed. Is your NWC wallet online and app connection enabled?"}}}},"distributions":{"title":"Connect to {{name}}","description":"Choose which {{name}} app you would like to connect with","umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"},"btcpay":{"name":"BTCPay"},"raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"startos":{"name":"StartOS"}},"home":{"actions":{"send_satoshis":" Send Satoshis ","enable_now":"Enable Now"},"allowance_view":{"budget_spent":"Budget spent","sats":"sats","total_spent":"Total spent","total_payments":"Total payments","permissions":"Permissions"},"default_view":{"is_blocked_hint":"Alby is currently disabled on {{host}}","block_removed":"Enabled {{host}}. Please reload the website.","no_transactions":"No transactions for this account yet.","see_all":"See all","actions":{"get_started":{"title":"Get Started With Alby Extension","description":"New to Alby Extension? Check out our guides, videos and explanations"},"setup_keys":{"title":"Setup your keys","description":"Take care of your Master Key or import your existing Nostr account"},"receive_bitcoin":{"title":"Receive bitcoin","description":"Fund your account and receive via your lightning address or an invoice"}}}},"accounts":{"title":"Wallets","account_view":{"title1":"Wallet Settings","title2":"Account","name":{"title":"Display Name","placeholder":"Account Display Name"},"export":{"title":"Connect your mobile wallet","description":"Allows you to connect and use this account on mobile wallets like <0>Blue Wallet</0> and <1>Zeus</1>.","screen_reader":"Export account details","waiting":"waiting for LndHub data...","your_ln_address":"Your Lightning Address:","export_uri":"LNDHub Credentials URI","scan_qr":"Import this wallet into Zeus or BlueWallet by scanning the QRCode."},"no_mnemonic_hint":" You don\'t have a Master Key yet. <0>Click here</0></div> to create your Master Key and unlock these settings.","mnemonic":{"title":" Key Management","saved":"Master Key encrypted & saved successfully.","existing_nostr_key_notice":" This account already has a nostr private key set and will not be derived from this Master Key. You can manage your Nostr key from your account settings.","description":{"warning":"<0>It cannot recover this wallet or funds in it,</0> it only recovers access to aforementioned protocol","secure_recovery_phrase":"Make sure to write them down somewhere safe and and keep them private","recovery_phrase":"Recovery phrase is set of 12 words that <0>backs up your Master Key</0>"},"confirm":"I\'ve backed up the recovery phrase to my Master Key in a private and secure place.","error_confirm":"Please confirm that you have backed up the recovery phrase.","new":{"title":"Setup Master Key","nostr":"Import an existing Nostr account","items":{"keys":"Master Key allows you to interact with protocols like <0>Nostr</0>, <0>Liquid</0> or <0>base layer of Bitcoin</0>","usage":"You can import and use the same Master Key in <0>each connected wallet in Alby</0>","nostr_key":"You can always import existing keys Nostr and override those generated by Master Key"},"secure":{"title":"Secure Your Master Key","description":"Get to know what Master Key is and back up 12-words recovery phrase"},"import":{"title":"Have a Master key Already?","description":"Enter your recovery phrase to import Master Key into this wallet"}},"generate":{"title":"Generate new Master Key","description":"Master Key allows you to interact with various protocols such as: Nostr, base layer of Bitcoin or LNURL-Auth.","button":"Generate Master Key"},"backup":{"title":"Back up your Master Key","save":"Save Master Key","button":"View recovery phrase","warning":" Don\'t forget to back up your recovery phrase! Not backing it up might result in permanently losing access to your Master Key, Nostr identity or assets you manage with this key.","description":"Write down the recovery phrase to be able to restore your Master Key on a new device or in case you lose access to your account.","protocols":{"nostr":"Nostr"}},"import":{"title":"Import your Master Key","description":"Use the recovery phrase to import your Master Key into Alby.","button":"Import Master Key"},"inputs":{"title":"Recovery phrase to your Master Key"},"lnurl":{"title":"Login with Lightning","use_mnemonic":"Use Master Key for logging into lightning-powered apps (LNURL Auth)"}},"network":{"title":"Network","subtitle":"Choose network to derive addresses and decode bitcoin and liquid transactions","options":{"bitcoin":"Mainnet","testnet":"Testnet","regtest":"Regtest"}},"nostr":{"title":"Nostr","hint":"is a simple and open protocol that aims to create censorship-resistant social networks. Nostr works with cryptographic keys. To publish something you sign it with your key and send it to multiple relays. You can use Alby to manage your Nostr key. Many Nostr applications will then allow you to simply use the key from the Alby extension.","settings":{"label":"Nostr Settings","title":"Nostr Settings","description":"Derive Nostr keys from your Master Key or import your existing private key by pasting it in the \\"Nostr Private Key\\" field.","imported_key_warning":" You\'re currently using an imported or randomly generated Nostr key. Your Nostr private key cannot be restored by your recovery phrase, so remember to back up your Nostr private key separately.","can_restore":" Nostr key derived from your Master Key","derive":"Derive from Master Key","remove":"Remove current keys","no_secret_key":" You don\'t have a Master Key yet. <0>Click here</0></div> to create your Master Key and derive your Nostr keys."},"setup":{"title":"Setup your Nostr keys","description":"Choose If you\'d like to create a new Nostr account (a pair of private and public keys) or import an existing one.","description2":"Every Nostr account created in Alby comes with a <0>Recovery Phrase</0>  a set of 12 words that always allow you to regain access to your Nostr private keys.","new":{"label":"Create a new Nostr account","description":"Generate a Master Key with a pair of new Nostr keys."}},"private_key":{"title":"Manage your Nostr private key","subtitle":"Paste your nostr private key or generate a new one. <0>Learn more </0>","warning":"Please enter the name of the account to confirm the deletion of your nostr private key:\\n\\n{{ name }}","success":"Nostr private key encrypted & saved successfully.","failed_to_remove":"The entered account name didn\'t match, your old Nostr private key has been restored.","successfully_removed":"Nostr private key removed successfully.","label":"Nostr Private Key"},"public_key":{"label":"Nostr Public Key"},"generate_keys":{"title":"Generate a new Nostr key","screen_reader":"Generate a new Nostr key for your account","hint":"You can generate a random key or a derive key from this account details (using a signed canonical phrase). <0>Learn more </0>","actions":{"random_keys":"Generate a random key","derived_keys":"Derive a key from account"}},"actions":{"generate":"Generate a new key"},"errors":{"failed_to_load":"Failed to load the Nostr key. Is it a valid Nostr key?"}},"remove":{"title":"Disconnect This Wallet","subtitle":"Removes all allowances, payment data and keys associated with this wallet.","confirm":"Please enter the name of the account to confirm the deletion of your account:\\n\\n{{ name }}\\n\\n  All associated keys (Master Key, Nostr, etc) will be deleted if you continue. Please make sure you have backed them up, there is no other way to restore them.","error":"The entered account name didn\'t match."},"remove_secretkey":{"title":"Remove Master Key","subtitle":"Removes the Master Key from this account.","confirm":"Please enter the name of the account to confirm the deletion of your Master Key:\\n\\n{{ name }}","success":"Successfully removed the Master Key."},"actions":{"disconnect_wallet":"Disconnect Wallet","remove_secretkey":"Remove Master Key","export":"Export"}},"actions":{"connect_a_wallet":"Connect a wallet"}},"webln_enable":{"title":"Connect to WebLN","request2":"Request invoices and lightning information"},"alby_enable":{"title":"Connect to Alby","request2":"Request invoices and alby information"},"nostr_enable":{"title":"Connect to Nostr","description":"How should this app\'s requests be handled?","presets":{"trust_fully":{"title":"I fully trust it","description":"Auto-sign all requests (except payments)"},"reasonable":{"title":"Let\'s be reasonable","description":"Auto-approve most common requests"},"paranoid":{"title":"I\'m a bit paranoid","description":"Do not sign anything without asking me!"}}},"liquid_enable":{"title":"Connect to Liquid","request2":"Request invoices and liquid information"},"webbtc_enable":{"title":"Connect to WebBTC","request2":"Request invoices and Webbtc information"},"unlock":{"unlock_to_continue":"Unlock to continue","unlock_password":"Your unlock passcode","help_contact":{"part1":"Need help? Contact","part2":"Alby Support"},"unlock_error":{"help":"Your account data is encrypted with your unlock passcode. If you really forgot your unlock passcode you have to reset and add your lightning account again.","link":"Reset now and add a new account"},"errors":{"invalid_password":"Invalid passcode"}},"settings":{"title":"Extension Settings","browser_notifications":{"title":"Browser notifications","subtitle":"Payment and authentication related notifications."},"website_enhancements":{"title":"Website enhancements","subtitle":"Tipping enhancements for Twitter, YouTube, etc."},"lnurl_auth":{"title":"LNURL-Auth","hint":"is a generic authentication protocol. It authenticates the user using digital signatures. The protocol does not require any other identifying information such as passwords, emails, usernames, or similar. With Alby you can use your lightning accounts to securely login to websites. To be compatible with other wallets we had to make a few changes that you can configure here. <0>Ideally all those options are OFF.</0> Use them only if you have old accounts.","legacy_lnurl_auth_202207":{"title":"Legacy LNURL-Auth","subtitle":"The key generation for LNURL-auth has changed (July 2022). Alby was not compatible with other implementations. This was changed, but now different login keys are used. If you used LNURL-auth to login before you can still enable the old method. This option will be removed later, make sure to switch to the new login."},"legacy_lnurl_auth":{"title":"Legacy signing for LNDhub and LNbits","subtitle":"Message signing and login with LNDhub (e.g. BlueWallet) and LNbits accounts has been changed (March 2022). If you logged in with these accounts you can still enable the old signing method. This option will be removed later, make sure to switch to the new login."}},"camera_access":{"title":"Camera access","subtitle":"For scanning QR codes","allow":"Allow camera access","granted":"Permission granted"},"language":{"title":"Language","subtitle":"Translations are not 100% finished yet. <0>Help us translate Alby into your language!</0>"},"theme":{"title":"Theme","subtitle":"Use Alby in dark or light mode","options":{"dark":"Dark","light":"Light","system":"System"}},"show_fiat":{"title":"Sats to Fiat","subtitle":"Always convert into selected currency from selected exchange"},"currency":{"title":"Currency","subtitle":"Show the amounts additionally in this currency"},"exchange":{"title":"Exchange Source","subtitle":"Source of bitcoin exchange rates"},"personal_data":{"title":"Personal data","description":"Payees can request for additional data to be sent with a payment. This data is not shared with anyone without your consent, you will always be prompted before this data is sent along with a payment."},"name":{"title":"Name","subtitle":"","placeholder":"Enter your name"},"email":{"title":"Email","subtitle":"","placeholder":"Enter your email address"},"change_password":{"title":"Change unlock passcode","subtitle":"","screen_reader":"Change unlock passcode","choose_password":{"label":"Enter a new unlock passcode:"},"confirm_password":{"label":"Confirm new passcode:"},"submit":{"label":"Change"},"errors":{"enter_password":"Please enter a new unlock passcode.","confirm_password":"Please confirm your passcode.","mismatched_password":"Passcodes don\'t match."},"success":"Passcode changed successfully"}},"send":{"title":"Send","input":{"label":"Recipient","hint":"Invoice, Lightning Address, LNURL","hint_with_bitcoin_address":"Invoice, Lightning Address, LNURL or bitcoin address"}},"lnurlpay":{"amount":{"label":"Amount"},"comment":{"label":"Comment"},"name":{"label":"Name"},"email":{"label":"Email"},"success":"Success, payment sent!"},"lnurlauth":{"title":"Authentication","content_message":{"heading":"Do you want to log in to"},"submit":"Login","success":"Login successful on {{name}}","errors":{"status":"Error: Auth status is not ok"}},"lnurlchannel":{"title":"Channel Request","content_message":{"heading":"Request a channel from the node"},"private_channel":{"label":"Open a private channel?"},"success":"Channel request sent successfully to {{name}}"},"lnurlwithdraw":{"title":"Withdraw","content_message":{"heading":"Amount"},"amount":{"label":"Amount"},"success":"Withdraw request of {{amount}} sent successfully to {{sender}}"},"lnurlredeem":{"title":"Redeem bitcoin","input":{"label":"LNURL-withdraw code","placeholder":"LNURL..."},"actions":{"withdraw":"Withdraw"},"errors":{"invalid_withdraw_request":"Invalid LNURL withdraw request","invalid_lnurl":"Invalid LNURL"}},"receive":{"title":"Receive","actions":{"create_invoice":"Create Invoice","invoice":{"title":"Lightning invoice","description":"Request instant and specific amount bitcoin payments"},"bitcoin_address":{"title":"Bitcoin address","description":"Receive via bitcoin address using a swap service"},"redeem":{"title":"Redeem","description":"Withdraw a bitcoin voucher instantly via an LNURL code"}},"amount":{"label":"Amount","placeholder":"Amount in Satoshi..."},"description":{"label":"Description","placeholder":"For e.g. who is sending this payment?"},"success":"Payment received!","payment":{"waiting":"waiting for payment...","status":"Check payment status"}},"on_chain":{"title":"Receive via bitcoin address","instructions1":"To receive bitcoin via a bitcoin address, login to your <0>Alby Account</0> on getalby.com","instructions2":"You can find your bitcoin address on the <0>Receive</0> page.","go":"Go to your Alby account "},"scan_qrcode":{"title":"Waiting to scan"},"publishers":{"title":"Your  Websites","description":"Websites where you have used Alby before","no_info":"It looks like you haven\'t used Alby in any websites yet.","discover":"Discover Websites","publisher":{"allowance":{"title":"Allowance","used_budget":"sats used"}}},"make_invoice":{"title":"Create Invoice","amount":{"label":"Amount (Satoshi)"},"memo":{"label":"Memo"},"errors":{"amount_too_small":"Amount is less than minimum","amount_too_big":"Amount exceeds maximum"}},"confirm_sign_message":{"title":"Sign","content":"This website asks you to sign:"},"confirm_sign_pset":{"title":"Sign","allow_sign":"This website asks you to sign a Liquid transaction","view_details":"View details","hide_details":"Hide details","view_raw_transaction":"View raw transaction (Base64)","hide_raw_transaction":"Hide raw transaction (Base64)","inputs":"Inputs","outputs":"Outputs","amount":"{{amount}} {{ticker}}"},"bitcoin":{"confirm_get_address":{"title":"Get Address"},"confirm_sign_psbt":{"title":"Sign","allow_sign":"This website asks you to sign a bitcoin transaction","view_details":"View details","hide_details":"Hide details","view_raw_transaction":"View raw transaction (Hex)","hide_raw_transaction":"Hide raw transaction (Hex)","inputs":"Inputs","outputs":"Outputs","fee":"Fee"},"allow":"Allow this website to:","allow_sign":"Allow {{host}} to sign:","block_and_ignore":"Block and ignore {{host}}","block_added":"Added {{host}} to the blocklist, please reload the website."},"confirm_keysend":{"title":"Approve Payment","success":"Payment sent! Preimage: {{preimage}}","payment_summary":{"description":"Send payment to: {{destination}}"}},"keysend":{"title":"Send","success":"Payment sent! Preimage: {{preimage}}","receiver":{"label":"Send payment to"},"amount":{"label":"Amount (Satoshi)"}},"send_to_bitcoin_address":{"title":"Send to bitcoin address","recipient":{"label":"Recipient"},"amount":{"label":"Amount (sats)"},"network_fee":{"label":"Network fee"},"service_fee":{"label":"Service fee"},"total":{"label":"Total"},"total_fee":{"label":"Fee"},"provider":{"label":"Swap provider"},"view_on_explorer":"View on mempool explorer","time_estimate":" Transactions usually arrive within 10-30 minutes.","service_unavailable":"Service temporary not available, please try again in a few minutes."},"confirm_payment_async":{"title":"Approve Payment","description":"This is a HOLD invoice. <0>Learn more </0>","actions":{"pay_now":"Pay now"}},"confirm_payment":{"title":"Approve Payment","success":"Payment of {{amount}} successful!","actions":{"pay_now":"Pay now"}},"confirm_request_permission":{"title":"Approve Request","allow":"Allow this website to execute:","always_allow":"Remember my choice and don\'t ask again"},"confirm_add_account":{"title":"Add account","content":"This website wants to add an account ({{connector}}):","tor_info":"In order to connect through the TOR network you need to first install the Alby companion app:"},"liquid":{"title":"Liquid","allow":"Allow this website to:","allow_sign":"Allow {{host}} to sign:","block_and_ignore":"Block and ignore {{host}}","block_added":"Added {{host}} to the blocklist, please reload the website."},"nostr":{"title":"Nostr","allow":"Allow this website to:","content":"This website asks you to sign:","allow_sign":"Allow {{host}} to sign:","allow_sign_event":"Allow {{host}} to sign a <0>{{kind}}</0> event","allow_encrypt":"Allow {{host}} to encrypt the message:","view_details":"View details","hide_details":"Hide details","block_and_ignore":"Block and ignore {{host}}","block_added":"Added {{host}} to the blocklist, please reload the website.","recipient":"Recipient","kinds":{"0":{"title":"update profile","description":"Update your name, description, profile picture, Nostr address and additional profile metadata."},"1":{"title":"short note","description":"Sign a short text note"},"2":{"title":"recommend relay","description":"Share a recommended relay"},"3":{"title":"update follow list","description":"Update the list of accounts you follow"},"4":{"title":"direct message","description":"Send an encrypted direct message"},"5":{"title":"delete note","description":"Request relays to delete an event"},"7":{"title":"react","description":"Sign a reaction to a note"},"8":{"title":"award badge","description":"Award a badge to a Nostr profile"},"40":{"title":"create channel","description":"Create a public channel chat"},"41":{"title":"update channel","description":"Update channel\'s name, description, picture and additional metadata"},"42":{"title":"send channel message","description":"Send a text message to a channel"},"43":{"title":"hide channel message","description":"Hide a text message in a channel"},"44":{"title":"mute channel user","description":"Hide all messages from a Nostr profile"},"1984":{"title":"report note","description":"Report a note for spam, illegal or explicit content"},"9734":{"title":"request zap","description":"Request a lightning payment"},"9735":{"title":"zap receipt","description":"Display a confirmation of a paid lightning invoice"},"10002":{"title":"relay list","description":"Update preferred relays for discovering your notes and receiving others\' notes"},"22242":{"title":"authenticate","description":"Authenticate to a relay"},"24133":{"title":"remote sign","description":"Request and sign events remotely"},"30008":{"title":"profile badge","description":"Accept, reject and change display order of awarded badges"},"30009":{"title":"create badge","description":"Create a new badge"},"30023":{"title":"long note","description":"Sign long-form notes like articles or blog posts"},"30078":{"title":"app data","description":"Sign application-specific data"},"unknown":{"title":"kind {{kind}}","description":"Unidentified action"}}},"transactions":{"title":"Transactions","description":"Transactions for this account"},"onboard":{"title":"Setup your keys","request1":"This website requires key interaction","request2":"You haven\'t setup your keys yet","request3":"Setup is quick and easy","actions":{"start_setup":"Start Setup"}}},"y0":{"password":"Password","confirm_password":"Confirm Password","advanced":"Show advanced settings","hide_advanced":"Hide advanced settings","success":"Success","error":"Error","settings":"Extension Settings","accounts":"Accounts","discover":"Discover Apps","connected_sites":"Connected Sites","wallet":"Wallet","full_screen":"Full Screen","sats_one":"sat","sats_other":"sats","loading":"loading","amount":"Amount","optional":"Optional","feedback":"Feedback","copied":"Copied!","pasted":"Pasted!","description":"Description","description_full":"Full Description","success_message":"{{amount}}{{fiatAmount}} are on their way to {{destination}}","response":"Response","message":"Message","help":"Alby Guides","balance":"Balance","or":"or","website":"Website","apps":"Apps","actions":{"back":"Back","delete":"Delete","edit":"Edit","next":"Next","open":"Open","cancel":"Cancel","confirm":"Confirm","continue":"Continue","finish":"Finish","connect":"Connect","lock":"Lock","unlock":"Unlock","send":"Send","save":"Save","import":"Import","receive":"Receive","receive_again":"Receive another payment","transactions":"Transactions","close":"Close","export":"Export","remove":"Remove","copy":"Copy","copy_clipboard":"Copy to clipboard","copied_to_clipboard":"Copied to clipboard","paste":"Paste","paste_clipboard":"Paste from clipboard","copy_invoice":"Copy Invoice","log_in":"Log in","remember":"Remember my choice and don\'t ask again","more":"More","hide":"Hide","disconnect":"Disconnect","review":"Review","download":"Download"},"connectors":{"lnd":"LND","nativelnd":"LND (over Tor)","lndhub":"LNDHub","nativelndhub":"LNDHub (over Tor)","lnbits":"LNBits","nativelnbits":"LNBits (over Tor)","galoy":"Galoy","eclair":"Eclair","citadel":"Citadel","nativecitadel":"Citadel (over Tor)","commando":"Commando"},"errors":{"connection_failed":"Connection failed","payment_failed":"Payment Failed"},"range":{"between":"between {{min}} and {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"enable":{"allow":"Allow this website to:","block_added":"Added {{host}} to the blocklist, please reload the website.","request1":"Request approval for transactions","block_and_ignore":"Block and ignore {{host}}","insecure_domain_warn":" You are connecting to an insecure domain."}},"wx":{"allowance_menu":{"confirm_delete":"Are you sure you want to disconnect this website?","hint":"Changing this number will reset the current budget","new_budget":{"label":"One-click payments budget","link_label":"Set a budget for one-click payments"},"enable_login":{"title":"Enable website login","subtitle":"Automatically log in without confirmation when the website requests."},"edit_allowance":{"title":"Site settings","screen_reader":"Allowance Options","always_allow":"Always allow"},"website_permissions":"Website Permissions"},"qrcode_scanner":{"title":"Scan QR Code","actions":{"start_scanning":"Start scanning","stop_scanning":"Stop scanning"},"errors":{"allow_camera_access":"Please allow camera access in the settings screen."}},"permissions_modal":{"content_label":"Permissions","set_permissions":"Set Permissions:","ask_everytime":"Ask everytime for <0>{{permission}}</0>","dont_ask_current":"Don\'t ask again for <0>{{permission}}</0>","dont_ask_any":"Don\'t ask again for <0>any nostr requests</0>"},"transactions_table":{"fee":"Fee","preimage":"Preimage","payment_hash":"Payment Hash","received":"Received","sent":"Sent","date_time":"Date & Time","boostagram":{"sender":"Sender","message":"Message","app":"App","podcast":"Podcast","episode":"Episode","action":"Action","timestamp":"Timestamp","totalAmount":"Total amount"},"open_location":"Open website","no_transactions":"No transactions yet."},"budget_control":{"remember":{"label":"Remember and set a budget","description":"You may set a balance to not be asked for confirmation on payments until it is exhausted."},"budget":{"label":"Budget"}},"companion_download_info":{"heading":"How do you want to connect to the TOR network?","download":"Download","companion":{"title":"Companion App","description":"Lightweight app that connects your browser to the TOR network."},"tor_native":{"title":"TOR (native)","description":"Select this option if this browser is already connected to the TOR network."}},"toasts":{"connection_error":{"what_you_can_do":"Here is what you can do:","double_check":"Double check your connection details","if_ssl_errors":"and if there are SSL errors (e.g. ERR_CERT_AUTHORITY_INVALID), click \\"advanced\\" and proceed to accept the certificate.","visit_guides":"Visit our guides for more help"},"login_failed":{"password_reset":"Forgot your password? Click here"},"errors":{"invalid_credentials":"Invalid password. Please review your password and email address and try again."}},"account_menu":{"screen_reader":"Toggle Dropdown","title":"Switch Wallet","options":{"account":{"add":"Connect a Wallet","wallet_settings":"Wallet Settings","go_to_web_wallet":"Manage your web account"}}},"publishers_table":{"payments":"payments","budget":"budget","total":"total"},"badge":{"label":{"auth":"login","imported":"imported","budget":"budget"}}},"mk":{"webln":{"getbalance":{"title":"get balance","description":"Read the balance of your account"}},"bitcoin":{"getaddress":{"title":"get address","description":"Read your Bitcoin receive address"}},"liquid":{"getaddress":{"title":"get address","description":"Read your Liquid receive address"},"signschnorr":{"title":"sign schnorr","description":"Sign message with your key"}},"nostr":{"getpublickey":{"title":"read public key","description":"Read your public key"},"decrypt":"Decrypt data","nip04decrypt":{"title":"decrypt (nip04)","description":"Decrypt data"},"nip04encrypt":{"title":"encrypt (nip04)","description":"Encrypt data"},"nip44decrypt":{"title":"decrypt (nip44)","description":"Decrypt data"},"nip44encrypt":{"title":"encrypt (nip44)","description":"Encrypt data"},"signmessage":{"title":"Sign Message","description":"Sign all nostr events"},"signschnorr":{"title":"sign schnorr","description":"Sign message with your key"}},"commando":{"bkpr-listbalances":"List of all current and historical account balances","checkmessage":"Verify that the signature was generated by a given node","connect":"Establish a new connection with another node","decode":"Decode a bolt11/bolt12/rune string","decodepay":"Check and parse a bolt11 string","disconnect":"Close an existing connection to a peer","feerates":"Return the feerates that CLN will use","fundchannel":"Open a payment channel with a peer by committing a funding transaction","getinfo":"Get the summary of the node","getroute":"Find the best route for the payment to a lightning node","invoice":"Create the expectation of a payment","keysend":"Send a payment to another node","listforwards":"List all htlcs that have been attempted to be forwarded","listfunds":"List all funds available","listinvoices":"Get the status of all invoices","listnodes":"List nodes the node has learned about via gossip messages","listoffers":"List all offers or get a specific offer","listpays":"Gets the status of all pay commands","listpeers":"List nodes that are connected or have open channels with this node","listsendpays":"Gets the status of all sendpay commands","listtransactions":"List transactions tracked in the wallet","multifundchannel":"Open multiple payment channels with nodes by committing a single funding transaction","offer":"Create an offer","pay":"Send a payment to a BOLT11 invoice","sendpay":"Send a payment via a route","setchannel":"Configure fees / htlc range advertized for a channel","signmessage":"Create a signature from this node"},"lnd":{"getinfo":"Get the node information","listchannels":"Get a description of all the open channels","listinvoices":"Get a list of all invoices","channelbalance":"Get a report on the total funds across all open channels","walletbalance":"Get the total unspent outputs of the wallet","openchannel":"Open a new channel","connectpeer":"Establish a connection to a remote peer","disconnectpeer":"Disconnect from a remote peer","estimatefee":"Estimate the fee rate and total fees for a transaction","getchaninfo":"Get the network announcement for the given channel","getnetworkinfo":"Get basic stats about the known channel graph","getnodeinfo":"Get the channel information for a node","gettransactions":"Get a list of all transactions relevant to the wallet","listpayments":"Get a list of all outgoing payments","listpeers":"Get a list all currently active peers","lookupinvoice":"Look up invoice details","queryroutes":"Query for a possible route","verifymessage":"Verify a signature over a msg","sendtoroute":"Make a payment via the specified route","decodepayreq":"Decode a payment request string","routermc":"Read the internal mission control state","addinvoice":"Create new invoices","addholdinvoice":"Create new HODL invoices","settleinvoice":"Settle an accepted invoice","newaddress":"Get a new onchain address","nextaddr":"Get the next unused address within the wallet","listaddresses":"Get all the addresses along with their balance","listunspent":"Get a list of all utxos spendable by the wallet"},"lnc":{"getinfo":"Get the node information","listchannels":"Get a description of all the open channels","listinvoices":"Get a list of all invoices","channelbalance":"Get a report on the total funds across all open channels","walletbalance":"Get the total unspent outputs of the wallet","openchannel":"Open a new channel","connectpeer":"Establish a connection to a remote peer","disconnectpeer":"Disconnect from a remote peer","estimatefee":"Estimate the fee rate and total fees for a transaction","getchaninfo":"Get the network announcement for the given channel","getnetworkinfo":"Get basic stats about the known channel graph","getnodeinfo":"Get the channel information for a node","gettransactions":"Get a list of all transactions relevant to the wallet","listpayments":"Get a list of all outgoing payments","listpeers":"Get a list all currently active peers","lookupinvoice":"Look up invoice details","queryroutes":"Query for a possible route","verifymessage":"Verify a signature over a msg","sendtoroute":"Make a payment via the specified route","decodepayreq":"Decode a payment request string","routermc":"Read the internal mission control state","addinvoice":"Create new invoices","addholdinvoice":"Create new HODL invoices","settleinvoice":"Settle an accepted invoice","newaddress":"Get a new onchain address","nextaddr":"Get the next unused onchain address within the wallet","listaddresses":"Get all the onchain addresses along with their balance","listunspent":"Get a list of all utxos spendable by the wallet"}}}'),st=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Elige un cdigo de desbloqueo:"},"confirm_password":{"label":"Confirme que lo escribi correctamente:"},"errors":{"enter_password":"Por favor, introduce un cdigo de acceso.","confirm_password":"Por favor, confirma tu cdigo de acceso.","mismatched_password":"Los cdigos no coinciden."},"title":"Establecer contrasea para desbloquear la extensin"},"test_connection":{"ready":"Genial, ya ests listo!","initializing":"Accediendo a su cuenta. Por favor, espere, esto puede tardar un minuto...","connection_error":"Error de Conexin","review_connection_details":"Revise los detalles de su conexin.","connection_taking_long":"Conectarse est llevando ms tiempo de lo esperado... Sus datos son correctos? Se puede acceder a su nodo?","contact_support":"Si necesita ayuda, pngase en contacto con support@getalby.com","actions":{"delete_edit_account":"Eliminar una cuenta no vlida y volver a editarla"}},"pin_extension":{"title":"Fija tu extensin Alby","description":"Ya casi lo has conseguido. Para utilizar Alby cmodamente, recuerda anclar tu extensin a la barra de herramientas del navegador:","explanation":"1. Haz clic en <0/> en la esquina superior derecha de tu navegador<1/>2. Busca Alby y haz clic para anclarlo a la barra de herramientas<1/>3. Eso es todo. Para acceder a Alby slo tienes que hacer clic en el icono <2/>","next_btn":"Empieza a hablar {{icon}} con Alby"}},"choose_connector":{"description":"Conecta tu billetera lightning externa o nodo","lnd":{"title":"LND","page":{"title":"Conecta a tu nodo LND","description":"Necesita la URL de su nodo y una frase macarrn con permisos de lectura y envo (por ejemplo, admin.macaroon)"},"url":{"label":"Host y puerto de la API REST","placeholder":"https://url-de-su-nodo:8080"},"macaroon":{"label":"Frase macarrn (formato HEX)"},"drag_and_drop":"Arrastra y suelta tu frase macarrn aqu o <0>navegar</0>","errors":{"connection_failed":"Error de conexin. Son correctas sus credenciales de LND?"}},"lnbits":{"title":"Cuenta LNbits","page":{"instructions":"En LNbits, elija la billetera que desea conectar, brala, haga clic en Informacin de API y copie la clave de administrador. Pgalo a continuacin:","title":"Conctese a <0>LNbits</0>"},"admin_key":{"label":"Clave de Administrador de LNbits","placeholder":"Su clave de administrador de 32 dgitos"},"url":{"label":"URL de LNbits"},"errors":{"connection_failed":"La conexin fall. Tiene la URL y la clave de administrador correctas?"}},"eclair":{"title":"Cuenta de Eclair","password":{"label":"Contrasea de Eclair"},"page":{"instructions":"Necesitas la URL y la contreasea de Eclair.","title":"Conectar a Eclair"},"url":{"label":"URL de Eclair","placeholder":"http://localhost:8080"}},"citadel":{"title":"Cuenta de Citadel","password":{"label":"Contrasea de Citadel"},"url":{"label":"URL de Citadel","placeholder":"http://citadel.local"},"page":{"title":"Conectar a nodo Citadel","instructions":"Esto actualmente no funciona si el 2FA est activado."}},"umbrel":{"title":"Cuenta de Umbrel","page":{"title":"Conectar a Umbrel","instructions":"1. En tu Lightning Node dashboard ve a <0>Connect wallet</0><1/>2. Selecciona <0>REST (Tor)</0> o <0>REST (Local Network)</0> mode<1/>3. Copia la <0>lndconnect URL</0> y pgala a continuacin"},"rest_url":{"placeholder":"lndconnect://sunodo:8080?...","label":"URL de REST de lndconnect"}},"mynode":{"title":"MiNodo","page":{"title":"Conecta <0>miNodo</0>","instructions":"En tu pgina myNode pulsa el botn <0>Billetera</0> para tu servicio <0>lightning</0>.<1/> Ahora pulsa el botn <0>Emparejar Billetera</0> bajo la pestaa <0>Estado</0>. Escribe tu contrasea cuando se indique.<1/> Selecciona el men desplegable y elige una opcin de emparejamiento. Dependiendo de tu configuracin puedes usar la conexin <0>lightning (REST + IP Local)</0> o la conexin <0>lightning (REST + TOR)</0>."},"rest_url":{"label":"URL de REST de lndconnect","placeholder":"lndconnect://sunodo:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Conectarse a <0>StartOS</0>","instructions":"En tu panel de StartOS, haz clic en el servicio <0>Lightning Network Daemon</0>.<1/>Selecciona la pestaa <0>Propiedades</0>.<1/>Ahora copia la URL REST de <0>LND Connect. </0>"},"rest_url":{"label":"URL REST conectalnd","placeholder":"lndconnect://sunodo:8080?..."}},"raspiblitz":{"title":"Cuenta RaspiBlitz","page":{"title":"Conecta tu nodo <0>RaspiBlitz</0>","instructions2":"Copie el (admin) <0>macaroon</0> en la entrada de abajo.","instructions1":"Siga estos pasos:<1/> 1. <0>SSH</0> en su <0>Raspiblitz</0><1/>2. Seleccione <0>Conectar aplicaciones y mostrar credenciales</0> de la lista<1/><0/>3. Elija <0>Conectar Alby a este nodo</0><1/>4. Pulsa <0>Aceptar</0> para mostrar las credenciales de conexin<1/><1/>Copia y pega el <0>host API REST</0> o la direccin <0>.onion</0> para conectarte a travs de Tor en la entrada de abajo."},"rest_api_host":{"label":"Host de la API REST","placeholder":"tu-nodo-direccion onion:puerto"}},"blink":{"title":"Billetera de Blink","page":{"title":"Conecta a <0>La cartera Blink</0>"}},"bitcoin_jungle":{"title":"Billetera de Bitcoin Jungle","page":{"title":"Conecta a <0>La cartera Bitcoin Jungle</0>"}},"btcpay":{"title":"Servidor BTCPay","config":{"label":"Datos de configuracin"},"errors":{"connection_failed":"La conexin fall. Es la URL de conexin de BTCPay correcta y accesible?"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Conecta LNDHub","description":"Ingrese su URI de credencial de LNDHub aqu o escanee el cdigo QR con su cmara web."},"uri":{"label":"URI de exportacin de LNDHub"},"errors":{"invalid_uri":"LN Dhubri No vlido","connection_failed":"La conexin fall. Es correcto el URI de LNDHub?"}},"commando":{"pubkey":{"label":"Clave Pblica"},"port":{"label":"Puerto"},"privKey":{"label":"Clave privada local (autogenerada)"},"config":{"label":"Datos de Configuracin","placeholder":"config=https://su-btc-pay.org/lnd-config/212121/lnd.config"},"host":{"label":"Host"},"page":{"title":"Conctese a su nodo Core Lightning","instructions":"Asegrese de tener Core Lightning versin 0.12.0 o posterior, el complemento de comando se est ejecutando y se puede acceder a su nodo a travs de Lightning Network. Cree una runa ejecutando \'lightning-cli commando-rune\'."},"title":"Core Lightning","errors":{"connection_failed":"La conexin fall. Est su nodo Core Lightning en lnea y usando el plugin de comando?"},"rune":{"label":"Rune"},"proxy":{"label":"Proxy de socket web"}},"lnc":{"title":"Lightning Terminal (LNC)","pairing_phrase":{"label":"Tu frase vinculada. ","placeholder":"frase de pila secreta de sats"}},"title":"Conecta la Billetera Lightning","umbrel_lightning_node":{"title":"Lightning Node"}},"home":{"actions":{"send_satoshis":" Enviar Satoshis ","enable_now":"Habilitar ahora"},"allowance_view":{"sats":"sats","budget_spent":"Presupuesto gastado","total_spent":"Gastos totales"},"default_view":{"is_blocked_hint":"Alby est actualmente deshabilitado en {{host}}","block_removed":"{{host}} habilitado. Vuelva a cargar el sitio web.","see_all":"Ver todo","no_transactions":"An no hay transacciones en esta cuenta."}},"accounts":{"account_view":{"nostr":{"errors":{"failed_to_load":"No se pudo cargar la clave Nostr. Es una clave Nostr vlida?"},"private_key":{"success":"Clave privada cifrada y guardada con xito.","successfully_removed":"Clave privada eliminada con xito.","label":"Clave Privada","title":"Administra tu clave","subtitle":"Pega tu clave privada o genera una nueva. <0>Ms informacin \\"</0>","failed_to_remove":"El nombre de cuenta introducido no coincide, tu antiguo privado ha sido restaurado."},"public_key":{"label":"Clave Pblica"},"generate_keys":{"title":"Generar una nueva clave de Nostr","screen_reader":"Genere una nueva clave Nostr para su cuenta","actions":{"random_keys":"Genera una clave aleatoria","derived_keys":"Derivar una clave de la cuenta"},"hint":"Puede generar una clave aleatoria o una clave derivada a partir de los detalles de esta cuenta (usando una frase cannica firmada). <0>Aprenda Ms </0>"},"actions":{"generate":"Generar una nueva clave"},"title":"Nostr","hint":"es un protocolo simple y abierto que tiene como objetivo crear redes sociales resistentes a la censura. Nostr trabaja con claves criptogrficas. Para publicar algo, lo firma con su clave y lo enva a mltiples relevos. Puede usar Alby para administrar su clave Nostr. Muchas aplicaciones de Nostr le permitirn simplemente usar la clave de la extensin Alby."},"title2":"Editar Cuenta","name":{"title":"Nombre","placeholder":"Nombre de la Cuenta"},"export":{"title":"Exportar Cuenta","screen_reader":"Exportar los detalles de la cuenta","your_ln_address":"Tu Direccin Lightning:","scan_qr":"Importe esta billetera a Zeus o BlueWallet escaneando el cdigo QR.","waiting":"esperando datos de LndHub...","export_uri":"URI de credenciales de LNDHub"},"actions":{"export":"Exportar"}}},"unlock":{"unlock_to_continue":"Desbloquear para continuar","help_contact":{"part1":"Necesita ayuda? Contacto","part2":"Soporte de Alby"},"unlock_error":{"help":"Los datos de tu cuenta estn encriptados con tu cdigo de desbloqueo. Si realmente olvidaste tu cdigo de desbloqueo, tienes que restablecer y aadir tu cuenta lightning de nuevo.","link":"Restablecer ahora y agregar una nueva cuenta"},"unlock_password":"Tu cdigo de desbloqueo","errors":{"invalid_password":"Contrasea no vlida"}},"settings":{"website_enhancements":{"title":"Mejoras del sitio web","subtitle":"Mejoras de propinas para Twitter, YouTube, etc."},"lnurl_auth":{"title":"Autenticacin-LNURL","hint":"es un protocolo genrico de autenticacin. Autentica al usuario utilizando firmas digitales. El protocolo no requiere ninguna otra informacin de identificacin como contraseas, correos electrnicos, nombres de usuario o similares. Con Alby puedes utilizar tus cuentas relmpago para iniciar sesin en sitios web de forma segura. Para ser compatible con otros monederos hemos tenido que hacer algunos cambios que puedes configurar aqu. <0>Idealmente todas esas opciones estn en OFF.</0> salas slo si tienes cuentas antiguas.","legacy_lnurl_auth_202207":{"title":"Autenticacin-LNURL Legada","subtitle":"La generacin de claves para la autenticacin-LNURL ha cambiado (en julio de 2022). Alby no era compatible con otras implementaciones. Esto se cambi, pero ahora se utilizan diferentes claves de inicio de sesin. Si us autenticacin-LNURL para iniciar sesin antes, an puede habilitar el mtodo anterior. Esta opcin se eliminar ms adelante, asegrese de cambiar al nuevo inicio de sesin."},"legacy_lnurl_auth":{"title":"Firma heredada (Legacy) para LNDhub y LNbits","subtitle":"Se ha cambiado la firma de mensajes y el inicio de sesin con cuentas LNDhub (por ejemplo, BlueWallet) y LNbits (marzo de 2022). Si inici sesin con estas cuentas, an puede habilitar el mtodo de firma anterior. Esta opcin se eliminar ms adelante, asegrese de cambiar al nuevo inicio de sesin."}},"camera_access":{"title":"Acceso a la cmara","subtitle":"Para escanear cdigos QR","allow":"Permitir el acceso a la cmara","granted":"Permiso concedido"},"language":{"title":"Idioma","subtitle":"Alby se vuelve internacional! aydanos a traducir Alby en tu idioma"},"theme":{"title":"Tema","subtitle":"Utilice Alby en modo oscuro o claro","options":{"light":"Claro","dark":"Oscuro","system":"Sistema"}},"show_fiat":{"title":"Sats a Fiat","subtitle":"Convierta siempre a la moneda seleccionada desde el intercambio seleccionado"},"currency":{"title":"Moneda","subtitle":"Mostrar los importes adicionalmente en esta moneda"},"exchange":{"title":"Fuente del Intercambio","subtitle":"Fuente del tipo de cambio de Bitcoin"},"personal_data":{"title":"Datos personales","description":"Los beneficiarios pueden solicitar que se enven datos adicionales con un pago. Estos datos no se comparten con nadie sin su consentimiento, siempre se le solicitar antes de que se enven estos datos junto con un pago."},"name":{"title":"Nombre","subtitle":"","placeholder":"Introduzca su nombre"},"email":{"title":"Correo electrnico","subtitle":"","placeholder":"Introduzca su direccin de correo electrnico"},"change_password":{"title":"Cambiar la Contrasea","subtitle":"","screen_reader":"Cambiar la Contrasea","choose_password":{"label":"Introduzca una nueva contrasea:"},"confirm_password":{"label":"Confirmar nueva contrasea:"},"errors":{"enter_password":"Por favor, introduzca una contrasea.","confirm_password":"Por favor, confirme su contrasea.","mismatched_password":"Las contraseas no coinciden."},"success":"La contrasea se cambi correctamente","submit":{"label":"Cambiar"}},"browser_notifications":{"title":"Notificaciones del navegador","subtitle":"Notificaciones relacionadas con pagos y autenticacin."}},"send":{"title":"Enviar","input":{"label":"Destinatario","hint":"Factura, Direccin Lightning o LNURL"}},"lnurlpay":{"amount":{"label":"Cantidad"},"comment":{"label":"Comentario"},"name":{"label":"Nombre"},"email":{"label":"Email"},"success":"Pago enviado con xito!"},"receive":{"title":"Recibir","actions":{"create_invoice":"Crear Factura"},"amount":{"label":"Cantidad","placeholder":"Cantidad en Satoshi..."},"description":{"label":"Descripcin","placeholder":"Por ej. Quin est enviando este pago?"},"success":"Pago recibido!","payment":{"waiting":"Esperando el pago...","status":"Consultar estado de pago"}},"publishers":{"publisher":{"allowance":{"title":"Tolerancia","used_budget":"sats utilizados"}},"description":"Sitios web donde has usado Alby anteriormente","discover":"Descubre Sitios Web","title":"Tus  Sitios Web","no_info":"Parece que todava no has usado Alby en ningn sitio web."},"make_invoice":{"title":"Crear Factura","amount":{"label":"Cantidad (Satoshi)"},"memo":{"label":"Memorndum"},"errors":{"amount_too_small":"La cantidad es inferior al mnimo","amount_too_big":"La cantidad excede el mximo"}},"confirm_sign_message":{"title":"Firmar","content":"Este sitio web te pide que firmes:"},"confirm_keysend":{"title":"Aprobar Pago","success":"Pago enviado! Preimagen: {{preimage}}","payment_summary":{"description":"Enviar pago a: {{destination}}"}},"confirm_payment":{"title":"Aprobar Pago","success":"Pago de {{amount}} exitoso!!","actions":{"pay_now":"Pagar Ahora"}},"lnurlauth":{"title":"Autenticacin","content_message":{"heading":"Quieres iniciar sesin en"},"submit":"Acceder","success":"Inicio de sesin exitoso en {{name}}","errors":{"status":"Error: El estado de autenticacin no es correcto"}},"lnurlchannel":{"content_message":{"heading":"Solicitar un canal desde el nodo"},"success":"Solicitud de canal enviada con xito a {{name}}","title":"Solicitud de Canal"},"lnurlwithdraw":{"title":"Retirar","content_message":{"heading":"Cantidad"},"amount":{"label":"Cantidad"},"success":"Solicitud de retiro de {{amount}} enviada con xito a {{sender}}"},"choose_path":{"alby":{"title":"Cuenta de Alby","connect":"Conectar con Alby"},"other":{"title":"Lleve su propia cartera","connect":"Conectar","point1":"Empieza al instante, sin esperar invitacin","point2":"Sin lmite de transacciones ni de importe","description":"Lo mejor si ya tienes un monedero o necesitas hacer pagos de mucho importe.","point3":"Opciones de autocustodia y custodia","point4":"Sin direccin relmpago y nostr"},"title":"Conectar la cartera a la extensin Alby"},"nostr":{"title":"Nostr","allow":"Permitir que este sitio web:","content":"Este sitio web te solicita firmar:","allow_sign":"Permitir que {{host}} firme:","block_and_ignore":"Bloquear e ignorar {{host}}","block_added":"Se agreg {{host}} a la lista de bloqueados, vuelva a cargar el sitio web.","view_details":"Ms informacin","hide_details":"Ocultar los detalles"},"confirm_request_permission":{"title":"Aprobar solicitud","always_allow":"Recordar mi eleccin y no volver a preguntar","allow":"Permitir que este sitio web ejecute:"},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Contrasea"},"confirm_password":{"label":"Confirmar Contrasea"},"errors":{"enter_password":"Por favor introduzca una contrasea.","confirm_password":"Por favor, confirme su contrasea.","mismatched_password":"Las contraseas no coinciden."}}}},"keysend":{"title":"Enviar","success":"Pago enviado! Preimagen: {{preimage}}","receiver":{"label":"Enviar pago a"},"amount":{"label":"Cantidad (Satoshi)"}},"transactions":{"title":"Transacciones","description":"Transacciones para esta cuenta"},"distributions":{"umbrel":{"name":"Umbrel"},"startos":{"name":"StartOS"},"raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"title":"Conectarse a {{name}}","description":"Elige la aplicacin {{name}} con la que deseas conectarse","citadel":{"name":"Citadel"},"btcpay":{"name":"BTCPay"}}},"y0":{"password":"Contrasea","success":"Exitoso","error":"Error","connected_sites":"Sitios conectados","sats_one":"sat","sats_other":"sats","loading":"cargando","amount":"Cantidad","optional":"Opcional","feedback":"Retroalimentacin","copied":"Copiada!","actions":{"delete":"Borrar","edit":"Editar","next":"Siguiente","cancel":"Cancelar","confirm":"Confirmar","continue":"Continuar","connect":"Conectar","lock":"Bloquear","unlock":"Desbloquear","send":"Enviar","save":"Guardar","receive":"Recibir","close":"Cerrar","export":"Exportar","remove":"Quitar","copy":"Copiar","copy_invoice":"","open":"Abrir","back":"Volver","receive_again":"Recibir otro pago","log_in":"Iniciar Sesin","remember":"Recordar mi eleccin y no preguntar nuevamente","transactions":"Transacciones","more":"Ms","download":"Descargar","review":"Revisar","hide":"Ocultar","disconnect":"Desconectar"},"errors":{"connection_failed":"Error de conexin","payment_failed":"Pago Fallido"},"description":"Descripcin","confirm_password":"Confirmar Contrasea","success_message":"{{amount}}{{fiatAmount}} enviados a {{destination}}","message":"Mensaje","description_full":"Descripcin Completa","accounts":"Cuentas","discover":"Descubrir","response":"Respuesta","help":"Ayuda","range":{"between":"entre el {{min}} y el {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"balance":"Balance","connectors":{"nativelnd":"LND (en Tor)","lnd":"LND"},"website":"Pgina web"},"wx":{"allowance_menu":{"confirm_delete":"Est seguro de que desea eliminar este sitio web?","hint":"Cambiar este nmero restablecer el presupuesto actual","new_budget":{"label":"Presupuesto de pagos con un clic"},"edit_allowance":{"title":"Editar Asignacin","screen_reader":"Opciones de Asignacin"},"enable_login":{"title":"Habilitar inicio de sesin en el sitio web","subtitle":"Iniciar sesin automticamente sin confirmacin cuando el sitio web lo solicite."}},"qrcode_scanner":{"title":"Escanear el Cdigo QR","actions":{"start_scanning":"Comenzar a escanear","stop_scanning":"Detener el escaneo"},"errors":{"allow_camera_access":"Permita el acceso a la cmara en la pantalla de configuracin."}},"transactions_table":{"fee":"Comisin","preimage":"Preimagen","received":"Recibido","sent":"Enviado","boostagram":{"sender":"Remitente","message":"Mensaje","app":"Aplicacin","podcast":"Podcasts","episode":"Episodio"},"open_location":"Abrir la pgina web","payment_hash":"Hash del pago","date_time":"Fecha y hora"},"budget_control":{"remember":{"label":"Recuerda y establece un presupuesto","description":"Puede establecer un saldo para que no se le solicite confirmacin de los pagos hasta que se agote."},"budget":{"label":"Presupuesto"}},"toasts":{"connection_error":{"what_you_can_do":"Esto es lo que puedes hacer:","visit_guides":"Visita nuestras guas para obtener ms ayuda","double_check":"Verifique los detalles de su conexin","if_ssl_errors":"y si hay errores SSL (por ejemplo, ERR_CERT_AUTHORITY_INVALID), haga clic en \\"avanzado\\" y proceda a aceptar el certificado."},"errors":{"invalid_credentials":"Contrasea no vlida. Por favor, revise su contrasea y direccin de correo electrnico e intntelo de nuevo."},"login_failed":{"password_reset":"Olvid su contrasea? Haga clic aqu"}},"account_menu":{"options":{"account":{"go_to_web_wallet":"Administra tu cuenta de Alby"}},"screen_reader":"Alternar men desplegable"},"publishers_table":{"payments":"pagos"},"badge":{"label":{"auth":"INICIAR SESIN"}},"companion_download_info":{"download":"Descargar","companion":{"title":"Aplicacin complementaria","description":"Aplicacin ligera que conecta tu navegador a la red TOR."},"tor_native":{"title":"TOR (nativa)","description":"Seleccione esta opcin si este navegador ya est conectado a la red TOR."},"heading":"Cmo quieres conectarte a la red TOR?"}},"mk":{"commando":{"getinfo":"Obtenga el resumen del nodo","bkpr-listbalances":"Lista de todos los saldos actuales e histricos de la cuenta","checkmessage":"Verifique que la firma fue generada por un nodo dado","connect":"Establecer una nueva conexin con otro nodo","keysend":"Enviar un pago a otro nodo","offer":"Crear una oferta","sendpay":"Enviar un pago a travs de una ruta","signmessage":"Crear una firma a partir de este nodo","fundchannel":"Abra un canal de pago con un par al realizar una transaccin de financiacin","listfunds":"Listar todos los fondos disponibles","getroute":"Encontrar la mejor ruta para el pago a un nodo lightning","invoice":"Crear la expectativa de un pago","listpays":"Obtener el estado de todos los comandos de pago","listpeers":"Listar los nodos que estn conectados o que tienen canales abiertos con este nodo","listtransactions":"Listar las transacciones rastreadas en la billetera","pay":"Enve un pago a una factura BOLT11","listinvoices":"Obtener el estado de todas las facturas","listoffers":"Enumerar todas las ofertas u obtener una oferta especfica","multifundchannel":"Abra mltiples canales de pago con nodos al realizar una sola transaccin de financiacin","disconnect":"Cerrar una conexin existente con un par","decode":"Decodifica una cadena bolt11/bolt12/rune","decodepay":"Comprobar y analizar una cadena bolt11","listforwards":"Enumere todos los htlc que se han intentado reenviar","setchannel":"Configurar tarifas/rango htlc anunciado para un canal","listnodes":"Enumere los nodos sobre los que el nodo ha aprendido a travs de mensajes gossip","listsendpays":"Obtiene el estado de todos los comandos sendpay","feerates":"Devuelve las tarifas que utilizar CLN"},"lnd":{"queryroutes":"Consultar una posible ruta","openchannel":"Abrir un nuevo canal","getnetworkinfo":"Obtener estadsticas bsicas sobre el grfico de canales conocidos","getnodeinfo":"Obtener la informacin del canal para un nodo","gettransactions":"Obtener una lista de todas las transacciones relevantes para la billetera","getchaninfo":"Obtener el anuncio de la red para el canal dado","listpeers":"Obtener una lista de todos los pares actualmente activos","lookupinvoice":"Consultar los detalles de la factura","listpayments":"Obtener una lista de todos los pagos salientes","estimatefee":"Calcular la tasa de tarifa y las tarifas totales para una transaccin","getinfo":"Obtener la informacin del nodo","listchannels":"Obtener una descripcin de todos los canales abiertos","listinvoices":"Obtener una lista de todas las facturas","connectpeer":"Establecer una conexin con un par remoto","disconnectpeer":"Desconectar de un par remoto","addinvoice":"Crear nuevas facturas","channelbalance":"Obtener un informe sobre los fondos totales en todos los canales abiertos","walletbalance":"Obtener las salidas totales no gastadas de la billetera","sendtoroute":"Realizar un pago a travs de la ruta especificada","decodepayreq":"Decodificar una cadena de solicitud de pago","verifymessage":"Verificar una firma sobre un mensaje","routermc":"Lea el estado de control de la misin interna","settleinvoice":"Pagar una factura aceptada","addholdinvoice":"Crear nuevas facturas HODL"},"lnc":{"getinfo":"Obtener la informacin del nodo","gettransactions":"Obtener una lista de todas las transacciones relevantes para la billetera","getnodeinfo":"Obtener la informacin del canal para un nodo","getnetworkinfo":"Obtener estadsticas bsicas sobre el grfico de canales conocidos","listinvoices":"Obtener una lista de todas las facturas","channelbalance":"Obtener un informe sobre los fondos totales en todos los canales abiertos","walletbalance":"Obtener las salidas totales no gastadas de la billetera","listpeers":"Obtener una lista de todos los pares actualmente activos","lookupinvoice":"Consultar los detalles de la factura","queryroutes":"Consultar una posible ruta","sendtoroute":"Realizar un pago a travs de la ruta especificada","openchannel":"Abrir un nuevo canal","connectpeer":"Establezca una conexin con un par remoto","disconnectpeer":"Desconectarse de un par remoto","estimatefee":"Calcular la tasa de tarifa y las tarifas totales para una transaccin","getchaninfo":"Obtener el anuncio de la red para el canal dado","addinvoice":"Crear nuevas facturas","listpayments":"Obtener una lista de todos los pagos salientes","listchannels":"Obtener una descripcin de todos los canales abiertos","decodepayreq":"Decodificar una cadena de solicitud de pago","verifymessage":"Verificar una firma sobre un mensaje","routermc":"Lea el estado de control de la misin interna","addholdinvoice":"Crear nuevas facturas HODL","settleinvoice":"Pagar una factura aceptada"}}}'),ct=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Choisissez un mot de passe de dverrouillage:"},"confirm_password":{"label":"Confirmons que vous l\'avez tap correctement:"},"errors":{"enter_password":"S\'il vous plait, entrez votre mot de passe.","confirm_password":"Veuillez confirmer votre mot de passe.","mismatched_password":"Les mots de passe entrs ne sont pas les mmes."}},"test_connection":{"ready":"Parfait, vous tes prt !","initializing":"Cration de votre compte. S\'il vous plait, veuillez patienter, ceci peut prendre une minute...","connection_error":"Erreur de connexion","review_connection_details":"Veuillez vrifier vos informations de connexion.","connection_taking_long":"Essayer de se connecter prend plus de temps que prvu... Vos informations sont-elles correctes? Votre nud est-il accessible?","contact_support":"Si vous avez besoin d\'aide, veuillez contacter support@getalby.com","actions":{"delete_edit_account":"Supprimer le compte invalide et modifier  nouveau"}}},"choose_path":{"alby":{"title":"Alby"},"other":{"title":"Autres portefeuilles","connect":"Connecter"}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Mot de passe"},"confirm_password":{"label":"Confirmez le mot de passe"},"errors":{"enter_password":"Veuillez entrer un mot de passe.","confirm_password":"Veuillez confirmer votre mot de passe.","mismatched_password":"Les mots de passe ne correspondent pas."}}}},"choose_connector":{"title":"Connecter le portefeuille Lightning","description":"Connectez-vous  votre portefeuille ou nud Lightning externe","lnd":{"title":"LND","page":{"title":"Connectez-vous  votre nud LND","description":"Vous avez besoin de l\'URL de votre nud et d\'un macaroon avec des autorisations de lecture et d\'envoi (par exemple, admin.macaroon )"},"url":{"label":"REST API host et port","placeholder":"https://url-de-votre-node:8080"},"macaroon":{"label":"Macaroon (format HEX )"},"drag_and_drop":"Faites glisser et dposez votre macaroon ici ou <0>naviguez</0>","errors":{"connection_failed":"La connexion a chou. Vos informations d\'identification LND sont-elles correctes?"}},"lnc":{"title":"LND avec LNC","pairing_phrase":{"label":"Votre phrase d\'appariement ","placeholder":"phrase de sats de pile secrte"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Connectez-vous  LNDHub","description":"Saisissez ici l\'URI de votre identifiant LNDHub ou scannez le code QR avec votre webcam."},"uri":{"label":"URI d\'exportation LNDHub"},"errors":{"invalid_uri":"","connection_failed":"La connexion a chou. Votre URI LNDHub est-elle correcte?"}},"lnbits":{"title":"LNbits","page":{"title":"Connectez-vous  <0>LNbits</0>","instructions":"Dans LNbits, choisissez le portefeuille que vous souhaitez connecter, ouvrez-le, cliquez sur API Info et copiez la cl d\'administration. Collez-le ci-dessous:"},"admin_key":{"label":"Cl d\'administration LNbits","placeholder":"Votre cl d\'administrateur  32 chiffres"},"url":{"label":"URL LNbits"},"errors":{"connection_failed":"La connexion a chou. Disposez-vous de l\'URL et de la cl d\'administration correctes?"}},"eclair":{"title":"Eclair","page":{"title":"Connectez-vous  <0>Eclair</0>","instructions":"Vous avez besoin de votre URL et de votre mot de passe Eclair."},"password":{"label":"Mot de passe Eclair"},"url":{"label":"URL de l\'clair","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadelle","page":{"title":"Connectez-vous au nud <0>Citadelle</0>","instructions":"Cela ne fonctionne pas actuellement si 2FA est activ."},"password":{"label":"Mot de passe Citadelle"},"url":{"label":"URL de la Citadelle","placeholder":"http://citadel.local"}},"umbrel":{"title":"Parapluie","page":{"title":"Connectez-vous au nud <0>Umbrel</0>","instructions":"Dans votre tableau de bord Umbrel, accdez  <0>Connect Wallet</0>. Slectionnez <0>lndconnect REST</0> et copiez l\'<0>URL lndconnect</0>. (Selon votre configuration, vous pouvez utiliser la connexion locale ou la connexion Tor.)"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://votrenode:8080?..."}},"mynode":{"title":"monNode","page":{"title":"Connectez-vous  <0>monNode</0>","instructions":"Sur votre page d\'accueil myNode, cliquez sur le bouton <0>Wallet</0> pour votre service <0>lightning</0>.<1/> Cliquez maintenant sur le bouton <0>Pair Wallet</0> sous le <0 Onglet >tat</0>. Saisissez votre mot de passe lorsque vous y tes invit.<1/> Slectionnez le menu droulant et choisissez une option de couplage. Selon votre configuration, vous pouvez soit utiliser la connexion <0>lightning (REST + Local IP)</0> ou la connexion <0>lightning (REST + Tor)</0>."},"rest_url":{"label":"URL REST lndconnect","placeholder":"lndconnect://votrenode:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Connectez-vous  votre nud <0>StartOS</0>","instructions":"<0>Remarque:</0> Actuellement, nous ne prenons en charge que LND, mais nous ajouterons la prise en charge de c-lightning  l\'avenir!<1/>Sur votre tableau de bord StartOS, cliquez sur le service <0>daemon du rseau Lightning</0>. <1/>Slectionnez l\'onglet <0>Properties</0>.<1/>Copiez maintenant l\'<0>URL REST LND Connect.</0>"},"rest_url":{"label":"URL REST lndconnect","placeholder":"lndconnect://votrenoeud:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Connectez-vous  votre nud <0>RaspiBlitz</0>","instructions1":"Suivez ces tapes:<1/> 1. <0>SSH</0> dans votre <0>Raspiblitz</0><1/>2. Slectionnez <0>Connect Apps & Show Credentials</0> dans la liste<1/><0/>3. Choisissez <0>Connecter Alby  ce nud</0><1/>4. Appuyez sur <0>OK</0> pour afficher les identifiants de connexion<1/><1/>Copiez et collez l\'<0>hte API REST</0> ou l\'adresse <0>.onion</0> pour vous connecter via Tor dans l\'entre ci-dessous.","instructions2":"Copiez le <0>macaroon</0> (admin) dans l\'entre ci-dessous."},"rest_api_host":{"label":"Hte d\'API REST","placeholder":"adresse-de-votre-node-onion:port"}},"blink":{"title":"Portefeuille de plage Bitcoin","page":{"title":"Connectez-vous  <0>Bitcoin Blink Wallet</0>"}},"bitcoin_jungle":{"title":"Portefeuille Jungle Bitcoin","page":{"title":"Connectez-vous au <0>portefeuille Bitcoin Jungle</0>"}},"btcpay":{"title":"Serveur BTCPay","config":{"label":"Donnes de configuration"},"errors":{"connection_failed":"La connexion a chou. L\'URL de connexion BTCPay est-elle correcte et accessible ?"}},"commando":{"title":"Core Lightning","page":{"title":"Connectez-vous  votre nud Core Lightning","instructions":"Assurez-vous que vous disposez de Core Lightning version 0.12.0 ou plus rcente, que le plug-in commando est en cours d\'excution et que votre nud est accessible via le rseau Lightning. Crez une rune en excutant \'lightning-cli commando-rune\'."},"host":{"label":"Hte"},"pubkey":{"label":"Cl publique"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Proxy websocket"},"privKey":{"label":"Cl prive locale (gnre automatiquement)"},"config":{"label":"Donnes de configuration","placeholder":"config=https://votre-btc-payer.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"La connexion a chou. Votre nud Core Lightning est-il en ligne et utilise-t-il le plugin commando?"}}},"home":{"actions":{"send_satoshis":" Envoyez des Satoshis ","enable_now":"Activer maintenant"},"default_view":{"is_blocked_hint":"Alby est actuellement dsactiv sur {{host}}","block_removed":"{{hte}} activ. Veuillez recharger le site Web."}},"accounts":{"account_view":{"title2":"Modifier le compte","name":{"title":"Nom","placeholder":"Nom du compte"},"export":{"title":"Compte d\'exportation","screen_reader":"Exporter les dtails du compte","waiting":"en attente des donnes LndHub...","your_ln_address":"Votre adresse Lightning:","export_uri":"URI des identifiants LNDHub","scan_qr":"Importez ce portefeuille dans Zeus ou BlueWallet en scannant le QRCode."},"nostr":{"title":"Nostr","hint":"est un protocole simple et ouvert qui vise  crer des rseaux sociaux rsistants  la censure. Nostr fonctionne avec des cls cryptographiques. Pour publier quelque chose vous le signez avec votre cl et l\'envoyez  plusieurs relais. Vous pouvez utiliser Alby pour grer votre cl Nostr. De nombreuses applications Nostr vous permettront alors d\'utiliser simplement la cl de l\'extension Alby.","private_key":{"title":"Grez votre cl","subtitle":"Collez votre cl prive ou gnrez-en une nouvelle. Assurez-vous de sauvegarder votre cl prive avant d\'en gnrer une nouvelle. <0>En savoir plus</0>","success":"Cl prive crypte et enregistre avec succs.","successfully_removed":"Cl prive supprime avec succs.","label":"Cl prive","failed_to_remove":"Le nom de compte saisi ne correspondait pas, votre ancien compte priv a t restaur."},"public_key":{"label":"Cl publique"},"generate_keys":{"title":"Gnrer une nouvelle cl Nostr","screen_reader":"Gnrez une nouvelle cl Nostr pour votre compte","hint":"Vous pouvez gnrer une cl alatoire ou une cl drive  partir des dtails de ce compte (en utilisant une phrase canonique signe). <0>En savoir plus</0>","actions":{"random_keys":"Gnrer une cl alatoire","derived_keys":"Driver une cl du compte"}},"actions":{"generate":"Gnrer une nouvelle cl"},"errors":{"failed_to_load":"chec du chargement de la cl Nostr. Est-ce une cl Nostr valide?"}},"actions":{"export":"Exporter"}}},"unlock":{"unlock_to_continue":"Dverrouiller pour continuer","unlock_password":"Votre mot de passe de dverrouillage","help_contact":{"part1":"Besoin d\'aide? Contacter","part2":"Assistance Alby"},"unlock_error":{"help":"Les donnes de votre compte sont cryptes avec votre mot de passe de dverrouillage. Si vous avez vraiment oubli votre mot de passe de dverrouillage, vous devez rinitialiser et ajouter  nouveau votre compte Lightning.","link":"Rinitialisez maintenant et ajoutez un nouveau compte"},"errors":{"invalid_password":"Mot de passe incorrect"}},"settings":{"browser_notifications":{"title":"Notifications du navigateur","subtitle":"Notifications lies au paiement et  l\'authentification."},"website_enhancements":{"title":"Amliorations du site Web","subtitle":"Amliorations des pourboires pour Twitter, YouTube, etc."},"lnurl_auth":{"title":"LNURL-Auth","hint":"est un protocole d\'authentification gnrique. Il authentifie l\'utilisateur  l\'aide de signatures numriques. Le protocole ne ncessite aucune autre information d\'identification telle que des mots de passe, des e-mails, des noms d\'utilisateur ou similaires. Avec Alby, vous pouvez utiliser vos comptes Lightning pour vous connecter en toute scurit aux sites Web. Pour tre compatible avec d\'autres portefeuilles, nous avons d apporter quelques modifications que vous pouvez configurer ici. <0>Idalement, toutes ces options sont dsactives.</0> Utilisez-les uniquement si vous avez d\'anciens comptes.","legacy_lnurl_auth_202207":{"title":"Hrit LNURL-Auth","subtitle":"La gnration de cl pour LNURL-auth a chang (juillet 2022). Alby n\'tait pas compatible avec d\'autres implmentations. Cela a t chang, mais maintenant diffrentes cls de connexion sont utilises. Si vous avez utilis LNURL-auth pour vous connecter auparavant, vous pouvez toujours activer l\'ancienne mthode. Cette option sera supprime plus tard, assurez-vous de passer  la nouvelle connexion."},"legacy_lnurl_auth":{"title":"Signature hrite pour LNDhub et LNbits","subtitle":"La signature des messages et la connexion avec LNDhub (par exemple BlueWallet) et les comptes LNbits ont t modifies (mars 2022). Si vous vous tes connect avec ces comptes, vous pouvez toujours activer l\'ancienne mthode de signature. Cette option sera supprime plus tard, assurez-vous de passer  la nouvelle connexion."}},"camera_access":{"title":"accs  la camra","subtitle":"Pour scanner les codes QR","allow":"Autoriser l\'accs  la camra","granted":"Permission accorde"},"language":{"title":"Langue","subtitle":"Les traductions ne sont pas encore termines  100 %. <0>Aidez-nous  traduire Alby dans votre langue!</0>"},"theme":{"title":"Thme","subtitle":"Utiliser Alby en mode sombre ou clair","options":{"dark":"Sombre","light":"Lumire","system":"Systme"}},"show_fiat":{"title":"Sat  Fiat","subtitle":"Toujours convertir dans la devise slectionne  partir de l\'change slectionn"},"currency":{"title":"Monnaie","subtitle":"Afficher les montants en plus dans cette devise"},"exchange":{"title":"Source d\'change","subtitle":"Source des taux de change Bitcoin"},"personal_data":{"title":"Donnes personnelles","description":"Les bnficiaires peuvent demander que des donnes supplmentaires soient envoyes avec un paiement. Ces donnes ne sont partages avec personne sans votre consentement, vous serez toujours invit avant que ces donnes ne soient envoyes avec un paiement."},"name":{"title":"Nom","subtitle":"","placeholder":"Entrez votre nom"},"email":{"title":"E-mail","subtitle":"","placeholder":"Entrez votre adresse email"},"change_password":{"title":"Changer le mot de passe de dverrouillage","subtitle":"","screen_reader":"Changer le mot de passe de dverrouillage","choose_password":{"label":"Saisissez un nouveau mot de passe de dverrouillage:"},"confirm_password":{"label":"Confirmer le nouveau mot de passe:"},"submit":{"label":"Changement"},"errors":{"enter_password":"Veuillez saisir un nouveau mot de passe de dverrouillage.","confirm_password":"Veuillez confirmer votre mot de passe.","mismatched_password":"Les mots de passe ne correspondent pas."},"success":"Le mot de passe a t chang avec succs"}},"send":{"title":"Envoyer","input":{"label":"Destinataire","hint":"Facture, adresse Lightning ou LNURL"}},"lnurlpay":{"amount":{"label":"Montant"},"comment":{"label":"Commentaire"},"name":{"label":"Nom"},"email":{"label":"E-mail"},"success":"Succs, paiement envoy!"},"lnurlauth":{"title":"Authentification","content_message":{"heading":"Voulez-vous vous connecter "},"submit":"Connexion","success":"Connexion russie sur {{name}}","errors":{"status":"Erreur: Le statut d\'authentification n\'est pas correct"}},"lnurlchannel":{"title":"Demande de chane","content_message":{"heading":"Demander un canal au nud"},"success":"La demande de chane a t envoye avec succs  {{name}}"},"lnurlwithdraw":{"title":"Retirer","content_message":{"heading":"Montant"},"amount":{"label":"Montant"},"success":"Demande de retrait de {{amount}} envoye avec succs  {{sender}}"},"receive":{"title":"Recevoir","actions":{"create_invoice":"Crer une facture"},"amount":{"label":"Montant","placeholder":"Montant en Satoshi..."},"description":{"label":"Description","placeholder":"Par ex. qui envoie ce paiement?"},"success":"Paiement reu!","payment":{"waiting":"en attente de paiement...","status":"Vrifier l\'tat du paiement"}},"publishers":{"title":"Vos sites ","description":"Sites Web sur lesquels vous avez dj utilis Alby","no_info":"Il semble que vous n\'ayez encore utilis Alby sur aucun site Web.","discover":"Dcouvrir des sites Web","publisher":{"allowance":{"title":"Allocation","used_budget":"sats utiliss"}}},"make_invoice":{"title":"Crer une facture","amount":{"label":"Montant (Satoshi)"},"memo":{"label":"Note"},"errors":{"amount_too_small":"Le montant est infrieur au minimum","amount_too_big":"Le montant dpasse le maximum"}},"confirm_sign_message":{"title":"Signe","content":"Ce site vous demande de signer :"},"confirm_keysend":{"title":"Approuver le paiement","success":"Paiement envoy! Primage: {{preimage}}","payment_summary":{"description":"Envoyez le paiement : {{destination}}"}},"keysend":{"title":"Envoyer","success":"Paiement envoy! Primage: {{preimage}}","receiver":{"label":"Envoyez le paiement "},"amount":{"label":"Montant (Satoshi)"}},"confirm_payment":{"title":"Approuver le paiement","success":"Paiement de {{amount}} russi!","actions":{"pay_now":"Payez maintenant"}},"confirm_request_permission":{"title":"Approuver la demande","allow":"Autoriser ce site Web  excuter:","always_allow":"Souviens-toi de mon choix et ne redemande plus"},"nostr":{"title":"Nostr","allow":"Autoriser ce site Web :","content":"Ce site vous demande de signer :","allow_sign":"Autoriser {{host}}  signer:","block_and_ignore":"Bloquer et ignorer {{host}}","block_added":"{{host}} a t ajout  la liste de blocage, veuillez recharger le site Web."}},"y0":{"password":"Mot de passe","confirm_password":"Confirmez le mot de passe","success":"Succs","error":"Erreur","accounts":"Comptes","discover":"Dcouvrir","connected_sites":"","sats_one":"sat","sats_other":"sats","loading":"chargement","amount":"Montant","optional":"Facultatif","feedback":"Retour","copied":"Copi!","description":"Description","description_full":"Description complte","success_message":"{{amount}}{{fiatAmount}} envoy  {{destination}}","response":"Rponse","message":"Message","help":"Aider","actions":{"back":"arrire","delete":"Supprimer","edit":"Modifier","next":"Suivant","open":"Ouvrir","cancel":"Annuler","confirm":"Confirmer","continue":"Continuer","connect":"Connecter","lock":"Verrouiller","unlock":"Dverrouiller","send":"Envoyer","save":"Sauvegarder","receive":"Recevoir","receive_again":"Recevoir un autre paiement","close":"Fermer","export":"Exporter","remove":"Retirer","copy":"Copie","copy_invoice":"","log_in":"Connexion","remember":"Souviens-toi de mon choix et ne redemande plus"},"errors":{"connection_failed":"La connexion a chou","payment_failed":"Paiement chou"},"range":{"lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}","between":"entre {{min}} et {{max}}"}},"wx":{"allowance_menu":{"confirm_delete":"Voulez-vous vraiment supprimer ce site?","hint":"Cela rinitialisera le budget actuel","new_budget":{"label":"Nouveau budget"},"enable_login":{"title":"Activer la connexion au site Web","subtitle":"Connectez-vous automatiquement sans confirmation lorsque le site Web le demande."},"edit_allowance":{"title":"Modifier l\'allocation","screen_reader":"Options d\'allocation"}},"qrcode_scanner":{"title":"Scanner le code QR","actions":{"start_scanning":"Lancer la numrisation","stop_scanning":"Arrter la numrisation"},"errors":{"allow_camera_access":"Veuillez autoriser l\'accs  la camra dans l\'cran des paramtres."}},"transactions_table":{"fee":"Frais","preimage":"Primage","received":"Reu","sent":"Envoy","boostagram":{"sender":"Expditeur","message":"Message","app":"Application","podcast":"Podcast"},"open_location":"Ouvrir le site Web"},"budget_control":{"remember":{"label":"Rappelez-vous et tablissez un budget","description":"Vous pouvez dfinir un solde pour ne pas tre invit  confirmer les paiements tant qu\'il n\'est pas puis."},"budget":{"label":"Budget"}},"toasts":{"connection_error":{"what_you_can_do":"Voici ce que vous pouvez faire:","double_check":"Vrifiez vos informations de connexion","if_ssl_errors":"et s\'il y a des erreurs SSL (par exemple ERR_CERT_AUTHORITY_INVALID), cliquez sur \\"avanc\\" et continuez  accepter le certificat.","visit_guides":"Consultez nos guides pour plus d\'aide"},"login_failed":{"password_reset":"Mot de passe oubli? Cliquez ici"},"errors":{"invalid_credentials":"Mot de passe incorrect. Veuillez vrifier votre mot de passe et votre adresse e-mail et ressayer."}},"account_menu":{"screen_reader":"Basculer la liste droulante"},"publishers_table":{"payments":"Paiements"},"badge":{"label":{"auth":"CONNEXION"}}},"mk":{"commando":{"bkpr-listbalances":"Liste de tous les soldes de compte actuels et historiques","checkmessage":"Vrifiez que la signature a t gnre par un nud donn","connect":"tablissez une nouvelle connexion avec un autre nud","decode":"Dcode une chane bolt11/bolt12/ rune chane","decodepay":"Vrifier et analyser une chane bolt11","disconnect":"Fermez une connexion existante  un pair","feerates":"Renvoie les frais que CLN utilisera","fundchannel":"Ouvrez un canal de paiement avec un pair en engageant une transaction de financement","getinfo":"Obtenez le rsum du nud","getroute":"Trouvez le meilleur itinraire pour le paiement vers un nud Lightning","invoice":"Crer l\'attente d\'un paiement","keysend":"Envoyez un paiement  un autre nud","listforwards":"Rpertorier tous les htlcs qui ont t tents d\'tre transfrs","listfunds":"Dressez la liste de tous les fonds disponibles","listinvoices":"Obtenez le statut de toutes les factures","listnodes":"Listez les nuds dont le nud a eu connaissance via des messages de potins","listoffers":"Listez toutes les offres ou obtenez une offre spcifique","listpays":"Obtient le statut de toutes les commandes de paiement","listpeers":"Rpertorier les nuds connects ou ayant des canaux ouverts avec ce nud","listsendpays":"Obtient le statut de toutes les commandes sendpay","listtransactions":"Rpertorier les transactions suivies dans le portefeuille","multifundchannel":"Ouvrez plusieurs canaux de paiement avec des nuds en effectuant une seule transaction de financement","offer":"Crer une offre","pay":"Envoyez un paiement  une facture BOLT11","sendpay":"Envoyer un paiement via un itinraire","setchannel":"Configurez les frais / la gamme htlc annonce pour un canal","signmessage":"Crez une signature  partir de ce nud"},"lnd":{"getinfo":"Obtenez les informations sur le nud","listchannels":"Obtenez une description de tous les canaux ouverts","listinvoices":"Obtenez une liste de toutes les factures","channelbalance":"Obtenez un rapport sur le total des fonds sur tous les canaux ouverts","walletbalance":"Obtenez le total des sorties non dpenses du portefeuille","openchannel":"Ouvrez une nouvelle chane","connectpeer":"tablissez une connexion  un pair distant","disconnectpeer":"Dconnectez-vous d\'un pair distant","estimatefee":"Estimez le taux de frais et les frais totaux pour une transaction","getchaninfo":"Obtenez l\'annonce du rseau pour la chane donne","getnetworkinfo":"Obtenez des statistiques de base sur le graphique des canaux connus","getnodeinfo":"Obtenir les informations de canal pour un nud","gettransactions":"Obtenez une liste de toutes les transactions pertinentes pour le portefeuille","listpayments":"Obtenez une liste de tous les paiements sortants","listpeers":"Obtenez une liste de tous les pairs actuellement actifs","lookupinvoice":"Consulter les dtails de la facture","queryroutes":"Requte pour un itinraire possible","verifymessage":"Vrifier une signature sur un msg","sendtoroute":"Effectuez un paiement via l\'itinraire spcifi","decodepayreq":"Dcoder une chane de demande de paiement","routermc":"Lire l\'tat du contrle de mission interne","addinvoice":"Crer de nouvelles factures"},"lnc":{"getinfo":"Obtenez les informations sur le nud","listchannels":"Obtenez une description de tous les canaux ouverts","listinvoices":"Obtenez une liste de toutes les factures","channelbalance":"Obtenez un rapport sur le total des fonds sur tous les canaux ouverts","walletbalance":"Obtenez le total des sorties non dpenses du portefeuille","openchannel":"Ouvrez une nouvelle chane","connectpeer":"tablissez une connexion  un pair distant","disconnectpeer":"Dconnectez-vous d\'un pair distant","estimatefee":"Estimez le taux de frais et les frais totaux pour une transaction","getchaninfo":"Obtenez l\'annonce du rseau pour la chane donne","getnetworkinfo":"Obtenez des statistiques de base sur le graphique des canaux connus","getnodeinfo":"Obtenir les informations de canal pour un nud","gettransactions":"Obtenez une liste de toutes les transactions pertinentes pour le portefeuille","listpayments":"Obtenez une liste de tous les paiements sortants","listpeers":"Obtenez une liste de tous les pairs actuellement actifs","lookupinvoice":"Consulter les dtails de la facture","queryroutes":"Requte pour un itinraire possible","verifymessage":"Vrifier une signature sur un msg","sendtoroute":"Effectuez un paiement via l\'itinraire spcifi","decodepayreq":"Dcoder une chane de demande de paiement","routermc":"Lire l\'tat du contrle de mission interne","addinvoice":"Crer de nouvelles factures"}}}'),ut=JSON.parse('{"xk":{"welcome":{"set_password":{"confirm_password":{"label":"         :"},"choose_password":{"label":"   :"},"errors":{"enter_password":"   ","confirm_password":"     ","mismatched_password":"     "}},"test_connection":{"initializing":"         ,      ...","connection_error":" ","review_connection_details":"      ","contact_support":"      support@getalby.com   ","actions":{"delete_edit_account":"       "},"ready":",       !","connection_taking_long":"         ...     ?      ?"},"pin_extension":{"explanation":".          <0/>   <1/>.                  <1/>.         , <2/>    ","title":"\\"    \\"","description":"      ,          :","next_btn":"      {{icon}}"}},"choose_path":{"alby":{"title":"Alby ","connect":"  ","point3":"        ","description":"           ,     ","point1":"        ","point4":"Unique ligntning  nostr address","point2":"-     "},"other":{"title":"  ","connect":"","point1":"  ,  invite    ","point4":"    ","point3":"Self-custody  custodial  ","description":"                     ","point2":"      "},"title":"      "},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":""},"confirm_password":{"label":"   "},"errors":{"enter_password":"    ","confirm_password":"     ","mismatched_password":"   "}}}},"choose_connector":{"title":"   ","description":"     Node   ","lnd":{"title":"LND","page":{"title":" LND    ","description":"   URL              ( admin.macaroon)"},"url":{"label":"REST API   ","placeholder":"https://your-node-url:8080"},"macaroon":{"label":"Macaroon (HEX format)"},"drag_and_drop":"        <0>   </0>","errors":{"connection_failed":"     LND   ?"}},"lnc":{"title":"LND   LNC","pairing_phrase":{"label":"  | ","placeholder":" stack sats "}},"lndhub_go":{"title":"LNDHub","page":{"title":"LNDHub   ","description":"  LNDHub  URI      QR   "},"uri":{"label":"LNDHub Export URI"},"errors":{"invalid_uri":" LNDHub URI","connection_failed":"    LNDHub URI  ?"}},"lnbits":{"title":"LNbits","page":{"title":"<0>LNbits</0>   ","instructions":"LNbits ,         ,  , API              :"},"admin_key":{"label":"LNbits Admin Key","placeholder":" 32    "},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"       URL    ?"}},"eclair":{"title":"Eclair","page":{"title":"<0>Eclair</0>   ","instructions":"  Eclair URL   "},"password":{"label":"Eclair "},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"<0>Citadel</0> node   ","instructions":"        2FA  "},"password":{"label":"Citadel "},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"<0>Umbrel</0> node   ","instructions":" Umbrel dashboard  <0> </0>   <0>   </0>   <0>lndconnect URL</0>    (           TOR      )"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"mynode":{"title":"myNode","page":{"title":"<0>myNode</0>   ","instructions":" myNode    <0></0>    <0></0>    <1/>  <0>  </0>    <0></0>             <1/>                   <0> (REST + )      IP)</0>   <0> (REST + Tor)</0> "},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"startos":{"title":"StartOS","page":{"title":" <0>StartOS</0> node   ","instructions":"<0> :</0>              -  !<1/>     <0>  <   /0> <1/><0></0>  <1/> <0>LND Connect REST URL  </0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"your <0>RaspiBlitz</0> node   ","instructions1":"    :<1/> 1. <0>SSH</0>  <0>Raspiblitz</0><1/>2  <0>     </0>  0>  <1/><0/>3.  <0>Alby      </0><1/>4.       <0></0> <1 /><1/>     Tor        <0>REST API </0>  <0>.onion</0>     ","instructions2":"() <0></0>        "},"rest_api_host":{"label":"REST API host","placeholder":"your-node-onion-address:port"}},"blink":{"title":"Blink Wallet","page":{"title":"<0>Blink Wallet</0   >"},"token":{"info":"      , <0>Blink  (dashboard.blink.sv)</0>   API key  :<br>-        ,      Blink     <br>-         ,             <br>- API Keys    new key <br>-      Read  Write Scope <br>-                             <br>- key   (blink_    )      <br><br>   integration  BTC     <br>","label":"API key  "}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"<0>Bitcoin Jungle Wallet</0   >"},"token":{"info":"   {{label}}            <br><br>    ,        3                 <br><br>         <br><br>","label":"Access token  "}},"btcpay":{"title":" (BTCPay Server)","config":{"label":" "},"errors":{"connection_failed":"   BTCPay  URL     ?"}},"commando":{"title":" ","page":{"title":" Core Lightning node   ","instructions":"        0.12.0   ,               \'lightning-cli commando-rune\'   rune "},"host":{"label":"Host"},"pubkey":{"label":"Public key"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Websocket proxy"},"privKey":{"label":"   (: )"},"config":{"label":"Config data","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"    Core lightning node    commando plugin     ?"}},"umbrel_lightning_node":{"title":" "},"voltage":{"macaroon":{"label":"Admin Macaroon (hex)"},"url":{"label":"Node URL","placeholder":"https://your-node.m.voltageapp.io:8080"},"page":{"title":"     ","description":"-                   . <0>     </0>"},"title":"(Voltage)","errors":{"connection_failed":"       ?"}},"nwc":{"title":"Nostr  ","page":{"url":{"label":"   ","placeholder":"nostr+walletconnect://69effe.."},"instructions":"<0>   </0>, <1>   </1>,  <2> </2>       "}},"galoy":{"sms_code":{"label":"SMS verification code  "},"actions":{"login":"  "},"phone_number":{"label":"   "},"errors":{"setup_failed":"     ","invalid_token":"Authorization     API key     :  ","missing_token":"   ,     "}}},"settings":{"browser_notifications":{"title":" ","subtitle":"    "},"website_enhancements":{"title":" ","subtitle":"Twitter, YouTube,     "},"lnurl_auth":{"title":"LNURL-Auth","hint":"                        , ,                                                    <0>       </0>           ","legacy_lnurl_auth_202207":{"title":" LNURL-Auth","subtitle":"LNURL-auth     ( 2022)                ,   -               LNURL-auth                  ,       "},"legacy_lnurl_auth":{"title":"LNDhub  LNbits    ","subtitle":"     LNDhub ( BlueWallet)  LNbits     ( 2022)              ,                   ,        "}},"camera_access":{"title":" ","subtitle":"QR     ","allow":"    ","granted":"  "},"language":{"title":"","subtitle":"   100%     <0>          !</0>"},"theme":{"title":"","subtitle":"        ","options":{"light":"","system":"","dark":""}},"show_fiat":{"title":"Sats  Fiat","subtitle":"        "},"currency":{"title":"","subtitle":"     "},"exchange":{"title":" ","subtitle":"    "},"personal_data":{"title":" ","description":"                            ,               "},"name":{"title":"","subtitle":"","placeholder":"   "},"email":{"title":"","subtitle":"","placeholder":"    "},"change_password":{"title":"  ","subtitle":"","screen_reader":"  ","choose_password":{"label":"    :"},"confirm_password":{"label":"    :"},"submit":{"label":""},"errors":{"enter_password":"      ","confirm_password":"     ","mismatched_password":"   "},"success":"    "}},"send":{"title":"","input":{"label":"","hint":",  , ","hint_with_bitcoin_address":",  ,    "}},"lnurlpay":{"amount":{"label":""},"success":",    !","comment":{"label":""},"email":{"label":""},"name":{"label":""}},"lnurlauth":{"title":"","content_message":{"heading":"       "},"submit":"","success":" {{name}}   ","errors":{"status":":     "}},"lnurlchannel":{"title":" ","content_message":{"heading":"      "},"success":"  {{name}}    "},"lnurlwithdraw":{"title":"","content_message":{"heading":""},"amount":{"label":""},"success":"{{amount}}     {{sender}}    "},"receive":{"title":" ","actions":{"create_invoice":" ","redeem":{"description":"LNURL        ","title":""},"invoice":{"title":" ","description":"         "},"bitcoin_address":{"description":"           ","title":" "}},"amount":{"label":"","placeholder":"  ..."},"description":{"label":"","placeholder":"        ?"},"success":"  !","payment":{"waiting":"   ...","status":"  "}},"publishers":{"title":"  ","description":"         ","no_info":"                ","discover":" ","publisher":{"allowance":{"title":"","used_budget":"   "}}},"make_invoice":{"title":" ","amount":{"label":" (Satoshi)"},"memo":{"label":""},"errors":{"amount_too_small":"    ","amount_too_big":"    "}},"confirm_sign_message":{"title":"","content":"        :"},"confirm_keysend":{"title":"  ","success":"  ! : {{preimage}}","payment_summary":{"description":"  : {{destination}}"}},"keysend":{"title":"","success":"  ! : {{preimage}}","receiver":{"label":"  "},"amount":{"label":" (Satoshi)"}},"confirm_payment":{"title":"  ","success":"{{amount}}   !","actions":{"pay_now":"  "}},"confirm_request_permission":{"title":"  ","allow":"    :","always_allow":"       "},"nostr":{"title":"Nostr","allow":"     :","content":"        :","allow_sign":"{{host}}      :","view_details":" ","hide_details":" ","block_and_ignore":"   {{host}}   ","block_added":"  {{host}}  ,      ","allow_sign_event":"{{host}}  {{kind}}       ","allow_encrypt":"{{host}}       :"},"transactions":{"title":"-","description":"    "},"distributions":{"description":"    {{name}}    ","title":"{{name}}  ","raspiblitz":{"name":"(RaspiBlitz)"},"mynode":{"name":"(myNode)"},"btcpay":{"name":" (BTCPay)"},"umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"}},"accounts":{"account_view":{"export":{"waiting":"LndHub    ..","your_ln_address":" Lightning Address:","screen_reader":"   ","export_uri":"LNDHub  URI","scan_qr":"        Zeus  BlueWallet   ","title":"    ","description":"    <0>Blue Wallet</0>  <1>Zeus</1>             "},"nostr":{"private_key":{"failed_to_remove":"       ,         ","title":" Nostr    ","label":"Nostr  ","warning":"  nostr              :\\n\\n{{ name }}","successfully_removed":"      ","subtitle":"          <0>  </0>","success":"Nostr         "},"settings":{"no_secret_key":"                     <0>  </0></div>","label":"Nostr ","imported_key_warning":"                              ,            ","remove":"  ","description":"              \\"  \\"     ","title":"Nostr ","can_restore":"         ","derive":"    "},"generate_keys":{"actions":{"random_keys":"random key  ","derived_keys":"     "},"screen_reader":"         ","title":"    ","hint":"                     (     ) <0>  </0>"},"setup":{"title":"    ","new":{"description":"            ","label":"  Nostr  "},"description":",      (      )           ","description2":"        <0> </0>     - 12                   "},"title":"Nostr","actions":{"generate":"    "},"public_key":{"label":"Nostr  "},"hint":"        -                                                                 ","errors":{"failed_to_load":"     .      ?"}},"mnemonic":{"backup":{"description":"                           ","warning":"        !         ,                      ","protocols":{"nostr":"Nostr"},"save":"   ","button":"  "},"generate":{"button":"   ","description":"             : ,      -","title":" Master key  "},"saved":"        ","import":{"description":"              ","button":"    ","title":"     "},"lnurl":{"use_mnemonic":"-             (LNURL Auth)","title":"    "},"title":"  ","existing_nostr_key_notice":"                                  "},"name":{"title":" ","placeholder":"  "},"network":{"subtitle":"              ","options":{"testnet":"Testnet","bitcoin":"Mainnet","regtest":"Regtest"},"title":""},"remove":{"confirm":"               :\\n\\n{{ name }}\\n\\n          ( , , )             ,         ","subtitle":"     ,        ","title":"  ","error":"       "},"remove_secretkey":{"confirm":"               :\\n\\n{{ name }}","success":"      ","subtitle":"       ","title":"   "},"actions":{"remove_secretkey":"  ","export":""},"title1":"Account settings","title2":"","no_mnemonic_hint":"                     <0>  </0></div>"},"title":""},"webln_enable":{"title":"WebLN   ","request2":"      "},"onboard":{"request2":"        ","request1":"        ","request3":"    ","title":"   ","actions":{"start_setup":"  "}},"confirm_payment_async":{"title":"  ","description":"    . <0>  </0>","actions":{"pay_now":"  "}},"bitcoin":{"confirm_sign_psbt":{"title":"Sign","hide_raw_transaction":"raw transaction(Hex) ","view_raw_transaction":"raw transaction (Hex) ","inputs":"","fee":"","hide_details":" ","allow_sign":"           ","view_details":" ","outputs":""},"confirm_get_address":{"title":"  "},"block_and_ignore":"{{host}}      ","block_added":"{{host}}     ,      ","allow_sign":"{{host}}  sign    :","allow":"     :"},"on_chain":{"go":"     ","title":"      ","instructions1":"         , getalby.com   <0> </0>   ","instructions2":"    <0> </0>     "},"confirm_add_account":{"tor_info":"              :","content":"       ({{connector}}):","title":" "},"send_to_bitcoin_address":{"service_unavailable":"    ,       ","provider":{"label":"Swap provider"},"title":"   ","total_fee":{"label":""},"recipient":{"label":""},"view_on_explorer":"   ","time_estimate":"    10-30      ","network_fee":{"label":" "},"total":{"label":""},"service_fee":{"label":" "},"amount":{"label":" (sats)"}},"confirm_sign_pset":{"allow_sign":"           ","hide_details":" ","view_details":" ","title":"Sign","hide_raw_transaction":"raw transaction (Base64) ","view_raw_transaction":"raw transaction (Base64) ","inputs":"","outputs":"","amount":"{{amount}} {{ticker}}"},"lnurlredeem":{"title":"   ","errors":{"invalid_withdraw_request":" LNURL withdraw request","invalid_lnurl":" LNURL"},"actions":{"withdraw":""},"input":{"placeholder":"LNURL..","label":"LNURL- "}},"home":{"allowance_view":{"sats":"sats","budget_spent":"  ","total_spent":" ","total_payments":" ","permissions":""},"default_view":{"block_removed":"{{host}}        ","see_all":" ","no_transactions":"        ","is_blocked_hint":"   {{host}}   "},"actions":{"send_satoshis":"  ","enable_now":"  "}},"liquid_enable":{"request2":"      ","title":"Liquid  "},"liquid":{"allow":"     :","block_and_ignore":"   {{host}}   ","block_added":"  {{host}}  ,      ","title":"Liquid","allow_sign":"{{host}}      :"},"nostr_enable":{"title":"Nostr   "},"unlock":{"unlock_error":{"help":"                                 ","link":"       "},"unlock_password":"  ","help_contact":{"part1":"   ? ","part2":" "},"errors":{"invalid_password":" "},"unlock_to_continue":"     "},"webbtc_enable":{"request2":"  Webbtc    ","title":"WebBTC   "},"alby_enable":{"title":"   ","request2":"      "},"scan_qrcode":{"title":"       "}},"y0":{"password":"","confirm_password":"   ","success":"","error":"","accounts":"","discover":"","sats_one":"sat","sats_other":"sats","loading":"   ","amount":"","feedback":"","description":"","description_full":" ","success_message":"{{amount}}{{fiatAmount}} {{destination}}     ","response":"","message":"","help":"","actions":{"back":"","delete":"","edit":" ","next":"","open":"","cancel":" ","confirm":" ","continue":" ","connect":"","lock":"","unlock":"","send":"","save":"","receive":" ","receive_again":"    ","transactions":"-","close":" ","export":"","remove":"","copy":"","log_in":" ","remember":"       ","download":"","review":" ","hide":"","import":"","paste":"","more":"","copied_to_clipboard":"    ","copy_clipboard":"   ","copy_invoice":"  ","disconnect":"","paste_clipboard":"   "},"errors":{"connection_failed":" ","payment_failed":" "},"range":{"between":"{{min}}  {{max}}  ","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"enable":{"block_added":"{{host}}     ,      ","request1":"-      ","allow":"     :","insecure_domain_warn":"        ","block_and_ignore":"    {{host}}"},"connectors":{"nativelnd":"LND (over Tor)","commando":"Cammando","citadel":"Citadel","nativelndhub":"LNDHub (over Tor)","lnbits":"LNBits","nativelnbits":"LNbits(over Tor)","nativecitadel":"Citadel (over Tor)","lnd":"LND","lndhub":"LNDHub","eclair":"Eclair","galoy":"Galoy"},"optional":"","wallet":"Wallet","copied":"  !","apps":"","pasted":"!","balance":"","or":"","connected_sites":" ","website":""},"wx":{"allowance_menu":{"confirm_delete":"            ?","hint":"     ","new_budget":{"label":"-  ","link_label":"-      "},"enable_login":{"title":"Website login  ","subtitle":"              "},"edit_allowance":{"title":" ","screen_reader":" "}},"qrcode_scanner":{"title":"QR   ","actions":{"start_scanning":"  ","stop_scanning":"   "},"errors":{"allow_camera_access":"        "}},"transactions_table":{"fee":"","preimage":"Preimage","received":"","sent":" ","boostagram":{"sender":"","message":"","app":"App","podcast":"Podcast","action":"","totalAmount":" ","timestamp":"timestamp","episode":""},"open_location":"Website ","payment_hash":" ","date_time":" "},"budget_control":{"remember":{"label":"      ","description":"                           "},"budget":{"label":"Budget"}},"companion_download_info":{"heading":" TOR      ?","download":"Download","companion":{"title":"Companion App","description":"Lightweight app     TOR    "},"tor_native":{"title":"TOR (native)","description":"      TOR         "}},"toasts":{"connection_error":{"what_you_can_do":"    :","double_check":"      ","if_ssl_errors":"     ( ERR_CERT_AUTHORITY_INVALID), \\"\\"           ","visit_guides":"       "},"login_failed":{"password_reset":"   ?   "},"errors":{"invalid_credentials":"              "}},"account_menu":{"screen_reader":"Toggle Dropdown"},"publishers_table":{"payments":"","total":"","budget":"(budget)"},"badge":{"label":{"auth":"LOGIN","imported":"","budget":"(BUDGET)"}}},"mk":{"commando":{"bkpr-listbalances":"       ","checkmessage":"            ","connect":"        ","decode":"BOLT11/BOLT12/Rune    ","decodepay":"BOLT11      ","disconnect":" peer     ","feerates":"CLN        ","fundchannel":" -       ","getinfo":"node    ","getroute":"Lightning node       ","invoice":"    ","keysend":"    ","listforwards":"  HTLCs           ","listfunds":"     ","listinvoices":"     ","listnodes":"              ","listoffers":"         ","listpays":"       ","listpeers":"                ","listsendpays":"       ","listtransactions":"     -   ","multifundchannel":"  -        ","offer":"  ","pay":"BOLT11    ","sendpay":"   ","setchannel":"     /HTLCs  configure ","signmessage":"     "},"lnd":{"getinfo":"   ","listchannels":"      ","listinvoices":"     ","channelbalance":"         ","walletbalance":"       Output  ","openchannel":"   ","connectpeer":"Remote peer    ","disconnectpeer":"Remote peer   ","estimatefee":"   -      ","getchaninfo":"        ","getnetworkinfo":"         ","getnodeinfo":"      ","gettransactions":"    -    ","listpayments":"      ","listpeers":"       ","lookupinvoice":"  ","queryroutes":"    ","verifymessage":"    ","sendtoroute":"    ","decodepayreq":"   String   ","routermc":"    ","addinvoice":"  ","addholdinvoice":" HODL  ","settleinvoice":"     ","listunspent":"        utxos    ","listaddresses":" addresses  balance    ","newaddress":"new onchain address  ","nextaddr":"   unused address  "},"lnc":{"getinfo":"   ","listchannels":"      ","listinvoices":"     ","channelbalance":"         ","walletbalance":"       output  ","openchannel":"   ","connectpeer":"     ","disconnectpeer":"    ","estimatefee":"   -      ","getchaninfo":"        ","getnetworkinfo":"         ","getnodeinfo":"      ","gettransactions":"    -    ","listpayments":"      ","listpeers":"       ","lookupinvoice":"  ","queryroutes":"    ","verifymessage":"      ","sendtoroute":"    ","decodepayreq":"      ","routermc":"    ","addinvoice":"  ","addholdinvoice":"   ","settleinvoice":"    ","listunspent":"        utxos    ","nextaddr":"    onchian address  ","listaddresses":" onchain addresses      ","newaddress":"  onchain address  "}}}'),lt=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Scegli una password di sblocco:"},"confirm_password":{"label":"Conferma di averla digitata correttamente:"},"errors":{"enter_password":"Per favore inserisci una password.","confirm_password":"Si prega di confermare la password.","mismatched_password":"Le password non corrispondono."}},"test_connection":{"ready":"Fantastico, sei pronto per partire!","initializing":"Stiamo inizializzando il tuo account. Per favore attendi, questa operazione potrebbe impiegare alcuni minuti","connection_error":"Errore di connessione","review_connection_details":"Controlla i dettagli della tua connessione.","connection_taking_long":"Il tentativo di connessione richiede pi tempo del previsto... I tuoi dati sono corretti? Il tuo nodo  raggiungibile?","contact_support":"Se hai bisogno di aiuto, contatta support@getalby.com","actions":{"delete_edit_account":"Elimina l\'account invalido e modificalo di nuovo"}}},"choose_connector":{"description":"Connettiti al tuo wallet lightning esterno o al tuo nodo","lnd":{"title":"LND","page":{"title":"Connettiti al tuo nodo LND","description":"Sono necessari l\'URL del nodo e un macaroon con permessi di lettura e invio (ad esempio, admin.macaroon)"},"url":{"label":"Host e porta dell\'API REST","placeholder":"https://URL-del-tuo-nodo:8080"},"macaroon":{"label":"Macaroon (formato HEX)"},"drag_and_drop":"Trascina e rilascia il tuo macaroon qui o<0>sfoglia</0>","errors":{"connection_failed":"Connessione non riuscita. Le tue credenziali LND sono corrette?"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Connettiti a LNDHub","description":"Inserisci qui l\'URI delle credenziali LNDHub o scansiona il codice QR con la tua webcam."},"uri":{"label":"URI di esportazione LNDHub"},"errors":{"invalid_uri":"URI LNDHub non valido","connection_failed":"Connessione non riuscita. L\'URI LNDHub  corretto?"}},"lnbits":{"title":"LNbits","page":{"title":"Connetti a <0>LNbits</0>","instructions":"In LNbits, scegli il portafoglio che vuoi connettere, aprilo, clicca su API Info e copia la Admin Key. Incollala qui di seguito:"},"admin_key":{"label":"LNbits Admin Key","placeholder":"La tua admin key a 32 cifre"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Connessione non riuscita. L\'Admin Key e l\'URL sono corretti?"}},"eclair":{"title":"Eclair","page":{"title":"Connettiti a <0>Eclair</0>","instructions":"Hai bisogno della tua password e URL Eclair."},"password":{"label":"Password Eclair"},"url":{"label":"URL Eclair","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"Collega un nodo <0>Citadel</0>","instructions":"Attualmente non funziona se  abilitata la 2FA."},"password":{"label":"Password Citadel"},"url":{"label":"URL Citadel","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Collega un nodo <0>Umbrel</0>","instructions":"Nella dashboard di Umbrel vai su <0>Connect Wallet</0>. Seleziona <0>lndconnect REST</0> e copia il <0>lndconnect URL</0>. (In base al tuo setup puoi usare una connessione locale o una connessione via TOR)"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://tuonodo:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Collegati a <0>myNode</0>","instructions":"Nella homepage di myNode clicca sul tasto <0>Wallet</0> per il servizio <0>Lightning</0>.<1/> Ora clicca sul tasto <0>Pair Wallet</0> sotto il tab <0>Status</0>. Inserisci la tua password quando richiesta.<1/> Seleziona il menu a tendina e scegli l\'opzione per effettuare l\'accoppiamento. In base al tuo setup puoi utilizzare la connessione <0>Lightning (REST + Local IP)</0> o quella <0>Lightning (REST + Tor)</0>."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://tuonodo:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Collega il tuo nodo StartOS","instructions":"<0>Nota:</0> Al momento supportiamo solamente LND, aggiungeremo il supporto per c-lightning in futuro!<1/>Nella dashboard di StartOS clicca sul servizio <0>Lightning Network Daemon</0>.<1/>Seleziona il tab <0>Proprieta\'</0>.<1/>Adesso copia l\'<0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://tuonodo:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Collega il tuo nodo <0>RaspiBlitz</0>","instructions1":"Hai bisogno dell\'indirizzo onion, la porta e il macaroon con permessi di lettura e scrittura (e.g admin.macaroon) del tuo nodo..<1/><1/>Entra attraverso <0>SSH</0> nel tuo <0>RaspiBlitz</0>.<1/>Lancia il comando <0>sudo cat /mnt/hdd/tor/lndrest/hostname</0>.<1/>Copia e incolla l\'indirizzo <0>.onion</0> di seguito.<1/>Aggiungi la tua <0>porta</0> subito dopo l\'indirizzo onion, la porta di default e\' <0>:8080</0>.","instructions2":"Seleziona <0>CONNECT</0>.<1/>Seleziona <0>EXPORT</0>.<1/>Seleziona <0>HEX</0>.<1/>Copia l\'<0>adminMacaroon</0>.<1/>Incolla il macaroon di seguito."},"rest_api_host":{"label":"host REST API","placeholder":"indirizzo-onion-del-tuo-nodo:porta"}},"blink":{"title":"Blink Wallet","page":{"title":"Connetti il tuo <0>Blink Wallet</0>"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"Connetti a <0>Bitcoin Jungle Wallet</0>"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Dati di configurazione"},"errors":{"connection_failed":"Connessione fallita. L\'URL di connessione a BTCPay  corretto e accessibile?"}},"commando":{"port":{"label":"Porta"},"proxy":{"label":"Websocket proxy"},"rune":{"label":"Rune"},"privKey":{"label":"Chiave privata locale (autogenerata)"},"title":"Core Lightning","page":{"title":"Connettiti al tuo nodo Core Lightning","instructions":"Assicurati di avere la versione 0.12.0 o pi recente di Core Lightning, che il plugin commando sia in esecuzione e che il tuo nodo sia accessibile sulla rete Lightning. Crea una rune eseguendo \'lightning-cli commando-rune\'."},"host":{"label":"Host"},"pubkey":{"label":"Chiave pubblica"},"config":{"label":"Dati di configurazione","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Connessione fallita. Il tuo nodo Core Lightning  online e sta usando il plugin Commando?"}},"title":"Connetti il Wallet Lightning","lnc":{"pairing_phrase":{"label":"La tua frase di accoppiamento ","placeholder":"frase segreta di stack sats"},"title":"LND con LNC"}},"home":{"actions":{"send_satoshis":" Invia Satoshis ","enable_now":"Attiva ora"},"default_view":{"is_blocked_hint":"Alby  attualmente disabilitato su {{host}}","block_removed":"{{host}} abilitato. Si prega di ricaricare la pagina."}},"accounts":{"account_view":{"nostr":{"errors":{"failed_to_load":"Impossibile caricare la chiave Nostr.  una chiave Nostr valida?"},"title":"Nostr","private_key":{"title":"Gestisci la tua chiave","success":"Chiave privata criptata & salvata con successo.","successfully_removed":"Chiave privata rimossa con successo.","subtitle":"Incolla la tua chiave privata o generane una nuova. Assicurati di fare un backup della vostra chiave privata prima di generarne una nuova. <0>Per saperne di pi </0>","label":"Chiave Privata"},"actions":{"generate":"Genera una nuova chiave"},"hint":" un protocollo semplice e aperto che mira a creare social network resistenti alla censura. Nostr funziona con chiavi crittografiche. Per pubblicare qualcosa si firma con la propria chiave e la si invia a pi rel.  possibile utilizzare Alby per gestire la propria chiave Nostr. Molte applicazioni Nostr vi permetteranno poi di utilizzare semplicemente la chiave dall\'estensione Alby.","generate_keys":{"screen_reader":"Genera una nuova chiave Nostr per il tuo account","hint":"Puoi generare una chiave casuale o una chiave derivata dai dati dell\'account (utilizzando una frase canonica firmata). <0>Per saperne di pi </0>","actions":{"random_keys":"Genera una chiave casuale","derived_keys":"Deriva una chiave dall\'account"},"title":"Genera una nuova chiave Nostr"},"public_key":{"label":"Chiave Pubblica"}},"actions":{"export":"Esporta"},"export":{"your_ln_address":"Il Tuo Indirizzo Lightning:","waiting":"in attesa dei dati da LndHub...","export_uri":"URI delle credenziali di LNDHub","scan_qr":"Importa questo wallet su Zeus o BlueWallet scansionando il QRCode.","title":"Esporta Account","screen_reader":"Esporta i dettagli dell\'account"},"title2":"Modifica Account","name":{"title":"Nome","placeholder":"Nome Account"}}},"unlock":{"unlock_to_continue":"Sblocca per continuare","unlock_password":"La tua password di sblocco","help_contact":{"part1":"Hai bisogno di aiuto? Contatta","part2":"Supporto Alby"},"unlock_error":{"help":"I dati del tuo account sono criptati con la password di sblocco. Se hai dimenticato la password di sblocco, devi ripristinare e aggiungere di nuovo il tuo account Lightning.","link":"Reimposta ora e aggiungi un nuovo account"},"errors":{"invalid_password":"Password non valida"}},"settings":{"browser_notifications":{"title":"Notifiche del browser","subtitle":"Notifiche relative ai pagamenti e all\'autenticazione."},"website_enhancements":{"title":"Miglioramenti del sito web","subtitle":"Miglioramenti per le mance su Twitter, YouTube, ecc."},"lnurl_auth":{"title":"LNURL-Auth","hint":" un protocollo di autenticazione generico. Autentica l\'utente utilizzando le firme digitali. Il protocollo non richiede altre informazioni di identificazione come password, e-mail, nomi utente o simili. Con Alby  possibile utilizzare i propri account lightning per accedere in modo sicuro ai siti web. Per essere compatibili con altri portafogli abbiamo dovuto apportare alcune modifiche che si possono configurare qui. <0>Idealmente tutte queste opzioni dovrebbero essere spente (OFF).</0> Usatele solo se avete vecchi account.","legacy_lnurl_auth_202207":{"title":"Legacy LNURL-Auth","subtitle":"La generazione di chiavi per LNURL-auth  cambiata (Luglio 2022). Alby non era compatibile con altre implementazioni. Abbiamo apportate delle modifiche, ma ora vengono utilizzate chiavi di accesso diverse. Se prima si utilizzava LNURL-auth per il login, si pu ancora attivare il vecchio metodo. Questa opzione sar rimossa in futuro; assicurarati di passare al nuovo login."},"legacy_lnurl_auth":{"title":"Firma tradizione per LNDhub e LNbits","subtitle":"La firma dei messaggi e il login con gli account LNDhub (ad esempio BlueWallet) e LNbits sono stati modificati (Marzo 2022). Se avete effettuato l\'accesso con questi account, potete ancora attivare il vecchio metodo di firma. Questa opzione sar rimossa in futuro; assicurati di passare al nuovo metodo di login."}},"camera_access":{"title":"Accesso alla telecamera","subtitle":"Per la scansione di codici QR","allow":"Consenti l\'accesso alla fotocamera","granted":"Autorizzazione concessa"},"language":{"title":"Lingua","subtitle":"Le traduzioni non sono ancora state completate al 100%. <0>Aiutaci a tradurre Alby nella tua lingua!</0>"},"theme":{"title":"Tema","subtitle":"Usa Alby in modalit scura o chiara","options":{"dark":"Scuro","light":"Chiaro","system":"Sistema"}},"show_fiat":{"title":"Da Sats a Fiat","subtitle":"Convertire sempre nella valuta selezionata rispetto all\'exchange selezionato"},"currency":{"title":"Valuta","subtitle":"Mostra gli importi anche in questa valuta"},"exchange":{"title":"Origine dell\'Exchange","subtitle":"Fonte dei tassi di cambio bitcoin"},"personal_data":{"title":"Dati personali","description":"I beneficiari possono richiedere l\'invio di dati aggiuntivi insieme al pagamento. Questi dati non vengono condivisi con nessuno senza il tuo consenso che ti verr sempre richiesto prima che questi dati vengano inviati insieme ad un pagamento."},"name":{"title":"Nome","subtitle":"","placeholder":"Inserisci il tuo nome"},"email":{"title":"Email","subtitle":"","placeholder":"Inserisci il tuo indirizzo email"},"change_password":{"title":"Cambia password di sblocco","subtitle":"","screen_reader":"Cambia password di sblocco","choose_password":{"label":"Inserire una nuova password di sblocco:"},"confirm_password":{"label":"Conferma nuova password:"},"submit":{"label":"Modifica"},"errors":{"enter_password":"Inserisci una nuova password di sblocco.","confirm_password":"Confermare la password.","mismatched_password":"Le password non corrispondono."},"success":"La password  stata modificata con successo"}},"send":{"title":"Invia","input":{"label":"Destinatario","hint":"Fattura, indirizzo Lightning o LNURL"}},"lnurlpay":{"amount":{"label":"Importo"},"comment":{"label":"Commento"},"name":{"label":"Nome"},"email":{"label":"Email"},"success":"Successo, pagamento inviato!"},"lnurlauth":{"title":"Autenticazione","content_message":{"heading":"Vuoi accedere a"},"submit":"Accedi","success":"Accesso riuscito su {{name}}","errors":{"status":"Errore: lo stato di autenticazione non  ok"}},"lnurlchannel":{"title":"Richiesta canale","content_message":{"heading":"Richiedi un canale dal nodo"},"success":"Richiesta di canale inviata correttamente a {{name}}"},"lnurlwithdraw":{"title":"Ritiro","content_message":{"heading":"Importo"},"amount":{"label":"Importo"},"success":"Richiesta di prelievo di {{amount}} inviata con successo a {{sender}}"},"receive":{"title":"Ricevi","actions":{"create_invoice":"Crea fattura"},"amount":{"label":"Importo","placeholder":"Importo in Satoshi..."},"description":{"label":"Descrizione","placeholder":"Ad esempio, chi sta inviando questo pagamento?"},"success":"Pagamento ricevuto!","payment":{"waiting":"in attesa del pagamento...","status":"Controlla lo stato del pagamento"}},"publishers":{"publisher":{"allowance":{"title":"Margine","used_budget":"sats utilizzati"}},"title":"I tuoi Siti ","description":"Siti dove hai gi usato Alby","no_info":"Sembra che non hai ancora usato Alby in nessun sito.","discover":"Scopri i Siti"},"make_invoice":{"title":"Crea fattura","amount":{"label":"Importo (Satoshi)"},"memo":{"label":"Memo"},"errors":{"amount_too_small":"L\'importo  inferiore al minimo","amount_too_big":"L\'importo supera il massimo"}},"confirm_sign_message":{"title":"Firma","content":"Questo sito ti chiede di firmare:"},"confirm_keysend":{"title":"Approva il pagamento","success":"Pagamento inviato! Preimmagine: {{preimage}}","payment_summary":{"description":"Invia il pagamento a: {{destination}}"}},"keysend":{"title":"Invia","success":"Pagamento inviato! Preimmagine: {{preimage}}","receiver":{"label":"Invia pagamento a"},"amount":{"label":"Importo (Satoshi)"}},"confirm_payment":{"title":"Approva il pagamento","success":"Pagamento di {{amount}} andato a buon fine!","actions":{"pay_now":"Paga ora"}},"nostr":{"title":"Nostr","allow":"Consenti a questo sito di:","block_and_ignore":"Blocca e ignora {{host}}","block_added":"{{host}} aggiunto alla blocklist, si prega di ricaricare la pagina.","content":"Questo sito chiede di firmare:","allow_sign":"Consenti a {{host}} di firmare:"},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Password"},"confirm_password":{"label":"Conferma password"},"errors":{"enter_password":"Inserisci una password.","confirm_password":"Si prega di confermare la password.","mismatched_password":"Le password non corrispondono."}}}},"choose_path":{"alby":{"title":"Alby"},"other":{"title":"Altri Wallet","connect":"Connettiti"}},"confirm_request_permission":{"always_allow":"Ricorda la mia scelta e non chiederlo pi","title":"Approva Richiesta","allow":"Consentire l\'esecuzione di questo sito:"}},"y0":{"password":"Password","success":"Successo","error":"Errore","connected_sites":"","loading":"caricamento","amount":"Importo","optional":"Facoltativo","feedback":"Valutazione","copied":"Copiato!","description":"Descrizione","description_full":"Descrizione completa","message":"Messaggio","help":"Aiuto","actions":{"back":"Indietro","delete":"Elimina","edit":"Modifica","next":"Avanti","open":"Aprire","cancel":"Annulla","confirm":"Conferma","continue":"Continua","connect":"Connettiti","lock":"Blocca","unlock":"Sblocca","send":"Invia","save":"Salva","receive":"Ricevi","close":"Chiudi","export":"Esporta","remove":"Rimuovi","copy":"Copia","copy_invoice":"","log_in":"Log in","remember":"Ricorda la mia scelta e non chiederlo pi","receive_again":"Ricevi un altro pagamento"},"errors":{"connection_failed":"Connessione fallita","payment_failed":"Pagamento fallito"},"response":"Risposta","sats_one":"sat","sats_other":"sats","success_message":"{{amount}}{{fiatAmount}} inviati a {{destination}}","accounts":"Account","discover":"Scopri","confirm_password":"Conferma la Password"},"wx":{"allowance_menu":{"confirm_delete":"Sei sicuro di voler eliminare questo sito web?","hint":"Questo azzerer il budget corrente","new_budget":{"label":"Nuovo budget"},"enable_login":{"title":"Abilita l\'accesso al sito web","subtitle":"Accedi automaticamente senza conferma quando il sito web lo richiede."},"edit_allowance":{"title":"Modifica tolleranza","screen_reader":"Opzioni di tolleranza"}},"qrcode_scanner":{"title":"Scansiona il codice QR","actions":{"start_scanning":"Avvia la scansione","stop_scanning":"Interrompi la scansione"},"errors":{"allow_camera_access":"Si prega di consentire l\'accesso alla fotocamera nella schermata delle impostazioni."}},"transactions_table":{"fee":"Tassa","preimage":"Preimmagine","received":"Ricevuto","sent":"Inviato","boostagram":{"sender":"Mittente","message":"Messaggio","app":"App","podcast":"Podcast"},"open_location":"Apri il sito"},"budget_control":{"remember":{"label":"Imposta e ricorda un budget","description":" possibile impostare un saldo per il quale, fino ad esaurimento, possono non essere richieste conferme di pagamento."},"budget":{"label":"Budget"}},"toasts":{"connection_error":{"what_you_can_do":"Ecco cosa puoi fare:","double_check":"Ricontrolla i dettagli della tua connessione","if_ssl_errors":"e se ci sono errori SSL (ad esempio ERR_CERT_AUTHORITY_INVALID), clicca su \\"avanzato\\" e procedi all\'accettazione del certificato.","visit_guides":"Visita le nostre guide per ulteriore assistenza"},"login_failed":{"password_reset":"Hai dimenticato la password? Clicca qui"},"errors":{"invalid_credentials":"Password non valida. Controlla la password e l\'indirizzo e-mail e riprova."}},"account_menu":{"screen_reader":"Attiva/disattiva menu a tendina"},"publishers_table":{"payments":"pagamenti"},"badge":{"label":{"auth":"LOGIN"}}},"mk":{"commando":{"fundchannel":"Apri un canale di pagamento con un peer effettuando una transazione di invio fondi","decodepay":"Controlla e analizza una stringa bolt11","listpeers":"Elenca i nodi che sono connessi o hanno canali aperti con questo nodo","getroute":"Trova il percorso migliore per il pagamento a un nodo lightning","getinfo":"Ottieni il riepilogo del nodo","listforwards":"Elenca tutti gli htlc di cui si  tentato l\'inoltro","disconnect":"Chiudi una connessione esistente con un peer","feerates":"Restituisci le feerate che CLN utilizzer","invoice":"Crea l\'aspettativa di un pagamento","listfunds":"Elenca tutti i fondi disponibili","listinvoices":"Ottieni lo stato di tutte le fatture","listnodes":"Elenca i nodi di cui il nodo  venuto a conoscenza tramite i messaggi gossip","listsendpays":"Visualizza lo stato di tutti i comandi sendpay","listtransactions":"Elenca le transazioni tracciate nel wallet","keysend":"Invia un pagamento a un altro nodo","listoffers":"Elenca tutte le offerte o ottieni un\'offerta specifica","listpays":"Visualizza lo stato di tutti i comandi di pagamento","multifundchannel":"Apri canali di pagamento multipli con i nodi effettuando un\'unica transazione di invio fondi","offer":"Crea un\'offerta","pay":"Invia un pagamento a una fattura BOLT11","sendpay":"Inviare un pagamento attraverso un percorso","setchannel":"Configura le commissioni / il range di htlc richiesto per un canale","signmessage":"Crea una firma da questo nodo","connect":"Stabilisci una nuova connessione con un altro nodo","decode":"Decodifica una stringa bolt11/bolt12/rune","bkpr-listbalances":"Elenco di tutti i saldi correnti e storici dell\'account","checkmessage":"Verifica che la firma sia stata generata da un determinato nodo"},"lnd":{"lookupinvoice":"Visualizza i dettagli della fattura","decodepayreq":"Decodifica una stringa di richiesta di pagamento","routermc":"Leggi lo stato di controllo interno della missione","estimatefee":"Stima il tasso di commissione e le commissioni totali per una transazione","queryroutes":"Interroga per una possibile rotta","connectpeer":"Stabilisci una connessione ad un peer remoto","disconnectpeer":"Disconnetti da un peer remoto","listpeers":"Otteni un elenco di tutti i peer attualmente attivi","verifymessage":"Verifica una firma di un messaggio","addinvoice":"Crea nuove fatture","openchannel":"Apri un nuovo canale","getnodeinfo":"Ottieni le informazioni del canale per un nodo","sendtoroute":"Effettua un pagamento attraverso la rotta specificata","walletbalance":"Ottieni il totale degli output non spesi del wallet","getchaninfo":"Ottieni l\'annuncio di rete per il dato canale","getnetworkinfo":"Ottieni le statistiche di base riguardo il tracciato del canale conosciuto","gettransactions":"Ottieni un elenco di tutte le transazioni rilevanti per il wallet","listpayments":"Ottieni un elenco di tutti i pagamenti in uscita","getinfo":"Ottieni le informazioni del nodo","listchannels":"Ottieni una descrizione di tutti i canali aperti","listinvoices":"Ottieni un elenco di tutte le fatture","channelbalance":"Ottieni un report sui fondi totali in tutti i canali aperti"},"lnc":{"listchannels":"Otteni una descrizione di tutti i canali aperti","getinfo":"Ottieni le informazioni sul nodo","listinvoices":"Ottieni un elenco di tutte le fatture","queryroutes":"Interroga per una possibile rotta","listpeers":"Otteni un elenco di tutti i peer attualmente attivi","routermc":"Leggi lo stato di controllo interno della missione","connectpeer":"Stabilisci una connessione ad un peer remoto","disconnectpeer":"Disconnetti da un peer remoto","getchaninfo":"Ottieni l\'annuncio di rete per il dato canale","channelbalance":"Ottieni un report sui fondi totali in tutti i canali aperti","walletbalance":"Ottieni il totale degli output non spesi del wallet","openchannel":"Apri un nuovo canale","estimatefee":"Stima il tasso di commissione e le commissioni totali per una transazione","lookupinvoice":"Visualizza i dettagli della fattura","verifymessage":"Verifica una firma di un messaggio","sendtoroute":"Effettua un pagamento attraverso la rotta specificata","getnodeinfo":"Ottieni le informazioni del canale per un nodo","gettransactions":"Ottieni un elenco di tutte le transazioni rilevanti per il wallet","listpayments":"Ottieni un elenco di tutti i pagamenti in uscita","decodepayreq":"Decodifica una stringa di richiesta di pagamento","getnetworkinfo":"Ottieni le statistiche di base riguardo il tracciato del canale conosciuto","addinvoice":"Crea nuove ricevute di pagamento"}}}'),ft=JSON.parse('{"xk":{"welcome":{"set_password":{"confirm_password":{"label":"        :"},"choose_password":{"label":" "},"errors":{"enter_password":"  .","confirm_password":"     - .","mismatched_password":"   ."}},"test_connection":{"ready":",     !","initializing":"    .   ,       ...","connection_error":"   ","review_connection_details":"     .","contact_support":"     support@getalby.com   ","connection_taking_long":"        ...     ?     ?   .","actions":{"delete_edit_account":"      "}}},"choose_path":{"alby":{"title":"Alby"},"other":{"title":" ","connect":" "}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":""},"confirm_password":{"label":"   "},"errors":{"enter_password":"   .","confirm_password":"    .","mismatched_password":"  ."}}}},"choose_connector":{"title":"Connect Lightning Wallet","description":"       ","lnd":{"title":"LND","page":{"title":" LND   ","description":"   URL         (. .)"},"url":{"label":"REST API host and port","placeholder":"https://your-node-url:8080"},"macaroon":{"label":"Macaroon (HEX format)"},"drag_and_drop":" Macaroon     <0> browse</0>","errors":{"connection_failed":"  .  LND    ?"}},"lnc":{"title":"LND with LNC","pairing_phrase":{"label":"   ","placeholder":"   "}},"lndhub_go":{"title":"LNDHub","page":{"title":"LNDHub   ","description":"          QR   ."},"uri":{"label":"LNDHub Export URI"},"errors":{"invalid_uri":" LNDHub URI","connection_failed":"  .  LNDHub URI   ?"}},"lnbits":{"title":"LNbits","page":{"title":"<0>LNbits</0>   ","instructions":"In LNbits, choose the wallet you want to connect, open it, click on API Info and copy the Admin Key. Paste it below:"},"admin_key":{"label":"LNbits Admin Key","placeholder":"Your 32 digit admin key"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Connection failed. Do you have the correct URL and Admin Key?"}},"eclair":{"title":"Eclair","page":{"title":"<0>Eclair</0>   ","instructions":"You need your Eclair URL and password."},"password":{"label":"Eclair Password"},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"<0>Citadel</0> node   ","instructions":"This currently doesn\'t work if 2FA is enabled."},"password":{"label":"Citadel Password"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"<0>Umbrel</0> node   ","instructions":"In your Umbrel dashboard go to <0>Connect Wallet</0>. Select <0>lndconnect REST</0> and copy the <0>lndconnect URL</0>. (Depending on your setup you can either use the local connection or the Tor connection.)"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"mynode":{"title":"myNode","page":{"title":"<0>myNode</0>   ","instructions":"On your myNode homepage click on the <0>Wallet</0> button for your <0>lightning</0> service.<1/> Now click on the <0>Pair Wallet</0> button under the <0>Status</0> tab. Enter your password when prompted.<1/> Select the dropdown menu and choose a pairing option. Depending on your setup you can either use the <0>lightning (REST + Local IP)</0> connection or the <0>lightning (REST + Tor)</0> connection."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"startos":{"title":"StartOS","page":{"title":"your <0>StartOS</0> node   ","instructions":"<0>Note:</0> Currently we only support LND but we will be adding c-lightning support in the future!<1/>On your StartOS dashboard click on the <0>Lightning Network Daemon</0> service.<1/>Select the <0>Properties</0> tab.<1/>Now copy the <0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"your <0>RaspiBlitz</0> node   ","instructions1":"   :<1/> 1. <0>SSH</0>  <0>Raspiblitz</0><1/>2.  <0>     </0> <1/><0/>3. <0>Alby     </0><1/>4 .     <0></0> <1/><1/>  <0>REST API </0>  <0>.onion</0>         .","instructions2":"  (admin) <0>macaroon</0>  ."},"rest_api_host":{"label":"REST API host","placeholder":"your-node-onion-address:port"}},"blink":{"title":"Blink Wallet","page":{"title":"<0>Blink Wallet   </0>"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"<0>Bitcoin Jungle Wallet   </0>"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Config data"},"errors":{"connection_failed":"  . BTCPay  URL     ?"}},"commando":{"title":"Core Lightning","page":{"title":" Core Lightning node   ","instructions":"Make sure you have Core Lightning version 0.12.0 or newer, the commando plugin is running and your node is accessible over the lightning network. Create a rune by running \'lightning-cli commando-rune\'."},"host":{"label":"Host"},"pubkey":{"label":"Public key"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Websocket proxy"},"privKey":{"label":"Local private key (autogenerated)"},"config":{"label":"Config data","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"  .   Lightning node     commando plugin  ?"}}},"home":{"actions":{"send_satoshis":"  Satoshis  ","enable_now":"  "},"default_view":{"is_blocked_hint":"Alby  {{host}}   ","block_removed":"{{host}}  .    ."}},"accounts":{"account_view":{"title2":"  ","name":{"title":"","placeholder":" "},"export":{"title":" ","screen_reader":"  ","waiting":"   ...","your_ln_address":" Lightning Address:","export_uri":"LNDHub Credentials URI","scan_qr":"     Zeus  BlueWallet  ."},"nostr":{"title":"Nostr","hint":"        -     .     .             .   Nostr    Alby  .   Nostr   Alby exntension   .","private_key":{"title":"Manage your key","subtitle":"Paste your private key or generate a new one. <0>Learn more </0>","success":"       .","failed_to_remove":"     ,       .","successfully_removed":" key  .","label":"Private Key"},"public_key":{"label":"Public Key"},"generate_keys":{"title":" Nostr   ","screen_reader":"   Nostr   ","hint":"             (    ). <0>   </0>"},"actions":{"generate":"   "},"errors":{"failed_to_load":"Nostr    .   Nostr key  ?"}}}},"unlock":{"unlock_to_continue":"   ","unlock_password":"  ","help_contact":{"part1":"  ?  ","part2":"Alby "},"unlock_error":{"help":"        .          Lightning      .","link":"      "},"errors":{"invalid_password":" "}},"settings":{"browser_notifications":{"title":" ","subtitle":"    ."},"website_enhancements":{"title":" ","subtitle":"Twitter, YouTube, .   ."},"lnurl_auth":{"title":"LNURL-Auth","hint":"    .       .  , ,         . Alby            .               . <0>:     .</0>        .","legacy_lnurl_auth_202207":{"title":"Legacy LNURL-Auth","subtitle":"The key generation for LNURL-auth has changed (July 2022). Alby was not compatible with other implementations. This was changed, but now different login keys are used. If you used LNURL-auth to login before you can still enable the old method. This option will be removed later, make sure to switch to the new login."},"legacy_lnurl_auth":{"title":"Legacy signing for LNDhub and LNbits","subtitle":"Message signing and login with LNDhub (e.g. BlueWallet) and LNbits accounts has been changed (March 2022). If you logged in with these accounts you can still enable the old signing method. This option will be removed later, make sure to switch to the new login."}},"camera_access":{"title":"Camera access","subtitle":"QR   ","allow":"   ","granted":" "},"language":{"title":"","subtitle":" 100%    . <0>  Alby      !</0>"},"theme":{"title":"Theme","subtitle":"Use Alby in dark or light mode","options":{"dark":"","light":"","system":""}},"show_fiat":{"title":"Sats to Fiat","subtitle":"      "},"currency":{"title":"","subtitle":"    "},"exchange":{"title":" ","subtitle":"   "},"personal_data":{"title":" ","description":"       .         ,         ."},"name":{"title":"","subtitle":"","placeholder":"   "},"email":{"title":"","subtitle":"","placeholder":"    "},"change_password":{"title":"  ","subtitle":"","screen_reader":"  ","choose_password":{"label":"   :"},"confirm_password":{"label":"   :"},"submit":{"label":""},"errors":{"enter_password":"    .","confirm_password":"    .","mismatched_password":"  ."},"success":"  "}},"send":{"title":"Send","input":{"label":"","hint":", Lightning address  LNURL"}},"lnurlpay":{"amount":{"label":""},"comment":{"label":""},"name":{"label":""},"email":{"label":""},"success":"  !"},"lnurlauth":{"title":"Authentication","content_message":{"heading":"     "},"submit":" ","success":"{{name}}    ","errors":{"status":":    "}},"lnurlchannel":{"title":" ","content_message":{"heading":"   "},"success":"{{name}}     "},"lnurlwithdraw":{"title":" ","content_message":{"heading":""},"amount":{"label":""},"success":"{{sender}}  {{amount}}     "},"receive":{"title":" ","actions":{"create_invoice":"  "},"amount":{"label":"","placeholder":" ..."},"description":{"label":"","placeholder":".     ?"},"success":" !","payment":{"waiting":"   ...","status":"  "}},"publishers":{"title":"  ","description":"    Alby  ","no_info":"       Alby  .","discover":" ","publisher":{"allowance":{"title":"","used_budget":"sats "}}},"make_invoice":{"title":"  ","amount":{"label":" (Satoshi)"},"memo":{"label":"Memo"},"errors":{"amount_too_small":"    ","amount_too_big":"  "}},"confirm_sign_message":{"title":"Sign","content":"     :"},"confirm_keysend":{"title":"  ","success":" ! Preimage: {{preimage}}","payment_summary":{"description":" : {{destination}}"}},"keysend":{"title":"","success":" ! preimage: {{preimage}}","amount":{"label":" (Satoshi)"}},"confirm_payment":{"title":"  ","success":"{{amount}}   !"},"confirm_request_permission":{"title":"  ","allow":"     :","always_allow":"       "},"nostr":{"title":"Nostr","allow":"   :","content":"     :","allow_sign":"{{host}}     :","view_details":" ","hide_details":" ","block_and_ignore":"{{host}}      ","block_added":" {{}} ,    ."},"transactions":{"title":""}},"y0":{"password":"","confirm_password":"  ","success":"","accounts":"","discover":"","connected_sites":"","sats_one":"sat","sats_other":"sats","loading":"  ","amount":"","optional":"","feedback":"","copied":" !","description":"","description_full":" ","success_message":"{{amount}}{{fiatAmount}} {{destination}}  ","response":"","message":"","help":"","actions":{"back":"","delete":"","edit":" ","next":"","open":"","confirm":" ","continue":" ","connect":"","lock":"","unlock":"","send":"","save":" ","receive":" ","receive_again":"   ","close":" ","export":"","remove":" ","copy":"","copy_invoice":"","log_in":" ","remember":"       "},"errors":{"connection_failed":" ","payment_failed":" "},"range":{"between":"{{min}}  {{max}} ","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"}},"wx":{"allowance_menu":{"confirm_delete":"        ?","hint":"    ","new_budget":{"label":" "},"enable_login":{"title":"   ","subtitle":"          ."},"edit_allowance":{"title":"  ","screen_reader":" "}},"qrcode_scanner":{"title":"QR   ","actions":{"start_scanning":"  ","stop_scanning":" "},"errors":{"allow_camera_access":"      ."}},"transactions_table":{"fee":"","preimage":"","received":"","sent":"","open_location":" "},"budget_control":{"remember":{"label":"     ","description":"             ."},"budget":{"label":""}},"companion_download_info":{"heading":" TOR    ?","download":" ","companion":{"title":" ","description":"  TOR    ."},"tor_native":{"title":"TOR (native)","description":"   TOR      ."}},"toasts":{"connection_error":{"what_you_can_do":"      :","double_check":"    ","if_ssl_errors":" SSL   (. ERR_CERT_AUTHORITY_INVALID), \\"\\"        .","visit_guides":"     "},"login_failed":{"password_reset":"  ?   "},"errors":{"invalid_credentials":" .            ."}},"account_menu":{"screen_reader":" "}},"mk":{"commando":{"bkpr-listbalances":"      ","checkmessage":"        ","connect":"     ","decode":"bolt11/bolt12/rune   ","decodepay":"bolt11 string    ","disconnect":"     ","feerates":"CLN   fee rates  ","fundchannel":"       ","getinfo":"  ","getroute":"Lightning      ","invoice":"   ","keysend":"   ","listforwards":"     htlcs   ","listfunds":"    ","listinvoices":"   ","listnodes":"      ","listoffers":"       ","listpays":"    ","listpeers":"         ","listsendpays":"     ","listtransactions":"     ","multifundchannel":"        ","offer":"  ","pay":"BOLT11   ","sendpay":"  ","setchannel":"    / htlc   ","signmessage":"    "},"lnd":{"getinfo":"  ","listchannels":"    ","listinvoices":"   ","channelbalance":"      ","walletbalance":"      ","openchannel":"  ","connectpeer":"    ","disconnectpeer":"   ","getchaninfo":"    ","getnetworkinfo":"     ","getnodeinfo":"   ","gettransactions":"     ","listpayments":"    ","listpeers":"      ","lookupinvoice":"  ","queryroutes":"  ","verifymessage":"   ","sendtoroute":"   ","decodepayreq":"    ","routermc":"    ","addinvoice":"   ","addholdinvoice":" HODL   ","settleinvoice":"   "},"lnc":{"getchaninfo":"    ","getnetworkinfo":"     ","getnodeinfo":"   ","gettransactions":"     ","listpayments":"    ","listpeers":"      ","lookupinvoice":"  ","queryroutes":"  ","verifymessage":"   ","sendtoroute":"   ","decodepayreq":"Payment request string  ","routermc":"    ","addinvoice":"   ","addholdinvoice":" HODL   ","settleinvoice":"   "}}}'),ht=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Wybierz haso blokady:"},"confirm_password":{"label":"Potwierdmy, e wpisano poprawnie:"},"errors":{"enter_password":"Prosz wprowadzi haso.","confirm_password":"Prosz potwierdzi haso.","mismatched_password":"Hasa si nie zgadzaj."}},"test_connection":{"ready":"wietnie, wszystko gotowe!","initializing":"Tworzenie Twojego konta. Poczekaj prosz, to moe chwil zaj...","connection_error":"Bd poczenia","review_connection_details":"Sprawd prosz dane do poczenia.","connection_taking_long":"Prba poczenia trwa duej ni oczekiwano... Czy dane do poczenia s poprawne? Czy Twj wze jest osigalny?","contact_support":"Jeli potrzebujesz pomocy, skontaktuj si z support@getalby.com","actions":{"delete_edit_account":"Skasuj niepoprawne konto i wyedytuj ponownie"}},"pin_extension":{"explanation":"1. Kliknij <0/> w prawym grnym rogu przegldarki <1/>2. Znajd Alby i kliknij, aby przypi je do paska narzdzi<1/>3. Gotowe. Aby uzyska dostp do Alby, kliknij ikon <2/>","title":"Przypnij swoje rozszerzenie Alby","description":"Prawie gotowe. Aby wygodnie korzysta z Alby, pamitaj o przypiciu rozszerzenia do paska narzdzi przegldarki:","next_btn":"Zzzzacznij przygod {{icon}} z Alby!"}},"choose_path":{"alby":{"title":"Konto Alby","connect":"Pocz si z Alby","description":"Zarejestruj si lub uyj istniejcego konta Alby, aby zacz z patnociami lightning w mgnieniu oka."},"other":{"title":"Inne portfele","connect":"Pocz","description":"Pocz si z istniejcym portfelem lub wzem Lightning i wybierz spord rnych konektorw. Doskonae rozwizanie dla penej elastycznoci. Zarzdzaj wasnym wzem."}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Haso"},"confirm_password":{"label":"Potwierd haso"},"errors":{"enter_password":"Prosz wprowadzi haso.","confirm_password":"Prosz potwierdzi haso.","mismatched_password":"Hasa si nie zgadzaj."}}}},"choose_connector":{"title":"Podcz portfel Lightning","description":"Podcz swj zewntrzny portfel lightning lub wze","lnd":{"title":"LND","page":{"title":"Podcz si do swojego wza LND","description":"Potrzebujesz adresu URL Twojego wza i tzw. macaroon z uprawnieniami do odczytu i wysyania (np. admin.macaroon)"},"url":{"label":"Serwer i port RESTowego API","placeholder":"https://url-twojego-wezla:8080"},"macaroon":{"label":"Macaroon (format heksadecymalny)"},"drag_and_drop":"Przecignij i upu Twj macaroon tutaj lub <0>znajd plik</0>","errors":{"connection_failed":"Poczenie nie powiodo si. Czy Twoje dane uwierzytelniajce s poprawne?"}},"lnc":{"title":"Lightning Terminal (LNC)","pairing_phrase":{"label":"Twoja fraza parujca ","placeholder":"tajna fraza stosu satsw"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Podcz si do LNDHub","description":"Wprowad tutaj swj identyfikator URI LNDHub lub zeskanuj kod QR za pomoc kamery internetowej."},"uri":{"label":"Adres LNDHub"},"errors":{"invalid_uri":"Niepoprawny LNDHub URI","connection_failed":"Poczenie nieudane. Czy URI LNDHub jest prawidowy?"}},"lnbits":{"title":"LNbits","page":{"title":"Podcz do <0>LNbits</0>","instructions":"W LNbits, wybierz portfel, do ktrego chcesz si podczy, otwrz go, kliknij na API Info i skopiuj klucz administratora. Wklej go poniej:"},"admin_key":{"label":"Klucz administratora LNbits","placeholder":"Twj 32-cyfrowy klucz administratora"},"url":{"label":"Adres URL LNbits"},"errors":{"connection_failed":"Poczenie nieudane. Czy masz poprawny adres URL i klucz administratora?"}},"eclair":{"title":"Eclair","page":{"title":"Podcz do <0>Eclair</0>","instructions":"Potrzebujesz adresu URL i hasa Twojego Eclair."},"password":{"label":"Haso do Eclair"},"url":{"label":"Adres URL do Eclair","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"Podcz do wza <0>Citadel</0>","instructions":"Ta funkcja nie dziaa jeli 2FA jest wczone."},"password":{"label":"Haso Citadel"},"url":{"label":"Adres URL Citadel","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Podcz do wza <0>Umbrel</0>","instructions":"Na stronie gwnej Umbrel id do <0>Connect Wallet</0>. Wybierz <0>ldconnect REST</0> i skopiuj <0>lndconnect URL</0>. (W zalenoci od ustawie moesz wybra poaczenie lokalne albo przez Tor.)"},"rest_url":{"label":"Adres lndconnect REST","placeholder":"lndconnect://twojwezel:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Podcz do <0>myNode</0>","instructions":"Na stronie gwnej myNode kliknij na przycisk <0>Wallet</0> swojej usugi <0>lightning</0>.<1/>Teraz kliknij na przycisk <0>Pair Wallet</0> w sekcji <0>Status</0>. Wprowad haso.<1/> Wybierz z rozwijalnej listy opcj parowania. W zalenoci od ustawie moesz uy poczenia <0>lightning (REST + Local IP)</0> albo <0>lightning (REST + Tor)</0>."},"rest_url":{"label":"Adres lndconnect REST","placeholder":"lndconnect://twojwezel:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Pocz ze swoim <0>serwerem StartOS</0>","instructions":"<0>Uwaga:</0>Obecnie wspieramy tylko LND, ale zamierzamy doda obsug c-lightning w przyszoci!<1/>Na pulpicie twojego StartOS kliknij na usug <0>Lightning Network Daemon</0>.<1/>Wybierz zakadk <0>Properties</0>.<1/>Nastpnie skopiuj <0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://twojnode:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Podcz do wza <0>RaspiBlitz</0>","instructions1":"Wykonaj te kroki:<1/> 1. Uywajc <0>SSH</0> zaloguj si do swojego <0>Raspiblitz</0><1/>2. Wybierz z listy <0>Connect Apps & Show Credentials</0><1/><0/>3. Wybierz <0>Connect Alby to this node</0><1/>4. Nacinij <0>OK</0> aby wywietli dane uwierzytelniajce<1/><1/>Skopiuj i wklej adres <0>REST API host</0> lub <0>.onion</0> aby poczy si przez Tor do pola tekstowego poniej.","instructions2":"Skopiuj (admin) <0>macaroon</0> w pole poniej."},"rest_api_host":{"label":"Adres serwera REST API","placeholder":"adres-onion-twojego-wezla:port"}},"blink":{"title":"Portfel Blink","page":{"title":"Podcz do <0>Blink Wallet</0>"},"token":{"label":"Wprowad swj klucz API"}},"bitcoin_jungle":{"title":"Portfel Bitcoin Jungle","page":{"title":"Podcz do <0>Portfela Bitcoin Jungle</0>"},"token":{"label":"Wprowad swj token dostpu"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Date konfiguracyjne"},"errors":{"connection_failed":"Poczenie nieudane. Czy adres BTCPay jest poprawny i osigalny?"}},"commando":{"title":"Core Lightning","page":{"title":"Podcz do Twojego wza Core Lightning","instructions":"Upewnij si, e masz Core Lightning w wersji 0.12.0 lub nowszej, e plugin commando dziaa, a Twj wze jest dostpny w sieci lightning. Stwrz run komend \'lightning-cli commando-rune\'."},"host":{"label":"Serwer"},"pubkey":{"label":"Klucz publiczny"},"rune":{"label":"Runa"},"port":{"label":"Port"},"proxy":{"label":"Proxy websocket"},"privKey":{"label":"Lokalny klucz prywatny (generowany automatycznie)"},"config":{"label":"Konfiguracja","placeholder":"config=https://twoj-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Poczenie nieudane. Czy Twj wze Core Lightning jest online i korzysta z wtyczki commando?"}},"umbrel_lightning_node":{"title":"Wze Lightning"},"galoy":{"sms_code":{"label":"Wprowad kod weryfikacyjny SMS"},"actions":{"login":"Zaloguj si"},"phone_number":{"label":"Wprowad swj numer telefon"},"errors":{"setup_failed":"Konfiguracja nie powioda si","invalid_token":"Autoryzacja nie powioda si. Sprawd swj klucz API i sprbuj ponownie.","missing_token":"Brak tokenu dostpu, logowanie nieudane."}}},"home":{"actions":{"send_satoshis":" Wylij Satoshi ","enable_now":"Wcz teraz"},"allowance_view":{"sats":"sats","budget_spent":"Wykorzystany budet","permissions":"Uprawnienia"},"default_view":{"is_blocked_hint":"Alby jest obecnie wyczone na {{host}}","block_removed":"Wczono {{host}}. Odwie stron.","see_all":"Zobacz wszystko","no_transactions":"Jeszcze nie ma transakcji na tym koncie."}},"accounts":{"account_view":{"title1":"Ustawienia konta","title2":"Konto","name":{"title":"Wywietlana nazwa","placeholder":"Nazwa wywietlana konta"},"export":{"title":"Podcz swj portfel mobilny","screen_reader":"Eksportuj dane konta","waiting":"oczekiwanie na dane LndHub...","your_ln_address":"Twj adres Lightning:","export_uri":"Adres LNDHub","scan_qr":"Zaimportuj ten portfel do Zeusa lub BlueWallet skanujc kod QR.","description":"Pozwala na poczenie i korzystanie z tego konta w mobilnych portfelach takich jak <0>Blue Wallet</0> i <1>Zeus</1>."},"nostr":{"title":"Nostr","hint":"jest prostym i otwartym protokoem majcym na celu stworzenie sieci spoecznociowych opornych na cenzur. Nostr dziaa przy uyciu kluczy kryptograficznych. Aby co opublikowa podpisujesz to swoim kluczem i wysyasz do kilku przekanikw. Moesz uy Alby aby zarzdza swoim kluczem Nostr. Nastpnie, rne aplikacje umoliwi Ci uywanie klucze z rozszerzenia Alby.","private_key":{"title":"Zarzdzaj swoim kluczem","subtitle":"Wklej swj klucz prywatny lub wygeneruj nowy. <0>Dowiedz si wicej </o>","success":"Klucz prywatny zosta zaszyfrowany i zapisany.","successfully_removed":"Klucz prywatny usunity.","label":"Klucz prywatny","failed_to_remove":"Wprowadzona nazwa konta si nie zgadza, zosta odtworzony Twj stary klucz prywatny."},"public_key":{"label":"Klucz publiczny"},"generate_keys":{"title":"Wygeneruj nowy klucz Nostr","screen_reader":"Wygeneruj nowy klucz Nostr ze swojego konta","hint":"Moesz wygenerowa losowy klucz lub wyprowadzi go z danych tego konta (uywajc podpisanej frazy kanonicznej). <0>Dowiedz si wicej </0>","actions":{"random_keys":"Wygeneruj losowy klucz","derived_keys":"Wyprowad klucz z danych konta"}},"actions":{"generate":"Generuj nowy klucz"},"errors":{"failed_to_load":"Nie udao si wadowa klucza Nostr. Czy to poprawny klucz?"},"settings":{"label":"Ustawienia Nostr","title":"Ustawienia Nostr"}},"actions":{"export":"Eksport"},"mnemonic":{"saved":"Klucz Gwny zosta zaszyfrowany i zapisany pomylnie.","title":" Zarzdzanie kluczami","backup":{"protocols":{"nostr":"Nostr"}},"import":{"description":"Uyj frazy odzyskiwania, aby zaimportowa swj Klucz Gwny do Alby.","button":"Zaimportuj Klucz Gwny","title":"Zaimportuj swj Klucz Gwny"},"lnurl":{"use_mnemonic":"Uyj Klucza Gwnego do logowania si do aplikacji zasilanych przez Lightning (LNURL Auth)","title":"Zaloguj si za pomoc Lightning"}},"no_mnemonic_hint":" Nie masz jeszcze Klucza Gwnego. <0>Kliknij tutaj</0></div>, aby utworzy swj Klucz Gwny i odblokowa te ustawienia.","network":{"subtitle":"Wybierz sie, aby wygenerowa adresy i odczyta transakcje bitcoinowe oraz w sieci Liquid","options":{"testnet":"Testnet (sie testowa)","bitcoin":"Mainnet (sie gwna)","regtest":"Regtest (sie testw regresji)"},"title":"Sie"}}},"unlock":{"unlock_to_continue":"Odblokuj aby kontynuowa","unlock_password":"Twoje haso blokady","help_contact":{"part1":"Potrzebujesz pomocy? Skontaktuj si ze","part2":"zespoem wsparcia Alby"},"unlock_error":{"help":"Dane Twojego konta s zaszyfrowane Twoim hasem blokady. Jeli naprawd zapomnisz haso, to musisz zrobi reset i doda swoje konto Lightning ponownie.","link":"Zrb reset i dodaj nowe konto"},"errors":{"invalid_password":"Nieprawidowe haso"}},"settings":{"browser_notifications":{"title":"Powiadomienia w przegldarce","subtitle":"Powiadomienia zwizane z patnociami i uwierzytelnianiem."},"website_enhancements":{"title":"Rozszerzenia na stronach","subtitle":"Rozszerzenia napiwkw na Twitterze, YouTube, etc."},"lnurl_auth":{"title":"LNURL-Auth","hint":"jest generycznym protokoem uwierzytelniania. Powiadcza tosamo uytkownika za pomoc podpisw cyfrowych. Protok nie wyamga adnych danych identyfikujcych takich jak hasa, emaile, nazwy uytkownika, itp. Za pomoc Alby moesz uywa swoich kont Lightning aby bezpiecznie logowa si na stronach internetowych. Aby zapewni kompatybilno z innymi portfelami musielimy zrobi kilka modyfikacji, ktre moesz skonfigurowa tutaj. <0>Najlepiej gdy te opcje s WYCZONE.</0> Uywaj ich tylko gdy masz stare konta.","legacy_lnurl_auth_202207":{"title":"Stary (Legacy) LNURL-Auth","subtitle":"Generowanie kluczy dla LNURL-auth zmienio si (w lipcu 2022 r.) Alby nie byo kompatybilne z innymi implementacjami. To si zmienio, ale teraz uywane s inne klucze logowania. Jeli uywano wczeniej LNURL-auth do logowania, moesz nadal uywa starej metody. Ta opcja pniej bdzie usunita, wic pamitaj by przej na nowy login."},"legacy_lnurl_auth":{"title":"Stare podpisywanie dla LNDhub i LNbits","subtitle":"Podpisywanie wiadomoci i logowanie z kontami LNDhub (np. BlueWallet) i LNbits zmienio si (w marcu 2022 r.) Jeli logowano si z tymi kontami moesz nadal wczy stary sposb podpisywania. Ta opcja pniej bdzie usunita, wic pamitaj by przej na nowy login."}},"camera_access":{"title":"Dostp do kamery","subtitle":"W celu skanowania kodw QR","allow":"Zezwl na dostp do kamery","granted":"Uprawnienie przyznane"},"language":{"title":"Jzyk","subtitle":"Tumaczenia nie s jeszcze gotowe w 100%. <0>Pom nam tumaczy Alby na Twj jzyk!</0>"},"theme":{"title":"Motyw graficzny","subtitle":"Uywaj Alby w trybie ciemnym lub jasnym","options":{"dark":"Ciemny","light":"Jasny","system":"Tak jak system"}},"show_fiat":{"title":"Sats na Fiat","subtitle":"Zawsze konwertuj kwot na wybran walut wg kursu z wybranego rda"},"currency":{"title":"Waluta","subtitle":"Poka kwoty dodatkowo w tej walucie"},"exchange":{"title":"rdo kursu wymiany","subtitle":"rdo kursw wymiany bitcoina"},"personal_data":{"title":"Dane osobowe","description":"Odbiorcy patnoci mog poprosi o dodatkowe dane, ktre zostan przesane wraz z patnoci. Te dane nie s udostpniane nikomu bez Twojej zgody - zawsze bdziesz uprzedzany przed przesaniem dodatkowych informacji wraz z patnoci."},"name":{"title":"Imi","subtitle":"","placeholder":"Wprowad swoje imi"},"email":{"title":"Email","subtitle":"","placeholder":"Wprowad swj email"},"change_password":{"title":"Zmie haso blokady","subtitle":"","screen_reader":"Zmie haso blokady","choose_password":{"label":"Wprowad nowe haso blokady:"},"confirm_password":{"label":"Potwierd nowe haso blokady:"},"submit":{"label":"Zmie"},"errors":{"enter_password":"Wprowad nowe haso blokady.","confirm_password":"Potwierd swoje haso.","mismatched_password":"Hasa si nie zgadzaj."},"success":"Haso zmienione pomylnie"}},"send":{"title":"Wylij","input":{"label":"Odbiorca","hint":"Faktura, adres Lightning lub LNURL"}},"lnurlpay":{"amount":{"label":"Kwota"},"comment":{"label":"Komentarz"},"name":{"label":"Imi"},"email":{"label":"Email"},"success":"Sukces! Patno wysana!"},"lnurlauth":{"title":"Uwierzytelnianie","content_message":{"heading":"Czy chcesz si zalogowa do"},"submit":"Zaloguj","success":"Logowanie do {{name}} pomylne","errors":{"status":"Bd: Status autentykacji nie jest ok"}},"lnurlchannel":{"title":"Proba o kana","content_message":{"heading":"Popro o kana od wza"},"success":"Proba o kana pomylnie wysana do {{name}}"},"lnurlwithdraw":{"title":"Wypata","content_message":{"heading":"Kwota"},"amount":{"label":"Kwota"},"success":"Proba wypaty w kwocie {{amount}} pomylnie wysana do {{sender}}"},"receive":{"title":"Przyjmij","actions":{"create_invoice":"Stwrz faktur"},"amount":{"label":"Kwota","placeholder":"Kwota w Satoshi..."},"description":{"label":"Opis","placeholder":"np. kto wysya t patno?"},"success":"Patno otrzymana!","payment":{"waiting":"oczekiwanie na patno...","status":"Sprawd status patnoci"}},"publishers":{"title":"Twoje strony ","description":"Strony, na ktrych uyto wczeniej Alby","no_info":"Wyglda na to, e nie uyto Alby jeszcze na adnej stronie.","discover":"Odkryj strony","publisher":{"allowance":{"title":"Limity","used_budget":"uyto sats"}}},"make_invoice":{"title":"Stwrz faktur","amount":{"label":"Kwota (Satoshi)"},"memo":{"label":"Notatka"},"errors":{"amount_too_small":"Kwota jest mniejsza ni minimalna","amount_too_big":"Kwota przewysza maksymaln"}},"confirm_sign_message":{"title":"Podpisz","content":"Ta strona prosi Ci aby podpisywa:"},"confirm_keysend":{"title":"Zatwierd patno","success":"Patno wysana! Obraz pierwotny (preimage): {{preimage}}","payment_summary":{"description":"Wylij patno do: {{destination}}"}},"keysend":{"title":"Wylij","success":"Patno wysana! Preimage: {{preimage}}","receiver":{"label":"Wylij patno do"},"amount":{"label":"Kwota (Satoshi)"}},"confirm_payment":{"title":"Zatwierd patno","success":"Patno w kwocie {{amount}} pomylna!","actions":{"pay_now":"Zapa teraz"}},"confirm_request_permission":{"title":"Zatwierd prob","allow":"Pozwl tej stronie na wykonanie:","always_allow":"Pamitaj mj wybr i wicej nie pytaj"},"nostr":{"title":"Nostr","allow":"Pozwl tej stronie na:","content":"Ta strona prosi Ci aby podpisywa:","allow_sign":"Pozwl {{host}} na podpisywanie:","block_and_ignore":"Zablokuj i ignoruj {{host}}","block_added":"Dodano {{host}} do listy zablokowanych, odwie stron.","hide_details":"Ukryj szczegy","view_details":"Poka szczegy"},"transactions":{"title":"Transakcje"},"distributions":{"description":"Wybierz z ktr aplikacj {{name}} chcesz si poczy","title":"Podcz do {{name}}","raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"btcpay":{"name":"BTCPay"},"startos":{"name":"StartOS"},"umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"}}},"y0":{"password":"Haso","confirm_password":"Potwierd haso","success":"Sukces","error":"Bd","accounts":"Konta","discover":"Odkrywaj","connected_sites":"","sats_one":"sat","sats_other":"sats","loading":"adowanie","amount":"Kwota","optional":"Opcjonalne","feedback":"Opinia","copied":"Skopiowano!","description":"Opis","description_full":"Peny opis","success_message":"{{amount}}{{fiatAmount}} wysano do {{destination}}","response":"Odpowied","message":"Wiadomo","help":"Pomoc","actions":{"back":"Wstecz","delete":"Skasuj","edit":"Edytuj","next":"Dalej","open":"Otwrz","cancel":"Anuluj","confirm":"Potwierd","continue":"Kontynuuj","connect":"Pocz","lock":"Zablokuj","unlock":"Odblokuj","send":"Wylij","save":"Zapisz","receive":"Przyjmij","receive_again":"Przyjmij kolejn patno","close":"Zamknij","export":"Eksport","remove":"Usu","copy":"Kopiuj","copy_invoice":"","log_in":"Zaloguj","remember":"Pamitaj mj wybr i wicej nie pytaj","transactions":"Transakcje"},"errors":{"connection_failed":"Poaczenie nieudane","payment_failed":"Patno nie powioda si"},"range":{"between":"pomidzy {{min}} a {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"}},"wx":{"allowance_menu":{"confirm_delete":"Na pewno usun t stron?","hint":"W ten sposb usuniesz obecny budet","new_budget":{"label":"Nowy budet"},"enable_login":{"title":"Wcz logowanie na stronie","subtitle":"Automatycznie loguj si bez potwierdzenia gdy strona o to poprosi."},"edit_allowance":{"title":"Edytuj preferencje","screen_reader":"Opcje limitu"}},"qrcode_scanner":{"title":"Skanuj kod QR","actions":{"start_scanning":"Zacznij skanowanie","stop_scanning":"Zakocz skanowanie"},"errors":{"allow_camera_access":"Prosz pozwoli na dostp do kamery w ekranie ustawie."}},"transactions_table":{"fee":"Opata","preimage":"Obraz pierwotny (preimage)","received":"Otrzymano","sent":"Wysano","boostagram":{"sender":"Nadawca","message":"Wiadomo","app":"Aplikacja","podcast":"Podcast"},"open_location":"Otwrz stron"},"budget_control":{"remember":{"label":"Zapamitaj i ustaw budet","description":"Moesz ustawi limit, do ktrego nie bdzie wymagane potwierdzenie patnoci, a do wyczerpania si rodkw."},"budget":{"label":"Budet"}},"toasts":{"connection_error":{"what_you_can_do":"Oto co moesz zrobi:","double_check":"Sprawd szczegy swojego poczenia","if_ssl_errors":"a jeli s bdy SSL (np. ERR_CERT_AUTHORITY_INVALID), kliknij \\"zaawansowane\\" i zaakceptuj certyfikat.","visit_guides":"Aby uzyska wicej pomocy zobacz nasze przewodniki"},"login_failed":{"password_reset":"Nie pamitasz hasa? Kliknij tutaj"},"errors":{"invalid_credentials":"Haso niepoprawne. Sprawd swoje haso i adres email i sprbuj ponownie."}},"account_menu":{"screen_reader":"Przecznik rozwijany"},"publishers_table":{"payments":"patnoci"},"badge":{"label":{"auth":"LOGOWANIE"}},"companion_download_info":{"heading":"Jak chcesz si poczy do sieci TOR?","companion":{"description":"Lekka aplikacja, ktra czy Twoj przegldark z sieci TOR.","title":"Aplikacja towarzyszca"},"download":"Pobierz","tor_native":{"title":"TOR (natywny)","description":"Wybierz t opcj jeli Twoja przegldarka ju jest podczona do sieci TOR."}}},"mk":{"commando":{"bkpr-listbalances":"Listowanie wszystkich biecych i historycznych sald konta.","checkmessage":"Weryfikowanie, ze podpis zosta zoony przez dany wze.","connect":"Ustanowienie nowego poczenia z innym wzem.","decode":"Dekodowane cig bolt11/bolt12/runy.","decodepay":"Sprawdzanie i przetwarzanie cigu bolt11.","disconnect":"Zamykanie biecego poczenie z peerem.","feerates":"Zwracanie stawek opat jakich CLN bdzie uywa.","fundchannel":"Otwieranie kanau patnoci z peerem poprzez dokonywanie transakcji fundujcej.","getinfo":"Pobieranie podsumowania o wle.","getroute":"Odnajdowanie najlepszej trasy patnoci do wza lightning.","invoice":"Tworzenie oczekiwania patnoci.","keysend":"Wysania patnoci do innego wza.","listforwards":"Listowania wszystkich HTLC, ktre prbowano przekaza.","listfunds":"Listowania wszystkich dostpnych rodkw.","listinvoices":"Pobierania statusu wszystkich faktur.","listnodes":"Listowania wzw, o ktrych dany wze dowiedzia si za pomoc komunikatw gossip.","listoffers":"Listowania wszystkich ofert lub pobierania konkretnej oferty.","listpays":"Pobierania statusu wszystkich polece patnoci.","listpeers":"Listowania wzw, ktre s poczone lub maj otwarte kanay z tym wzem.","listsendpays":"Pobierania statusu wszystkich polece sendpay.","listtransactions":"Listowania transakcji ledzonych w portfelu.","multifundchannel":"Otwierania wielu kanaw patnoci z wzami poprzez dokonywania pojedynczej transakcji fundujcej.","offer":"Tworzenie oferty.","pay":"Wysyanie patnoci na faktur BOLT11.","sendpay":"Wysyanie patnoci poprzez tras.","setchannel":"Konfigurowanie opat / zakresw HTLC ogaszanych dla kanau.","signmessage":"Tworzenie podpisu z tego wza."},"lnd":{"getinfo":"Pobieranie informacji o wle.","listchannels":"Pobieranie opisw wszystkich otwartych kanaw.","listinvoices":"Pobieranie listy wszystkich faktur.","channelbalance":"Pobieranie raportu o rodkach we wszystkich otwartych kanaach.","walletbalance":"Pobieranie cznej wartoci niewydanych wyj portfela.","openchannel":"Otwieranie nowego kanau.","connectpeer":"Ustanawianie poczenia ze zdalnym peerem.","disconnectpeer":"Rozczania si ze zdalnym peerem.","estimatefee":"Szacowanie stawki opaty oraz opat cakowitych transakcji.","getchaninfo":"Uzyskiwanie ogosze sieci dla danego kanau.","getnetworkinfo":"Pobieranie podstawowych statystyk o grafie znanych kanaw.","getnodeinfo":"Pobieranie informacji o kanaach wza.","gettransactions":"Pobieranie listy wszystkich transakcji dotyczcych portfela.","listpayments":"Pobieranie listy wszystkich wychodzcych patnoci.","listpeers":"Pobieranie listy wszystkich aktywnych peerw.","lookupinvoice":"Uzyskiwanie szczegowych informacji o fakturach.","queryroutes":"Zapytanie o moliw tras.","verifymessage":"Weryfikowanie podpisu dla wiadomoci.","sendtoroute":"Dokonywanie patnoci poprzez podan tras.","decodepayreq":"Dekodowanie cigu dania patnoci.","routermc":"Odczytanie wewntrznego stanu mission control.","addinvoice":"Tworzenie nowych faktur.","addholdinvoice":"Tworzenie nowych faktur typu HODL.","settleinvoice":"Rozliczenie przyjtej faktury."},"lnc":{"getinfo":"Pobieranie informacji o wle.","listchannels":"Pobieranie opisw wszystkich otwartych kanaw.","listinvoices":"Pobieranie listy wszystkich faktur.","channelbalance":"Pobieranie raportu o rodkach we wszystkich otwartych kanaach.","walletbalance":"Pobieranie cznej wartoci niewydanych wyj portfela.","openchannel":"Otwieranie nowego kanau.","connectpeer":"Ustanawianie poczenia ze zdalnym peerem.","disconnectpeer":"Rozczania si ze zdalnym peerem.","estimatefee":"Szacowanie stawki opaty oraz opat cakowitych transakcji.","getchaninfo":"Uzyskiwanie ogosze sieci dla danego kanau.","getnetworkinfo":"Pobieranie podstawowych statystyk o grafie znanych kanaw.","getnodeinfo":"Pobieranie informacji o kanaach wza.","gettransactions":"Pobieranie listy wszystkich transakcji dotyczcych portfela.","listpayments":"Pobieranie listy wszystkich wychodzcych patnoci.","listpeers":"Pobieranie listy wszystkich aktywnych peerw.","lookupinvoice":"Uzyskiwanie szczegowych informacji o fakturach","queryroutes":"Zapytanie o moliw tras","verifymessage":"Weryfikowanie podpisu dla wiadomoci","sendtoroute":"Dokonywanie patnoci poprzez podan tras","decodepayreq":"Dekodowanie cigu dania patnoci","routermc":"Odczytanie wewntrznego stanu mission control","addinvoice":"Tworzenie nowych faktur","addholdinvoice":"Tworzenie nowych faktur typu HODL","settleinvoice":"Rozliczenie przyjtej faktury"}}}'),dt=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Escolha uma senha de desbloqueio:"},"confirm_password":{"label":"Confirme se voc digitou corretamente:"},"errors":{"enter_password":"Insira uma senha.","confirm_password":"Confirme sua senha.","mismatched_password":"As senhas no correspondem."},"description1":"Defina uma senha para desbloquear a extenso Alby neste navegador","description2":"A senha de desbloqueio no pode ser recuperada, mas pode ser alterada. ","title":"Definir senha de desbloqueio da extenso"},"test_connection":{"ready":"Perfeito, tudo configurado!","initializing":"Iniciando sua conta. Aguarde, pode demorar um pouco...","connection_error":"Erro de conexo","review_connection_details":"Revise os detalhes da conexo.","connection_taking_long":"A tentativa de conexo est demorando mais do que o esperado... Os dados esto corretos? O servidor est acessvel?","contact_support":"Se precisar de ajuda, entre em contato com support@getalby.com","actions":{"delete_edit_account":"Remover conta invlida e editar novamente"}},"pin_extension":{"title":"Fixar extenso Alby","description":"Quase l. Para facilitar seu acesso  Alby, lembre-se de fixar a extenso Alby na barra de ferramentas do navegador:","explanation":"1. Clique em <0/> no canto superior direito do seu navegador<1/>2. Localize a Alby e clique no cone de fixao para fix-lo na barra de ferramentas do navegador<1/>3.  isso. Agora  s clicar no cone da Alby <2/>","next_btn":"Comece a usar a Alby {{icon}}"}},"choose_connector":{"description":"Escolha uma carteira ou servidor disponvel abaixo","lnd":{"title":"LND","page":{"title":"Conecte-se no servidor LND","description":"Voc precisa da URL do servidor e um macaroon com permisso de envio e leitura (ex. admin.macaroon)"},"url":{"label":"REST API host e porta","placeholder":"https://seu-servidor-url:8080"},"macaroon":{"label":"Macaroon (formato HEX)"},"drag_and_drop":"Arraste e solte o macaroon aqui ou clique em <0>procurar</0>","errors":{"connection_failed":"Falha na conexo. As credenciais LND esto corretas?"}},"lnbits":{"title":"LNbits","page":{"title":"Conecte-se na <0>LNbits</0>","instructions":"Na LNbits, escolha a carteira que voc deseja conectar, abra ela, clica em API Info a e copie a Chave Admin e cole abaixo:"},"admin_key":{"label":"Chave Admin LNbits","placeholder":"Sua chave admin de 32 dgitos"},"url":{"label":"URL LNbits"},"errors":{"connection_failed":"Falha na conexo. A URL e a chave Admin esto corretas?"}},"eclair":{"title":"Eclair","page":{"title":"Conecte-se no servidor <0>Eclair</0>","instructions":"Voc precisa da URL e senha da Eclair."},"url":{"label":"URL Eclair","placeholder":"http://localhost:8080"},"password":{"label":"Senha Eclair"}},"citadel":{"title":"Citadel","page":{"title":"Conecte-se no servidor <0>Citadel</0>","instructions":"No funciona se o 2FA estiver ativado."},"password":{"label":"Senha Citadel"},"url":{"label":"URL Citadel","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Conecte-se no servidor <0>Umbrel</0>","instructions":"1. In your Lightning Node dashboard go to <0>Connect wallet</0><1/>2. Select <0>REST (Tor)</0> or <0>REST (Local Network)</0> mode<1/>3. Copy the <0>lndconnect URL</0> and paste it below"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://seuservidor:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Conecte-se no servidor <0>myNode</0>","instructions":"No myNode clique em <0>Wallet</0> boto para seu servio <0>lightning</0>.<1/> Agora clique em <0>Pair Wallet</0> boto abaixo da tab <0>Status</0>. Insira sua senha quando solicitada.<1/> Selecione o menu suspenso e escolha uma opo de emparelhamento. Dependendo de sua configurao voc pode escolher <0>Conexo lightning (REST + Local IP)</0> ou conexo <0>lightning (REST + Tor)</0>."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://seuservidor:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Conecte-se no seu servidor <0>StartOS</0>","instructions":"<0>Note:</0> Atualmente somente a LND  suportada mas ns adicionaremos suporte para a c-lightning no futuro!<1/>No seu StartOS clique em service <0>Lightning Network Daemon</0>.<1/>Selecione a tab <0>Properties</0>.<1/>Agora copie o <0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://seuservidor:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Conecte-se seu servidor <0>RaspiBlitz</0>","instructions2":"Copie o (admin) <0>macaroon</0> no campo abaixo.","instructions1":"Siga esses passos<1/> 1. <0>SSH</0> na <0>Raspiblitz</0><1/>2. Selecione <0>Conectar apps & Mostrar credenciais</0> da lista<1/><0/>3. Escolher <0>Conectar Alby neste servidor</0><1/>4. Pressione <0>OK</0> para exibir as credenciais de conexo<1/><1/>Copie e cole o <0>REST API host</0> ou o <0>.onion</0> endereo para conectar -se atravs do TOR na entrada abaixo."},"rest_api_host":{"label":"REST API host","placeholder":"seu-endereo-servidor-onion:porta"}},"blink":{"title":"Carteira Blink","page":{"title":"Conecte-se na <0>Carteira Blink</0>"},"token":{"label":"Insira a chave API","info":"Para conectar sua carteira, voc precisa gerar uma chave API em <0>Blink Dashboard (dashboard.blink.sv)</0>:<br>- Acesse com e-mail ou nmero de telefone, caso voc j possua uma conta Blink<br>- Se voc ainda no tem conta, pode criar uma nova fazendo login com um nmero de telefone<br>- na aba API, crie uma nova chave<br>- d um nome e escolha a opo ler e escrever<br>- deixe o padro sem expirao ou escolha um perodo longo para evitar a necessidade de reconectar sua carteira periodicamente<br>- copie a chave (starting with blink_ ) e cole-a na caixa de texto abaixo.<br>"}},"bitcoin_jungle":{"title":"Carteira Bitcoin Jungle","page":{"title":"Conecte-se na <0>Carteira Bitcoin Jungle</0>"},"token":{"label":"Insira o token de acesso"}},"btcpay":{"title":"Servidor BTCPay","config":{"label":"Dados config"},"errors":{"connection_failed":"Falha na conexo. A URL de conexo do servidor BTCPay est correta e acessvel?"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Conecte-se na LNDHub","description":"Insira sua credencial URI LNDHub aqui ou leia o cdigo QR com sua webcam."},"uri":{"label":"Exportar URI LNDHub"},"errors":{"invalid_uri":"URI LNDHub invlida","connection_failed":"Falha na conexo. A URI LNDHub est correta?"}},"commando":{"page":{"title":"Conecte-se no seu servidor Core Lightning","instructions":"Certifique-se de conectar em um servidor Core Lightning que esteja na verso 0.12.0 ou mais recente, o plugin commando instalado e rodando e o servidor acessvel na rede relmpago. Crie um rune executando o comando \'lightning-cli commando-rune\'."},"title":"Core Lightning","pubkey":{"label":"Chave pblica"},"rune":{"label":"Rune"},"port":{"label":"Porta"},"privKey":{"label":"Chave privada local (Gerada automaticamente)"},"config":{"label":"Dados config","placeholder":"config=https://seu-btc-pay.org/lnd-config/212121/lnd.config"},"proxy":{"label":"Websocket proxy"},"host":{"label":"Host"},"errors":{"connection_failed":"Falha na conexo. O servidor Core Lightning est online e usando o plugin comando?"}},"title":"Conectar Carteira Bitcoin","lnc":{"title":"Lightning Terminal (LNC)","pairing_phrase":{"label":"Frase de pareamento "}},"galoy":{"sms_code":{"label":"Insira o cdigo de verificao SMS"},"actions":{"login":"Login"},"phone_number":{"label":"Insira seu nmero de telefone"},"errors":{"setup_failed":"Falha na configurao","invalid_token":"Falha na autorizao. Verifique sua chave API e tente novamente."}},"umbrel_lightning_node":{"title":"Servidor Relmpago"},"voltage":{"title":"Voltage"}},"home":{"actions":{"send_satoshis":" Enviar Satoshis ","enable_now":"Ativar"},"allowance_view":{"sats":"sats","budget_spent":"Limite de gastos","total_spent":"Total gasto","total_payments":"Pagamentos realizados","permissions":"Permisses"},"default_view":{"is_blocked_hint":"A Alby est desativada em {{host}}","block_removed":"{{host}} ativado. Por favor, recarregue o site.","see_all":"Mostrar tudo","no_transactions":"Sem transaes nesta conta ainda.","actions":{"get_started":{"title":"Saiba mais sobre a extenso Alby","description":"Novo na Alby? Confira nossos tutoriais, vdeos e explicaes"},"receive_bitcoin":{"title":"Deposite bitcoin","description":"Receba satoshis usando um endereo relmpago, fatura relmpago ou endereo bitcoin"},"setup_keys":{"title":"Configure suas chaves","description":"Faa o backup da sua chave mestra ou importe uma conta Nostr"}}}},"accounts":{"account_view":{"export":{"title":"Conectar sua carteira de celular","your_ln_address":"Seu endereo relmpago:","screen_reader":"Exportar detalhes da conta","waiting":"aguardando dados LndHub...","export_uri":"Credenciais URI LNDHub","scan_qr":"Leia o cdigo QR para importar esta carteira na Zeus ou BlueWallet.","description":"Permite conectar e usar esta conta em carteiras de celular como por ex a <0>Blue Wallet</0> e a <1>Zeus</1>."},"nostr":{"title":"Nostr","private_key":{"title":"Gerenciar sua chave privada Nostr","successfully_removed":"Chave privada Nostr removida com sucesso.","label":"Chave privada Nostr","subtitle":"Cole sua chave privada Nostr ou gere uma nova. <0>Saiba mais </0>","success":"Chave privada Nostr criptografada e salva com sucesso.","failed_to_remove":"O nome da conta inserido no est correto, sua chave privada Nostr antiga foi restaurada.","warning":"Por favor, insira o nome da conta para confirmar a excluso de sua chave privada nostr:\\n\\n{{ name }}"},"public_key":{"label":"Chave pblica Nostr"},"hint":" um protocolo simples e aberto que visa criar redes sociais resistentes  censura. Os perfis na rede Nostr so chaves criptogrficas. Para publicar algo, voc assina com sua chave e a informao  enviada para servidores. Na Alby voc pode usar e gerenciar seu perfil em diferentes aplicaes que suportam esse recurso.","generate_keys":{"title":"Gerar uma nova chave Nostr","screen_reader":"Gere uma nova chave Nostr para sua conta","actions":{"random_keys":"Gerar uma chave aleatria","derived_keys":"Gerar uma chave a partir da conta"},"hint":"Voc pode gerar uma chave aleatria ou gerar uma nova a partir desta conta. <0>Saiba mais </0>"},"actions":{"generate":"Gerar uma nova chave"},"errors":{"failed_to_load":"Falha ao carregar a chave Nostr. Esta  uma chave Nostr vlida?"},"settings":{"label":"Configuraes Nostr","title":"Configuraes Nostr","derive":"Gerar chave Nostr a partir de sua chave mestra","can_restore":" Chave Nostr gerada a partir de sua chave mestra","description":"Voc pode gerar chaves Nostr a partir de sua chave mestra ou importar sua chave privada existente colando-a no campo \\"Chave privada Nostr\\".","no_secret_key":" Voc ainda no tem uma chave mestra. <0>Clique aqui</0></div> para gerar sua chave mestra e suas chaves Nostr.","imported_key_warning":" No momento, voc est usando uma chave Nostr importada ou gerada aleatoriamente. Sua chave privada Nostr no pode ser restaurada por sua frase de recuperao, ento lembre-se de fazer o backup de sua chave privada Nostr separadamente.","remove":"Remover esta chave"},"setup":{"title":"Configure suas chaves Nostr","new":{"label":"Criar uma nova conta Nostr","description":"Gere uma chave mestra com um par de novas chaves Nostr."},"description":"Escolha se voc deseja criar uma nova conta Nostr (um par de chaves pblicas e privadas) ou importar uma existente.","description2":"Toda conta Nostr criada na Alby vem com uma <0>Frase de recuperao</0>  um conjunto de 12 palavras que sempre permite que voc recupere o acesso s suas chaves privadas Nostr."}},"remove":{"error":"O nome da conta inserido no corresponde.","confirm":"Por favor, insira o nome da conta para confirmar a excluso:\\n\\n{{ name }}\\n\\n  Por favor, insira o nome da conta para confirmar a excluso. Todas as chaves associadas (Chave mestra, Nostr, etc) sero excludas se voc continuar. Certifique-se de ter feito backup das chaves, no h outra maneira de restaur-las.","title":"Desconectar esta carteira","subtitle":"Remove todos os limites de gastos, dados de pagamento e chaves associadas  esta carteira."},"actions":{"export":"Exportar","remove_secretkey":"Remover chave mestra","disconnect_wallet":"Desconectar carteira"},"name":{"title":"Nome","placeholder":"Nome da conta"},"title2":"Conta","mnemonic":{"title":" Gerenciamento de chaves","saved":"Chave mestra criptografada e salva com sucesso.","generate":{"title":"Gere sua chave mestra","button":"Gerar chave mestra","description":"A chave mestra permite que voc interaja com diferentes protocolos como: Nostr, rede principal do Bitcoin ou LNURL-Auth."},"backup":{"save":"Salvar chave mestra","button":"Frase de recuperao","protocols":{"nostr":"Nostr"},"warning":" No se esquea de fazer backup de sua frase de recuperao! No fazer o backup pode resultar na perda permanente do acesso  sua chave mestra, identidade Nostr ou ativos que voc gerencia com esta chave.","description":"Anote a frase de recuperao para poder restaurar sua chave mestra em um novo dispositivo ou caso perca o acesso  sua conta.","title":"Backup de sua chave mestra"},"import":{"title":"Importar sua chave mestra","description":"Use a frase de recuperao para importar sua chave mestra na Alby.","button":"Importar chave mestra"},"existing_nostr_key_notice":" Esta conta j possui uma chave privada nostr, logo no ser gerada uma nova a partir desta chave mestra. Voc pode gerenciar sua chave Nostr nas configuraes de sua conta.","lnurl":{"use_mnemonic":"Use a chave mestra para acessar aplicativos com tecnologia (LNURL Auth)","title":"Login relmpago"},"new":{"title":"Configurar chave mestra","items":{"usage":"Voc pode importar e usar a mesma chave mestra em <0>diferentes carteiras conectadas na extenso Alby</0>","keys":"A chave mestra permite interagir com diferentes protocolos como <0>Nostr</0>, <0>Liquid</0> ou a <0>camada base do Bitcoin</0>","nostr_key":"Voc pode substituir as chaves Nostr geradas pela chave mestra por chaves Nostr que voc j possua"},"secure":{"title":"Proteja sua chave mestra","description":"Saiba o que  uma chave mestra e cuide das 12 palavras da frase de recuperao"},"nostr":"Importe uma conta Nostr","import":{"title":"Voc j possui uma chave mestra?","description":"Insira sua frase de recuperao para importar a chave mestra para esta carteira"}},"inputs":{"title":"Frase de recuperao"},"description":{"recovery_phrase":"A frase de recuperao  um conjunto de 12 palavras necessrias para <0>recuperar a sua chave mestra</0>","warning":"<0>no permite recuperar esta carteira ou os fundos nela contidos,</0>Ela recupera apenas o acesso aos protocolos mencionados","secure_recovery_phrase":"Certifique-se de anot-la em algum local seguro e privado"},"confirm":"Fiz o backup da frase de recuperao em um local privado e seguro.","error_confirm":"Confirme que voc fez o backup da frase de recuperao."},"remove_secretkey":{"title":"Remover chave mestra","success":"Chave mestra removida com sucesso.","subtitle":"Remove a chave mestra desta conta.","confirm":"Por favor, insira o nome da conta para confirmar a excluso de sua chave mestra:\\n\\n{{ name }}"},"network":{"title":"Rede","options":{"bitcoin":"Rede principal","testnet":"Rede de testes","regtest":"Regtest"},"subtitle":"Escolha a rede para gerar endereos e decodificar transaes bitcoin e liquid"},"no_mnemonic_hint":" Voc ainda no tem uma chave mestra. <0>Clique aqui</0></div> para gerar sua chave mestra e desbloquear essas configuraes.","title1":"Configuraes da carteira"},"actions":{"connect_a_wallet":"Conecte uma carteira"},"title":"Minhas carteiras"},"unlock":{"unlock_to_continue":"Desbloqueie para continuar","unlock_password":"Sua senha de desbloqueio","help_contact":{"part1":"Precisa de ajuda?","part2":"Suporte Alby"},"unlock_error":{"help":"Os dados da sua conta so criptografados com sua senha de desbloqueio. Se voc realmente esqueceu sua senha de desbloqueio, ser necessrio redefinir e adicionar sua conta novamente.","link":"Redefinir e adicionar nova conta"},"errors":{"invalid_password":"Senha incorreta"}},"settings":{"website_enhancements":{"title":"Pagamentos em redes sociais","subtitle":"Reconhece automaticamente endereos relmpago em perfis do Twitter, Youtube, etc, facilitando o envio de pagamentos."},"lnurl_auth":{"title":"LNURL-Auth","hint":" um protocolo de autenticao. Ele autentica o usurio usando assinaturas digitais. O protocolo no requer nenhuma outra informao de identificao, como senhas, e-mails, nomes de usurio... Com a Alby voc pode usar suas contas bitcoin para logar em sites com segurana. Para ser compatvel com outras carteiras, tivemos que fazer algumas alteraes que voc pode configurar aqui. Por padro essas opes esto DESLIGADAS. Use-as apenas se voc tiver contas antigas.","legacy_lnurl_auth_202207":{"title":"LNURL-Auth antigo","subtitle":"A gerao de chave para a LNURL-auth mudou em (julho de 2022). A Alby no era compatvel com outras implementaes. Isso foi corrigido, mas agora uma nova chave est sendo usada como padro. Se voc usou a LNURL-auth para logar em sites antes de julho de 2022, ainda poder fazer login habilitando o mtodo antigo. Esta opo ser removida posteriormente, certifique-se de alterar suas contas nos sites para usar o novo login."},"legacy_lnurl_auth":{"title":"Mtodo antigo de autenticao para LNDhub e LNbits","subtitle":"A assinatura de mensagens e o login com as contas LNDhub (por exemplo, BlueWallet) e LNbits foram alteradas em (maro de 2022). Se voc fez login com essas contas, ainda poder ativar o mtodo de assinatura antigo. Esta opo ser removida posteriormente, certifique-se de alterar suas contas nos sites para usar o novo login."}},"camera_access":{"title":"Acesso  cmera","subtitle":"Acesso para ler cdigos QR","allow":"Permitir acesso  cmera","granted":"Permisso concedida"},"language":{"title":"Idioma","subtitle":"As tradues ainda no esto 100% concludas. <0>Nos ajude a traduzir a Alby para o seu idioma!</0>"},"theme":{"title":"Tema","subtitle":"Use a Alby no modo escuro ou claro","options":{"dark":"Escuro","light":"Claro","system":"Sistema"}},"show_fiat":{"title":"Sats para Fiat","subtitle":"Exibe na Alby os valores em Sats e em uma moeda adicional de sua escolha"},"currency":{"title":"Moeda","subtitle":"Escolha a moeda adicional para exibir os valores na Alby"},"exchange":{"title":"Servio provedor de cotaes","subtitle":"Escolha o servio que fornecer as cotaes do bitcoin exibidas na Alby"},"personal_data":{"title":"Dados pessoais","description":"Alguns servios podem solicitar dados adicionais no pagamento. Esses dados no so compartilhados sem o seu consentimento e voc sempre ser informado com antecedncia sobre os dados a serem enviados."},"name":{"title":"Nome","subtitle":"","placeholder":"Insira seu nome"},"email":{"title":"E-mail","subtitle":"","placeholder":"Insira seu endereo de e-mail"},"change_password":{"title":"Alterar senha de desbloqueio","subtitle":"","screen_reader":"Alterar senha de desbloqueio","choose_password":{"label":"Insira uma nova senha de desbloqueio:"},"confirm_password":{"label":"Confirme a nova senha:"},"errors":{"enter_password":"Insira uma nova senha de desbloqueio.","mismatched_password":"As senhas no correspondem.","confirm_password":"Confirme a senha."},"submit":{"label":"Alterar"},"success":"Senha alterada com sucesso"},"browser_notifications":{"subtitle":"Exibe no navegador notificaes da Alby relacionadas a pagamentos e autenticao.","title":"Notificaes do navegador"},"title":"Configuraes da extenso"},"send":{"title":"Enviar","input":{"label":"Dados para pagamento","hint":"Fatura, endereo relmpago, LNURL","hint_with_bitcoin_address":"Fatura, endereo relmpago, LNURL ou endereo bitcoin"}},"lnurlpay":{"amount":{"label":"Quantia"},"comment":{"label":"Comentrio"},"name":{"label":"Nome"},"email":{"label":"E-mail"},"success":"Sucesso, pagamento enviado!"},"receive":{"title":"Receber","actions":{"create_invoice":"Gerar fatura","redeem":{"description":"Receba satoshis de forma instantnea usando um cdigo LNURL","title":"Vale-satoshi"},"invoice":{"title":"Fatura relmpago","description":"Receba valores especficos de satoshis e de forma instantnea"},"bitcoin_address":{"description":"Receba satoshis depositando bitcoin em um servio de trocas","title":"Servio de trocas"}},"amount":{"label":"Quantia a receber","placeholder":"Quantia em Satoshi..."},"description":{"label":"Descrio","placeholder":"Opcional"},"success":"Pagamento recebido!","payment":{"waiting":"aguardando pagamento...","status":"Verificar status do pagamento"}},"publishers":{"publisher":{"allowance":{"title":"Limite de gastos","used_budget":"sats usados"}},"title":"Sua lista de sites ","description":"Sites onde voc j usou a Alby","no_info":"Parece que voc ainda no usou a Alby em sites.","discover":"Descubra sites"},"make_invoice":{"title":"Gerar fatura","amount":{"label":"Quantia (Satoshi)"},"memo":{"label":"Memo"},"errors":{"amount_too_small":"O valor  menor que o mnimo","amount_too_big":"O valor excede o mximo"}},"confirm_sign_message":{"title":"Assinar","content":"Este site solicita que voc assine:"},"confirm_keysend":{"title":"Aprovar pagamento","success":"Pagamento enviado! Pr-imagem: {{preimage}}","payment_summary":{"description":"Enviar pagamento para: {{destination}}"}},"confirm_payment":{"title":"Aprovar pagamento","success":"Pagamento de {{amount}} realizado com sucesso!","actions":{"pay_now":"Pague agora"}},"lnurlauth":{"content_message":{"heading":"Voc deseja logar em"},"success":"Login realizado com sucesso em {{name}}","errors":{"status":"Erro: O status de autenticao no est correto"},"submit":"Fazer login","title":"Autenticao"},"lnurlwithdraw":{"title":"Resgatar","content_message":{"heading":"Quantia"},"amount":{"label":"Quantia"},"success":"{{amount}} recebidos com sucesso de {{sender}}"},"lnurlchannel":{"success":"Solicitao de canal de pagamento enviada com sucesso para {{name}}","title":"Solicitar canal de pagamento","content_message":{"heading":"Solicitar canal de pagamento do servidor"}},"keysend":{"title":"Enviar","success":"Pagamento enviado! Pr-imagem: {{preimage}}","receiver":{"label":"Enviar pagamento para"},"amount":{"label":"Quantia (Satoshi)"}},"nostr":{"allow":"Permitir este site:","block_and_ignore":"Bloquear e ignorar {{host}}","title":"Nostr","content":"Este site solicita que voc assine:","block_added":"{{host}} adicionado na lista de bloqueio, por favor recarregue o site.","allow_sign":"Permitir {{host}} assinar:","view_details":"Ver detalhes","hide_details":"Ocultar detalhes","allow_sign_event":"Permitir {{host}} assinar um evento <0>{{kind}}</0>","allow_encrypt":"Permitir {{host}} criptografar a mensagem:"},"confirm_request_permission":{"title":"Aprovar solicitao","allow":"Permitir este site executar:","always_allow":"Lembrar e no perguntar novamente"},"choose_path":{"alby":{"title":"Conta Alby","connect":"Conecte-se com a Alby","description":"Ideal para iniciantes que procuram uma tima carteira para gastos do dia a dia.","point3":"Cadastro e acesso por e-mail","point1":"Necessita de convite para criar conta","point4":"Endereos relmpago e nostr exclusivos","point2":"Limites de transao"},"other":{"title":"Traga sua carteira atual","connect":"Conectar","description":"Ideal para quem j possui uma carteira e precisa fazer pagamentos de quantias altas.","point1":"Acesso instantneo, no precisa de convite","point4":"Sem endereo relmpago e nostr","point3":"Opes de autocustdia ou custdia delegada","point2":"Sem limites de transao"},"title":"Conecte carteiras na extenso Alby"},"alby":{"pre_connect":{"set_password":{"errors":{"enter_password":"Insira uma senha.","confirm_password":"Confirme sua senha.","mismatched_password":"As senhas no correspondem."},"confirm_password":{"label":"Confirmar senha"},"choose_password":{"label":"Senha"}}}},"transactions":{"title":"Transaes","description":"Extrato de transaes desta conta"},"distributions":{"umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"},"btcpay":{"name":"BTCPay"},"raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"startos":{"name":"StartOS"},"description":"Escolha com qual aplicativo {{name}} voc gostaria de se conectar","title":"Conectar em {{name}}"},"confirm_add_account":{"content":"Este site deseja adicionar uma conta ({{connector}}):","title":"Adicionar conta","tor_info":"Para se conectar atravs da rede TOR, voc precisa primeiro instalar o aplicativo Alby companion:"},"on_chain":{"instructions1":"Para receber via endereo bitcoin, acesse sua <0>conta Alby</0> em getalby.com","go":"Ir para sua conta Alby na web ","title":"Receber via endereo bitcoin","instructions2":"Seu endereo bitcoin est na pgina <0>Receber</0>."},"lnurlredeem":{"title":"Resgatar vale-satoshi","input":{"placeholder":"LNURL...","label":"Cdigo LNURL"},"actions":{"withdraw":"Resgatar"},"errors":{"invalid_withdraw_request":"Solicitao LNURL invlida","invalid_lnurl":"LNURL invlido"}},"scan_qrcode":{"title":"Aguardando leitura"},"confirm_sign_pset":{"view_details":"Ver detalhes","hide_details":"Ocultar detalhes","view_raw_transaction":"Ver transao raw (Base64)","hide_raw_transaction":"Ocultar transao raw (Base64)","outputs":"Sadas","amount":"{{amount}} {{ticker}}","title":"Assinar","allow_sign":"Este site solicita que voc assine uma transao liquid","inputs":"Entradas"},"bitcoin":{"confirm_get_address":{"title":"Obter endereo"},"allow":"Permitir este site:","allow_sign":"Permitir {{host}} assinar:","block_and_ignore":"Bloquear e ignorar {{host}}","block_added":"{{host}} adicionado na lista de bloqueios, recarregue o site.","confirm_sign_psbt":{"title":"Assinar","hide_raw_transaction":"Ocultar transao bruta (Hex)","view_raw_transaction":"Ver transao bruta (Hex)","inputs":"Entradas","fee":"Taxa","hide_details":"Ocultar detalhes","allow_sign":"Este site solicita que voc assine uma transao de bitcoin","view_details":"Ver detalhes","outputs":"Sadas"}},"liquid":{"title":"Liquid","block_added":"{{host}} adicionado na lista de bloqueios, recarregue o site.","allow":"Permitir este site:","allow_sign":"Permitir {{host}} assinar:","block_and_ignore":"Bloquear e ignorar {{host}}"},"send_to_bitcoin_address":{"total_fee":{"label":"Taxa"},"view_on_explorer":"Ver no explorer mempool","network_fee":{"label":"Taxa de rede"},"total":{"label":"Total"},"service_fee":{"label":"Taxa de servio"},"amount":{"label":"Quantia (sats)"},"service_unavailable":"Servio temporariamente indisponvel. Tente novamente em alguns minutos.","provider":{"label":"Servio provedor de trocas"},"time_estimate":" As transaes geralmente so recebidas no prazo de 10 a 30 minutos.","title":"Enviar para um endereo bitcoin","recipient":{"label":"Endereo"}},"onboard":{"request2":"Voc ainda no configurou suas chaves","request3":"A configurao  rpida e fcil","title":"Configure suas chaves","actions":{"start_setup":"Configurar"},"request1":"Interagir com este site exige configurar uma chave"},"nostr_enable":{"title":"Conectar no Nostr"},"webln_enable":{"title":"Conectar no WebLN","request2":"Solicitar faturas e informaes da rede relmpago"},"webbtc_enable":{"title":"Conectar no WebBTC","request2":"Solicitar faturas e informaes Webbtc"},"liquid_enable":{"title":"Conectar na Liquid","request2":"Solicitar faturas e informaes da liquid"},"alby_enable":{"title":"Conectar na Alby","request2":"Solicitar faturas e informaes da alby"},"confirm_payment_async":{"title":"Aprovar pagamento","description":"Esta  uma fatura do tipo HOLD. <0>Saiba mais </0>","actions":{"pay_now":"Pagar agora"}}},"y0":{"password":"Senha","success":"Sucesso","error":"Erro","connected_sites":"Sites conectados","sats_one":"sat","sats_other":"sats","loading":"carregando","amount":"Quantia","optional":"Opcional","feedback":"Feedback","copied":"Copiado!","actions":{"delete":"Remover","edit":"Editar","next":"Prximo","open":"Abrir","cancel":"Cancelar","confirm":"Confirmar","continue":"Continuar","connect":"Conectar","lock":"Bloquear","unlock":"Desbloquear","send":"Enviar","save":"Salvar","receive":"Receber","close":"Fechar","export":"Exportar","remove":"Remover","copy":"Copiar","copy_invoice":"Copiar cdigo","back":"Voltar","log_in":"Fazer login","remember":"Lembrar e no perguntar novamente","receive_again":"Receber outro pagamento","transactions":"Transaes","more":"Mais","import":"Importar","paste":"Colar","paste_clipboard":"Colar da rea de transferncia","download":"Baixar","copy_clipboard":"Copiar para rea de transferncia","disconnect":"Desconectar","copied_to_clipboard":"Copiado para a rea de transferncia","review":"Revisar","hide":"Ocultar"},"errors":{"connection_failed":"Falha na conexo","payment_failed":"Pagamento falhou"},"description":"Descrio","description_full":"Descrio completa","message":"Mensagem","help":"Tutoriais Alby","response":"Resposta","success_message":"{{amount}}{{fiatAmount}} enviados para {{destination}}","advanced":"Mostrar configuraes avanadas","discover":"Explorar apps","confirm_password":"Confirmar senha","accounts":"Minhas contas","range":{"between":"entre {{min}} e {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"balance":"Saldo disponvel","wallet":"Carteira","connectors":{"galoy":"Galoy","lndhub":"LNDHub","eclair":"Eclair","lnd":"LND","lnbits":"LNBits","nativelndhub":"LNDHub (usando Tor)","commando":"Commando","citadel":"Citadel","nativelnbits":"LNBits (usando Tor)","nativecitadel":"Citadel (usando Tor)","nativelnd":"LND (usando Tor)"},"pasted":"Colado!","or":"ou","enable":{"block_added":"{{host}} adicionado  lista de bloqueio, recarregue o site.","request1":"Solicitar aprovao para transaes","allow":"Permitir este site:","block_and_ignore":"Bloquear e ignorar {{host}}","insecure_domain_warn":" Voc est se conectando a um domnio inseguro."},"website":"Site","apps":"Apps","full_screen":"Tela cheia","hide_advanced":"Ocultar configuraes avanadas","settings":"Configuraes da extenso"},"wx":{"allowance_menu":{"confirm_delete":"Tem certeza de que deseja desconectar este site?","hint":"O limite atual ser redefinido","new_budget":{"label":"Novo limite","link_label":"Defina um limite para pagamentos com um clique"},"edit_allowance":{"title":"Preferncias","screen_reader":"Opes limite de gastos"},"enable_login":{"title":"Login","subtitle":"O login  realizado de forma automtica, sem necessidade de confirmao."}},"qrcode_scanner":{"title":"Ler cdigo QR","actions":{"start_scanning":"Iniciar leitura","stop_scanning":"Parar leitura"},"errors":{"allow_camera_access":"Permita o acesso  cmera na tela configuraes."}},"transactions_table":{"fee":"Taxa","preimage":"Pr-imagem","received":"Recebida","sent":"Enviada","boostagram":{"sender":"Enviado por","message":"Mensagem","app":"App","podcast":"Podcast","episode":"Episdio","action":"Ao","totalAmount":"Quantia total"},"open_location":"Abrir link","payment_hash":"Hash do pagamento","date_time":"Data & Hora"},"budget_control":{"remember":{"label":"Lembrar e definir um limite de gastos","description":"Voc pode definir um valor limite para pagamentos automticos (sem necessidade de confirmao)."},"budget":{"label":"Limite de gastos"}},"toasts":{"connection_error":{"what_you_can_do":"Aqui est o que voc pode fazer:","double_check":"Verifique novamente os detalhes de sua conexo","if_ssl_errors":"e se houver erros de SSL (por exemplo, ERR_CERT_AUTHORITY_INVALID), clique em \\"avanado\\" e prossiga para aceitar o certificado.","visit_guides":"Acesse nossos tutoriais para obter mais ajuda"},"login_failed":{"password_reset":"Esqueceu sua senha? Clique aqui"},"errors":{"invalid_credentials":"Senha incorreta. Verifique se sua senha e endereo de e-mail esto corretos e tente novamente."}},"account_menu":{"options":{"account":{"go_to_web_wallet":"Acessar sua conta na web","wallet_settings":"Configuraes da carteira","add":"Conectar nova conta"}},"title":"Mudar de carteira"},"publishers_table":{"payments":"pagamentos","total":"total","budget":"limite de gastos"},"badge":{"label":{"auth":"LOGIN","imported":"IMPORTADA","budget":"LIMITE DE GASTOS"}},"companion_download_info":{"tor_native":{"title":"TOR (nativo)","description":"Selecione esta opo se este navegador j estiver conectado  rede TOR."},"heading":"Como voc deseja se conectar  rede TOR?","download":"Baixar"}},"mk":{"lnc":{"openchannel":""}}}'),pt=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":"Vlj ett lsenord fr upplsning:"},"confirm_password":{"label":"Bekrfta att du skrivit in lsenordet korrekt:"},"errors":{"enter_password":"Skriv in ett lsenord.","confirm_password":"Bekrfta ditt lsenord.","mismatched_password":"Lsenorden verensstmmer inte."}},"test_connection":{"ready":"Fantastiskt, du r redo att brja!","initializing":"Initialiserar ditt konto. Vnta, det kan ta ngon minut...","connection_error":"Anslutningsfel","review_connection_details":"Se ver dina anslutningsinstllningar.","connection_taking_long":"Anslutningen tar lngre tid n frvntat... r instllningarna korrekta? r din nod nbar?","contact_support":"Om du behver hjlp, kontakta support@getalby.com","actions":{"delete_edit_account":"Radera ogiltigt konto och redigera igen"}},"pin_extension":{"title":"Fst din Alby extension","description":"Du r nstan dr. Fr att anvnda Alby bekvmt, kom ihg att fsta ditt tillgg till webblsarens verktygsflt:","explanation":"1. Klicka p <0/> i det vre hgra hrnet av din webblsare<1/>2. Hitta Alby och klicka fr att fsta den i verktygsfltet<1/>3. Det r allt. Fr att komma t Alby klickar du bara p ikonen <2/>","next_btn":"Brja surra {{icon}} med Alby"}},"choose_connector":{"description":"Anslut till din externa lightning-plnbok eller node","lnd":{"title":"LND","page":{"title":"Anslut din LND-nod","description":"Du behver URLen till din nod samt en macaroon med ls och skicka-rttigheter (t.ex. admin.macaroon)"},"url":{"label":"REST API vrd och port","placeholder":"https://your-node-url:8080"},"macaroon":{"label":"Macaroon (HEX-format)"},"drag_and_drop":"Drag och slpp din macaroon hr eller <0>blddra</0>","errors":{"connection_failed":"Koppling misslyckades. r dina LND-uppgifter korrekta?"}},"lndhub_go":{"title":"LNDHub","page":{"title":"Koppla till LNDHub","description":"Fyll i dina LNDHub-uppgifter eller skanna QR-koden med din webbkamera."},"uri":{"label":"LNDHub Export URI"},"errors":{"invalid_uri":"Ogiltig LNDHub URI","connection_failed":"Koppling misslyckades. r din LNDHub URI korrekt?"}},"lnbits":{"title":"LNbits","page":{"title":"Anslut <0>LNbits</0>","instructions":"I LNBits, vlj den plnbok du vill ansluta, ppna den och klicka p API info och kopiera Admin-nyckeln. Klistra in nedan:"},"admin_key":{"label":"LNBits Admin-nyckel","placeholder":"Din 32-siffriga admin-nyckel"},"url":{"label":"LNbits URL"},"errors":{"connection_failed":"Anslutningen misslyckades. Har du korrekt URL och Admin-nyckel?"}},"eclair":{"title":"Eclair","page":{"title":"Anslut <0>Eclair</0>","instructions":"Du behver din Eclair URL och lsenord."},"password":{"label":"Eclair lsenord"},"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"}},"citadel":{"title":"Citadel","page":{"title":"Anslut <0>Citadel</0>-nod","instructions":"Detta fungerar fr tillfllet inte om 2FA r aktiverat."},"password":{"label":"Citadel lsenord"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"title":"Umbrel","page":{"title":"Anslut <0>Umbrel</0>-nod","instructions":"1. G till <0>Anslut plnbok</0><1/>2 i din Lightning Node-instrumentpanel. Vlj lge <0>REST (Tor)</0> eller <0>REST (Lokalt ntverk)</0><1/>3. Kopiera <0>lndconnect URL</0> och klistra in den nedan"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"mynode":{"title":"myNode","page":{"title":"Anslut <0>myNode</0>","instructions":"P din myNode-hemsida, klicka p knappen <0>Wallet</0> som motsvarar din <0>Lightning</0>-tjnst. <1/> Klicka p knappen <0>Pair Wallet</0> under fliken <0>Status</0>. Fyll i ditt lsenord nr du blir tillfrgad.<1/> I droppmenym vlj kopplingsalternativ. Beroende p dina instllningar kan du antingen vlja <0>Lightning (REST + Local IP)</0> eller <0>Lightning (REST + Tor)</0>."},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"startos":{"title":"StartOS","page":{"title":"Anslut till din <0>StartOS Server</0>","instructions":"P din StartOS instrumentpanel klickar du p tjnsten <0>Lightning Network Daemon</0>.<1/>Vlj fliken <0>Egenskaper</0>.<1/>Kopiera nu <0>LND Connect REST URL. </0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"raspiblitz":{"title":"RaspiBlitz","page":{"title":"Anslut din <0>RaspiBlitz</0>-nod","instructions1":"Flj dessa steg:<1/> 1. <0>SSH</0> till din <0>Raspiblitz</0><1/>2. Vlj <0>Anslut appar och visa inloggningsuppgifter</0> frn listan<1/><0/>3. Vlj <0>Anslut Alby till denna nod</0><1/>4. Tryck p <0>OK</0> fr att visa anslutningsuppgifterna<1/><1/>Kopiera och klistra in <0>REST API-vrden</0> eller <0>.onion</0>-adressen fr att ansluta genom Tor till ingngen nedan.","instructions2":"Kopiera (admin) <0>macaroon</0> till inmatningen nedan."},"rest_api_host":{"label":"REST API vrd","placeholder":"din-onion-nod-adress:port"}},"blink":{"title":"Blink plnbok","page":{"title":"Anslut <0>Blink Wallet</0>"},"token":{"label":"Ange din API-nyckel"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":"Anslut en <0>Bitcoin Jungle Wallet</0>"}},"btcpay":{"title":"BTCPay Server","config":{"label":"Konfigurationsdata"},"errors":{"connection_failed":"Anslutning misslyckades. r URL till BTCPay-anslutningen korrekt och tillgnglig?"}},"commando":{"port":{"label":"Port"},"title":"Core Lightning","proxy":{"label":"Websocket proxy"},"config":{"label":"Config data","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"Anslutningen misslyckades. r din Core Lightning-nod online och anvnder kommandoplugin?"},"privKey":{"label":"Lokal privat nyckel (automatiskt genererad)"},"page":{"title":"Anslut till din Core Lightning node","instructions":"Skerstll att du har Core Lightning version 0.12.0 eller nyare, att kommando insticksprogrammet r aktivt samt att din node r nbar ver lightning-ntverket. Skapa en rune genom att kra \'lightning-cli commando-rune\'."},"pubkey":{"label":"Publik nyckel"},"rune":{"label":"Rune"},"host":{"label":"Hosta"}},"title":"Anslut Lightning Plnbok","lnc":{"pairing_phrase":{"placeholder":"hemlig stack sats fras","label":"Din parningsfras "},"title":"Lightning Terminal (LNC)"},"umbrel_lightning_node":{"title":"Lightning Node"}},"home":{"actions":{"send_satoshis":" Skicka Satoshis ","enable_now":"Aktivera Nu"},"allowance_view":{"sats":"sats","budget_spent":"Budget frbrukad","total_spent":"Totalt spenderat","total_payments":"Totala betalningar","permissions":"Behrigheter"},"default_view":{"is_blocked_hint":"Alby r fr tillfllet avstngt hos {{host}}","block_removed":"Aktiverade {{host}}. Ladda om webbplatsen.","see_all":"Se alla","no_transactions":"Inga transaktioner fr detta konto nnu."}},"accounts":{"account_view":{"nostr":{"generate_keys":{"hint":"Du kan generera en slumpmssig nyckel eller f en nyckel frn denna kontoinformation (med en signerad kanonisk fras). <0>Ls mer </0>","screen_reader":"Skapa en ny Nostr-nyckel fr ditt konto","title":"Generera en ny Nostr nyckel","actions":{"random_keys":"Generera en slumpmssig nyckel","derived_keys":"F en nyckel frn kontot"}},"errors":{"failed_to_load":"Det gick inte att ladda Nostr-nyckeln. r det en giltig Nostr-nyckel?"},"private_key":{"title":"Hantera dina Nostr privata nyckel","successfully_removed":"Nostr privat nyckel har tagits bort.","label":"Nostr Privat Nyckel","subtitle":"Klistra in din nostr privata nyckel eller skapa en ny. <0>Ls mer </0>","success":"Nostr privat nyckel krypterad och sparad.","failed_to_remove":"Det angivna kontonamnet matchade inte, din gamla Nostr privata nyckel har terstllts.","warning":"Vnligen ange namnet p kontot fr att bekrfta raderingen av din nostr privata nyckel:\\n\\n{{ name }}"},"public_key":{"label":"Nostr Publik Nyckel"},"actions":{"generate":"Generera en ny nyckel"},"title":"Nostr","hint":"r ett enkelt och ppet protokoll som syftar till att skapa ett censur beskyddat sociala ntverk. Nostr fungerar med kryptografiska nycklar. Fr att publicera ngot signerar du det med din nyckel och skickar det till flera reler. Du kan anvnda Alby fr att hantera din Nostr-nyckel. Mnga Nostr-applikationer lter dig d helt enkelt anvnda nyckeln frn Alby-tillgget.","settings":{"label":"Nostr Instllningar","title":"Nostr Instllningar","imported_key_warning":" Du anvnder fr nrvarande en importerad eller slumpmssigt genererad Nostr-nyckel. Din privata Nostr-nyckel kan inte terstllas av din terstllningsfras, s kom ihg att skerhetskopiera din privata Nostr-nyckel separat.","derive":"Hrled frn huvudnyckel","can_restore":" Nostr-nyckel hrledd frn din huvudnyckel","description":"Hrled Nostr-nycklar frn din huvudnyckel eller importera din befintliga privata nyckel genom att klistra in den i fltet \\"Nostr privat nyckel\\".","no_secret_key":" Du har ingen huvudnyckel n. <0>Klicka hr</0></div> fr att skapa din huvudnyckel och hrleda dina Nostr-nycklar.","remove":"Ta bort nuvarande nycklar"},"setup":{"description":"Vlj Om du vill skapa ett nytt Nostr-konto (ett par privata och offentliga nycklar) eller importera ett befintligt.","description2":"Varje Nostr-konto som skapas i Alby kommer med en <0>terstllningsfras</0>  en uppsttning av 12 ord som alltid lter dig terf tkomst till dina privata Nostr-nycklar.","title":"Stll in dina Nostr-nycklar","new":{"label":"Skapa ett nytt Nostr-konto","description":"Generera en huvudnyckel med ett par nya Nostr-nycklar."}}},"remove":{"error":"Det angivna kontonamnet matchade inte.","confirm":"Ange namnet p kontot fr att bekrfta raderingen av ditt konto.\\n\\n{{ name }}\\n\\n  Alla associerade nycklar (Master Key, Nostr, etc) kommer att raderas om du fortstter. Se till att du har skerhetskopierat dem, det finns inget annat stt att terstlla dem."},"title2":"Konto","name":{"title":"Visnings Namn","placeholder":"Konto visningsnamn"},"export":{"title":"Anslut din mobila plnbok","screen_reader":"Exportera konto detaljer","waiting":"vntar p LndHub-data...","your_ln_address":"Din Lightning Address:","export_uri":"LNDHub-inloggnings-URI","scan_qr":"Importera denna plnbok till Zeus eller BlueWallet genom att skanna QR-koden.","description":"Lter dig ansluta och anvnda det hr kontot p mobila plnbcker som <0>Blue Wallet</0> och <1>Zeus</1>."},"actions":{"export":"Exportera","remove_secretkey":"Ta bort huvudnyckeln"},"mnemonic":{"saved":"Huvudnyckeln krypterad och sparad.","existing_nostr_key_notice":" Detta konto har redan en nostr privat nyckeluppsttning och kommer inte att hrledas frn denna huvudnyckel. Du kan hantera din Nostr-nyckel frn dina kontoinstllningar.","generate":{"title":"Generera ny huvudnyckel","button":"Generera huvudnyckel","description":"Master Key lter dig interagera med olika protokoll som: Nostr, baslager av Bitcoin eller LNURL-Auth."},"backup":{"save":"Spara huvudnyckeln","button":"Visa terstllningsfras","protocols":{"nostr":"Nostr"},"warning":" Glm inte att skerhetskopiera din terstllningsfras! Att inte skerhetskopiera det kan leda till att du permanent frlorar tkomst till din huvudnyckel, Nostr-identitet eller tillgngar som du hanterar med denna nyckel.","description":"Skriv ner terstllningsfrasen fr att kunna terstlla din huvudnyckel p en ny enhet eller om du frlorar tkomsten till ditt konto."},"import":{"title":"Importera din huvudnyckel","description":"Anvnd terstllningsfrasen fr att importera din huvudnyckel till Alby.","button":"Importera huvudnyckel"},"title":" Nyckelhantering","lnurl":{"title":"Logga in med Lightning","use_mnemonic":"Anvnd Master Key fr att logga in p lightning appar (LNURL Auth)"}},"remove_secretkey":{"title":"Ta bort huvudnyckeln","subtitle":"Tar bort huvudnyckeln frn det hr kontot.","success":"Masternyckeln har tagits bort.","confirm":"Ange namnet p kontot fr att bekrfta raderingen av din huvudnyckel.\\n\\n{{ name }}"},"no_mnemonic_hint":" Du har ingen huvudnyckel n. <0>Klicka hr</0></div> fr att skapa din huvudnyckel och lsa upp dessa instllningar.","network":{"title":"Ntverk","subtitle":"Vlj ntverk fr att hrleda adresser och avkoda bitcoin och likvida transaktioner","options":{"bitcoin":"Mainnet","testnet":"Testnet","regtest":"Regtest"}}}},"unlock":{"unlock_to_continue":"Ls upp fr att fortstta","unlock_password":"Ditt upplsningslsenord","help_contact":{"part1":"Behvver du hjlp? Kontakta","part2":"Alby Support"},"unlock_error":{"help":"Ditt konto r krypterat med ditt upplsningslsenord. Om du har glmt ditt upplsningslsenord behver du nollstlla och lgga till ditt Lightning-konto p nytt.","link":"Nollstll och skapa ett nytt konto"},"errors":{"invalid_password":"Ogiltigt lsenord"}},"settings":{"browser_notifications":{"title":"Webblsarnotiser","subtitle":"Betalnings- och autentiseringsrelaterade notiser."},"website_enhancements":{"title":"Webbplatsfrbttringar","subtitle":"Dricks fr Twitter, YouTube, m.fl."},"lnurl_auth":{"title":"LNURL-Auth","hint":"r ett generiskt autentiseringsprotokoll. Detta autentiserar anvndarens digitala signaturer. Protokollet krver ingen ytterligare information ssom lsenord, e-post, anvndarnamn eller liknande. Med Alby kan du anvnd dina lightning-konton fr att logga in p webbplatser. Fr att vara kompatibla med andra plnbcker var vi tvungna att gra vissa frndringar som du kan konfigurera hr. <0>I bsta fall r alla instllningar AV.</0> Anvnd enbart om du har ldre konton.","legacy_lnurl_auth_202207":{"title":"ldre LNURL-Auth","subtitle":"Nyckelgenereringen fr LNURL-auth har ndrats (Juli 2022). Alby var inte kompatibelt med andra implementationer. Detta har ndrats och nu anvnds andra inloggningsnycklar. Om du tidigare anvnt LNURL-auth fr att logga in, kan du fortfarande aktivera denna metod. Denna mjlighet kommer frsvinna s se till att byta till det nya inloggningsfrfarandet."},"legacy_lnurl_auth":{"title":"ldre signeringsmetod fr LNDHub och LNbits","subtitle":"Meddelandesignering och inloggning med LNDhub (t.ex. BlueWallet) och LNbits-konton har ndrats (Mars 2022). Om du tidigare loggade in med dessa konton kan du fortfarande aktivera den ldre signeringsmetoden. Denna mjlighet kommer frsvinna s se till att byta till det nya inloggningsfrfarandet."}},"camera_access":{"title":"tkomst till kamera","subtitle":"Fr att skanna QR-koder","allow":"Tillt tkomst till kamera","granted":"tkomst beviljad"},"language":{"title":"Sprk","subtitle":"versttningarna r inte fullstndiga till 100%. <0>Hjlp oss att verstta Alby till ditt sprk!</0>"},"theme":{"title":"Tema","subtitle":"Anvnd Alby i mrkt eller ljust lge","options":{"dark":"Mrkt","light":"Ljust","system":"System"}},"show_fiat":{"title":"Sats till Fiat","subtitle":"Vxla alltid till denna valuta frn vald valutavxlare"},"currency":{"title":"Valuta","subtitle":"Visa belopp ven i denna valuta"},"exchange":{"title":"Klla fr vxlingskurs","subtitle":"Klla fr Bitcoin vxlingskurs"},"personal_data":{"title":"Personlig information","description":"Betalande kan be att f skicka ytterligare information tillsammans med en verfring. Denna information delas inte med ngon annan utan ditt samtycke. Du kommer alltid f frgan om denna information ska skickas tillsammmans med en verfring."},"name":{"title":"Namn","subtitle":"","placeholder":"Skriv ditt namn"},"email":{"title":"E-post","subtitle":"","placeholder":"Skriv in din e-postadress"},"change_password":{"title":"ndra upplsningslsenord","subtitle":"","screen_reader":"nda upplsningslsenord","choose_password":{"label":"Skriv in det nya upplsningslsenordet:"},"confirm_password":{"label":"Bekrfta nytt lsenord:"},"submit":{"label":"ndra"},"errors":{"enter_password":"Skriv in ett nytt upplsningslsenord.","confirm_password":"Bekrfta ditt lsenord.","mismatched_password":"Lsenorden verensstmmer inte."},"success":"Lsenordet har ndrats"}},"send":{"title":"Skicka","input":{"label":"Mottagare","hint":"Faktura, Lightning-adress eller LNURL","hint_with_bitcoin_address":"Faktura, Lightning-adress , LNURL eller bitcoin adress"}},"lnurlpay":{"amount":{"label":"Belopp"},"comment":{"label":"Kommentar"},"name":{"label":"Namn"},"email":{"label":"E-post"},"success":"Klart. Betalning skickad!"},"lnurlauth":{"title":"Autentisering","content_message":{"heading":"Vill du logga in till"},"submit":"Logga in","success":"Inloggad till {{name}}","errors":{"status":"Fel: Auth status r felaktig"}},"lnurlchannel":{"title":"Kanalbegran","content_message":{"heading":"Begr kanal frn nod"},"success":"Kanalbegran skickad till {{name}}"},"lnurlwithdraw":{"title":"terkalla","content_message":{"heading":"Belopp"},"amount":{"label":"Belopp"},"success":"terkallelse av begran om {{amount}} skickad till {{sender}}"},"receive":{"title":"Tag emot","actions":{"create_invoice":"Skapa Faktura","redeem":{"description":"Ta ut en bitcoin-kupong direkt via en LNURL-kod","title":"Lsa in"},"invoice":{"title":"Lightning faktura","description":"Begr omedelbara och specifika belopp bitcoinbetalningar"},"bitcoin_address":{"description":"Ta emot via bitcoin-adress med en bytestjnst","title":"Bitcoin adress"}},"amount":{"label":"Belopp","placeholder":"Belopp i Satoshi..."},"description":{"label":"Beskrivning","placeholder":"T.ex. vem skickar denna betalning?"},"success":"Betalning mottagen!","payment":{"waiting":"vntar p betalning...","status":"Kontrollera betalningsstatus"}},"publishers":{"publisher":{"allowance":{"title":"Beloppsgrns","used_budget":"spenderade sats"}},"description":"Webbplatser dr du har anvnt Alby tidigare","discover":"Upptck webbplatser","no_info":"Det verkar som att du inte har anvnt Alby p ngra webbplatser n.","title":"Dina  webbsidor"},"make_invoice":{"title":"Skapa Faktura","amount":{"label":"Belopp (Satoshi)"},"memo":{"label":"PM"},"errors":{"amount_too_small":"Belopp understiger minimigrnsen","amount_too_big":"Belopp verstiger maximumgrnsen"}},"confirm_sign_message":{"title":"Signera","content":"Den hr webbplatsen ber dig att logga in:"},"confirm_keysend":{"title":"Godknn Betalning","success":"Betalning skickad! Frhandsvy: {{preimage}}","payment_summary":{"description":"Skicka betalning till: {{destination}}"}},"keysend":{"title":"Skicka","success":"Betalning skickad! Frhandsvy: {{preimage}}","receiver":{"label":"Skicka betalning till"},"amount":{"label":"Belopp (Satoshi)"}},"confirm_payment":{"title":"Godknn Betalning","success":"Betalning av {{amount}} genomfrd!","actions":{"pay_now":"Betala nu"}},"nostr":{"title":"Nostr","allow":"Tillt den hr webbplatsen att:","block_and_ignore":"Blockera och ignorera {{host}}","view_details":"Visa detaljer","hide_details":"Gm detaljer","block_added":"Lade till {{host}} till blockeringslistan, ladda om webbplatsen.","allow_sign":"Tillt {{host}} att signera:","content":"Den hr webbplatsen ber dig att signera:"},"choose_path":{"alby":{"title":"Alby Konto","connect":"Anslut med Alby","description":"Registrera dig eller anvnd ditt befintliga Alby konto. Perfekt att snabbt komma igng och fr sm belopp."},"other":{"title":"Annan Plnbok","connect":"Anslut","description":"Anslut till din befintliga lightning plnbok eller nod och vlj bland olika kontakter. Perfekt fr full flexibilitet. Kr din egen nod."}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":"Lsenord"},"confirm_password":{"label":"Bekrfta Lsenord"},"errors":{"mismatched_password":"Lsenordet matchar inte.","enter_password":"Vnligen ange ett lsenord.","confirm_password":"Vnligen ange ditt lsenord."}}}},"confirm_request_permission":{"always_allow":"Kom ihg mitt val och frga inte igen","title":"Godknn begran","allow":"Tillt den hr webbplatsen att kra:"},"transactions":{"title":"Transaktion","description":"Transaktioner fr detta konto"},"distributions":{"title":"Anslut till {{namn}}","description":"Vlj vilket {{namn}} app du vill ansluta med","umbrel":{"name":"Umbrel"},"citadel":{"name":"Citadel"},"btcpay":{"name":"BTCPay"},"raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"startos":{"name":"StartOS"}},"confirm_add_account":{"title":"Lgg till konto","content":"Den hr webbplatsen vill lgga till ett konto ({{connector}}):","tor_info":"Fr att kunna ansluta via TOR-ntverket mste du frst installera Alby kompanion appen:"},"on_chain":{"title":"Ta emot via bitcoin adress","instructions2":"Du hittar din bitcoin adress p <0>Ta emot</0> sidan.","go":"G till ditt Alby konto ","instructions1":"Fr att ta emot bitcoin via en bitcoin adress, logga in p ditt <0>Alby-konto</0> p getalby.com"},"scan_qrcode":{"title":"Vntar p att skanna"},"lnurlredeem":{"input":{"placeholder":"LNURL...","label":"LNURL-uttagskod"},"errors":{"invalid_withdraw_request":"Ogiltig LNURL-utagningsbegran","invalid_lnurl":"Ogiltig LNURL"},"title":"Ls in bitcoin","actions":{"withdraw":"Ta ut"}},"confirm_sign_pset":{"title":"Signera","allow_sign":"Denna webbplats ber dig att underteckna en Liquid transaktion:","view_details":"Visa detaljer","hide_details":"Dlj detaljer","view_raw_transaction":"Visa obearbetad transaktion (Base64)","hide_raw_transaction":"Gm obearbetad transaktion (Base64)","inputs":"Ingngar","outputs":"Utgngar","amount":"{{amount}} {{ticker}}"},"bitcoin":{"confirm_get_address":{"title":"Hmta Adress"},"allow":"Tillt den hr webbplatsen att:","allow_sign":"Tillt {{host}} att signera:","block_and_ignore":"Blockera och ignorera {{host}}","block_added":"Lade till {{host}} till blockeringslistan, ladda om webbplatsen.","confirm_sign_psbt":{"title":"Signera","hide_raw_transaction":"Gm rtransaktion (hexadecimal)","view_raw_transaction":"Visa rtransaktion (hexadecimal)","inputs":"Ingngar","fee":"Avgift","hide_details":"Gm detaljer","allow_sign":"Den hr webbplatsen ber dig att underteckna en bitcoin-transaktion","view_details":"Visa detaljer","outputs":"Utgngar"}},"liquid":{"title":"Liquid","allow":"Tillt den hr webbplatsen att:","allow_sign":"Tillt {{host}} att signera:","block_and_ignore":"Blockera och ignorera {{host}}","block_added":"Lade till {{host}} till blockeringslistan, ladda om webbplatsen."},"send_to_bitcoin_address":{"service_unavailable":"Tjnsten r fr tillfllig inte tillgnglig, frsk igen om ngra minuter.","amount":{"label":"Belopp (sats)"},"title":"Skicka till bitcoin-adress","recipient":{"label":"Mottagare"},"network_fee":{"label":"Ntverksavgift"},"service_fee":{"label":"Serviceavgift"},"total":{"label":"Total"},"total_fee":{"label":"Avgift"},"provider":{"label":"Byt leverantr"},"view_on_explorer":"Visa p mempool explorer","time_estimate":" Transaktioner kommer vanligtvis inom 10-30 minuter."},"webln_enable":{"title":"Anslut till WebLN","request2":"Begr fakturor och lightning information"},"onboard":{"request2":"Du har inte konfigurerat dina nycklar n","request1":"Denna webbplats krver nyckelinteraktion","request3":"Installationen r snabb och enkel","title":"Stll in dina nycklar","actions":{"start_setup":"Starta installationen"}},"liquid_enable":{"request2":"Begr fakturor och likvida uppgifter","title":"Anslut till Liquid"},"nostr_enable":{"title":"Anslut till Nostr"},"webbtc_enable":{"request2":"Begr fakturor och Webbtc-information","title":"Anslut till WebBTC"},"alby_enable":{"title":"Anslut till Alby","request2":"Begr fakturor och albyinformation"},"confirm_payment_async":{"title":"Godknn betalning","description":"Detta r en HOLD-faktura. <0>Ls mer </0>","actions":{"pay_now":"Betala nu"}}},"y0":{"password":"Lsenord","success":"Genomfrt","error":"Misslyckades","connected_sites":"Anslutna webbplatser","loading":"laddar","amount":"Belopp","optional":"Valfritt","feedback":"terkoppling","copied":"Kopierad!","description":"Beskrivning","description_full":"Fullstndig beskrivning","message":"Meddelande","help":"Hjlp","actions":{"back":"Tillbaka","delete":"Radera","edit":"Redigera","next":"Nsta","open":"ppna","cancel":"Avbryt","confirm":"Bekrfta","continue":"Fortstt","connect":"Anslut","lock":"Ls","unlock":"Ls upp","send":"Skicka","save":"Spara","receive":"Tag emot","close":"Stng","export":"Exportera","remove":"Tag bort","copy":"Kopiera","copy_invoice":"Kopiera faktura","transactions":"Transaktioner","receive_again":"Ta emot en ny betalning","remember":"Kom ihg mitt val och frga inte igen","log_in":"Logga in","more":"Mer","download":"Ladda ner","import":"Importera","copy_clipboard":"Kopiera till urklipp","paste":"Klistra in","paste_clipboard":"Klistra in frn urklipp","review":"Recension","copied_to_clipboard":"Kopierade till urklipp","disconnect":"Koppla ifrn","hide":"Dlj"},"errors":{"connection_failed":"Anslutning misslyckades","payment_failed":"Betalning misslyckades"},"range":{"between":"mellan {{min}} och {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"sats_other":"sats","sats_one":"sat","accounts":"Konton","discover":"Upptcka","success_message":"{{amount}}{{fiatAmount}} skickat till {{destination}}","response":"Svar","confirm_password":"Bekrfta Lsenord","balance":"Balans","wallet":"Plnbok","connectors":{"lnd":"LND","nativelnd":"LND (ver Tor)","nativelndhub":"LNDHub (ver Tor)","galoy":"Galoy","eclair":"Eclair","nativecitadel":"Citadel (ver Tor)","commando":"Commando","nativelnbits":"LNBits (ver Tor)","lndhub":"LNDHub","lnbits":"LNBits","citadel":"Citadel"},"or":"eller","pasted":"Klistrat in!","enable":{"block_added":"Lade till {{host}} till blockeringslistan, ladda om webbplatsen.","request1":"Begr godknnande fr transaktioner","allow":"Tillt den hr webbplatsen att:","block_and_ignore":"Blockera och ignorera {{host}}"},"website":"Webbsida"},"wx":{"allowance_menu":{"confirm_delete":"r du sker p att du vill koppla bort den hr webbplatsen?","hint":"Om du ndrar detta terstlls den nuvarande budgeten","new_budget":{"label":"Betalningsbudget med ett klick","link_label":"Stll in en budget fr betalningar med ett klick"},"enable_login":{"title":"Aktivera webbplatsinloggning","subtitle":"Logga in automatiskt utan bekrftelse nr webbplatsen begr det."},"edit_allowance":{"title":"Webbplatsinstllningar","screen_reader":"Alternativ fr Beloppsgrns"}},"qrcode_scanner":{"title":"Skanna QR-kod","actions":{"start_scanning":"Pbrja skanning","stop_scanning":"Avsluta skanning"},"errors":{"allow_camera_access":"Tillt kameratkomst under instllningar."}},"transactions_table":{"fee":"Avgift","preimage":"Frhandsvy","received":"Mottaget","sent":"Skickat","boostagram":{"sender":"Avsndare","message":"Meddelande","app":"App","podcast":"Podcast","episode":"Avsnitt","action":"tgrd","totalAmount":"Totalt belopp","timestamp":"Tidsstmpel"},"open_location":"ppna websida","payment_hash":"Betalningshash","date_time":"Datum & tid"},"budget_control":{"remember":{"label":"Kom ihg att ange en budget","description":"Du kan ange en beloppsgrns utan att behva bekrfta betalningar frrn grnsen r uppndd."},"budget":{"label":"Budget"}},"toasts":{"connection_error":{"what_you_can_do":"Du kan gra detta:","double_check":"Kontrollera dina anslutningsinstllningar","if_ssl_errors":"och om det frekommer SSL-fel (t.ex. ERR_CERT_AUTHORITY_INVALID), klicka p \\"advanced\\" och fortstt genom att godknna certifikatet.","visit_guides":"Besk vr guide fr ytterligare hjlp"},"login_failed":{"password_reset":"Glmt ditt lsenord? Klicka hr"},"errors":{"invalid_credentials":"Ogitligt lsenord. Kontrollera ditt lsenord, e-postadress och frsk igen."}},"account_menu":{"screen_reader":"ppna droppmeny","options":{"account":{"go_to_web_wallet":"Hantera ditt webbkonto"}}},"publishers_table":{"payments":"betalningar","total":"totalt","budget":"budget"},"badge":{"label":{"auth":"LOGGA IN","imported":"IMPORTERAD","budget":"BUDGET"}},"companion_download_info":{"heading":"Hur vill du ansluta till TOR-ntverket?","companion":{"title":"Companion App","description":"Lttviktsapp som ansluter din webblsare till TOR-ntverket."},"download":"Ladda ner","tor_native":{"title":"TOR (native)","description":"Vlj det hr alternativet om den hr webblsaren redan r ansluten till TOR-ntverket."}}},"mk":{"lnd":{"channelbalance":"F en rapport om de totala medlen ver alla ppna kanaler","routermc":"Ls det interna uppdragskontroll lget","getinfo":"F nod-informationen","lookupinvoice":"Sl upp fakturainformation","walletbalance":"F plnbokens totala outnyttjade uttag","disconnectpeer":"Koppla frn en fjrr-ansluten peer","getchaninfo":"F ntverksmeddelandet fr den givna kanalen","listpeers":"F en lista ver alla fr nrvarande aktiva peers","sendtoroute":"Gr en betalning via den angivna vgen","getnodeinfo":"F kanalinformationen fr en nod","gettransactions":"F en lista ver alla transaktioner som r relevanta fr plnboken","listpayments":"F en lista ver alla utgende betalningar","queryroutes":"Frga efter en mjlig rutt","addholdinvoice":"Skapa nya HODL-fakturor","settleinvoice":"Avgr en godknd faktura","listchannels":"F en beskrivning av alla ppna kanaler","listinvoices":"F en lista ver alla fakturor","openchannel":"ppna en ny kanal","connectpeer":"Upprtta en anslutning till en extern peer","estimatefee":"Uppskatta avgiftssatsen och totala avgifter fr en transaktion","getnetworkinfo":"F grundlggande statistik om det knda kanaldiagrammet","verifymessage":"Verifiera en signatur ver ett meddelande","decodepayreq":"Avkoda en strng fr betalningsbegran","addinvoice":"Skapa nya fakturor"},"lnc":{"listinvoices":"F en lista ver alla fakturor","walletbalance":"F plnbokens totala outnyttjade uttag","openchannel":"ppna en ny kanal","getchaninfo":"F ntverksmeddelandet fr den givna kanalen","getnetworkinfo":"F grundlggande statistik om det knda kanaldiagrammet","listchannels":"F en beskrivning av alla ppna kanaler","estimatefee":"Uppskatta avgiftssatsen och totala avgifter fr en transaktion","getinfo":"F nod-informationen","channelbalance":"F en rapport om de totala medlen ver alla ppna kanaler","disconnectpeer":"Koppla frn en fjrransluten peer","getnodeinfo":"F kanalinformationen fr en nod","gettransactions":"F en lista ver alla transaktioner som r relevanta fr plnboken","lookupinvoice":"Se fakturainformation","queryroutes":"Frga efter en mjlig rutt","connectpeer":"Upprtta en anslutning till en extern peer","listpayments":"F en lista ver alla utgende betalningar","listpeers":"F en lista ver alla fr nrvarande aktiva peers","decodepayreq":"Avkoda en strng fr betalningsbegran","verifymessage":"Verifiera en signatur ver ett meddelande","sendtoroute":"Gr en betalning via den angivna vgen","routermc":"Ls det interna uppdragskontrolllget","addinvoice":"Skapa nya fakturor","addholdinvoice":"Skapa nya HODL-fakturor","settleinvoice":"Avgr en godknd faktura"},"commando":{"invoice":"Skapa frvntningar p en betalning","listpeers":"Lista noder som r anslutna eller har ppna kanaler med denna nod","setchannel":"Konfigurera avgifter / htlc-intervall som annonseras fr en kanal","offer":"Skapa ett erbjudande","pay":"Skicka en betalning till en BOLT11-faktura","decodepay":"Kontrollera och analysera en bolt11-strng","decode":"Avkoda en bolt11/bolt12/rune-strng","getinfo":"F sammanfattningen av noden","multifundchannel":"ppna flera betalningskanaler med noder genom att utfra en enda finansieringstransaktion","sendpay":"Skicka en betalning via en rutt","signmessage":"Skapa en signatur frn denna nod","bkpr-listbalances":"Lista ver alla aktuella och historiska kontosaldon","disconnect":"Stng en befintlig anslutning till en peer","feerates":"Returnera avgifterna som CLN kommer att anvnda","listfunds":"Lista alla tillgngliga medel","fundchannel":"ppna en betalningskanal med en peer genom att genomfra en finansieringstransaktion","listnodes":"Lista noder som noden har lrt sig om via gossip-meddelanden","listoffers":"Lista alla erbjudanden eller f ett specifikt erbjudande","listpays":"Fr status fr alla betalkommandon","listsendpays":"Fr status fr alla sendpay-kommandon","listtransactions":"Lista transaktioner som spras i plnboken","connect":"Upprtta en ny anslutning med en annan nod","getroute":"Hitta den bsta vgen fr betalningen till en lightning-nod","listinvoices":"F status p alla fakturor","keysend":"Skicka en betalning till en annan nod","checkmessage":"Verifiera att signaturen genererades av en given nod","listforwards":"Lista alla htlcs som har frskt vidarebefordras"}}}'),yt=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":":"},"confirm_password":{"label":":"},"errors":{"confirm_password":"","mismatched_password":"","enter_password":""}},"test_connection":{"ready":" !","initializing":" ","connection_error":"","contact_support":"  support@getalby.com","review_connection_details":"","connection_taking_long":" ? ?","actions":{"delete_edit_account":"  "}},"pin_extension":{"title":" extension Alby","description":"!  Alby  :","explanation":"1.  <0/>  <1/> 2.  Alby  <1/> 3. !  Alby  <2/>","next_btn":" Alby {{icon}}"}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":""},"errors":{"enter_password":"","confirm_password":"","mismatched_password":""},"confirm_password":{"label":""}}}},"accounts":{"account_view":{"mnemonic":{"generate":{"button":" Master Key","title":" Master Key ","description":"Master Key   Nostr,  Bitcoin  LNURL-Auth"},"backup":{"save":" Master Key","button":" recovery phrase","warning":" recovery phrase !  Master Key,  Nostr  ","description":" recovery phase   Master Key  ","protocols":{"nostr":"Nostr"}},"import":{"title":" Master Key ","description":" recovery phrase  Master Key  Alby","button":" Master Key"},"lnurl":{"title":" Lightning","use_mnemonic":" Master Key  Lightning (LNURL Auth)"},"title":"  Key","saved":"Master Key ","existing_nostr_key_notice":"  private key nostr  Master Key   Nostr "},"no_mnemonic_hint":" Master Key    Master Key ","network":{"title":"","options":{"bitcoin":"Mainnet","testnet":"Testnet","regtest":"Regtest"},"subtitle":" addresses  decode  Bitcoin  Liquid"},"nostr":{"settings":{"derive":" Master Key","remove":" keys ","no_secret_key":" Master Key <0></0></div>  Master Key  Nostr keys ","imported_key_warning":"  Nostr    Nostr private key  recovery phase   Nostr private key ","label":" Nostr","title":" Nostr","description":" Nostr  Master Key   private key   \\"Nostr Private Key\\"","can_restore":" Nostr key  Master Key "},"setup":{"title":" Nostr keys ","description":" Nostr ( private  public keys)  ","description2":" Nostr  Alby  <0>Recovery Phrase</0>  12  private keys  Nostr ","new":{"description":" Master Key  Nostr keys ","label":" Nostr "}},"private_key":{"label":"Nostr Private Key","title":" Nostr private key ","subtitle":" Nostr private key    <0>Learn more </0>","success":"Nostr private key   ","failed_to_remove":" Nostr private key ","successfully_removed":" Nostr private key "},"public_key":{"label":"Nostr Public Key"},"generate_keys":{"title":" Nostr key ","screen_reader":" Nostr key ","hint":" key    (canonical phrase) <0> </0>","actions":{"random_keys":" key ","derived_keys":" key "}},"actions":{"generate":" key "},"errors":{"failed_to_load":" Nostr key Nostr key  ?"},"title":"Nostr","hint":"Nostr  Nostr  cryptography    Alby  Nostr   Nostr  extension Alby "},"remove":{"error":""},"remove_secretkey":{"title":" Master Key","subtitle":" Master Key ","success":" Master Key "},"actions":{"export":"","remove_secretkey":" Master Key"},"title2":"","name":{"title":"","placeholder":""},"export":{"title":" moblie wallet","description":" mobile wallets  <0>Blue Wallet</0> t  <1>Zeus</1>","screen_reader":"","waiting":" LNDHub","your_ln_address":"Lightning Address :","export_uri":"LNDHub Credentials URI","scan_qr":" Zeus  BlueWallet  QRCode"}}},"unlock":{"unlock_to_continue":"","unlock_password":"","help_contact":{"part1":" ? ","part2":" Alby"},"unlock_error":{"help":"    Lightning ","link":""},"errors":{"invalid_password":""}},"settings":{"lnurl_auth":{"legacy_lnurl_auth_202207":{"title":"Legacy LNURL-Auth","subtitle":" LNURL-auth  ( 2022) Alby     LNURL-auth   "},"title":"LNURL-Auth","legacy_lnurl_auth":{"title":"Legacy signing  LNbits  LNDHub","subtitle":" LNDhub ( BlueWallet)  LNbits  ( 2022)    "},"hint":"            Alby  Lightning   wallet    <0>ideally all those options are OFF.</0> "},"browser_notifications":{"title":"","subtitle":""},"website_enhancements":{"title":"","subtitle":" Twitter, YouTube  "},"camera_access":{"title":"","subtitle":" QR codes","allow":"","granted":""},"language":{"title":"","subtitle":" 100% <0> Alby !</0>"},"theme":{"title":"","subtitle":" Alby ","options":{"dark":"","light":"","system":""}},"show_fiat":{"title":" Fiat","subtitle":""},"currency":{"title":"","subtitle":""},"exchange":{"title":"","subtitle":""},"email":{"title":"","placeholder":""},"change_password":{"title":"","screen_reader":"","choose_password":{"label":":"},"submit":{"label":""},"confirm_password":{"label":":"},"errors":{"enter_password":"","confirm_password":"","mismatched_password":""},"success":""},"personal_data":{"title":"","description":"  "},"name":{"title":"","placeholder":""}},"send":{"title":"","input":{"label":"","hint":"Invoice, Lightning Address  LNURL"}},"lnurlpay":{"amount":{"label":""},"comment":{"label":""},"name":{"label":""},"email":{"label":""},"success":"!"},"lnurlauth":{"title":"","content_message":{"heading":""},"submit":"","success":"  {{name}}","errors":{"status":": "}},"lnurlchannel":{"title":" Channel","content_message":{"heading":" channel  node"},"success":" channel  {{name}}"},"lnurlredeem":{"title":"","input":{"label":"LNURL-withdraw code","placeholder":"LNURL..."},"actions":{"withdraw":""},"errors":{"invalid_lnurl":"LNURL","invalid_withdraw_request":" LNURL "}},"receive":{"payment":{"status":"","waiting":""},"title":"","actions":{"create_invoice":" Invoice"},"amount":{"label":"","placeholder":""},"description":{"label":"","placeholder":"  ?"},"success":"!"},"on_chain":{"title":" address ","go":" Alby  ","instructions1":" address   <0>Alby Account</0>  getalby.com","instructions2":" address  <0>Receive</0>"},"keysend":{"title":"","success":"! : {{preimage}}","amount":{"label":" ()"},"receiver":{"label":""}},"nostr":{"block_and_ignore":" {{host}}","title":"Nostr","block_added":" {{host}}  ","allow":":","content":":","view_details":"","hide_details":"","allow_sign":" {{host}} :"},"choose_path":{"other":{"title":"wallets  ","connect":""},"alby":{"title":" Alby","connect":" Alby"}},"choose_connector":{"title":" Lightning Wallet","description":" lightning wallet    node ","lnd":{"page":{"title":" LND node ","description":" URL  node  macaroon  ( admin.macaroon)"},"url":{"label":"Host  Port  API REST","placeholder":"https://your-node-url:8080"},"title":"LND","macaroon":{"label":"Macaroon ( HEX)"},"drag_and_drop":" macaroon   <0>browse</0>","errors":{"connection_failed":" LND credentials ?"}},"lnc":{"pairing_phrase":{"label":"pairing phrase  ","placeholder":""},"title":"Lightning Terminal (LNC)"},"lndhub_go":{"title":"LNDHub","page":{"title":" LNDHub","description":" LNDHub credential URI   QR code  webcam "},"errors":{"connection_failed":" LNDHub URI  ?","invalid_uri":"LNDHub URI "},"uri":{"label":" URI  LNDHub"}},"lnbits":{"page":{"title":" <0>LNbits</0>","instructions":" LNbits, ,  ,  API Info   Admin Key :"},"errors":{"connection_failed":"  URL  Admin Key  ?"},"title":"LNbits","admin_key":{"label":"LNbits Admin Key","placeholder":"Admin Key 32 "},"url":{"label":"LNbits URL"}},"eclair":{"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"},"title":"Eclair","page":{"title":"<0>Eclair</0>","instructions":" Eclair URL  "},"password":{"label":" Eclair"}},"citadel":{"title":"Citadel","page":{"title":"<0>Citaddel</0> node","instructions":" 2FA"},"password":{"label":" Citadel"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"}},"umbrel":{"page":{"instructions":"1.  Lightning node  <0></0><1/>2. <0>REST (TOR)</0>  <0> REST (Local Network)</0><1/>3. <0>Indconnect URL</0> ","title":"<0>Umbrel</0> node"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."},"title":"Umbrel"},"mynode":{"title":"myNode","page":{"title":"<0>myNode</0>","instructions":" myNode  <0>Wallet</0>  <0>lightning</0>   <0>Pair Wallet</0>  <0>Status </0> <1/>    <0>lightning (REST + Local IP)</0>   <0>lightning (REST + Tor)</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"raspiblitz":{"page":{"instructions1":":<1/> 1.<0>SSH</0>  <0>Raspiblitz</0> </1> 2. <0>Connect Apps & Show Credentials<1/></0>3.  <0>Connect Alby to this node</0><1/>4.  <0>OK</0> <1/><1/><0>REST API host</0>  <0>.onion</0> address  Tor ","title":" <0>RaspiBlitz</0> node ","instructions2":" (admin) <0>macaroon</0> "},"title":"RaspiBlitz","rest_api_host":{"label":"REST API host","placeholder":"your-node-onion-address:port"}},"blink":{"title":"Blink plnbok","page":{"title":"Anslut <0>Blink Wallet</0>"}},"bitcoin_jungle":{"title":"Bitcoin Jungle Wallet","page":{"title":" <0>Bitcoin Jungle Wallet</0>"}},"btcpay":{"config":{"label":""},"errors":{"connection_failed":"  BTCPay connection URL  ?"},"title":"BTCPay Server"},"commando":{"page":{"title":" Core Lightning node ","instructions":" Core Lightning  0.12.0    commando plugin  Lightning  rune  \\"lightning-cli commando-rune\\""},"host":{"label":"Host"},"pubkey":{"label":"Public key"},"rune":{"label":"Rune"},"port":{"label":"Port"},"proxy":{"label":"Websocket-proxy"},"privKey":{"label":"Local private key ()"},"title":"Core Lightning","config":{"label":"","placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config"},"errors":{"connection_failed":"  Core Lightning node  commando plugin ?"}},"umbrel_lightning_node":{"title":"Lightning Node"},"startos":{"title":"StartOS","page":{"title":" <0>Staet9 Server</0> ","instructions":" StartOS  <0>Lightning Network Daemon</0> <1/><0>Properties</0><1/><0>LND Connect REST URL.</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}}},"distributions":{"description":" {{name}} ","umbrel":{"name":"Umbrel"},"btcpay":{"name":"BTCPay"},"citadel":{"name":"Citadel"},"raspiblitz":{"name":"RaspiBlitz"},"mynode":{"name":"myNode"},"startos":{"name":"StartOS"},"title":" {{name}}"},"home":{"actions":{"send_satoshis":"","enable_now":""},"default_view":{"is_blocked_hint":"Alby  {{host}}","block_removed":" {{host}}  "}},"lnurlwithdraw":{"success":" {{amount}}  {{sender}} ","title":"","content_message":{"heading":""},"amount":{"label":""}},"scan_qrcode":{"title":""},"publishers":{"title":"","description":" Alby ","no_info":" Alby  ","discover":" ","publisher":{"allowance":{"title":"","used_budget":""}}},"make_invoice":{"title":" Invoice","amount":{"label":" ()"},"memo":{"label":""},"errors":{"amount_too_small":"","amount_too_big":""}},"confirm_sign_pset":{"title":"","allow_sign":" Liquid:","view_details":"","hide_details":"","view_raw_transaction":" (Base64)","hide_raw_transaction":" (Base64)","inputs":"","outputs":"","amount":"{{amount}} {{ticker}}"},"confirm_sign_message":{"title":"","content":":"},"liquid":{"block_and_ignore":" {{host}}","block_added":" {{host}}  ","allow":":","allow_sign":" {{host}} :","title":"Liquid"},"bitcoin":{"block_and_ignore":" {{host}}","block_added":" {{host}}  ","allow":":","confirm_get_address":{"title":" Address"},"allow_sign":" {{host}} :"},"confirm_keysend":{"title":"","success":"! : {{preimage}}","payment_summary":{"description":": {{destination}}"}},"confirm_payment":{"title":"","success":" {{amount}} !","actions":{"pay_now":""}},"confirm_request_permission":{"title":"","allow":":","always_allow":""},"confirm_add_account":{"title":"","content":" ({{connector}}):","tor_info":" TOR  Alby companion app :"},"transactions":{"title":""}},"mk":{"commando":{"invoice":"","keysend":" node ","listfunds":"","listinvoices":" invoice ","listoffers":"","offer":"","pay":" invoice BOLT11","connect":" node ","decode":" bolt11/bolt12/rune","decodepay":" Bolt11","feerates":" CLN ","fundchannel":"","getinfo":" node","getroute":" lightning node","listforwards":" htlcs ","listnodes":" node  gossip messages","listtransactions":" wallet","sendpay":" route","bkpr-listbalances":"","checkmessage":" node ","disconnect":" peer","listpays":"","multifundchannel":" node ","setchannel":" /  htlc  channel","signmessage":" node ","listpeers":" node  channel  node ","listsendpays":""},"lnd":{"listinvoices":" invoice ","walletbalance":" wallet","openchannel":" channel ","getnetworkinfo":" channel graph ","getchaninfo":" channel ","settleinvoice":" invoice ","getinfo":" node","channelbalance":" channel ","disconnectpeer":" node ","estimatefee":"","gettransactions":" wallet","listpayments":"","listpeers":"","lookupinvoice":" invoice","queryroutes":"","decodepayreq":"","addinvoice":" invoice ","addholdinvoice":" HODL invoice ","routermc":"","listchannels":" channel ","connectpeer":" node ","getnodeinfo":" channel  node","verifymessage":"","sendtoroute":""},"lnc":{"sendtoroute":"","decodepayreq":"","routermc":"","openchannel":" channel ","connectpeer":" node ","disconnectpeer":" node ","estimatefee":"","getchaninfo":" channel ","getnetworkinfo":" channel graph ","getnodeinfo":" channel  node","gettransactions":" wallet","listpayments":"","listpeers":"","lookupinvoice":" invoice","queryroutes":"","verifymessage":"","addholdinvoice":" HODL invoice ","settleinvoice":" invoice ","addinvoice":" invoice ","getinfo":" node","listchannels":" channel ","listinvoices":" invoice ","channelbalance":" channel ","walletbalance":" wallet"}},"y0":{"amount":"","optional":"","feedback":"","copied":"!","pasted":"!","message":"","help":"","balance":"","or":"","actions":{"back":"","delete":"","edit":"","send":"","save":"","import":"","unlock":"","open":"","cancel":"","confirm":"","continue":"","connect":"","lock":"","receive":"","remember":"","more":" ","download":"","log_in":"","next":"","transactions":"","close":"","export":"","remove":"","copy":"","copy_clipboard":"","paste":"","paste_clipboard":"","copy_invoice":" Invoice","receive_again":""},"connectors":{"lnd":"LND","nativelnd":"LND( Tor)","lndhub":"LNDHub","nativelndhub":"LNDHub(Tor)","lnbits":"LNbits","nativelnbits":"LNbits( Tor)","galoy":"Galoy","eclair":"Eclair","citadel":"Citadel","nativecitadel":"Citadel ( Tor)","commando":"Commando"},"range":{"between":" {{min}}  {{max}}","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"description":"","description_full":"","success_message":"{{amount}}{{fiatAmount}}  {{destination}}","response":"","password":"","confirm_password":"","sats_other":"","loading":"","errors":{"connection_failed":"","payment_failed":""},"success":"","error":"","accounts":"","discover":"","connected_sites":"","wallet":"","sats_one":""},"wx":{"allowance_menu":{"hint":"","new_budget":{"label":""},"enable_login":{"title":"","subtitle":""},"edit_allowance":{"title":"","screen_reader":""},"confirm_delete":" ?"},"qrcode_scanner":{"title":" QR Code","actions":{"start_scanning":"","stop_scanning":""},"errors":{"allow_camera_access":""}},"companion_download_info":{"download":"","companion":{"title":"Companion App","description":"Lightweight app  TOR"},"tor_native":{"title":"TOR (native)","description":" TOR "},"heading":" TOR ?"},"budget_control":{"remember":{"label":"","description":""},"budget":{"label":""}},"toasts":{"connection_error":{"what_you_can_do":":","double_check":"","if_ssl_errors":" SSL ( ERR_CERT_AUTHORITY_INVALID)  \\"\\" ","visit_guides":""},"login_failed":{"password_reset":" ? "},"errors":{"invalid_credentials":"  "}},"transactions_table":{"fee":"","preimage":"Preimage","received":"","sent":"","boostagram":{"sender":"","message":"","app":"","podcast":""},"open_location":""},"account_menu":{"screen_reader":"","options":{"account":{"go_to_web_wallet":""}}},"publishers_table":{"payments":""},"badge":{"label":{"auth":"","imported":""}}}}'),gt=JSON.parse('{"xk":{"welcome":{"set_password":{"choose_password":{"label":""},"confirm_password":{"label":""},"errors":{"enter_password":"","confirm_password":"","mismatched_password":""}},"test_connection":{"ready":"!","initializing":"","connection_error":"","review_connection_details":"","connection_taking_long":"","contact_support":"support@getalby.com","actions":{"delete_edit_account":""}},"pin_extension":{"title":" Alby ","description":" Alby","next_btn":" Alby {{icon}}","explanation":"1.<0/><1/>2.Alby<1/>3.Alby<2/>"}},"choose_connector":{"lnd":{"errors":{"connection_failed":"LND"},"page":{"description":"URLmacaroonadmin.macaroon","title":"LND"},"url":{"label":"REST API","placeholder":"https://your-node-url:8080"},"macaroon":{"label":"Macaroon(HEX)"},"drag_and_drop":"macaroon<0></0>","title":"LND"},"eclair":{"url":{"label":"Eclair URL","placeholder":"http://localhost:8080"},"page":{"title":" <0>Eclair</0>","instructions":" Eclair URL "},"password":{"label":"Eclair"},"title":"Eclair"},"citadel":{"page":{"title":"<0>Citadel</0>","instructions":"2FA"},"password":{"label":"Citadel"},"url":{"label":"Citadel URL","placeholder":"http://citadel.local"},"title":"Citadel"},"blink":{"title":"","page":{"title":"<0></0>"}},"bitcoin_jungle":{"title":"","page":{"title":"<0></0>"}},"btcpay":{"title":"BTCPay Server","errors":{"connection_failed":"BTCPayURL"},"config":{"label":""}},"commando":{"config":{"placeholder":"config=https://your-btc-pay.org/lnd-config/212121/lnd.config","label":""},"errors":{"connection_failed":"Core Lightningcommando"},"title":"Core Lightning","page":{"title":"Core Lightning","instructions":"Core Lightning 0.12.0commando\'lightning-cli commando-rune\'rune"},"host":{"label":""},"pubkey":{"label":""},"rune":{"label":"Rune"},"proxy":{"label":"Websocket"},"port":{"label":""},"privKey":{"label":""}},"startos":{"page":{"instructions":" StartOS  <0>Lightning Network Daemon</0> <1/> <0>Properties</0> <1/> <0>LND Connect REST URL</0>","title":"<0>StartOS </0>"},"rest_url":{"placeholder":"lndconnect://yournode:8080?...","label":"lndconnect REST URL"},"title":"StartOS"},"raspiblitz":{"page":{"instructions2":"admin<0>macaroon</0>","instructions1":"<1/> 1.<0>SSH</0><0>Raspiblitz</0><1/>2<0>Connect Apps & Show Credentials</0><1/><0/>3 <0>Connect Alby to this node</0><1/>4 <0>OK</0> <1/><1/><0>REST API </0> <0>.onion</0>  Tor ","title":"<0>RaspiBlitz</0>"},"rest_api_host":{"label":"REST API","placeholder":"your-node-onion-address:port"},"title":"RaspiBlitz"},"lndhub_go":{"title":"LNDHub","page":{"title":"LNDHub","description":"LNDHubURI"},"errors":{"invalid_uri":"LNDHub URI","connection_failed":"LNDHub URI"},"uri":{"label":"LNDHubURI"}},"lnbits":{"url":{"label":"LNbits URL"},"errors":{"connection_failed":"URL"},"title":"LNbits","page":{"title":"<0>LNbits</0>","instructions":"LNbitsAPI"},"admin_key":{"label":"LNbits","placeholder":"32"}},"umbrel":{"page":{"title":"<0>Umbrel</0>","instructions":"1. Umbrel<0></0><1/>2. <0>REST (Tor)</0><0>REST </0><1/>3. <0>lndconnect URL</0>"},"title":"Umbrel","rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"description":"","mynode":{"title":"myNode","page":{"title":"<0>myNode</0>","instructions":"myNode<0>Lightning</0><0>Wallet</0><1/> <0>Status</0><0>Pair Wallet</0><1/><0>REST +IP</0><0>REST + Tor</0>"},"rest_url":{"label":"lndconnect REST URL","placeholder":"lndconnect://yournode:8080?..."}},"lnc":{"title":"Lightning Terminal (LNC)","pairing_phrase":{"placeholder":"","label":" "}}},"home":{"default_view":{"is_blocked_hint":"Alby  {{host}} ","block_removed":"{{host}}"},"actions":{"send_satoshis":"  ","enable_now":""}},"accounts":{"account_view":{"nostr":{"errors":{"failed_to_load":" Nostr  Nostr "},"title":"Nostr","public_key":{"label":"Nostr "},"generate_keys":{"screen_reader":"Nostr","actions":{"random_keys":"","derived_keys":""},"title":" Nostr ","hint":" <0>\\"</0>"},"actions":{"generate":""},"private_key":{"subtitle":" Nostr <0></0>","title":" Nostr ","success":"Nostr ","successfully_removed":"Nostr ","label":"Nostr ","failed_to_remove":" Nostr "},"hint":"Nostr  Alby  Nostr  Nostr  Alby ","settings":{"label":"Nostr ","title":"Nostr ","imported_key_warning":"  Nostr   Nostr  Nostr ","can_restore":" Nostr ","derive":"","no_secret_key":"  <0></0></div> nostr ","description":" Nostr Nostr ","remove":""},"setup":{"description2":" Alby  Nostr <0></0>  12 Nostr ","title":" nostr ","description":" nostr ","new":{"label":" nostr ","description":" nostr "}}},"export":{"export_uri":"LNDHubURI","scan_qr":"ZeusBlueWallet","title":"","screen_reader":"","waiting":"LndHub...","your_ln_address":"","description":" <0>BlueWallet</0>  <1>Zeus</1>"},"remove":{"error":""},"actions":{"export":"","remove_secretkey":""},"title2":"","name":{"title":"","placeholder":""},"mnemonic":{"backup":{"button":"","warning":" Nostr ","save":"","protocols":{"nostr":"Nostr"},"description":""},"existing_nostr_key_notice":"  nostr  nostr ","title":"","saved":"","generate":{"title":"","button":"","description":"Nostr LNURL-auth"},"import":{"title":"","description":" Alby","button":""},"lnurl":{"title":"","use_mnemonic":"LNURL Auth"}},"remove_secretkey":{"success":"","title":"","subtitle":""},"no_mnemonic_hint":" <0>e</0></div>","network":{"title":"","subtitle":" Liquid ","options":{"bitcoin":"","testnet":"","regtest":"Regtest"}}}},"unlock":{"help_contact":{"part2":"Alby","part1":"? "},"unlock_to_continue":"","errors":{"invalid_password":""},"unlock_error":{"help":"","link":""},"unlock_password":""},"publishers":{"publisher":{"allowance":{"used_budget":"","title":""}},"description":"Alby","no_info":" Alby","discover":"","title":""},"settings":{"lnurl_auth":{"title":"LNURL-","legacy_lnurl_auth":{"title":"LNDhub  LNbits ","subtitle":" LNDhub BlueWallet LNbits 20223"},"hint":" Alby <0></0>","legacy_lnurl_auth_202207":{"subtitle":"LNURL-20227AlbyLNURL-","title":" LNURL-"}},"browser_notifications":{"title":"","subtitle":""},"language":{"subtitle":"100% <0>Alby</0>","title":""},"name":{"title":"","placeholder":""},"change_password":{"screen_reader":"","errors":{"confirm_password":"","mismatched_password":"","enter_password":""},"choose_password":{"label":""},"success":"","title":"","confirm_password":{"label":""},"submit":{"label":""}},"theme":{"options":{"system":"","dark":"","light":""},"title":"","subtitle":" Alby"},"website_enhancements":{"subtitle":"TwitterYouTube","title":""},"camera_access":{"subtitle":"","allow":"","granted":"","title":""},"show_fiat":{"subtitle":"","title":""},"exchange":{"title":"","subtitle":""},"personal_data":{"title":"","description":""},"email":{"title":"","placeholder":""},"currency":{"title":"","subtitle":""}},"keysend":{"receiver":{"label":""},"success":"{{preimage}}","amount":{"label":"()"},"title":""},"send":{"input":{"hint":"LNURL","label":"","hint_with_bitcoin_address":"LNURL"},"title":""},"lnurlauth":{"submit":"","content_message":{"heading":""},"title":"","success":" {{name}}","errors":{"status":""}},"lnurlwithdraw":{"content_message":{"heading":""},"amount":{"label":""},"title":"","success":"{{sender}}{{amount}}"},"receive":{"actions":{"create_invoice":""},"amount":{"placeholder":"...","label":""},"description":{"label":"","placeholder":""},"success":"!","payment":{"waiting":"...","status":""},"title":""},"make_invoice":{"memo":{"label":""},"errors":{"amount_too_small":"","amount_too_big":""},"title":"","amount":{"label":"()"}},"confirm_sign_message":{"content":":","title":""},"confirm_request_permission":{"allow":"","always_allow":"","title":""},"nostr":{"title":"Nostr","allow":":","block_and_ignore":" {{host}}","content":":","allow_sign":"{{host}}","block_added":"{{host}}","view_details":"","hide_details":""},"lnurlpay":{"amount":{"label":""},"comment":{"label":""},"email":{"label":""},"success":"","name":{"label":""}},"confirm_payment":{"actions":{"pay_now":""},"title":"","success":"{{amount}}!"},"confirm_keysend":{"title":"","success":"! : {{preimage}}","payment_summary":{"description":" {{destination}}"}},"choose_path":{"other":{"title":"","connect":""},"alby":{"title":"Alby","connect":" Alby "}},"alby":{"pre_connect":{"set_password":{"choose_password":{"label":""},"confirm_password":{"label":""},"errors":{"enter_password":"","confirm_password":"","mismatched_password":""}}}},"lnurlchannel":{"content_message":{"heading":""},"title":"","success":" {{name}}"},"transactions":{"title":""},"distributions":{"title":" {{name}}","description":"{{name}}","citadel":{"name":"Citadel"},"btcpay":{"name":"BTCPay"},"raspiblitz":{"name":"Raspiblitz"},"mynode":{"name":"myNode"},"startos":{"name":"StartOS"},"umbrel":{"name":"Umbrel"}},"confirm_add_account":{"title":"","content":"{{connector}}","tor_info":" TOR  Alby "},"on_chain":{"instructions1":" getalby.com  <0>Alby </0>","go":" Alby  ","title":"","instructions2":"<0></0>"},"lnurlredeem":{"title":"","actions":{"withdraw":""},"input":{"label":"LNURL-","placeholder":"LNURL..."},"errors":{"invalid_withdraw_request":" LNURL ","invalid_lnurl":" LNURL"}},"scan_qrcode":{"title":""},"confirm_sign_pset":{"title":"","view_details":"","inputs":"","allow_sign":" Liquid ","view_raw_transaction":"Base64","hide_raw_transaction":"Base64","hide_details":"","outputs":"","amount":"{{amount}} {{ticker}}"},"bitcoin":{"allow_sign":"{{host}}","block_and_ignore":"{{host}}","block_added":" {{host}}","confirm_get_address":{"title":""},"allow":""},"liquid":{"title":"Liquid","allow_sign":"{{host}}","allow":"","block_and_ignore":"{{host}}","block_added":"{{host}}"},"send_to_bitcoin_address":{"view_on_explorer":"","title":"","recipient":{"label":""},"network_fee":{"label":""},"total":{"label":""},"service_fee":{"label":""},"provider":{"label":""},"service_unavailable":"","amount":{"label":""},"total_fee":{"label":""},"time_estimate":" 1030"}},"y0":{"actions":{"lock":"","receive":"","close":"","back":"","next":"","cancel":"","delete":"","edit":"","export":"","remove":"","continue":"","connect":"","unlock":"","send":"","save":"","open":"","confirm":"","copy":"","copy_invoice":"","log_in":"","receive_again":"","remember":"","transactions":"","more":"","download":"","import":"","copy_clipboard":"","paste":"","paste_clipboard":"","review":""},"errors":{"connection_failed":"","payment_failed":""},"feedback":"","success":"","description_full":"","password":"","connected_sites":"","amount":"","optional":"","description":"","message":"","sats_one":"sat","sats_other":"","success_message":"{{amount}}{{fiatAmount}}{{destination}}","response":"","help":"","copied":"","error":"","loading":"","accounts":"","confirm_password":"","discover":"","range":{"between":" {{min}}  {{max}} ","lessThanOrEqual":" {{max}}","greaterOrEqual":" {{min}}"},"balance":"","wallet":"","connectors":{"lnd":"LND","nativelnd":"LND Tor","lndhub":"LNDHub","nativelndhub":"LNDHub Tor","lnbits":"LNBits","nativelnbits":"LNBits Tor","galoy":"Galoy","eclair":"Eclair","citadel":"Citadel","nativecitadel":"Citadel Tor","commando":"Commando"},"or":"","pasted":""},"wx":{"toasts":{"login_failed":{"password_reset":""},"errors":{"invalid_credentials":""},"connection_error":{"visit_guides":"","what_you_can_do":"","double_check":"","if_ssl_errors":"SSLERR_CERT_AUTHORITY_INVALID \\" \\""}},"account_menu":{"options":{"account":{"go_to_web_wallet":""}},"screen_reader":""},"allowance_menu":{"hint":"","confirm_delete":"","new_budget":{"label":""},"enable_login":{"title":"","subtitle":""},"edit_allowance":{"title":"","screen_reader":""}},"transactions_table":{"boostagram":{"podcast":"","message":"","app":"","sender":""},"received":"","sent":"","fee":"","preimage":"","open_location":""},"budget_control":{"remember":{"label":"","description":""},"budget":{"label":""}},"qrcode_scanner":{"title":"","actions":{"stop_scanning":"","start_scanning":""},"errors":{"allow_camera_access":""}},"badge":{"label":{"auth":"","imported":""}},"publishers_table":{"payments":""},"companion_download_info":{"heading":" TOR ","download":"","tor_native":{"title":"TOR","description":" TOR "},"companion":{"title":"","description":" TOR "}}},"mk":{"commando":{"bkpr-listbalances":"","checkmessage":"","decode":" bolt11/bolt12/rune ","connect":"","decodepay":" bolt11 ","disconnect":"","fundchannel":"","getroute":"","invoice":"","listforwards":" htlc","listfunds":"","listnodes":"","listpeers":"","listsendpays":" sendpay ","listtransactions":"","offer":"","multifundchannel":"","pay":" BOLT11 ","signmessage":"","keysend":"","listinvoices":"","getinfo":"","listoffers":"","setchannel":" / htlc ","sendpay":"","feerates":" CLN ","listpays":""},"lnc":{"getnodeinfo":"","gettransactions":"","listpeers":"","addinvoice":"","getinfo":"","listinvoices":"","walletbalance":"","connectpeer":"","disconnectpeer":"","estimatefee":"","getnetworkinfo":"","listpayments":"","lookupinvoice":"","listchannels":"","channelbalance":"","getchaninfo":"","openchannel":"","sendtoroute":"","routermc":"","queryroutes":"","verifymessage":"","decodepayreq":"","addholdinvoice":" HODL ","settleinvoice":""},"lnd":{"sendtoroute":"","queryroutes":"","verifymessage":"","lookupinvoice":"","listpeers":"","listinvoices":"","channelbalance":"","walletbalance":"","disconnectpeer":"","estimatefee":"","getchaninfo":"","getnetworkinfo":"","getnodeinfo":"","gettransactions":"","listpayments":"","decodepayreq":"","routermc":"","addinvoice":"","getinfo":"","listchannels":"","connectpeer":"","openchannel":"","addholdinvoice":" HODL ","settleinvoice":""}}}');var bt={en:{translation:at.xk,common:at.y0,components:at.wx,permissions:at.mk},cs:{translation:rt.xk,common:rt.y0,components:rt.wx,permissions:rt.mk},da:{translation:it.xk,common:it.y0,components:it.wx,permissions:it.mk},de:{translation:ot.xk,common:ot.y0,components:ot.wx,permissions:ot.mk},es:{translation:st.xk,common:st.y0,components:st.wx,permissions:st.mk},fr:{translation:ct.xk,common:ct.y0,components:ct.wx,permissions:ct.mk},it:{translation:lt.xk,common:lt.y0,components:lt.wx,permissions:lt.mk},hi:{translation:ut.xk,common:ut.y0,components:ut.wx,permissions:ut.mk},mr:{translation:ft.xk,common:ft.y0,components:ft.wx,permissions:ft.mk},pl:{translation:ht.xk,common:ht.y0,components:ht.wx,permissions:ht.mk},"pt-BR":{translation:dt.xk,common:dt.y0,components:dt.wx,permissions:dt.mk},sv:{translation:pt.xk,common:pt.y0,components:pt.wx,permissions:pt.mk},th:{translation:yt.xk,common:yt.y0,components:yt.wx,permissions:yt.mk},"zh-CN":{translation:gt.xk,common:gt.y0,components:gt.wx,permissions:gt.mk}};Ie.use(nt).use(Ze).init({fallbackLng:"en",ns:["translation","common","components","permissions"],defaultNS:"translation",resources:bt});const mt=Ie;var wt,vt={browserNotifications:!0,websiteEnhancements:!0,legacyLnurlAuth:!1,isUsingLegacyLnurlAuthKey:!1,userName:"",userEmail:"",locale:null!==(wt=mt.resolvedLanguage)&&void 0!==wt?wt:"en",theme:"system",showFiat:!0,currency:r.USD,exchange:"alby",nostrEnabled:!1};const _t=2n**256n,Et=_t-0x1000003d1n,St=_t-0x14551231950b75fc4402da1732fc9bebfn,kt=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,At=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,Ot={p:Et,n:St,a:0n,b:7n,Gx:kt,Gy:At},Pt=32,It=e=>jt(jt(e*e)*e+Ot.b),Tt=(e="")=>{throw new Error(e)},xt=e=>"bigint"==typeof e,Nt=e=>"string"==typeof e,Rt=e=>xt(e)&&0n<e&&e<Et,Ct=e=>xt(e)&&0n<e&&e<St,Bt=(e,t)=>!(e instanceof Uint8Array)||"number"==typeof t&&t>0&&e.length!==t?Tt("Uint8Array expected"):e,Lt=e=>new Uint8Array(e),Ut=(e,t)=>Bt(Nt(e)?Vt(e):Lt(e),t),jt=(e,t=Et)=>{let n=e%t;return n>=0n?n:t+n},Dt=e=>e instanceof Ht?e:Tt("Point expected");let Mt;class Ht{constructor(e,t,n){this.px=e,this.py=t,this.pz=n}static fromAffine(e){return new Ht(e.x,e.y,1n)}static fromHex(e){let t;const n=(e=Ut(e))[0],r=e.subarray(1),i=Gt(r,0,Pt),o=e.length;if(33===o&&[2,3].includes(n)){Rt(i)||Tt("Point hex invalid: x not FE");let e=Jt(It(i));1==(1&n)!==(1n===(1n&e))&&(e=jt(-e)),t=new Ht(i,e,1n)}return 65===o&&4===n&&(t=new Ht(i,Gt(r,Pt,2*Pt),1n)),t?t.ok():Tt("Point is not on curve")}static fromPrivateKey(e){return Ft.mul(Qt(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){const{px:t,py:n,pz:r}=this,{px:i,py:o,pz:a}=Dt(e),s=jt(t*a),c=jt(i*r),u=jt(n*a),l=jt(o*r);return s===c&&u===l}negate(){return new Ht(this.px,jt(-this.py),this.pz)}double(){return this.add(this)}add(e){const{px:t,py:n,pz:r}=this,{px:i,py:o,pz:a}=Dt(e),{a:s,b:c}=Ot;let u=0n,l=0n,f=0n;const h=jt(3n*c);let d=jt(t*i),p=jt(n*o),y=jt(r*a),g=jt(t+n),b=jt(i+o);g=jt(g*b),b=jt(d+p),g=jt(g-b),b=jt(t+r);let m=jt(i+a);return b=jt(b*m),m=jt(d+y),b=jt(b-m),m=jt(n+r),u=jt(o+a),m=jt(m*u),u=jt(p+y),m=jt(m-u),f=jt(s*b),u=jt(h*y),f=jt(u+f),u=jt(p-f),f=jt(p+f),l=jt(u*f),p=jt(d+d),p=jt(p+d),y=jt(s*y),b=jt(h*b),p=jt(p+y),y=jt(d-y),y=jt(s*y),b=jt(b+y),d=jt(p*b),l=jt(l+d),d=jt(m*b),u=jt(g*u),u=jt(u-d),d=jt(g*p),f=jt(m*f),f=jt(f+d),new Ht(u,l,f)}mul(e,t=!0){if(!t&&0n===e)return zt;if(Ct(e)||Tt("invalid scalar"),this.equals(Ft))return gn(e).p;let n=zt,r=Ft;for(let i=this;e>0n;i=i.double(),e>>=1n)1n&e?n=n.add(i):t&&(r=r.add(i));return n}mulAddQUns(e,t,n){return this.mul(t,!1).add(e.mul(n,!1)).ok()}toAffine(){const{px:e,py:t,pz:n}=this;if(this.equals(zt))return{x:0n,y:0n};if(1n===n)return{x:e,y:t};const r=Xt(n);return 1n!==jt(n*r)&&Tt("invalid inverse"),{x:jt(e*r),y:jt(t*r)}}assertValidity(){const{x:e,y:t}=this.aff();return Rt(e)&&Rt(t)||Tt("Point invalid: x or y"),jt(t*t)===It(e)?this:Tt("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){const{x:t,y:n}=this.aff();return(e?0n===(1n&n)?"02":"03":"04")+Yt(t)+(e?"":Yt(n))}toRawBytes(e=!0){return Vt(this.toHex(e))}}Ht.BASE=new Ht(kt,At,1n),Ht.ZERO=new Ht(0n,1n,0n);const{BASE:Ft,ZERO:zt}=Ht,Kt=(e,t)=>e.toString(16).padStart(t,"0"),qt=e=>Array.from(e).map((e=>Kt(e,2))).join(""),Vt=e=>{const t=e.length;(!Nt(e)||t%2)&&Tt("hex invalid 1");const n=Lt(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);(Number.isNaN(o)||o<0)&&Tt("hex invalid 2"),n[t]=o}return n},Wt=e=>BigInt("0x"+(qt(e)||"0")),Gt=(e,t,n)=>Wt(e.slice(t,n)),$t=e=>xt(e)&&e>=0n&&e<_t?Vt(Kt(e,2*Pt)):Tt("bigint expected"),Yt=e=>qt($t(e)),Zt=(...e)=>{const t=Lt(e.reduce(((e,t)=>e+Bt(t).length),0));let n=0;return e.forEach((e=>{t.set(e,n),n+=e.length})),t},Xt=(e,t=Et)=>{(0n===e||t<=0n)&&Tt("no inverse n="+e+" mod="+t);let n=jt(e,t),r=t,i=0n,o=1n,a=1n,s=0n;for(;0n!==n;){const e=r/n,t=r%n,c=i-a*e,u=o-s*e;r=n,n=t,i=a,o=s,a=c,s=u}return 1n===r?jt(i,t):Tt("no inverse")},Jt=e=>{let t=1n;for(let n=e,r=(Et+1n)/4n;r>0n;r>>=1n)1n&r&&(t=t*n%Et),n=n*n%Et;return jt(t*t)===e?t:Tt("sqrt invalid")},Qt=e=>(xt(e)||(e=Wt(Ut(e,Pt))),Ct(e)?e:Tt("private key out of range")),en=e=>e>St>>1n;function tn(e,t=!0){return Ht.fromPrivateKey(e).toRawBytes(t)}class nn{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){return e=Ut(e,64),new nn(Gt(e,0,Pt),Gt(e,Pt,2*Pt))}assertValidity(){return Ct(this.r)&&Ct(this.s)?this:Tt()}addRecoveryBit(e){return new nn(this.r,this.s,e)}hasHighS(){return en(this.s)}recoverPublicKey(e){const{r:t,s:n,recovery:r}=this;[0,1,2,3].includes(r)||Tt("recovery id invalid");const i=on(Ut(e,32)),o=2===r||3===r?t+St:t;o>=Et&&Tt("q.x invalid");const a=0==(1&r)?"02":"03",s=Ht.fromHex(a+Yt(o)),c=Xt(o,St),u=jt(-i*c,St),l=jt(n*c,St);return Ft.mulAddQUns(s,u,l)}toCompactRawBytes(){return Vt(this.toCompactHex())}toCompactHex(){return Yt(this.r)+Yt(this.s)}}const rn=e=>{const t=8*e.length-256,n=Wt(e);return t>0?n>>BigInt(t):n},on=e=>jt(rn(e),St),an=e=>$t(e),sn=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;let cn;const un={lowS:!0};function ln(e,t,n=un){["der","recovered","canonical"].some((e=>e in n))&&Tt("sign() legacy options not supported");let{lowS:r}=n;null==r&&(r=!0);const i=on(Ut(e)),o=an(i),a=Qt(t),s=[an(a),o];let c=n.extraEntropy;if(c){!0===c&&(c=yn.randomBytes(Pt));const e=Ut(c);e.length!==Pt&&Tt(),s.push(e)}const u=i;return{seed:Zt(...s),k2sig:e=>{const t=rn(e);if(!Ct(t))return;const n=Xt(t,St),i=Ft.mul(t).aff(),o=jt(i.x,St);if(0n===o)return;const s=jt(n*jt(u+jt(a*o,St),St),St);if(0n===s)return;let c=s,l=(i.x===o?0:2)|Number(1n&i.y);return r&&en(s)&&(c=jt(-s,St),l^=1),new nn(o,c,l)}}}function fn(e){let t=Lt(Pt),n=Lt(Pt),r=0;const i=()=>{t.fill(1),n.fill(0),r=0},o="drbg: tried 1000 values";if(e){const e=(...e)=>yn.hmacSha256Async(n,t,...e),a=async(r=Lt())=>{n=await e(Lt([0]),r),t=await e(),0!==r.length&&(n=await e(Lt([1]),r),t=await e())},s=async()=>(r++>=1e3&&Tt(o),t=await e(),t);return async(e,t)=>{let n;for(i(),await a(e);!(n=t(await s()));)await a();return i(),n}}{const e=(...e)=>{const r=cn;return r||Tt("etc.hmacSha256Sync not set"),r(n,t,...e)},a=(r=Lt())=>{n=e(Lt([0]),r),t=e(),0!==r.length&&(n=e(Lt([1]),r),t=e())},s=()=>(r++>=1e3&&Tt(o),t=e(),t);return(e,t)=>{let n;for(i(),a(e);!(n=t(s()));)a();return i(),n}}}async function hn(e,t,n=un){const{seed:r,k2sig:i}=ln(e,t,n);return fn(!0)(r,i)}function dn(e,t,n=!0){return Ht.fromHex(t).mul(Qt(e)).toRawBytes(n)}function pn(e){e=Ut(e);const t=Pt+8;(e.length<t||e.length>1024)&&Tt("expected proper params");const n=jt(Wt(e),St-1n)+1n;return $t(n)}const yn={hexToBytes:Vt,bytesToHex:qt,concatBytes:Zt,bytesToNumberBE:Wt,numberToBytesBE:$t,mod:jt,invert:Xt,hmacSha256Async:async(e,...t)=>{const n=sn();if(!n)return Tt("etc.hmacSha256Async not set");const r=n.subtle,i=await r.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Lt(await r.sign("HMAC",i,Zt(...t)))},hmacSha256Sync:cn,hashToPrivateKey:pn,randomBytes:e=>{const t=sn();return t||Tt("crypto.getRandomValues must be defined"),t.getRandomValues(Lt(e))}};Object.defineProperties(yn,{hmacSha256Sync:{configurable:!1,get:()=>cn,set(e){cn||(cn=e)}}});const gn=e=>{const t=Mt||(Mt=(()=>{const e=[];let t=Ft,n=t;for(let r=0;r<33;r++){n=t,e.push(n);for(let r=1;r<128;r++)n=n.add(t),e.push(n);t=n.double()}return e})()),n=(e,t)=>{let n=t.negate();return e?n:t};let r=zt,i=Ft;const o=BigInt(255),a=BigInt(8);for(let s=0;s<33;s++){const c=128*s;let u=Number(e&o);e>>=a,u>128&&(u-=256,e+=1n);const l=c,f=c+Math.abs(u)-1,h=s%2!=0,d=u<0;0===u?i=i.add(n(h,t[l])):r=r.add(n(d,t[f]))}return{p:r,f:i}};var bn=a(17656),mn=a(45217),wn=a(77235),vn=a.t(wn,2),Buffer=a(48764).Buffer;function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sn="m/86'/0'/0'/0",kn="m/86'/1'/0'/0",An=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),En(this,"networkType",void 0),En(this,"mnemonic",void 0),En(this,"network",void 0),this.mnemonic=t,this.networkType=n,this.network=bn.QW[this.networkType],bn.Wi(vn)}var t,n,r;return t=e,n=[{key:"signPsbt",value:function(e){var t="bitcoin"===this.networkType?Sn:kn,n="".concat(t,"/").concat(0),r=this.mnemonic.deriveKey(n),i=bn._B.fromHex(e,{network:this.network}),o=(0,mn.default)(vn),a=function(e,t,n){var r=t.privateKey;if(!r)throw new Error("Private key is required for tweaking signer!");3===t.publicKey[0]&&(r=wn.privateNegate(r));var i=wn.privateAdd(r,function(e,t){return bn.eL.taggedHash("TapTweak",Buffer.concat(t?[e,t]:[e]))}(Pn(t.publicKey),n.tweakHash));if(!i)throw new Error("Invalid tweaked private key!");return e.fromPrivateKey(Buffer.from(i),{network:n.network})}(o,o.fromPrivateKey(Buffer.from(r.privateKey),{network:this.network}),{network:this.network});return i.data.inputs.forEach((function(e,t){i.signTaprootInput(t,a)})),i.finalizeAllInputs(),i.extractTransaction().toHex()}},{key:"getTaprootAddress",value:function(){var e="bitcoin"===this.networkType?Sn:kn,t="".concat(e,"/").concat(0),n=this.mnemonic.deriveKey(t),r=bn.PP.p2tr({internalPubkey:Pn(Buffer.from(n.publicKey)),network:this.network}).address;if(!r)throw new Error("No taproot address found from private key");return{address:r,derivationPath:t,index:0,publicKey:yn.bytesToHex(n.publicKey)}}},{key:"getPsbtPreview",value:function(e){for(var t=function(e){var t=r.txOutputs[e],o=t.address||t.script&&function(){try{return bn.Lk.fromOutputScript(t.script,n.network)}catch(e){console.error(e)}}()||"UNKNOWN",a={amount:t.value,address:o};i.outputs.push(a)},n=this,r=bn._B.fromHex(e,{network:this.network}),i={inputs:[],outputs:[],fee:0},o=0;o<r.data.inputs.length;o++){var a,s,c,u=r.data.inputs[o].tapInternalKey||(null===(s=r.data.inputs[o].tapBip32Derivation)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.pubkey),l="UNKNOWN";if(u){var f=bn.PP.p2tr({internalPubkey:u,network:this.network}).address;f&&(l=f)}if(!r.data.inputs[o].witnessUtxo)throw new Error("No witnessUtxo in input "+o);i.inputs.push({amount:(null===(c=r.data.inputs[o].witnessUtxo)||void 0===c?void 0:c.value)||0,address:l})}for(var h=0;h<r.data.outputs.length;h++)t(h);var d=!0,p=!1,y=void 0;try{for(var g,b=i.inputs[Symbol.iterator]();!(d=(g=b.next()).done);d=!0){var m=g.value;i.fee+=m.amount}}catch(e){p=!0,y=e}finally{try{d||null==b.return||b.return()}finally{if(p)throw y}}var w=!0,v=!1,_=void 0;try{for(var E,S=i.outputs[Symbol.iterator]();!(w=(E=S.next()).done);w=!0){var k=E.value;i.fee-=k.amount}}catch(e){v=!0,_=e}finally{try{w||null==S.return||S.return()}finally{if(v)throw _}}return i}}],n&&_n(t.prototype,n),r&&_n(t,r),e}();const On=An;var Pn=function(e){return 32===e.length?e:e.slice(1,33)};function In(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Tn(e,...t){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function xn(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");In(e.outputLen),In(e.blockLen)}function Nn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Rn(e,t){Tn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}function Cn(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const Bn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ln=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const Un=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const jn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Dn(e){return e>=jn._0&&e<=jn._9?e-jn._0:e>=jn._A&&e<=jn._F?e-(jn._A-10):e>=jn._a&&e<=jn._f?e-(jn._a-10):void 0}function Mn(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function Hn(e){if("string"==typeof e&&(e=Mn(e)),!Cn(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function Fn(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(!Cn(r))throw new Error("Uint8Array expected");t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}class zn{clone(){return this._cloneInto()}}function Kn(e){const t=t=>e().update(Hn(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class qn extends zn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,xn(e);const n=Hn(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Nn(this),this.iHash.update(e),this}digestInto(e){Nn(this),Tn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vn=(e,t,n)=>new qn(e,t).update(n).digest();Vn.create=(e,t)=>new qn(e,t);class Wn extends zn{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bn(this.buffer)}update(e){Nn(this);const{view:t,buffer,blockLen:n}=this,r=(e=Hn(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)buffer.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Bn(e);for(;n<=r-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nn(this),Rn(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:r}=this;let{pos:i}=this;buffer[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(t,0),i=0);for(let e=i;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),r),this.process(t,0);const o=Bn(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=a/4,c=this.get();if(s>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<s;e++)o.setUint32(4*e,c[e],r)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}const Gn=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),$n=Uint8Array.from({length:16},((e,t)=>t)),Yn=$n.map((e=>(9*e+5)%16));let Zn=[$n],Xn=[Yn];for(let e=0;e<4;e++)for(let t of[Zn,Xn])t.push(t[e].map((e=>Gn[e])));const Jn=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),Qn=Zn.map(((e,t)=>e.map((e=>Jn[t][e])))),er=Xn.map(((e,t)=>e.map((e=>Jn[t][e])))),tr=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),nr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rr=(e,t)=>e<<t|e>>>32-t;function ir(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const or=new Uint32Array(16);class ar extends Wn{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:i}=this;return[e,t,n,r,i]}set(e,t,n,r,i){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(e,t){for(let n=0;n<16;n++,t+=4)or[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,a=0|this.h2,s=a,c=0|this.h3,u=c,l=0|this.h4,f=l;for(let e=0;e<5;e++){const t=4-e,h=tr[e],d=nr[e],p=Zn[e],y=Xn[e],g=Qn[e],b=er[e];for(let t=0;t<16;t++){const r=rr(n+ir(e,i,a,c)+or[p[t]]+h,g[t])+l|0;n=l,l=c,c=0|rr(a,10),a=i,i=r}for(let e=0;e<16;e++){const n=rr(r+ir(t,o,s,u)+or[y[e]]+d,b[e])+f|0;r=f,f=u,u=0|rr(s,10),s=o,o=n}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+l+r|0,this.h4+n+o|0,this.h0+i+s|0)}roundClean(){or.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const sr=Kn((()=>new ar)),cr=(e,t,n)=>e&t^~e&n,ur=(e,t,n)=>e&t^e&n^t&n,lr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hr=new Uint32Array(64);class dr extends Wn{constructor(){super(64,32,8,!1),this.A=0|fr[0],this.B=0|fr[1],this.C=0|fr[2],this.D=0|fr[3],this.E=0|fr[4],this.F=0|fr[5],this.G=0|fr[6],this.H=0|fr[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)hr[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=hr[e-15],n=hr[e-2],r=Ln(t,7)^Ln(t,18)^t>>>3,i=Ln(n,17)^Ln(n,19)^n>>>10;hr[e]=i+hr[e-7]+r+hr[e-16]|0}let{A:n,B:r,C:i,D:o,E:a,F:s,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(Ln(a,6)^Ln(a,11)^Ln(a,25))+cr(a,s,c)+lr[e]+hr[e]|0,l=(Ln(n,2)^Ln(n,13)^Ln(n,22))+ur(n,r,i)|0;u=c,c=s,s=a,a=o+t|0,o=i,i=r,r=n,n=t+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,a,s,c,u)}roundClean(){hr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pr=Kn((()=>new dr)),yr=BigInt(2**32-1),gr=BigInt(32);function br(e,t=!1){return t?{h:Number(e&yr),l:Number(e>>gr&yr)}:{h:0|Number(e>>gr&yr),l:0|Number(e&yr)}}const mr={fromBig:br,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=br(e[i],t);[n[i],r[i]]=[o,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<gr|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},wr=mr,[vr,_r]=(()=>wr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Er=new Uint32Array(80),Sr=new Uint32Array(80);class kr extends Wn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:a,Dl:s,Eh:c,El:u,Fh:l,Fl:f,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,i,o,a,s,c,u,l,f,h,d,p,y]}set(e,t,n,r,i,o,a,s,c,u,l,f,h,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|f,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)Er[n]=e.getUint32(t),Sr[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Er[e-15],n=0|Sr[e-15],r=wr.rotrSH(t,n,1)^wr.rotrSH(t,n,8)^wr.shrSH(t,n,7),i=wr.rotrSL(t,n,1)^wr.rotrSL(t,n,8)^wr.shrSL(t,n,7),o=0|Er[e-2],a=0|Sr[e-2],s=wr.rotrSH(o,a,19)^wr.rotrBH(o,a,61)^wr.shrSH(o,a,6),c=wr.rotrSL(o,a,19)^wr.rotrBL(o,a,61)^wr.shrSL(o,a,6),u=wr.add4L(i,c,Sr[e-7],Sr[e-16]),l=wr.add4H(u,r,s,Er[e-7],Er[e-16]);Er[e]=0|l,Sr[e]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:a,Cl:s,Dh:c,Dl:u,Eh:l,El:f,Fh:h,Fl:d,Gh:p,Gl:y,Hh:g,Hl:b}=this;for(let e=0;e<80;e++){const t=wr.rotrSH(l,f,14)^wr.rotrSH(l,f,18)^wr.rotrBH(l,f,41),m=wr.rotrSL(l,f,14)^wr.rotrSL(l,f,18)^wr.rotrBL(l,f,41),w=l&h^~l&p,v=f&d^~f&y,_=wr.add5L(b,m,v,_r[e],Sr[e]),E=wr.add5H(_,g,t,w,vr[e],Er[e]),S=0|_,k=wr.rotrSH(n,r,28)^wr.rotrBH(n,r,34)^wr.rotrBH(n,r,39),A=wr.rotrSL(n,r,28)^wr.rotrBL(n,r,34)^wr.rotrBL(n,r,39),O=n&i^n&a^i&a,P=r&o^r&s^o&s;g=0|p,b=0|y,p=0|h,y=0|d,h=0|l,d=0|f,({h:l,l:f}=wr.add(0|c,0|u,0|E,0|S)),c=0|a,u=0|s,a=0|i,s=0|o,i=0|n,o=0|r;const I=wr.add3L(S,A,P);n=wr.add3H(I,E,k,O),r=0|I}({h:n,l:r}=wr.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=wr.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:a,l:s}=wr.add(0|this.Ch,0|this.Cl,0|a,0|s)),({h:c,l:u}=wr.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:f}=wr.add(0|this.Eh,0|this.El,0|l,0|f)),({h,l:d}=wr.add(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:y}=wr.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:b}=wr.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(n,r,i,o,a,s,c,u,l,f,h,d,p,y,g,b)}roundClean(){Er.fill(0),Sr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ar=Kn((()=>new kr));function Or(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Pr(e,...t){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ir(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Or(e.outputLen),Or(e.blockLen)}function Tr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xr(e,t){Pr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Nr="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Rr(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const Cr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Br=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Lr(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Rr(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class Ur{clone(){return this._cloneInto()}}function jr(e){const t=t=>e().update(Lr(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Dr(e=32){if(Nr&&"function"==typeof Nr.getRandomValues)return Nr.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class Mr extends Ur{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Cr(this.buffer)}update(e){Tr(this);const{view:t,buffer,blockLen:n}=this,r=(e=Lr(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)buffer.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Cr(e);for(;n<=r-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tr(this),xr(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:r}=this;let{pos:i}=this;buffer[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(t,0),i=0);for(let e=i;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),r),this.process(t,0);const o=Cr(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=a/4,c=this.get();if(s>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<s;e++)o.setUint32(4*e,c[e],r)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}const Hr=(e,t,n)=>e&t^~e&n,Fr=(e,t,n)=>e&t^e&n^t&n,zr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qr=new Uint32Array(64);class Vr extends Mr{constructor(){super(64,32,8,!1),this.A=0|Kr[0],this.B=0|Kr[1],this.C=0|Kr[2],this.D=0|Kr[3],this.E=0|Kr[4],this.F=0|Kr[5],this.G=0|Kr[6],this.H=0|Kr[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)qr[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=qr[e-15],n=qr[e-2],r=Br(t,7)^Br(t,18)^t>>>3,i=Br(n,17)^Br(n,19)^n>>>10;qr[e]=i+qr[e-7]+r+qr[e-16]|0}let{A:n,B:r,C:i,D:o,E:a,F:s,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(Br(a,6)^Br(a,11)^Br(a,25))+Hr(a,s,c)+zr[e]+qr[e]|0,l=(Br(n,2)^Br(n,13)^Br(n,22))+Fr(n,r,i)|0;u=c,c=s,s=a,a=o+t|0,o=i,i=r,r=n,n=t+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,a,s,c,u)}roundClean(){qr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Wr=jr((()=>new Vr)),Gr=(BigInt(0),BigInt(1)),$r=BigInt(2);function Yr(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const Zr=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Xr(e){if(!Yr(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Zr[e[n]];return t}function Jr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Qr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ei(e){return e>=Qr._0&&e<=Qr._9?e-Qr._0:e>=Qr._A&&e<=Qr._F?e-(Qr._A-10):e>=Qr._a&&e<=Qr._f?e-(Qr._a-10):void 0}function ti(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){const n=ei(e.charCodeAt(i)),o=ei(e.charCodeAt(i+1));if(void 0===n||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[t]=16*n+o}return r}function ni(e){return Jr(Xr(e))}function ri(e){if(!Yr(e))throw new Error("Uint8Array expected");return Jr(Xr(Uint8Array.from(e).reverse()))}function ii(e,t){return ti(e.toString(16).padStart(2*t,"0"))}function oi(e,t){return ii(e,t).reverse()}function ai(e,t,n){let r;if("string"==typeof t)try{r=ti(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!Yr(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function si(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(!Yr(r))throw new Error("Uint8Array expected");t+=r.length}let n=new Uint8Array(t),r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}const ci=e=>($r<<BigInt(e-1))-Gr,ui=e=>new Uint8Array(e),li=e=>Uint8Array.from(e);function fi(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=ui(e),i=ui(e),o=0;const a=()=>{r.fill(1),i.fill(0),o=0},s=(...e)=>n(i,r,...e),c=(e=ui())=>{i=s(li([0]),e),r=s(),0!==e.length&&(i=s(li([1]),e),r=s())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=s();const t=r.slice();n.push(t),e+=r.length}return si(...n)};return(e,t)=>{let n;for(a(),c(e);!(n=t(u()));)c();return a(),n}}const hi={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Yr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function di(e,t,n={}){const r=(t,n,r)=>{const i=hi[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if(!(r&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}const pi=BigInt(0),yi=BigInt(1),gi=BigInt(2),bi=BigInt(3),mi=BigInt(4),wi=BigInt(5),vi=BigInt(8);BigInt(9),BigInt(16);function _i(e,t){const n=e%t;return n>=pi?n:t+n}function Ei(e,t,n){if(n<=pi||t<pi)throw new Error("Expected power/modulo > 0");if(n===yi)return pi;let r=yi;for(;t>pi;)t&yi&&(r=r*e%n),e=e*e%n,t>>=yi;return r}function Si(e,t,n){let r=e;for(;t-- >pi;)r*=r,r%=n;return r}function ki(e,t){if(e===pi||t<=pi)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=_i(e,t),r=t,i=pi,o=yi,a=yi,s=pi;for(;n!==pi;){const e=r/n,t=r%n,c=i-a*e,u=o-s*e;r=n,n=t,i=a,o=s,a=c,s=u}if(r!==yi)throw new Error("invert: does not exist");return _i(i,t)}function Ai(e){if(e%mi===bi){const t=(e+yi)/mi;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%vi===wi){const t=(e-wi)/vi;return function(e,n){const r=e.mul(n,gi),i=e.pow(r,t),o=e.mul(n,i),a=e.mul(e.mul(o,gi),i),s=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}return function(e){const t=(e-yi)/gi;let n,r,i;for(n=e-yi,r=0;n%gi===pi;n/=gi,r++);for(i=gi;i<e&&Ei(i,t,e)!==e-yi;i++);if(1===r){const t=(e+yi)/mi;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+yi)/gi;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=r,c=e.pow(e.mul(e.ONE,i),n),u=e.pow(a,o),l=e.pow(a,n);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,yi<<BigInt(s-t-1));c=e.sqr(n),u=e.mul(u,n),l=e.mul(l,c),s=t}return u}}(e)}const Oi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pi(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ii(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ti(e){const t=Ii(e);return t+Math.ceil(t/2)}class xi extends Ur{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ir(e);const n=Lr(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Tr(this),this.iHash.update(e),this}digestInto(e){Tr(this),Pr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ni=(e,t,n)=>new xi(e,t).update(n).digest();Ni.create=(e,t)=>new xi(e,t);const Ri=BigInt(0),Ci=BigInt(1);function Bi(e){return function(e){const t=Oi.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});di(e,t)}(e.Fp),di(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pi(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:Li,hexToBytes:Ui}=e,ji={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=ji;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Li(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=ji,n="string"==typeof e?Ui(e):e;if(!Yr(n))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=ji._parseInt(n.subarray(2)),{d:a,l:s}=ji._parseInt(o);if(s.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,a=i.length/2,s=n(o),c=n(a);return`30${n(a+o+4)}02${c}${i}02${s}${r}`}},Di=BigInt(0),Mi=BigInt(1),Hi=(BigInt(2),BigInt(3));BigInt(4);function Fi(e){const t=function(e){const t=Bi(e);di(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return si(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,o=n.sqr(e),a=n.mul(o,e);return n.add(n.add(a,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&Di<e&&e<t.n}function s(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!=typeof e){if(Yr(e)&&(e=Xr(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"==typeof e?e:ni(ai("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(a=_i(a,o)),s(a),a}const u=new Map;function l(e){if(!(e instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof f)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?f.ZERO:new f(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(f.fromAffine)}static fromHex(e){const t=f.fromAffine(i(ai("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),a=o(e);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:r,pz:i}=this,{px:o,py:a,pz:s}=e,c=n.eql(n.mul(t,s),n.mul(o,i)),u=n.eql(n.mul(r,s),n.mul(a,i));return c&&u}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,Hi),{px:o,py:a,pz:s}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,h=n.mul(o,o),d=n.mul(a,a),p=n.mul(s,s),y=n.mul(o,a);return y=n.add(y,y),l=n.mul(o,s),l=n.add(l,l),c=n.mul(e,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(d,u),u=n.add(d,u),u=n.mul(c,u),c=n.mul(y,c),l=n.mul(i,l),p=n.mul(e,p),y=n.sub(h,p),y=n.mul(e,y),y=n.add(y,l),l=n.add(h,h),h=n.add(l,h),h=n.add(h,p),h=n.mul(h,y),u=n.add(u,h),p=n.mul(a,s),p=n.add(p,p),h=n.mul(p,y),c=n.sub(c,h),l=n.mul(p,d),l=n.add(l,l),l=n.add(l,l),new f(c,u,l)}add(e){l(e);const{px:r,py:i,pz:o}=this,{px:a,py:s,pz:c}=e;let u=n.ZERO,h=n.ZERO,d=n.ZERO;const p=t.a,y=n.mul(t.b,Hi);let g=n.mul(r,a),b=n.mul(i,s),m=n.mul(o,c),w=n.add(r,i),v=n.add(a,s);w=n.mul(w,v),v=n.add(g,b),w=n.sub(w,v),v=n.add(r,o);let _=n.add(a,c);return v=n.mul(v,_),_=n.add(g,m),v=n.sub(v,_),_=n.add(i,o),u=n.add(s,c),_=n.mul(_,u),u=n.add(b,m),_=n.sub(_,u),d=n.mul(p,v),u=n.mul(y,m),d=n.add(u,d),u=n.sub(b,d),d=n.add(b,d),h=n.mul(u,d),b=n.add(g,g),b=n.add(b,g),m=n.mul(p,m),v=n.mul(y,v),b=n.add(b,m),m=n.sub(g,m),m=n.mul(p,m),v=n.add(v,m),g=n.mul(b,v),h=n.add(h,g),g=n.mul(_,v),u=n.mul(w,u),u=n.sub(u,g),g=n.mul(w,b),d=n.mul(_,d),d=n.add(d,g),new f(u,h,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(f.fromAffine)}))}multiplyUnsafe(e){const r=f.ZERO;if(e===Di)return r;if(s(e),e===Mi)return this;const{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:a,k2neg:c,k2:u}=i.splitScalar(e),l=r,h=r,p=this;for(;a>Di||u>Di;)a&Mi&&(l=l.add(p)),u&Mi&&(h=h.add(p)),p=p.double(),a>>=Mi,u>>=Mi;return o&&(l=l.negate()),c&&(h=h.negate()),h=new f(n.mul(h.px,i.beta),h.py,h.pz),l.add(h)}multiply(e){s(e);let r,i,o=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:s,k2:c}=a.splitScalar(o);let{p:u,f:l}=this.wNAF(t),{p:h,f:p}=this.wNAF(c);u=d.constTimeNegate(e,u),h=d.constTimeNegate(s,h),h=new f(n.mul(h.px,a.beta),h.py,h.pz),r=u.add(h),i=l.add(p)}else{const{p:e,f:t}=this.wNAF(o);r=e,i=t}return f.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=f.BASE,i=(e,t)=>t!==Di&&t!==Mi&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));const a=n.mul(t,e),s=n.mul(r,e),c=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:s}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Mi)return!0;if(n)return n(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Mi?this:n?n(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(f,this,e)}toHex(e=!0){return Xr(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,d=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>Ri;)n&Ci&&(r=r.add(i)),i=i.double(),n>>=Ci;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),o=[];let a=e,s=a;for(let e=0;e<n;e++){s=a,o.push(s);for(let e=1;e<i;e++)s=s.add(a),o.push(s);a=s.double()}return o},wNAF(t,i,o){const{windows:a,windowSize:s}=r(t);let c=e.ZERO,u=e.BASE;const l=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<a;e++){const t=e*s;let r=Number(o&l);o>>=h,r>s&&(r-=f,o+=Ci);const a=t,d=t+Math.abs(r)-1,p=e%2!=0,y=r<0;0===r?u=u.add(n(p,i[a])):c=c.add(n(y,i[d]))}return{p:c,f:u}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function zi(e){const t=function(e){const t=Bi(e);return di(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function a(e){return _i(e,r)}function s(e){return ki(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:f}=Fi({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),a=si;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=ni(a);if(!(Di<(s=e)&&s<n.ORDER))throw new Error("Point is not on curve");const t=l(e);let i=n.sqrt(t);return 1==(1&r)!==((i&Mi)===Mi)&&(i=n.neg(i)),{x:e,y:i}}var s}}),h=e=>Xr(ii(e,t.nByteLength));function d(e){return e>r>>Mi}const p=(e,t,n)=>ni(e.slice(t,n));class y{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ai("compactSignature",e,2*n),new y(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=ji.toSig(ai("DER",e));return new y(t,n)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r,s:i,recovery:o}=this,u=w(ai("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const l=2===o||3===o?r+t.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=0==(1&o)?"02":"03",d=c.fromHex(f+h(l)),p=s(l),y=a(-u*p),g=a(i*p),b=c.BASE.multiplyAndAddUnsafe(d,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ti(this.toDERHex())}toDERHex(){return ji.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ti(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const g={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Ti(t.n);return function(e,t,n=!1){const r=e.length,i=Ii(t),o=Ti(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const a=_i(n?ni(e):ri(e),t-yi)+yi;return n?oi(a,i):ii(a,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function b(e){const t=Yr(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof c}const m=t.bits2int||function(e){const n=ni(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},w=t.bits2int_modN||function(e){return a(m(e))},v=ci(t.nBitLength);function _(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(Di<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ii(e,t.nByteLength)}function E(e,r,i=S){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=t;let{lowS:h,prehash:p,extraEntropy:g}=i;null==h&&(h=!0),e=ai("msgHash",e),p&&(e=ai("prehashed msgHash",o(e)));const b=w(e),v=u(r),E=[_(v),_(b)];if(null!=g){const e=!0===g?l(n.BYTES):g;E.push(ai("extraEntropy",e))}const k=si(...E),A=b;return{seed:k,k2sig:function(e){const t=m(e);if(!f(t))return;const n=s(t),r=c.BASE.multiply(t).toAffine(),i=a(r.x);if(i===Di)return;const o=a(n*a(A+i*v));if(o===Di)return;let u=(r.x===i?0:2)|Number(r.y&Mi),l=o;return h&&d(o)&&(l=function(e){return d(e)?a(-e):e}(o),u^=1),new y(i,l,u)}}}const S={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n,r=S){const{seed:i,k2sig:o}=E(e,n,r),a=t;return fi(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(e,n,r,i=k){const o=e;if(n=ai("msgHash",n),r=ai("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=i;let f,h;try{if("string"==typeof o||Yr(o))try{f=y.fromDER(o)}catch(e){if(!(e instanceof ji.Err))throw e;f=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;f=new y(e,t)}}h=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&f.hasHighS())return!1;l&&(n=t.hash(n));const{r:d,s:p}=f,g=w(n),b=s(p),m=a(g*b),v=a(d*b),_=c.BASE.multiplyAndAddUnsafe(h,m,v)?.toAffine();return!!_&&a(_.x)===d},ProjectivePoint:c,Signature:y,utils:g}}function Ki(e){return{hash:e,hmac:(t,...n)=>Ni(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(!Rr(r))throw new Error("Uint8Array expected");t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}(...n)),randomBytes:Dr}}const qi=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Vi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wi=BigInt(1),Gi=BigInt(2),$i=(e,t)=>(e+t/Gi)/t;function Yi(e){const t=qi,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),s=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,f=Si(l,n,t)*l%t,h=Si(f,n,t)*l%t,d=Si(h,Gi,t)*u%t,p=Si(d,i,t)*d%t,y=Si(p,o,t)*p%t,g=Si(y,s,t)*y%t,b=Si(g,c,t)*g%t,m=Si(b,s,t)*y%t,w=Si(m,n,t)*l%t,v=Si(w,a,t)*p%t,_=Si(v,r,t)*u%t,E=Si(_,Gi,t);if(!Zi.eql(Zi.sqr(E),e))throw new Error("Cannot find square root");return E}const Zi=function(e,t,n=!1,r={}){if(e<=pi)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Pi(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Ai(e),s=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:ci(i),ZERO:pi,ONE:yi,create:t=>_i(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return pi<=t&&t<e},is0:e=>e===pi,isOdd:e=>(e&yi)===yi,neg:t=>_i(-t,e),eql:(e,t)=>e===t,sqr:t=>_i(t*t,e),add:(t,n)=>_i(t+n,e),sub:(t,n)=>_i(t-n,e),mul:(t,n)=>_i(t*n,e),pow:(e,t)=>function(e,t,n){if(n<pi)throw new Error("Expected power > 0");if(n===pi)return e.ONE;if(n===yi)return t;let r=e.ONE,i=t;for(;n>pi;)n&yi&&(r=e.mul(r,i)),i=e.sqr(i),n>>=yi;return r}(s,e,t),div:(t,n)=>_i(t*ki(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ki(t,e),sqrt:r.sqrt||(e=>a(s,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(s,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?oi(e,o):ii(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?ri(e):ni(e)}});return Object.freeze(s)}(qi,void 0,void 0,{sqrt:Yi}),Xi=function(e,t){const n=t=>zi({...e,...Ki(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Zi,n:Vi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Vi,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Wi*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),s=$i(o*e,t),c=$i(-r*e,t);let u=_i(e-s*n-c*i,t),l=_i(-s*r-c*o,t);const f=u>a,h=l>a;if(f&&(u=t-u),h&&(l=t-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:h,k2:l}}}},Wr),Ji=BigInt(0),Qi=e=>"bigint"==typeof e&&Ji<e&&e<qi,eo=e=>"bigint"==typeof e&&Ji<e&&e<Vi,to={};function no(e,...t){let n=to[e];if(void 0===n){const t=Wr(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=si(t,t),to[e]=n}return Wr(si(n,...t))}const ro=e=>e.toRawBytes(!0).slice(1),io=e=>ii(e,32),oo=e=>_i(e,qi),ao=e=>_i(e,Vi),so=Xi.ProjectivePoint,co=(e,t,n)=>so.BASE.multiplyAndAddUnsafe(e,t,n);function uo(e){let t=Xi.utils.normPrivateKeyToScalar(e),n=so.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:ao(-t),bytes:ro(n)}}function lo(e){if(!Qi(e))throw new Error("bad x: need 0 < x < p");const t=oo(e*e);let n=Yi(oo(t*e+BigInt(7)));n%Gi!==Ji&&(n=oo(-n));const r=new so(e,n,Wi);return r.assertValidity(),r}function fo(...e){return ao(ni(no("BIP0340/challenge",...e)))}function ho(e){return uo(e).bytes}function po(e,t,n=Dr(32)){const r=ai("message",e),{bytes:i,scalar:o}=uo(t),a=ai("auxRand",n,32),s=io(o^ni(no("BIP0340/aux",a))),c=no("BIP0340/nonce",s,i,r),u=ao(ni(c));if(u===Ji)throw new Error("sign failed: k is zero");const{bytes:l,scalar:f}=uo(u),h=fo(l,i,r),d=new Uint8Array(64);if(d.set(l,0),d.set(io(ao(f+h*o)),32),!yo(d,r,i))throw new Error("sign: Invalid signature produced");return d}function yo(e,t,n){const r=ai("signature",e,64),i=ai("message",t),o=ai("publicKey",n,32);try{const e=lo(ni(o)),t=ni(r.subarray(0,32));if(!Qi(t))return!1;const n=ni(r.subarray(32,64));if(!eo(n))return!1;const a=fo(io(t),ro(e),i),s=co(e,n,ao(-a));return!(!s||!s.hasEvenY()||s.toAffine().x!==t)}catch(e){return!1}}const go=(()=>({getPublicKey:ho,sign:po,verify:yo,utils:{randomPrivateKey:Xi.utils.randomPrivateKey,lift_x:lo,pointToBytes:ro,numberToBytesBE:ii,bytesToNumberBE:ni,taggedHash:no,mod:_i}}))();function bo(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function mo(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function wo(...e){const t=e=>e,n=(e,t)=>n=>e(t(n)),r=e.map((e=>e.encode)).reduceRight(n,t),i=e.map((e=>e.decode)).reduce(n,t);return{encode:r,decode:i}}function vo(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(bo(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function _o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function Eo(e,t="="){if(bo(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function So(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function ko(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],o=Array.from(e);for(o.forEach((e=>{if(bo(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,a=!0;for(let i=r;i<o.length;i++){const s=o[i],c=t*e+s;if(!Number.isSafeInteger(c)||t*e/t!==e||c-s!=t*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(o[i]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");a&&(u?a=!1:r=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}const Ao=(e,t)=>t?Ao(t,e%t):e,Oo=(e,t)=>e+(t-Ao(e,t));function Po(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Oo(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Oo(t,n)}`);let i=0,o=0;const a=2**n-1,s=[];for(const r of e){if(bo(r),r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)s.push((i>>o-n&a)>>>0);i&=2**o-1}if(i=i<<n-o&a,!r&&o>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&s.push(i>>>0),s}function Io(e){return bo(e),{encode:t=>{if(!mo(t))throw new Error("radix.encode input should be Uint8Array");return ko(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(ko(t,e,256))}}}function To(e,t=!1){if(bo(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Oo(8,e)>32||Oo(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!mo(n))throw new Error("radix2.encode input should be Uint8Array");return Po(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(Po(n,e,8,t))}}}function xo(e,t){if(bo(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!mo(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!mo(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}To(4),vo("0123456789ABCDEF"),_o(""),To(5),vo("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Eo(5),_o(""),To(5),vo("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Eo(5),_o(""),To(5),vo("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),_o(""),So((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),To(6),vo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Eo(6),_o(""),To(6),vo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Eo(6),_o(""),To(6),vo("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),_o("");const No=e=>wo(Io(58),vo(e),_o("")),Ro=No("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Co=e=>wo(xo(4,(t=>e(e(t)))),Ro);vo("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),_o("");To(4),vo("0123456789abcdef"),_o(""),So((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const Bo=Xi.ProjectivePoint,Lo=Co(pr);function Uo(e){return BigInt(`0x${function(e){if(!Cn(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Un[e[n]];return t}(e)}`)}function jo(e){return function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){const n=Dn(e.charCodeAt(i)),o=Dn(e.charCodeAt(i+1));if(void 0===n||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[t]=16*n+o}return r}(e.toString(16).padStart(64,"0"))}const Do=Mn("Bitcoin seed"),Mo={private:76066276,public:76067358},Ho=2147483648,Fo=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return Bn(t).setUint32(0,e,!1),t};class zo{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,Bn(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return Lo.encode(this.serialize(this.versions.private,Fn(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Lo.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=Mo){if(Tn(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=Vn(Ar,Do,e);return new zo({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=Mo){const n=Lo.decode(e),r=Bn(n),i=r.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),s=0===a[0];if(i!==t[s?"private":"public"])throw new Error("Version mismatch");return new zo(s?{...o,privateKey:a.slice(1)}:{...o,publicKey:a})}static fromJSON(e){return zo.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||Mo,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Xi.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:Uo(e.privateKey),this.privKeyBytes=jo(this.privKey),this.pubKey=Xi.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Bo.fromHex(e.publicKey).toRawBytes(!0)}var t;this.pubHash=(t=this.pubKey,sr(pr(t)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e),r=t&&t[1];if(!t||3!==t.length||"string"!=typeof r)throw new Error(`Invalid child index: ${e}`);let i=+r;if(!Number.isSafeInteger(i)||i>=Ho)throw new Error("Invalid index");"'"===t[2]&&(i+=Ho),n=n.deriveChild(i)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=Fo(e);if(e>=Ho){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=Fn(new Uint8Array([0]),e,t)}else t=Fn(this.pubKey,t);const n=Vn(Ar,this.chainCode,t),r=Uo(n.slice(0,32)),i=n.slice(32);if(!Xi.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=_i(this.privKey+r,Xi.CURVE.n);if(!Xi.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=e}else{const e=Bo.fromHex(this.pubKey).add(Bo.fromPrivateKey(r));if(e.equals(Bo.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=e.toRawBytes(!0)}return new zo(o)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return Tn(e,32),Xi.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if(Tn(e,32),Tn(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Xi.Signature.fromCompact(t)}catch(e){return!1}return Xi.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return Tn(t,33),Fn(Fo(e),new Uint8Array([this.depth]),Fo(this.parentFingerprint),Fo(this.index),this.chainCode,t)}}function Ko(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function qo(e,...t){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Vo(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ko(e.outputLen),Ko(e.blockLen)}function Wo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Go(e,t){qo(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const $o="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Yo(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const Zo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xo=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Jo(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Yo(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class Qo{clone(){return this._cloneInto()}}const ea={}.toString;function ta(e){const t=t=>e().update(Jo(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class na extends Qo{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Vo(e);const n=Jo(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Wo(this),this.iHash.update(e),this}digestInto(e){Wo(this),qo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ra=(e,t,n)=>new na(e,t).update(n).digest();function ia(e,t,n,r){Vo(e);const i=function(e,t){if(void 0!==t&&"[object Object]"!==ea.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:o,dkLen:a,asyncTick:s}=i;if(Ko(o),Ko(a),Ko(s),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Jo(t),u=Jo(n),l=new Uint8Array(a),f=ra.create(e,c),h=f._cloneInto().update(u);return{c:o,dkLen:a,asyncTick:s,DK:l,PRF:f,PRFSalt:h}}function oa(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}ra.create=(e,t)=>new na(e,t);class aa extends Qo{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Zo(this.buffer)}update(e){Wo(this);const{view:t,buffer,blockLen:n}=this,r=(e=Jo(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)buffer.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Zo(e);for(;n<=r-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wo(this),Go(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:r}=this;let{pos:i}=this;buffer[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(t,0),i=0);for(let e=i;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),r),this.process(t,0);const o=Zo(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=a/4,c=this.get();if(s>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<s;e++)o.setUint32(4*e,c[e],r)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}const sa=(e,t,n)=>e&t^~e&n,ca=(e,t,n)=>e&t^e&n^t&n,ua=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),la=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fa=new Uint32Array(64);class ha extends aa{constructor(){super(64,32,8,!1),this.A=0|la[0],this.B=0|la[1],this.C=0|la[2],this.D=0|la[3],this.E=0|la[4],this.F=0|la[5],this.G=0|la[6],this.H=0|la[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)fa[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=fa[e-15],n=fa[e-2],r=Xo(t,7)^Xo(t,18)^t>>>3,i=Xo(n,17)^Xo(n,19)^n>>>10;fa[e]=i+fa[e-7]+r+fa[e-16]|0}let{A:n,B:r,C:i,D:o,E:a,F:s,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(Xo(a,6)^Xo(a,11)^Xo(a,25))+sa(a,s,c)+ua[e]+fa[e]|0,l=(Xo(n,2)^Xo(n,13)^Xo(n,22))+ca(n,r,i)|0;u=c,c=s,s=a,a=o+t|0,o=i,i=r,r=n,n=t+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,a,s,c,u)}roundClean(){fa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const da=ta((()=>new ha)),pa=BigInt(2**32-1),ya=BigInt(32);function ga(e,t=!1){return t?{h:Number(e&pa),l:Number(e>>ya&pa)}:{h:0|Number(e>>ya&pa),l:0|Number(e&pa)}}const ba={fromBig:ga,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=ga(e[i],t);[n[i],r[i]]=[o,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<ya|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},ma=ba,[wa,va]=(()=>ma.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),_a=new Uint32Array(80),Ea=new Uint32Array(80);class Sa extends aa{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:a,Dl:s,Eh:c,El:u,Fh:l,Fl:f,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,i,o,a,s,c,u,l,f,h,d,p,y]}set(e,t,n,r,i,o,a,s,c,u,l,f,h,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|f,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)_a[n]=e.getUint32(t),Ea[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|_a[e-15],n=0|Ea[e-15],r=ma.rotrSH(t,n,1)^ma.rotrSH(t,n,8)^ma.shrSH(t,n,7),i=ma.rotrSL(t,n,1)^ma.rotrSL(t,n,8)^ma.shrSL(t,n,7),o=0|_a[e-2],a=0|Ea[e-2],s=ma.rotrSH(o,a,19)^ma.rotrBH(o,a,61)^ma.shrSH(o,a,6),c=ma.rotrSL(o,a,19)^ma.rotrBL(o,a,61)^ma.shrSL(o,a,6),u=ma.add4L(i,c,Ea[e-7],Ea[e-16]),l=ma.add4H(u,r,s,_a[e-7],_a[e-16]);_a[e]=0|l,Ea[e]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:a,Cl:s,Dh:c,Dl:u,Eh:l,El:f,Fh:h,Fl:d,Gh:p,Gl:y,Hh:g,Hl:b}=this;for(let e=0;e<80;e++){const t=ma.rotrSH(l,f,14)^ma.rotrSH(l,f,18)^ma.rotrBH(l,f,41),m=ma.rotrSL(l,f,14)^ma.rotrSL(l,f,18)^ma.rotrBL(l,f,41),w=l&h^~l&p,v=f&d^~f&y,_=ma.add5L(b,m,v,va[e],Ea[e]),E=ma.add5H(_,g,t,w,wa[e],_a[e]),S=0|_,k=ma.rotrSH(n,r,28)^ma.rotrBH(n,r,34)^ma.rotrBH(n,r,39),A=ma.rotrSL(n,r,28)^ma.rotrBL(n,r,34)^ma.rotrBL(n,r,39),O=n&i^n&a^i&a,P=r&o^r&s^o&s;g=0|p,b=0|y,p=0|h,y=0|d,h=0|l,d=0|f,({h:l,l:f}=ma.add(0|c,0|u,0|E,0|S)),c=0|a,u=0|s,a=0|i,s=0|o,i=0|n,o=0|r;const I=ma.add3L(S,A,P);n=ma.add3H(I,E,k,O),r=0|I}({h:n,l:r}=ma.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=ma.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:a,l:s}=ma.add(0|this.Ch,0|this.Cl,0|a,0|s)),({h:c,l:u}=ma.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:f}=ma.add(0|this.Eh,0|this.El,0|l,0|f)),({h,l:d}=ma.add(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:y}=ma.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:b}=ma.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(n,r,i,o,a,s,c,u,l,f,h,d,p,y,g,b)}roundClean(){_a.fill(0),Ea.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ka=ta((()=>new Sa));function Aa(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Oa(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Pa(...e){const t=e=>e,n=(e,t)=>n=>e(t(n)),r=e.map((e=>e.encode)).reduceRight(n,t),i=e.map((e=>e.decode)).reduce(n,t);return{encode:r,decode:i}}function Ia(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(Aa(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function Ta(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function xa(e,t="="){if(Aa(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Na(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function Ra(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],o=Array.from(e);for(o.forEach((e=>{if(Aa(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,a=!0;for(let i=r;i<o.length;i++){const s=o[i],c=t*e+s;if(!Number.isSafeInteger(c)||t*e/t!==e||c-s!=t*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(o[i]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");a&&(u?a=!1:r=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}const Ca=(e,t)=>t?Ca(t,e%t):e,Ba=(e,t)=>e+(t-Ca(e,t));function La(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ba(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ba(t,n)}`);let i=0,o=0;const a=2**n-1,s=[];for(const r of e){if(Aa(r),r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)s.push((i>>o-n&a)>>>0);i&=2**o-1}if(i=i<<n-o&a,!r&&o>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&s.push(i>>>0),s}function Ua(e){return Aa(e),{encode:t=>{if(!Oa(t))throw new Error("radix.encode input should be Uint8Array");return Ra(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Ra(t,e,256))}}}function ja(e,t=!1){if(Aa(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ba(8,e)>32||Ba(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Oa(n))throw new Error("radix2.encode input should be Uint8Array");return La(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(La(n,e,8,t))}}}function Da(e,t){if(Aa(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!Oa(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!Oa(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}const Ma={alphabet:Ia,chain:Pa,checksum:Da,convertRadix:Ra,convertRadix2:La,radix:Ua,radix2:ja,join:Ta,padding:xa};ja(4),Ia("0123456789ABCDEF"),Ta(""),ja(5),Ia("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),xa(5),Ta(""),ja(5),Ia("0123456789ABCDEFGHIJKLMNOPQRSTUV"),xa(5),Ta(""),ja(5),Ia("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Ta(""),Na((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),ja(6),Ia("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),xa(6),Ta(""),ja(6),Ia("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),xa(6),Ta(""),ja(6),Ia("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ta(""),Ia("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Ta("");ja(4),Ia("0123456789abcdef"),Ta(""),Na((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const Ha=e=>""===e[0];function Fa(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function za(e){const t=Fa(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Ka(e){qo(e,16,20,24,28,32)}function qa(e,t=128){if(Ko(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return function(e,t){Ka(e);const n=Wa(t).encode(e);return n.join(Ha(t)?"":" ")}(function(e=32){if($o&&"function"==typeof $o.getRandomValues)return $o.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(t/8),e)}const Va=e=>{const t=8-e.length/4;return new Uint8Array([da(e)[0]>>t<<t])};function Wa(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Wordlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),Ma.chain(Ma.checksum(1,Va),Ma.radix2(11,!0),Ma.alphabet(e))}const Ga=e=>Fa(`mnemonic${e}`);function $a(e,t=""){return function(e,t,n,r){const{c:i,dkLen:o,DK:a,PRF:s,PRFSalt:c}=ia(e,t,n,r);let u;const l=new Uint8Array(4),f=Zo(l),h=new Uint8Array(s.outputLen);for(let e=1,t=0;t<o;e++,t+=s.outputLen){const n=a.subarray(t,t+s.outputLen);f.setInt32(0,e,!1),(u=c._cloneInto(u)).update(l).digestInto(h),n.set(h.subarray(0,n.length));for(let e=1;e<i;e++){s._cloneInto(u).update(h).digestInto(h);for(let e=0;e<n.length;e++)n[e]^=h[e]}}return oa(s,c,a,u,h)}(ka,za(e).nfkd,Ga(t),{c:2048,dkLen:64})}var Ya=a(63465),Za=a.n(Ya),Xa=a(52153),Ja=a.n(Xa);function Qa(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var rs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ts(this,"mnemonic",void 0),ts(this,"_hdkey",void 0),this.mnemonic=t;var n=$a(t);this._hdkey=zo.fromMasterSeed(n)}var t,n,r;return t=e,n=[{key:"deriveNostrPrivateKeyHex",value:function(){return yn.bytesToHex(this.deriveKey("m/44'/1237'/0'/0/0").privateKey)}},{key:"deriveKey",value:function(e){return this._hdkey.derive(e)}},{key:"signMessage",value:function(e){var t=this;return function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Qa(o,r,i,a,s,"next",e)}function s(e){Qa(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){var n;return ns(this,(function(r){switch(r.label){case 0:return[4,hn(Ja()(e).toString(Za()),t._hdkey.privateKey)];case 1:return n=r.sent(),[2,yn.bytesToHex(n.toCompactRawBytes())]}}))}))()}}],n&&es(t.prototype,n),r&&es(t,r),e}();const is=rs;var os=a(17187);function as(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ss(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const cs={number:as,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:ss,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");as(e.outputLen),as(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){ss(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},us=cs,ls="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,fs=e=>e instanceof Uint8Array,hs=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ds=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const ps=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ys(e){if(!fs(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ps[e[n]];return t}function gs(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n}function bs(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function ms(e){if("string"==typeof e&&(e=bs(e)),!fs(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function ws(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!fs(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}class vs{clone(){return this._cloneInto()}}const _s=e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object;function Es(e){const t=t=>e().update(ms(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ss(e=32){if(ls&&"function"==typeof ls.getRandomValues)return ls.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class ks extends vs{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=hs(this.buffer)}update(e){us.exists(this);const{view:t,buffer,blockLen:n}=this,r=(e=ms(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)buffer.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=hs(e);for(;n<=r-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){us.exists(this),us.output(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:r}=this;let{pos:i}=this;buffer[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(t,0),i=0);for(let e=i;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),r),this.process(t,0);const o=hs(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=a/4,c=this.get();if(s>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<s;e++)o.setUint32(4*e,c[e],r)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}const As=(e,t,n)=>e&t^~e&n,Os=(e,t,n)=>e&t^e&n^t&n,Ps=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Is=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ts=new Uint32Array(64);class xs extends ks{constructor(){super(64,32,8,!1),this.A=0|Is[0],this.B=0|Is[1],this.C=0|Is[2],this.D=0|Is[3],this.E=0|Is[4],this.F=0|Is[5],this.G=0|Is[6],this.H=0|Is[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)Ts[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Ts[e-15],n=Ts[e-2],r=ds(t,7)^ds(t,18)^t>>>3,i=ds(n,17)^ds(n,19)^n>>>10;Ts[e]=i+Ts[e-7]+r+Ts[e-16]|0}let{A:n,B:r,C:i,D:o,E:a,F:s,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(ds(a,6)^ds(a,11)^ds(a,25))+As(a,s,c)+Ps[e]+Ts[e]|0,l=(ds(n,2)^ds(n,13)^ds(n,22))+Os(n,r,i)|0;u=c,c=s,s=a,a=o+t|0,o=i,i=r,r=n,n=t+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,a,s,c,u)}roundClean(){Ts.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ns extends xs{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Rs=Es((()=>new xs)),Cs=(Es((()=>new Ns)),BigInt(0),BigInt(1)),Bs=BigInt(2),Ls=e=>e instanceof Uint8Array,Us=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function js(e){if(!Ls(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Us[e[n]];return t}function Ds(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function Ms(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[t]=o}return n}function Hs(e){return Ds(js(e))}function Fs(e){if(!Ls(e))throw new Error("Uint8Array expected");return Ds(js(Uint8Array.from(e).reverse()))}function zs(e,t){return Ms(e.toString(16).padStart(2*t,"0"))}function Ks(e,t){return zs(e,t).reverse()}function qs(e,t,n){let r;if("string"==typeof t)try{r=Ms(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!Ls(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Vs(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!Ls(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const Ws=e=>(Bs<<BigInt(e-1))-Cs,Gs=e=>new Uint8Array(e),$s=e=>Uint8Array.from(e);function Ys(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=Gs(e),i=Gs(e),o=0;const a=()=>{r.fill(1),i.fill(0),o=0},s=(...e)=>n(i,r,...e),c=(e=Gs())=>{i=s($s([0]),e),r=s(),0!==e.length&&(i=s($s([1]),e),r=s())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=s();const t=r.slice();n.push(t),e+=r.length}return Vs(...n)};return(e,t)=>{let n;for(a(),c(e);!(n=t(u()));)c();return a(),n}}const Zs={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Xs(e,t,n={}){const r=(t,n,r)=>{const i=Zs[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if(!(r&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}const Js=BigInt(0),Qs=BigInt(1),ec=BigInt(2),tc=BigInt(3),nc=BigInt(4),rc=BigInt(5),ic=BigInt(8);BigInt(9),BigInt(16);function oc(e,t){const n=e%t;return n>=Js?n:t+n}function ac(e,t,n){if(n<=Js||t<Js)throw new Error("Expected power/modulo > 0");if(n===Qs)return Js;let r=Qs;for(;t>Js;)t&Qs&&(r=r*e%n),e=e*e%n,t>>=Qs;return r}function sc(e,t,n){let r=e;for(;t-- >Js;)r*=r,r%=n;return r}function cc(e,t){if(e===Js||t<=Js)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=oc(e,t),r=t,i=Js,o=Qs,a=Qs,s=Js;for(;n!==Js;){const e=r/n,t=r%n,c=i-a*e,u=o-s*e;r=n,n=t,i=a,o=s,a=c,s=u}if(r!==Qs)throw new Error("invert: does not exist");return oc(i,t)}function uc(e){if(e%nc===tc){const t=(e+Qs)/nc;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%ic===rc){const t=(e-rc)/ic;return function(e,n){const r=e.mul(n,ec),i=e.pow(r,t),o=e.mul(n,i),a=e.mul(e.mul(o,ec),i),s=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}return function(e){const t=(e-Qs)/ec;let n,r,i;for(n=e-Qs,r=0;n%ec===Js;n/=ec,r++);for(i=ec;i<e&&ac(i,t,e)!==e-Qs;i++);if(1===r){const t=(e+Qs)/nc;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+Qs)/ec;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=r,c=e.pow(e.mul(e.ONE,i),n),u=e.pow(a,o),l=e.pow(a,n);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,Qs<<BigInt(s-t-1));c=e.sqr(n),u=e.mul(u,n),l=e.mul(l,c),s=t}return u}}(e)}const lc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fc(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const hc=BigInt(0),dc=BigInt(1);function pc(e){return function(e){const t=lc.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Xs(e,t)}(e.Fp),Xs(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:yc,hexToBytes:gc}=t,bc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=bc;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:yc(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=bc,n="string"==typeof e?gc(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=bc._parseInt(n.subarray(2)),{d:a,l:s}=bc._parseInt(o);if(s.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,a=i.length/2,s=n(o),c=n(a);return`30${n(a+o+4)}02${c}${i}02${s}${r}`}},mc=BigInt(0),wc=BigInt(1),vc=(BigInt(2),BigInt(3));BigInt(4);function _c(e){const t=function(e){const t=pc(e);Xs(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return Vs(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,o=n.sqr(e),a=n.mul(o,e);return n.add(n.add(a,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&mc<e&&e<t.n}function s(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=js(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"==typeof e?e:Hs(qs("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(a=oc(a,o)),s(a),a}const u=new Map;function l(e){if(!(e instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof f)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?f.ZERO:new f(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(f.fromAffine)}static fromHex(e){const t=f.fromAffine(i(qs("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),a=o(e);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:r,pz:i}=this,{px:o,py:a,pz:s}=e,c=n.eql(n.mul(t,s),n.mul(o,i)),u=n.eql(n.mul(r,s),n.mul(a,i));return c&&u}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,vc),{px:o,py:a,pz:s}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,h=n.mul(o,o),d=n.mul(a,a),p=n.mul(s,s),y=n.mul(o,a);return y=n.add(y,y),l=n.mul(o,s),l=n.add(l,l),c=n.mul(e,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(d,u),u=n.add(d,u),u=n.mul(c,u),c=n.mul(y,c),l=n.mul(i,l),p=n.mul(e,p),y=n.sub(h,p),y=n.mul(e,y),y=n.add(y,l),l=n.add(h,h),h=n.add(l,h),h=n.add(h,p),h=n.mul(h,y),u=n.add(u,h),p=n.mul(a,s),p=n.add(p,p),h=n.mul(p,y),c=n.sub(c,h),l=n.mul(p,d),l=n.add(l,l),l=n.add(l,l),new f(c,u,l)}add(e){l(e);const{px:r,py:i,pz:o}=this,{px:a,py:s,pz:c}=e;let u=n.ZERO,h=n.ZERO,d=n.ZERO;const p=t.a,y=n.mul(t.b,vc);let g=n.mul(r,a),b=n.mul(i,s),m=n.mul(o,c),w=n.add(r,i),v=n.add(a,s);w=n.mul(w,v),v=n.add(g,b),w=n.sub(w,v),v=n.add(r,o);let _=n.add(a,c);return v=n.mul(v,_),_=n.add(g,m),v=n.sub(v,_),_=n.add(i,o),u=n.add(s,c),_=n.mul(_,u),u=n.add(b,m),_=n.sub(_,u),d=n.mul(p,v),u=n.mul(y,m),d=n.add(u,d),u=n.sub(b,d),d=n.add(b,d),h=n.mul(u,d),b=n.add(g,g),b=n.add(b,g),m=n.mul(p,m),v=n.mul(y,v),b=n.add(b,m),m=n.sub(g,m),m=n.mul(p,m),v=n.add(v,m),g=n.mul(b,v),h=n.add(h,g),g=n.mul(_,v),u=n.mul(w,u),u=n.sub(u,g),g=n.mul(w,b),d=n.mul(_,d),d=n.add(d,g),new f(u,h,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(f.fromAffine)}))}multiplyUnsafe(e){const r=f.ZERO;if(e===mc)return r;if(s(e),e===wc)return this;const{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:a,k2neg:c,k2:u}=i.splitScalar(e),l=r,h=r,p=this;for(;a>mc||u>mc;)a&wc&&(l=l.add(p)),u&wc&&(h=h.add(p)),p=p.double(),a>>=wc,u>>=wc;return o&&(l=l.negate()),c&&(h=h.negate()),h=new f(n.mul(h.px,i.beta),h.py,h.pz),l.add(h)}multiply(e){s(e);let r,i,o=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:s,k2:c}=a.splitScalar(o);let{p:u,f:l}=this.wNAF(t),{p:h,f:p}=this.wNAF(c);u=d.constTimeNegate(e,u),h=d.constTimeNegate(s,h),h=new f(n.mul(h.px,a.beta),h.py,h.pz),r=u.add(h),i=l.add(p)}else{const{p:e,f:t}=this.wNAF(o);r=e,i=t}return f.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=f.BASE,i=(e,t)=>t!==mc&&t!==wc&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));const a=n.mul(t,e),s=n.mul(r,e),c=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:s}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===wc)return!0;if(n)return n(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===wc?this:n?n(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(f,this,e)}toHex(e=!0){return js(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,d=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>hc;)n&dc&&(r=r.add(i)),i=i.double(),n>>=dc;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),o=[];let a=e,s=a;for(let e=0;e<n;e++){s=a,o.push(s);for(let e=1;e<i;e++)s=s.add(a),o.push(s);a=s.double()}return o},wNAF(t,i,o){const{windows:a,windowSize:s}=r(t);let c=e.ZERO,u=e.BASE;const l=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<a;e++){const t=e*s;let r=Number(o&l);o>>=h,r>s&&(r-=f,o+=dc);const a=t,d=t+Math.abs(r)-1,p=e%2!=0,y=r<0;0===r?u=u.add(n(p,i[a])):c=c.add(n(y,i[d]))}return{p:c,f:u}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(f,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Ec(e){const t=function(e){const t=pc(e);return Xs(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function a(e){return oc(e,r)}function s(e){return cc(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:f}=_c({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),a=Vs;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=Hs(a);if(!(mc<(s=e)&&s<n.ORDER))throw new Error("Point is not on curve");const t=l(e);let i=n.sqrt(t);return 1==(1&r)!==((i&wc)===wc)&&(i=n.neg(i)),{x:e,y:i}}var s}}),h=e=>js(zs(e,t.nByteLength));function d(e){return e>r>>wc}const p=(e,t,n)=>Hs(e.slice(t,n));class y{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=qs("compactSignature",e,2*n),new y(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=bc.toSig(qs("DER",e));return new y(t,n)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r,s:i,recovery:o}=this,u=w(qs("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const l=2===o||3===o?r+t.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=0==(1&o)?"02":"03",d=c.fromHex(f+h(l)),p=s(l),y=a(-u*p),g=a(i*p),b=c.BASE.multiplyAndAddUnsafe(d,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ms(this.toDERHex())}toDERHex(){return bc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ms(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const g={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=function(e,t,n=!1){const r=(e=qs("privateHash",e)).length,i=fc(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return oc(n?Fs(e):Hs(e),t-Qs)+Qs}(t.randomBytes(n.BYTES+8),r);return zs(e,t.nByteLength)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function b(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof c}const m=t.bits2int||function(e){const n=Hs(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},w=t.bits2int_modN||function(e){return a(m(e))},v=Ws(t.nBitLength);function _(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(mc<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return zs(e,t.nByteLength)}function E(e,r,i=S){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=t;let{lowS:h,prehash:p,extraEntropy:g}=i;null==h&&(h=!0),e=qs("msgHash",e),p&&(e=qs("prehashed msgHash",o(e)));const b=w(e),v=u(r),E=[_(v),_(b)];if(null!=g){const e=!0===g?l(n.BYTES):g;E.push(qs("extraEntropy",e,n.BYTES))}const k=Vs(...E),A=b;return{seed:k,k2sig:function(e){const t=m(e);if(!f(t))return;const n=s(t),r=c.BASE.multiply(t).toAffine(),i=a(r.x);if(i===mc)return;const o=a(n*a(A+i*v));if(o===mc)return;let u=(r.x===i?0:2)|Number(r.y&wc),l=o;return h&&d(o)&&(l=function(e){return d(e)?a(-e):e}(o),u^=1),new y(i,l,u)}}}const S={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n,r=S){const{seed:i,k2sig:o}=E(e,n,r),a=t;return Ys(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(e,n,r,i=k){const o=e;if(n=qs("msgHash",n),r=qs("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=i;let f,h;try{if("string"==typeof o||o instanceof Uint8Array)try{f=y.fromDER(o)}catch(e){if(!(e instanceof bc.Err))throw e;f=y.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;f=new y(e,t)}}h=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&f.hasHighS())return!1;l&&(n=t.hash(n));const{r:d,s:p}=f,g=w(n),b=s(p),m=a(g*b),v=a(d*b),_=c.BASE.multiplyAndAddUnsafe(h,m,v)?.toAffine();return!!_&&a(_.x)===d},ProjectivePoint:c,Signature:y,utils:g}}class Sc extends vs{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,us.hash(e);const n=ms(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return us.exists(this),this.iHash.update(e),this}digestInto(e){us.exists(this),us.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const kc=(e,t,n)=>new Sc(e,t).update(n).digest();function Ac(e){return{hash:e,hmac:(t,...n)=>kc(e,t,ws(...n)),randomBytes:Ss}}kc.create=(e,t)=>new Sc(e,t);const Oc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ic=BigInt(1),Tc=BigInt(2),xc=(e,t)=>(e+t/Tc)/t;function Nc(e){const t=Oc,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),s=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,f=sc(l,n,t)*l%t,h=sc(f,n,t)*l%t,d=sc(h,Tc,t)*u%t,p=sc(d,i,t)*d%t,y=sc(p,o,t)*p%t,g=sc(y,s,t)*y%t,b=sc(g,c,t)*g%t,m=sc(b,s,t)*y%t,w=sc(m,n,t)*l%t,v=sc(w,a,t)*p%t,_=sc(v,r,t)*u%t,E=sc(_,Tc,t);if(!Rc.eql(Rc.sqr(E),e))throw new Error("Cannot find square root");return E}const Rc=function(e,t,n=!1,r={}){if(e<=Js)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=fc(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=uc(e),s=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Ws(i),ZERO:Js,ONE:Qs,create:t=>oc(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Js<=t&&t<e},is0:e=>e===Js,isOdd:e=>(e&Qs)===Qs,neg:t=>oc(-t,e),eql:(e,t)=>e===t,sqr:t=>oc(t*t,e),add:(t,n)=>oc(t+n,e),sub:(t,n)=>oc(t-n,e),mul:(t,n)=>oc(t*n,e),pow:(e,t)=>function(e,t,n){if(n<Js)throw new Error("Expected power > 0");if(n===Js)return e.ONE;if(n===Qs)return t;let r=e.ONE,i=t;for(;n>Js;)n&Qs&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Qs;return r}(s,e,t),div:(t,n)=>oc(t*cc(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>cc(t,e),sqrt:r.sqrt||(e=>a(s,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(s,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?Ks(e,o):zs(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?Fs(e):Hs(e)}});return Object.freeze(s)}(Oc,void 0,void 0,{sqrt:Nc}),Cc=function(e,t){const n=t=>Ec({...e,...Ac(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Rc,n:Pc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Pc,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ic*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),s=xc(o*e,t),c=xc(-r*e,t);let u=oc(e-s*n-c*i,t),l=oc(-s*r-c*o,t);const f=u>a,h=l>a;if(f&&(u=t-u),h&&(l=t-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:h,k2:l}}}},Rs),Bc=BigInt(0),Lc=e=>"bigint"==typeof e&&Bc<e&&e<Oc,Uc=e=>"bigint"==typeof e&&Bc<e&&e<Pc,jc={};function Dc(e,...t){let n=jc[e];if(void 0===n){const t=Rs(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=Vs(t,t),jc[e]=n}return Rs(Vs(n,...t))}const Mc=e=>e.toRawBytes(!0).slice(1),Hc=e=>zs(e,32),Fc=e=>oc(e,Oc),zc=e=>oc(e,Pc),Kc=Cc.ProjectivePoint,qc=(e,t,n)=>Kc.BASE.multiplyAndAddUnsafe(e,t,n);function Vc(e){let t=Cc.utils.normPrivateKeyToScalar(e),n=Kc.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:zc(-t),bytes:Mc(n)}}function Wc(e){if(!Lc(e))throw new Error("bad x: need 0 < x < p");const t=Fc(e*e);let n=Nc(Fc(t*e+BigInt(7)));n%Tc!==Bc&&(n=Fc(-n));const r=new Kc(e,n,Ic);return r.assertValidity(),r}function Gc(...e){return zc(Hs(Dc("BIP0340/challenge",...e)))}function $c(e){return Vc(e).bytes}function Yc(e,t,n=Ss(32)){const r=qs("message",e),{bytes:i,scalar:o}=Vc(t),a=qs("auxRand",n,32),s=Hc(o^Hs(Dc("BIP0340/aux",a))),c=Dc("BIP0340/nonce",s,i,r),u=zc(Hs(c));if(u===Bc)throw new Error("sign failed: k is zero");const{bytes:l,scalar:f}=Vc(u),h=Gc(l,i,r),d=new Uint8Array(64);if(d.set(l,0),d.set(Hc(zc(f+h*o)),32),!Zc(d,r,i))throw new Error("sign: Invalid signature produced");return d}function Zc(e,t,n){const r=qs("signature",e,64),i=qs("message",t),o=qs("publicKey",n,32);try{const e=Wc(Hs(o)),t=Hs(r.subarray(0,32));if(!Lc(t))return!1;const n=Hs(r.subarray(32,64));if(!Uc(n))return!1;const a=Gc(Hc(t),Mc(e),i),s=qc(e,n,zc(-a));return!(!s||!s.hasEvenY()||s.toAffine().x!==t)}catch(e){return!1}}const Xc=(()=>({getPublicKey:$c,sign:Yc,verify:Zc,utils:{randomPrivateKey:Cc.utils.randomPrivateKey,lift_x:Wc,pointToBytes:Mc,numberToBytesBE:zs,bytesToNumberBE:Hs,taggedHash:Dc,mod:oc}}))();function Jc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Qc(...e){const t=(e,t)=>n=>e(t(n)),n=Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),r=e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0);return{encode:n,decode:r}}function eu(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(Jc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function tu(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function nu(e,t="="){if(Jc(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function ru(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function iu(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],o=Array.from(e);for(o.forEach((e=>{if(Jc(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,a=!0;for(let i=r;i<o.length;i++){const s=o[i],c=t*e+s;if(!Number.isSafeInteger(c)||t*e/t!==e||c-s!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%n,o[i]=Math.floor(c/n),!Number.isSafeInteger(o[i])||o[i]*n+e!==c)throw new Error("convertRadix: carry overflow");a&&(o[i]?a=!1:r=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}const ou=(e,t)=>t?ou(t,e%t):e,au=(e,t)=>e+(t-ou(e,t));function su(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(au(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${au(t,n)}`);let i=0,o=0;const a=2**n-1,s=[];for(const r of e){if(Jc(r),r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)s.push((i>>o-n&a)>>>0);i&=2**o-1}if(i=i<<n-o&a,!r&&o>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&s.push(i>>>0),s}function cu(e){return Jc(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return iu(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(iu(t,e,256))}}}function uu(e,t=!1){if(Jc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(au(8,e)>32||au(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return su(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(su(n,e,8,t))}}}function lu(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function fu(e,t){if(Jc(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}const hu={alphabet:eu,chain:Qc,checksum:fu,radix:cu,radix2:uu,join:tu,padding:nu},du=(Qc(uu(4),eu("0123456789ABCDEF"),tu("")),Qc(uu(5),eu("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),nu(5),tu("")),Qc(uu(5),eu("0123456789ABCDEFGHIJKLMNOPQRSTUV"),nu(5),tu("")),Qc(uu(5),eu("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),tu(""),ru((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Qc(uu(6),eu("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),nu(6),tu(""))),pu=(Qc(uu(6),eu("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),nu(6),tu("")),e=>Qc(cu(58),eu(e),tu(""))),yu=pu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),gu=(pu("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),pu("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Qc(eu("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),tu(""))),bu=[996825010,642813549,513874426,1027748829,705979059];function mu(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<bu.length;e++)1==(t>>e&1)&&(n^=bu[e]);return n}function wu(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=mu(i)^n>>5}i=mu(i);for(let t=0;t<r;t++)i=mu(i)^31&e.charCodeAt(t);for(let e of t)i=mu(i)^e;for(let e=0;e<6;e++)i=mu(i);return i^=n,gu.encode(su([i%2**30],30,5,!1))}function vu(e){const t="bech32"===e?1:734539939,n=uu(5),r=n.decode,i=n.encode,o=lu(r);function a(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),a=e.slice(i+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const s=gu.decode(a).slice(0,-6),c=wu(o,s,t);if(!a.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:s}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${gu.encode(n)}${wu(e,n,t)}`},decode:a,decodeToBytes:function(e){const{prefix:t,words:n}=a(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:lu(a),fromWords:r,fromWordsUnsafe:o,toWords:i}}const _u=vu("bech32"),Eu=(vu("bech32m"),Qc(uu(4),eu("0123456789abcdef"),tu(""),ru((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),"abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"));function Su(e,t,n,r){us.hash(e);const i=function(e,t){if(void 0!==t&&("object"!=typeof t||!_s(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:o,dkLen:a,asyncTick:s}=i;if(us.number(o),us.number(a),us.number(s),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=ms(t),u=ms(n),l=new Uint8Array(a),f=kc.create(e,c),h=f._cloneInto().update(u);return{c:o,dkLen:a,asyncTick:s,DK:l,PRF:f,PRFSalt:h}}function ku(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}const Au=BigInt(2**32-1),Ou=BigInt(32);function Pu(e,t=!1){return t?{h:Number(e&Au),l:Number(e>>Ou&Au)}:{h:0|Number(e>>Ou&Au),l:0|Number(e&Au)}}const Iu={fromBig:Pu,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=Pu(e[i],t);[n[i],r[i]]=[o,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<Ou|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},Tu=Iu,[xu,Nu]=Tu.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Ru=new Uint32Array(80),Cu=new Uint32Array(80);class Bu extends ks{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:a,Dl:s,Eh:c,El:u,Fh:l,Fl:f,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,i,o,a,s,c,u,l,f,h,d,p,y]}set(e,t,n,r,i,o,a,s,c,u,l,f,h,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|f,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)Ru[n]=e.getUint32(t),Cu[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Ru[e-15],n=0|Cu[e-15],r=Tu.rotrSH(t,n,1)^Tu.rotrSH(t,n,8)^Tu.shrSH(t,n,7),i=Tu.rotrSL(t,n,1)^Tu.rotrSL(t,n,8)^Tu.shrSL(t,n,7),o=0|Ru[e-2],a=0|Cu[e-2],s=Tu.rotrSH(o,a,19)^Tu.rotrBH(o,a,61)^Tu.shrSH(o,a,6),c=Tu.rotrSL(o,a,19)^Tu.rotrBL(o,a,61)^Tu.shrSL(o,a,6),u=Tu.add4L(i,c,Cu[e-7],Cu[e-16]),l=Tu.add4H(u,r,s,Ru[e-7],Ru[e-16]);Ru[e]=0|l,Cu[e]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:a,Cl:s,Dh:c,Dl:u,Eh:l,El:f,Fh:h,Fl:d,Gh:p,Gl:y,Hh:g,Hl:b}=this;for(let e=0;e<80;e++){const t=Tu.rotrSH(l,f,14)^Tu.rotrSH(l,f,18)^Tu.rotrBH(l,f,41),m=Tu.rotrSL(l,f,14)^Tu.rotrSL(l,f,18)^Tu.rotrBL(l,f,41),w=l&h^~l&p,v=f&d^~f&y,_=Tu.add5L(b,m,v,Nu[e],Cu[e]),E=Tu.add5H(_,g,t,w,xu[e],Ru[e]),S=0|_,k=Tu.rotrSH(n,r,28)^Tu.rotrBH(n,r,34)^Tu.rotrBH(n,r,39),A=Tu.rotrSL(n,r,28)^Tu.rotrBL(n,r,34)^Tu.rotrBL(n,r,39),O=n&i^n&a^i&a,P=r&o^r&s^o&s;g=0|p,b=0|y,p=0|h,y=0|d,h=0|l,d=0|f,({h:l,l:f}=Tu.add(0|c,0|u,0|E,0|S)),c=0|a,u=0|s,a=0|i,s=0|o,i=0|n,o=0|r;const I=Tu.add3L(S,A,P);n=Tu.add3H(I,E,k,O),r=0|I}({h:n,l:r}=Tu.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=Tu.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:a,l:s}=Tu.add(0|this.Ch,0|this.Cl,0|a,0|s)),({h:c,l:u}=Tu.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:f}=Tu.add(0|this.Eh,0|this.El,0|l,0|f)),({h,l:d}=Tu.add(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:y}=Tu.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:b}=Tu.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(n,r,i,o,a,s,c,u,l,f,h,d,p,y,g,b)}roundClean(){Ru.fill(0),Cu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Lu extends Bu{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Uu extends Bu{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class ju extends Bu{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Du=Es((()=>new Bu)),Mu=(Es((()=>new Lu)),Es((()=>new Uu)),Es((()=>new ju)),e=>""===e[0]);function Hu(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function Fu(e){const t=Hu(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function zu(e){us.bytes(e,16,20,24,28,32)}function Ku(e,t=128){if(us.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return function(e,t){zu(e);const n=Vu(t).encode(e);return n.join(Mu(t)?"":" ")}(Ss(t/8),e)}const qu=e=>{const t=8-e.length/4;return new Uint8Array([Rs(e)[0]>>t<<t])};function Vu(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),hu.chain(hu.checksum(1,qu),hu.radix2(11,!0),hu.alphabet(e))}function Wu(e,t){try{!function(e,t){const{words:n}=Fu(e),r=Vu(t).decode(n);zu(r)}(e,t)}catch(e){return!1}return!0}const Gu=e=>Hu(`mnemonic${e}`);function $u(e,t=""){return function(e,t,n,r){const{c:i,dkLen:o,DK:a,PRF:s,PRFSalt:c}=Su(e,t,n,r);let u;const l=new Uint8Array(4),f=hs(l),h=new Uint8Array(s.outputLen);for(let e=1,t=0;t<o;e++,t+=s.outputLen){const n=a.subarray(t,t+s.outputLen);f.setInt32(0,e,!1),(u=c._cloneInto(u)).update(l).digestInto(h),n.set(h.subarray(0,n.length));for(let e=1;e<i;e++){s._cloneInto(u).update(h).digestInto(h);for(let e=0;e<n.length;e++)n[e]^=h[e]}}return ku(s,c,a,u,h)}(Du,Fu(e).nfkd,Gu(t),{c:2048,dkLen:64})}const Yu=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Zu=Uint8Array.from({length:16},((e,t)=>t)),Xu=Zu.map((e=>(9*e+5)%16));let Ju=[Zu],Qu=[Xu];for(let e=0;e<4;e++)for(let t of[Ju,Qu])t.push(t[e].map((e=>Yu[e])));const el=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),tl=Ju.map(((e,t)=>e.map((e=>el[t][e])))),nl=Qu.map(((e,t)=>e.map((e=>el[t][e])))),rl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),il=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),ol=(e,t)=>e<<t|e>>>32-t;function al(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const sl=new Uint32Array(16);class cl extends ks{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:i}=this;return[e,t,n,r,i]}set(e,t,n,r,i){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(e,t){for(let n=0;n<16;n++,t+=4)sl[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,a=0|this.h2,s=a,c=0|this.h3,u=c,l=0|this.h4,f=l;for(let e=0;e<5;e++){const t=4-e,h=rl[e],d=il[e],p=Ju[e],y=Qu[e],g=tl[e],b=nl[e];for(let t=0;t<16;t++){const r=ol(n+al(e,i,a,c)+sl[p[t]]+h,g[t])+l|0;n=l,l=c,c=0|ol(a,10),a=i,i=r}for(let e=0;e<16;e++){const n=ol(r+al(t,o,s,u)+sl[y[e]]+d,b[e])+f|0;r=f,f=u,u=0|ol(s,10),s=o,o=n}}this.set(this.h1+a+u|0,this.h2+c+f|0,this.h3+l+r|0,this.h4+n+o|0,this.h0+i+s|0)}roundClean(){sl.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const ul=Es((()=>new cl)),ll=Cc.ProjectivePoint,fl=(e=>Qc(fu(4,(t=>e(e(t)))),yu))(Rs);function hl(e){return BigInt(`0x${ys(e)}`)}const dl=bs("Bitcoin seed"),pl={private:76066276,public:76067358},yl=2147483648,gl=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return hs(t).setUint32(0,e,!1),t};class bl{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,hs(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return fl.encode(this.serialize(this.versions.private,ws(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return fl.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=pl){if(ss(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=kc(Du,dl,e);return new bl({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=pl){const n=fl.decode(e),r=hs(n),i=r.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),s=0===a[0];if(i!==t[s?"private":"public"])throw new Error("Version mismatch");return new bl(s?{...o,privateKey:a.slice(1)}:{...o,publicKey:a})}static fromJSON(e){return bl.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||pl,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Cc.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:hl(e.privateKey),this.privKeyBytes=gs(this.privKey.toString(16).padStart(64,"0")),this.pubKey=Cc.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=ll.fromHex(e.publicKey).toRawBytes(!0)}var t;this.pubHash=(t=this.pubKey,ul(Rs(t)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e);if(!t||3!==t.length)throw new Error(`Invalid child index: ${e}`);let r=+t[1];if(!Number.isSafeInteger(r)||r>=yl)throw new Error("Invalid index");"'"===t[2]&&(r+=yl),n=n.deriveChild(r)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=gl(e);if(e>=yl){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=ws(new Uint8Array([0]),e,t)}else t=ws(this.pubKey,t);const n=kc(Du,this.chainCode,t),r=hl(n.slice(0,32)),i=n.slice(32);if(!Cc.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=oc(this.privKey+r,Cc.CURVE.n);if(!Cc.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=e}else{const e=ll.fromHex(this.pubKey).add(ll.fromPrivateKey(r));if(e.equals(ll.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=e.toRawBytes(!0)}return new bl(o)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return ss(e,32),Cc.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if(ss(e,32),ss(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=Cc.Signature.fromCompact(t)}catch(e){return!1}return Cc.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return ss(t,33),ws(gl(e),new Uint8Array([this.depth]),gl(this.parentFingerprint),gl(this.index),this.chainCode,t)}}const ml=e=>e instanceof Uint8Array,wl=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function vl(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function _l(e){if("string"==typeof e&&(e=vl(e)),!ml(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function El(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("options must be object or undefined");var n;return Object.assign(e,t)}function Sl(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function kl(e,t){if(e.length!==t.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<e.length;r++)n&&(n=e[r]===t[r]);return n}function Al(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ol(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const Pl={number:Al,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Ol,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Al(e.outputLen),Al(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){Ol(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Il=Pl,Tl=(e,t)=>255&e[t++]|(255&e[t++])<<8;class xl{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Sl(e=_l(e),32);const t=Tl(e,0),n=Tl(e,2),r=Tl(e,4),i=Tl(e,6),o=Tl(e,8),a=Tl(e,10),s=Tl(e,12),c=Tl(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|s<<5),this.r[8]=8191&(s>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=Tl(e,16+2*t)}process(e,t,n=!1){const r=n?0:2048,{h:i,r:o}=this,a=o[0],s=o[1],c=o[2],u=o[3],l=o[4],f=o[5],h=o[6],d=o[7],p=o[8],y=o[9],g=Tl(e,t+0),b=Tl(e,t+2),m=Tl(e,t+4),w=Tl(e,t+6),v=Tl(e,t+8),_=Tl(e,t+10),E=Tl(e,t+12),S=Tl(e,t+14);let k=i[0]+(8191&g),A=i[1]+(8191&(g>>>13|b<<3)),O=i[2]+(8191&(b>>>10|m<<6)),P=i[3]+(8191&(m>>>7|w<<9)),I=i[4]+(8191&(w>>>4|v<<12)),T=i[5]+(v>>>1&8191),x=i[6]+(8191&(v>>>14|_<<2)),N=i[7]+(8191&(_>>>11|E<<5)),R=i[8]+(8191&(E>>>8|S<<8)),C=i[9]+(S>>>5|r),B=0,L=B+k*a+A*(5*y)+O*(5*p)+P*(5*d)+I*(5*h);B=L>>>13,L&=8191,L+=T*(5*f)+x*(5*l)+N*(5*u)+R*(5*c)+C*(5*s),B+=L>>>13,L&=8191;let U=B+k*s+A*a+O*(5*y)+P*(5*p)+I*(5*d);B=U>>>13,U&=8191,U+=T*(5*h)+x*(5*f)+N*(5*l)+R*(5*u)+C*(5*c),B+=U>>>13,U&=8191;let j=B+k*c+A*s+O*a+P*(5*y)+I*(5*p);B=j>>>13,j&=8191,j+=T*(5*d)+x*(5*h)+N*(5*f)+R*(5*l)+C*(5*u),B+=j>>>13,j&=8191;let D=B+k*u+A*c+O*s+P*a+I*(5*y);B=D>>>13,D&=8191,D+=T*(5*p)+x*(5*d)+N*(5*h)+R*(5*f)+C*(5*l),B+=D>>>13,D&=8191;let M=B+k*l+A*u+O*c+P*s+I*a;B=M>>>13,M&=8191,M+=T*(5*y)+x*(5*p)+N*(5*d)+R*(5*h)+C*(5*f),B+=M>>>13,M&=8191;let H=B+k*f+A*l+O*u+P*c+I*s;B=H>>>13,H&=8191,H+=T*a+x*(5*y)+N*(5*p)+R*(5*d)+C*(5*h),B+=H>>>13,H&=8191;let F=B+k*h+A*f+O*l+P*u+I*c;B=F>>>13,F&=8191,F+=T*s+x*a+N*(5*y)+R*(5*p)+C*(5*d),B+=F>>>13,F&=8191;let z=B+k*d+A*h+O*f+P*l+I*u;B=z>>>13,z&=8191,z+=T*c+x*s+N*a+R*(5*y)+C*(5*p),B+=z>>>13,z&=8191;let K=B+k*p+A*d+O*h+P*f+I*l;B=K>>>13,K&=8191,K+=T*u+x*c+N*s+R*a+C*(5*y),B+=K>>>13,K&=8191;let q=B+k*y+A*p+O*d+P*h+I*f;B=q>>>13,q&=8191,q+=T*l+x*u+N*c+R*s+C*a,B+=q>>>13,q&=8191,B=(B<<2)+B|0,B=B+L|0,L=8191&B,B>>>=13,U+=B,i[0]=L,i[1]=U,i[2]=j,i[3]=D,i[4]=M,i[5]=H,i[6]=F,i[7]=z,i[8]=K,i[9]=q}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=r,r=e[t]>>>13,e[t]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let t=1;t<10;t++)n[t]=e[t]+r,r=n[t]>>>13,n[t]&=8191;n[9]-=8192;let i=(1^r)-1;for(let e=0;e<10;e++)n[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|n[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+t[0];e[0]=65535&o;for(let n=1;n<8;n++)o=(e[n]+t[n]|0)+(o>>>16)|0,e[n]=65535&o}update(e){Il.exists(this);const{buffer,blockLen:t}=this,n=(e=_l(e)).length;for(let r=0;r<n;){const i=Math.min(t-this.pos,n-r);if(i!==t)buffer.set(e.subarray(r,r+i),this.pos),this.pos+=i,r+=i,this.pos===t&&(this.process(buffer,0,!1),this.pos=0);else for(;t<=n-r;r+=t)this.process(e,r)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Il.exists(this),Il.output(e,this),this.finished=!0;const{buffer,h:t}=this;let{pos:n}=this;if(n){for(buffer[n++]=1;n<16;n++)buffer[n]=0;this.process(buffer,0,!0)}this.finalize();let r=0;for(let n=0;n<8;n++)e[r++]=t[n]>>>0,e[r++]=t[n]>>>8;return e}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}}!function(e){const t=(t,n)=>e(n).update(_l(t)).digest(),n=e(new Uint8Array(32));t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t)}((e=>new xl(e)));const Nl=vl("expand 16-byte k"),Rl=vl("expand 32-byte k"),Cl=wl(Nl),Bl=wl(Rl),Ll=e=>!(e.byteOffset%4),Ul=e=>{const{core:t,rounds:n,counterRight:r,counterLen:i,allow128bitKeys:o,extendNonceFn:a,blockLen:s}=El({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);Il.number(i),Il.number(n),Il.number(s),Il.bool(r),Il.bool(o);const c=s/4;if(s%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(e,u,l,f,h=0)=>{if(Il.bytes(e),Il.bytes(u),Il.bytes(l),f||(f=new Uint8Array(l.length)),Il.bytes(f),Il.number(h),h<0||h>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(f.length<l.length)throw new Error(`Salsa/ChaCha: output (${f.length}) is shorter than data (${l.length})`);const d=[];let p,y;if(32===e.length)p=e,y=Bl;else{if(16!==e.length||!o)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${e.length}`);p=new Uint8Array(32),p.set(e),p.set(e,16),y=Cl,d.push(p)}if(a){if(u.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");p=a(y,p,u.subarray(0,16),new Uint8Array(32)),d.push(p),u=u.subarray(16)}const g=16-i;if(u.length!==g)throw new Error(`Salsa/ChaCha: nonce must be ${g} or 16 bytes`);if(12!==g){const e=new Uint8Array(12);e.set(u,r?0:12-u.length),d.push(u=e)}const b=new Uint8Array(s),m=wl(b),w=wl(p),v=wl(u),_=Ll(l)&&wl(l),E=Ll(f)&&wl(f);d.push(m);const S=l.length;for(let e=0,r=h;e<S;r++){if(t(y,w,v,m,r,n),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const i=Math.min(s,S-e);if(i===s&&E&&_){const t=e/4;if(e%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let e=0;e<c;e++)E[t+e]=_[t+e]^m[e];e+=s}else{for(let t=0;t<i;t++)f[e+t]=l[e+t]^b[t];e+=i}}for(let e=0;e<d.length;e++)d[e].fill(0);return f}},jl=(e,t)=>e<<t|e>>>32-t;function Dl(e,t,n,r,i,o=20){let a=e[0],s=e[1],c=e[2],u=e[3],l=t[0],f=t[1],h=t[2],d=t[3],p=t[4],y=t[5],g=t[6],b=t[7],m=i,w=n[0],v=n[1],_=n[2],E=a,S=s,k=c,A=u,O=l,P=f,I=h,T=d,x=p,N=y,R=g,C=b,B=m,L=w,U=v,j=_;for(let e=0;e<o;e+=2)E=E+O|0,B=jl(B^E,16),x=x+B|0,O=jl(O^x,12),E=E+O|0,B=jl(B^E,8),x=x+B|0,O=jl(O^x,7),S=S+P|0,L=jl(L^S,16),N=N+L|0,P=jl(P^N,12),S=S+P|0,L=jl(L^S,8),N=N+L|0,P=jl(P^N,7),k=k+I|0,U=jl(U^k,16),R=R+U|0,I=jl(I^R,12),k=k+I|0,U=jl(U^k,8),R=R+U|0,I=jl(I^R,7),A=A+T|0,j=jl(j^A,16),C=C+j|0,T=jl(T^C,12),A=A+T|0,j=jl(j^A,8),C=C+j|0,T=jl(T^C,7),E=E+P|0,j=jl(j^E,16),R=R+j|0,P=jl(P^R,12),E=E+P|0,j=jl(j^E,8),R=R+j|0,P=jl(P^R,7),S=S+I|0,B=jl(B^S,16),C=C+B|0,I=jl(I^C,12),S=S+I|0,B=jl(B^S,8),C=C+B|0,I=jl(I^C,7),k=k+T|0,L=jl(L^k,16),x=x+L|0,T=jl(T^x,12),k=k+T|0,L=jl(L^k,8),x=x+L|0,T=jl(T^x,7),A=A+O|0,U=jl(U^A,16),N=N+U|0,O=jl(O^N,12),A=A+O|0,U=jl(U^A,8),N=N+U|0,O=jl(O^N,7);let D=0;r[D++]=a+E|0,r[D++]=s+S|0,r[D++]=c+k|0,r[D++]=u+A|0,r[D++]=l+O|0,r[D++]=f+P|0,r[D++]=h+I|0,r[D++]=d+T|0,r[D++]=p+x|0,r[D++]=y+N|0,r[D++]=g+R|0,r[D++]=b+C|0,r[D++]=m+B|0,r[D++]=w+L|0,r[D++]=v+U|0,r[D++]=_+j|0}const Ml=Ul({core:Dl,counterRight:!1,counterLen:4,allow128bitKeys:!1});function Hl(e,t,n){return us.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),kc(e,ms(n),ms(t))}const Fl=new Uint8Array([0]),zl=new Uint8Array;function Kl(e,t,n,r=32){if(us.hash(e),us.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/e.outputLen);void 0===n&&(n=zl);const o=new Uint8Array(i*e.outputLen),a=kc.create(e,t),s=a._cloneInto(),c=new Uint8Array(a.outputLen);for(let t=0;t<i;t++)Fl[0]=t+1,s.update(0===t?zl:c).update(n).update(Fl).digestInto(c),o.set(c,e.outputLen*t),a._cloneInto(s);return a.destroy(),s.destroy(),c.fill(0),Fl.fill(0),o.slice(0,r)}var ql=Object.defineProperty,Vl=(e,t)=>{for(var n in t)ql(e,n,{get:t[n],enumerable:!0})};function Wl(e){return ys(Xc.getPublicKey(e))}Vl({},{MessageNode:()=>Jl,MessageQueue:()=>Ql,insertEventIntoAscendingList:()=>Xl,insertEventIntoDescendingList:()=>Zl,normalizeURL:()=>Yl,utf8Decoder:()=>Gl,utf8Encoder:()=>$l});var Gl=new TextDecoder("utf-8"),$l=new TextEncoder;function Yl(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Zl(e,t){let n,r=0,i=e.length-1,o=r;if(i<0)o=0;else if(t.created_at<e[i].created_at)o=i+1;else if(t.created_at>=e[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),e[n].created_at>t.created_at)r=n;else{if(!(e[n].created_at<t.created_at)){o=n;break}i=n}}return e[o]?.id!==t.id?[...e.slice(0,o),t,...e.slice(o)]:e}function Xl(e,t){let n,r=0,i=e.length-1,o=r;if(i<0)o=0;else if(t.created_at>e[i].created_at)o=i+1;else if(t.created_at<=e[r].created_at)o=r;else for(;;){if(i<=r+1){o=i;break}if(n=Math.floor(r+(i-r)/2),e[n].created_at<t.created_at)r=n;else{if(!(e[n].created_at>t.created_at)){o=n;break}i=n}}return e[o]?.id!==t.id?[...e.slice(0,o),t,...e.slice(o)]:e}var Jl=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},Ql=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new Jl(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},ef=Symbol("verified");function tf(e,t){const n=e;return n.pubkey=Wl(t),n.id=nf(n),n.sig=sf(n,t),n[ef]=!0,n}function nf(e){return ys(Rs($l.encode(function(e){if(!of(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e))))}var rf=e=>e instanceof Object;function of(e){if(!rf(e))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if("string"!=typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}function af(e){if("boolean"==typeof e[ef])return e[ef];const t=nf(e);if(t!==e.id)return e[ef]=!1;try{return e[ef]=Xc.verify(e.sig,t,e.pubkey)}catch(t){return e[ef]=!1}}function sf(e,t){return ys(Xc.sign(nf(e),t))}function cf(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e))))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((([e,t])=>e===n.slice(1)&&-1!==r.indexOf(t))))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>e.until)}function uf(e,t){for(let n=0;n<e.length;n++)if(cf(e[n],t))return!0;return!1}function lf(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function ff(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function hf(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return e.slice(r+1,o)}function df(e,t){return t===lf(e,"id")}function pf(e,t){return t===lf(e,"pubkey")}function yf(e,t){return t===ff(e,"kind")}Vl({},{getHex64:()=>lf,getInt:()=>ff,getSubscriptionId:()=>hf,matchEventId:()=>df,matchEventKind:()=>yf,matchEventPubkey:()=>pf});function gf(e,t={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=t;var o,a,s={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={};function f(){return 1===o?.readyState}async function h(e){let t=JSON.stringify(e);if(f()||(await new Promise((e=>setTimeout(e,1e3))),f()))try{o.send(t)}catch(e){console.log(e)}}const d=(e,{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:i=Math.random().toString().slice(2)}={})=>{let o=i;s[o]={id:o,filters:e,skipVerification:n,alreadyHaveEvent:r},h([t,o,...e]);let a={sub:(t,i={})=>d(t||e,{skipVerification:i.skipVerification||n,alreadyHaveEvent:i.alreadyHaveEvent||r,id:o}),unsub:()=>{delete s[o],delete u[o],h(["CLOSE",o])},on:(e,t)=>{u[o]=u[o]||{event:[],count:[],eose:[]},u[o][e].push(t)},off:(e,t)=>{let n=u[o],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)},get events(){return bf(a)}};return a};function p(e,t){return new Promise(((n,r)=>{if(!e.id)return void r(new Error(`event ${e} has no id`));let i=e.id;h([t,e]),l[i]={resolve:n,reject:r}}))}return{url:e,sub:d,on:(e,t)=>{c[e].push(t),"connect"===e&&1===o?.readyState&&t()},off:(e,t)=>{let n=c[e].indexOf(t);-1!==n&&c[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let i=d(e,t),o=[],a=setTimeout((()=>{i.unsub(),r(o)}),n);i.on("eose",(()=>{i.unsub(),clearTimeout(a),r(o)})),i.on("event",(e=>{o.push(e)}))})),get:(e,t)=>new Promise((n=>{let i=d([e],t),o=setTimeout((()=>{i.unsub(),n(null)}),r);i.on("event",(e=>{i.unsub(),clearTimeout(o),n(e)}))})),count:e=>new Promise((t=>{let n=d(e,{...d,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),i);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),async publish(e){await p(e,"EVENT")},async auth(e){await p(e,"AUTH")},connect:async function(){f()||await async function(){return a||(a=new Promise(((t,n)=>{try{o=new WebSocket(e)}catch(e){n(e)}o.onopen=()=>{c.connect.forEach((e=>e())),t()},o.onerror=()=>{a=void 0,c.error.forEach((e=>e())),n()},o.onclose=async()=>{a=void 0,c.disconnect.forEach((e=>e()))};let r,i=new Ql;function f(){if(0===i.size)return clearInterval(r),void(r=null);var t=i.dequeue();if(!t)return;let n=hf(t);if(n){let r=s[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(lf(t,"id"),e))return}try{let e=JSON.parse(t);switch(e[0]){case"EVENT":{let t=e[1],n=e[2];return void(of(n)&&s[t]&&(s[t].skipVerification||af(n))&&uf(s[t].filters,n)&&(s[t],(u[t]?.event||[]).forEach((e=>e(n)))))}case"COUNT":let t=e[1],n=e[2];return void(s[t]&&(u[t]?.count||[]).forEach((e=>e(n))));case"EOSE":{let t=e[1];return void(t in u&&(u[t].eose.forEach((e=>e())),u[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";if(t in l){let{resolve:e,reject:i}=l[t];n?e(null):i(new Error(r))}return}case"NOTICE":let r=e[1];return void c.notice.forEach((e=>e(r)));case"AUTH":{let t=e[1];return void c.auth?.forEach((e=>e(t)))}}}catch(e){return}}o.onmessage=e=>{i.enqueue(e.data),r||(r=setInterval(f,0))}})),a)}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={},o?.readyState===WebSocket.OPEN&&o.close()},get status(){return o?.readyState??3}}}async function*bf(e){let t;const n=[],r=e=>{t?(t(e),t=void 0):n.push(e)};e.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const e=await new Promise((e=>{t=e}));yield e}}finally{e.off("event",r)}}var mf={};Vl(mf,{BECH32_REGEX:()=>vf,decode:()=>_f,naddrEncode:()=>xf,neventEncode:()=>Tf,noteEncode:()=>Af,nprofileEncode:()=>If,npubEncode:()=>kf,nrelayEncode:()=>Nf,nsecEncode:()=>Sf});var wf=5e3,vf=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function _f(e){let{prefix:t,words:n}=_u.decode(e,wf),r=new Uint8Array(_u.fromWords(n));switch(t){case"nprofile":{let e=Ef(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ys(e[0][0]),relays:e[1]?e[1].map((e=>Gl.decode(e))):[]}}}case"nevent":{let e=Ef(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:ys(e[0][0]),relays:e[1]?e[1].map((e=>Gl.decode(e))):[],author:e[2]?.[0]?ys(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(ys(e[3][0]),16):void 0}}}case"naddr":{let e=Ef(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Gl.decode(e[0][0]),pubkey:ys(e[2][0]),kind:parseInt(ys(e[3][0]),16),relays:e[1]?e[1].map((e=>Gl.decode(e))):[]}}}case"nrelay":{let e=Ef(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Gl.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:ys(r)};default:throw new Error(`unknown prefix ${t}`)}}function Ef(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function Sf(e){return Pf("nsec",e)}function kf(e){return Pf("npub",e)}function Af(e){return Pf("note",e)}function Of(e,t){let n=_u.toWords(t);return _u.encode(e,n,wf)}function Pf(e,t){return Of(e,gs(t))}function If(e){return Of("nprofile",Rf({0:[gs(e.pubkey)],1:(e.relays||[]).map((e=>$l.encode(e)))}))}function Tf(e){let t;return null!=e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),Of("nevent",Rf({0:[gs(e.id)],1:(e.relays||[]).map((e=>$l.encode(e))),2:e.author?[gs(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function xf(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),Of("naddr",Rf({0:[$l.encode(e.identifier)],1:(e.relays||[]).map((e=>$l.encode(e))),2:[gs(e.pubkey)],3:[new Uint8Array(t)]}))}function Nf(e){return Of("nrelay",Rf({0:[$l.encode(e)]}))}function Rf(e){let t=[];return Object.entries(e).forEach((([e,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(e)],0),r.set([n.length],1),r.set(n,2),t.push(r)}))})),ws(...t)}var Cf={};async function Bf(e,t,n){const r=Uf(Cc.getSharedSecret(e,"02"+t));let i=Uint8Array.from(Ss(16)),o=$l.encode(n),a=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),s=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},a,o);return`${du.encode(new Uint8Array(s))}?iv=${du.encode(new Uint8Array(i.buffer))}`}async function Lf(e,t,n){let[r,i]=n.split("?iv="),o=Uf(Cc.getSharedSecret(e,"02"+t)),a=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),s=du.decode(r),c=du.decode(i),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},a,s);return Gl.decode(u)}function Uf(e){return e.slice(1,33)}Vl(Cf,{decrypt:()=>Lf,encrypt:()=>Bf}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);Vl({},{NIP05_REGEX:()=>Df,queryProfile:()=>Ff,searchDomain:()=>Hf,useFetchImplementation:()=>Mf});var jf,Df=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{jf=fetch}catch{}function Mf(e){jf=e}async function Hf(e,t=""){try{return(await(await jf(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch(e){return{}}}async function Ff(e){const t=e.match(Df);if(!t)return null;const[n,r="_",i]=t;try{const e=await jf(`https://${i}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),o=t[r];return o?{pubkey:o,relays:n?.[o]}:null}catch(e){return null}}function zf(e,t){let n=bl.fromMasterSeed($u(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return ys(n)}function Kf(){return Ku(Eu)}function qf(e){return Wu(e,Eu)}Vl({},{generateSeedWords:()=>Kf,privateKeyFromSeedWords:()=>zf,validateWords:()=>qf});function Vf(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let e=0;e<n.length;e++){const r=n[e],[i,o,a,s]=r,c={id:o,relays:a?[a]:[]},u=0===e,l=e===n.length-1;"root"!==s?"reply"!==s?"mention"!==s?u?t.root=c:l?t.reply=c:t.mentions.push(c):t.mentions.push(c):t.reply=c:t.root=c}return t}Vl({},{parse:()=>Vf});function Wf(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function Gf(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),i[1]=(++n).toString(),r.id=nf(r),Wf(r.id)>=t)break}return r}Vl({},{getPow:()=>Wf,minePow:()=>Gf});function $f(e,t,n,r){return tf({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function Yf(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"==typeof e)),author:n?.[1]}:void 0}function Zf(e,{skipVerification:t}={}){const n=Yf(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(e){return}return r.id===n.id&&(t||af(r))?r:void 0}Vl({},{finishRepostEvent:()=>$f,getRepostedEvent:()=>Zf,getRepostedEventPointer:()=>Yf});Vl({},{NOSTR_URI_REGEX:()=>Xf,parse:()=>Qf,test:()=>Jf});var Xf=new RegExp(`nostr:(${vf.source})`);function Jf(e){return"string"==typeof e&&new RegExp(`^${Xf.source}$`).test(e)}function Qf(e){const t=e.match(new RegExp(`^${Xf.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:_f(t[1])}}function eh(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return tf({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function th(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}Vl({},{finishReactionEvent:()=>eh,getReactedEventPointer:()=>th});function nh(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let i=Rs($l.encode(`nostr:delegation:${t.pubkey}:${r}`)),o=ys(Xc.sign(i,e));return{from:Wl(e),to:t.pubkey,cond:r,sig:o}}function rh(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],i=t[3],o=r.split("&");for(let t=0;t<o.length;t++){let[n,r,i]=o[t].split(/\b/);if(("kind"!==n||"="!==r||e.kind!==parseInt(i))&&!("created_at"===n&&"<"===r&&e.created_at<parseInt(i)||"created_at"===n&&">"===r&&e.created_at>parseInt(i)))return null}let a=Rs($l.encode(`nostr:delegation:${e.pubkey}:${r}`));return Xc.verify(i,a,n)?n:null}Vl({},{createDelegation:()=>nh,getDelegator:()=>rh});Vl({},{matchAll:()=>oh,regex:()=>ih,replaceAll:()=>ah});var ih=()=>new RegExp(`\\b${Xf.source}\\b`,"g");function*oh(e){const t=e.matchAll(ih());for(const e of t)try{const[t,n]=e;yield{uri:t,value:n,decoded:_f(n),start:e.index,end:e.index+t.length}}catch(e){}}function ah(e,t){return e.replaceAll(ih(),((e,n)=>t({uri:e,value:n,decoded:_f(n)})))}Vl({},{channelCreateEvent:()=>ch,channelHideMessageEvent:()=>fh,channelMessageEvent:()=>lh,channelMetadataEvent:()=>uh,channelMuteUserEvent:()=>hh});var sh,ch=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return tf({kind:40,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},uh=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return tf({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},lh=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),tf({kind:42,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},fh=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return tf({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},hh=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return tf({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};Vl({},{useFetchImplementation:()=>dh,validateGithub:()=>ph});try{sh=fetch}catch{}function dh(e){sh=e}async function ph(e,t,n){try{return await(await sh(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}Vl({},{authenticate:()=>yh});var yh=async({challenge:e,relay:t,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t.url],["challenge",e]],content:""};return t.auth(await n(r))};Vl({},{decrypt:()=>mh,encrypt:()=>bh,utils:()=>gh});var gh={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,t)=>Cc.getSharedSecret(e,"02"+t).subarray(1,33),getMessageKeys(e,t){const n=((e,t,n,r,i)=>Kl(e,Hl(e,t,n),r,i))(Rs,e,t,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},pad(e){const t=$l.encode(e),n=t.length;if(n<1||n>=gh.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=gh.v2.calcPadding(n),i=new Uint8Array(r-n),o=new Uint8Array(2);return new DataView(o.buffer).setUint16(0,n),ws(o,t,i)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(0===t||n.length!==t||e.length!==2+gh.v2.calcPadding(t))throw new Error("invalid padding");return Gl.decode(n)}}};function bh(e,t,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const i=n.salt??Ss(32);Sl(i,32);const o=gh.v2.getMessageKeys(e,i),a=gh.v2.pad(t),s=Ml(o.encryption,o.nonce,a),c=kc(Rs,o.auth,s);return du.encode(ws(new Uint8Array([r]),i,s,c))}function mh(e,t){const n=gh.v2;Sl(e,32);const r=t.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===t[0])throw new Error("unknown encryption version");let i;try{i=du.decode(t)}catch(e){throw new Error("invalid base64: "+e.message)}const o=i.subarray(0,1)[0];if(2!==o)throw new Error("unknown encryption version "+o);const a=i.subarray(1,33),s=i.subarray(33,-32),c=i.subarray(-32),u=n.getMessageKeys(e,a);if(!kl(kc(Rs,u.auth,s),c))throw new Error("invalid MAC");const l=Ml(u.encryption,u.nonce,s);return n.unpad(l)}function wh(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function vh({pubkey:e,secret:t,invoice:n}){const r={method:"pay_invoice",params:{invoice:n}},i=await Bf(t,e,JSON.stringify(r));return tf({kind:23194,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]},t)}Vl({},{makeNwcRequestEvent:()=>vh,parseConnectionString:()=>wh});var _h;Vl({},{getZapEndpoint:()=>Sh,makeZapReceipt:()=>Oh,makeZapRequest:()=>kh,useFetchImplementation:()=>Eh,validateZapRequest:()=>Ah});try{_h=fetch}catch{}function Eh(e){_h=e}async function Sh(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=_u.decode(n,1e3),r=_u.fromWords(e);t=Gl.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let i=await _h(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(e){}return null}function kh({profile:e,event:t,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&o.tags.push(["e",t]),o}function Ah(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!of(t))return"Zap request is not a valid Nostr event.";if(!af(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((([e,t])=>"e"===e&&t));if(r&&!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'e' tag is not valid hex.";let i=t.tags.find((([e,t])=>"relays"===e&&t));return i?null:"Zap request doesn't have a 'relays' tag."}function Oh({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let i=JSON.parse(e).tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["bolt11",n],["description",e]]};return t&&o.tags.push(["preimage",t]),o}Vl({},{getToken:()=>Ih,unpackEventFromToken:()=>xh,validateEvent:()=>Nh,validateToken:()=>Th});var Ph="Nostr ";async function Ih(e,t,n,r=!1){if(!e||!t)throw new Error("Missing loginUrl or httpMethod");const i=function(e=255){return{kind:e,content:"",tags:[],created_at:0}}(27235);i.tags=[["u",e],["method",t]],i.created_at=Math.round((new Date).getTime()/1e3);const o=await n(i);return(r?Ph:"")+du.encode($l.encode(JSON.stringify(o)))}async function Th(e,t,n){const r=await xh(e).catch((e=>{throw e}));return await Nh(r,t,n).catch((e=>{throw e}))}async function xh(e){if(!e)throw new Error("Missing token");e=e.replace(Ph,"");const t=Gl.decode(du.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}async function Nh(e,t,n){if(!e)throw new Error("Invalid nostr event");if(!af(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find((e=>"u"===e[0]));if(1!==r?.length&&r?.[1]!==t)throw new Error("Invalid nostr event, url tag invalid");const i=e.tags.find((e=>"method"===e[0]));if(1!==i?.length&&i?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rh.apply(this,arguments)}function Ch(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function Bh(e){return Object.entries(e).map((([e,t])=>e&&t?`${e}=${t}`:"")).filter((e=>e)).join("&")}function Lh(e,t){return`Basic ${btoa(`${e}:${t}`)}`}class Uh extends Error{constructor(e,t,n,r){let i=e.toString();t&&(i+=` ${t}`),i+=": ",i+=r.message?r.message:JSON.stringify(r),super(i),this.status=void 0,this.statusText=void 0,this.headers=void 0,this.error=void 0,this.status=e,this.statusText=t,this.headers=n,this.error=r}}const jh=["auth","endpoint","params","request_body","method","max_retries","base_url","user_agent","headers"],Dh="https://api.getalby.com";async function Mh(e,t,n=0){const r=await fetch(e,t);if(429===r.status&&n>0){const i=Number(r.headers.get("x-rate-limit-reset")),o=Number(r.headers.get("x-rate-limit-remaining")),a=1e3*i-Date.now();let s=1e3;return 0===o&&(s=a),await new Promise((e=>setTimeout(e,s))),Mh(e,t,n-1)}return r}async function Hh(e){let{auth:t,endpoint:n,params:r={},request_body:i,method:o,max_retries:a,base_url:s=Dh,user_agent:c,headers:u}=e,l=Ch(e,jh);const f=new URL(s+n);f.search=Bh(r);const h="POST"===o&&!!i,d=t?await t.getAuthHeader(f.href,o):void 0,p=await Mh(f.toString(),Rh({headers:Rh({},h?{"Content-Type":"application/json; charset=utf-8"}:void 0,d,u,{"User-Agent":null!=c?c:"@getalby/sdk","X-User-Agent":null!=c?c:"@getalby/sdk"}),method:o,body:h?JSON.stringify(i):void 0},l),a);if(!p.ok){const e=await p.json();throw new Uh(p.status,p.statusText,p.headers,e)}return p}async function Fh(e){return(await Hh(e)).json()}const zh=["expires_in"],Kh=["token"];function qh(e){const{expires_in:t}=e;return Rh({},Ch(e,zh),!!t&&{expires_at:Date.now()+1e3*t})}class Vh{constructor(e){this.bearer_token=void 0,this.bearer_token=e}getAuthHeader(){return{Authorization:`Bearer ${this.bearer_token}`}}}var Wh=class{constructor(e){this.token=void 0,this.options=void 0,this.code_verifier=void 0,this.code_challenge=void 0,this._refreshAccessTokenPromise=void 0,this._tokenEvents=void 0,this._tokenEvents=new os;const{token:t}=e,n=Ch(e,Kh);this.options=Rh({client_secret:""},n),this.token=t,this._refreshAccessTokenPromise=null}on(e,t){this._tokenEvents.on(e,t)}async refreshAccessToken(){var e=this;return this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=new Promise((async function(t,n){try{var r;const n=null==(r=e.token)?void 0:r.refresh_token,{client_id:i,client_secret:o,request_options:a,user_agent:s}=e.options;if(!i)throw new Error("client_id is required");if(!n)throw new Error("refresh_token is required");const c=qh(await Fh(Rh({},a,{endpoint:"/oauth/token",params:{client_id:i,grant_type:"refresh_token",refresh_token:n},user_agent:s,method:"POST",headers:Rh({},null==a?void 0:a.headers,{"Content-type":"application/x-www-form-urlencoded"},{Authorization:Lh(i,o)})})));e.token=c,t({token:c}),e._tokenEvents.emit("tokenRefreshed",e.token)}catch(t){console.error(t),n(t),e._tokenEvents.emit("tokenRefreshFailed",t)}finally{e._refreshAccessTokenPromise=null}}))),this._refreshAccessTokenPromise}isAccessTokenExpired(){var e,t;const n=null==(e=this.token)?void 0:e.refresh_token,r=null==(t=this.token)?void 0:t.expires_at;return!r||!!n&&r<=Date.now()+1e3}async requestAccessToken(e){const{client_id:t,client_secret:n,callback:r,request_options:i,user_agent:o}=this.options,a=this.code_verifier;if(!t)throw new Error("client_id is required");if(!n&&!a)throw new Error("either client_secret is required, or code should be generated using a challenge");if(!r)throw new Error("callback is required");const s={code:e,grant_type:"authorization_code",code_verifier:a,client_id:t,redirect_uri:r},c=qh(await Fh(Rh({},i,{endpoint:"/oauth/token",params:s,user_agent:o,method:"POST",headers:Rh({},null==i?void 0:i.headers,{"Content-Type":"application/x-www-form-urlencoded"},{Authorization:Lh(t,n)})})));return this.token=c,{token:c}}async generateAuthURL(e){e||(e={});const{client_id:t,callback:n,scopes:r}=this.options;if(!n)throw new Error("callback required");if(!r)throw new Error("scopes required");let i;"S256"===e.code_challenge_method?(await this._generateS256Challenge(),i="S256"):"plain"===e.code_challenge_method&&e.code_challenge&&(this.code_challenge=e.code_challenge,this.code_verifier=e.code_challenge,i="plain");const o=this.code_challenge,a=new URL(e.authorizeUrl||"https://getalby.com/oauth");return a.search=Bh(Rh({},e,{client_id:t,scope:r.join(" "),response_type:"code",redirect_uri:n,code_challenge_method:i,code_challenge:o})),a.toString()}async getAuthHeader(){var e;if(null==(e=this.token)||!e.access_token)throw new Error("access_token is required");return this.isAccessTokenExpired()&&await this.refreshAccessToken(),{Authorization:`Bearer ${this.token.access_token}`}}async _generateS256Challenge(){const e=crypto.getRandomValues(new Uint8Array(64));this.code_verifier=e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(this.code_verifier)),n=new Uint8Array(t);this.code_challenge=btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}};const Gh={alby:{authorizationUrl:"https://nwc.getalby.com/apps/new",relayUrl:"wss://relay.getalby.com/v1",walletPubkey:"69effe7b49a6dd5cf525bd0905917a5005ffe480b58eeb8e861418cf3ae760d9"}},$h={get_info:"getInfo",get_balance:"getBalance",make_invoice:"makeInvoice",pay_invoice:"sendPayment",pay_keysend:"payKeysend",lookup_invoice:"lookupInvoice",list_transactions:"listTransactions"};class Yh{static parseWalletConnectUrl(e){e=e.replace("nostrwalletconnect://","http://").replace("nostr+walletconnect://","http://");const t=new URL(e),n={};n.walletPubkey=t.host;const r=t.searchParams.get("secret"),i=t.searchParams.get("relay");return r&&(n.secret=r),i&&(n.relayUrl=i),n}static withNewSecret(e){return(e=e||{}).secret=ys(Xc.utils.randomPrivateKey()),new Yh(e)}constructor(e){var t;this.relay=void 0,this.relayUrl=void 0,this.secret=void 0,this.walletPubkey=void 0,this.options=void 0,this.subscribers=void 0,this._enabled=!1,e&&e.nostrWalletConnectUrl&&(e=Rh({},Yh.parseWalletConnectUrl(e.nostrWalletConnectUrl),e));const n=Gh[(null==(t=e)?void 0:t.providerName)||"alby"];this.options=Rh({},n,e||{}),this.relayUrl=this.options.relayUrl,this.relay=gf(this.relayUrl),this.options.secret&&(this.secret=this.options.secret.toLowerCase().startsWith("nsec")?mf.decode(this.options.secret).data:this.options.secret),this.walletPubkey=this.options.walletPubkey.toLowerCase().startsWith("npub")?mf.decode(this.options.walletPubkey).data:this.options.walletPubkey,this.subscribers={},void 0===globalThis.WebSocket&&console.error("WebSocket is undefined. Make sure to `import websocket-polyfill` for nodejs environments")}on(e,t){this.subscribers[e]=t}notify(e,t){const n=this.subscribers[e];n&&n(t)}getNostrWalletConnectUrl(e=!0){let t=`nostr+walletconnect://${this.walletPubkey}?relay=${this.relayUrl}&pubkey=${this.publicKey}`;return e&&(t=`${t}&secret=${this.secret}`),t}get nostrWalletConnectUrl(){return this.getNostrWalletConnectUrl()}get connected(){return 1===this.relay.status}get publicKey(){if(!this.secret)throw new Error("Missing secret key");return Wl(this.secret)}getPublicKey(){return Promise.resolve(this.publicKey)}signEvent(e){if(!this.secret)throw new Error("Missing secret key");return Promise.resolve(tf(e,this.secret))}getEventHash(e){return nf(e)}async enable(){this._enabled=!0}close(){return this.relay.close()}async encrypt(e,t){if(!this.secret)throw new Error("Missing secret");return await Cf.encrypt(this.secret,e,t)}async decrypt(e,t){if(!this.secret)throw new Error("Missing secret");return await Cf.decrypt(this.secret,e,t)}async getInfo(){await this.checkConnected();const e=["lightning","nostr"],t="Alby JS SDK";try{return await this.executeNip47Request("get_info",void 0,(e=>!!e.methods),(n=>({methods:n.methods.map((e=>$h[e])),node:{alias:n.alias,pubkey:n.pubkey,color:n.color},supports:e,version:t})))}catch(n){return console.error("Failed to request get_info",n),{methods:["sendPayment"],node:{},supports:e,version:t}}}async getBalance(){return await this.checkConnected(),this.executeNip47Request("get_balance",void 0,(e=>void 0!==e.balance),(e=>({balance:Math.floor(e.balance/1e3),currency:"sats"})))}async sendPayment(e){return await this.checkConnected(),this.executeNip47Request("pay_invoice",{invoice:e},(e=>!!e.preimage),(e=>({preimage:e.preimage})))}async keysend(e){return await this.checkConnected(),this.executeNip47Request("pay_keysend",{amount:1e3*+e.amount,pubkey:e.destination,tlv_records:e.customRecords?Object.entries(e.customRecords).map((e=>({type:parseInt(e[0]),value:e[1]}))):[]},(e=>!!e.preimage),(e=>({preimage:e.preimage})))}lnurl(e){throw new Error("Method not implemented.")}async makeInvoice(e){var t;await this.checkConnected();const n="object"==typeof e?e:void 0,r=+(null!=(t=null==n?void 0:n.amount)?t:e);if(!r)throw new Error("No amount specified");return this.executeNip47Request("make_invoice",{amount:1e3*r,description:null==n?void 0:n.defaultMemo},(e=>!!e.invoice),(e=>({paymentRequest:e.invoice})))}async lookupInvoice(e){return await this.checkConnected(),this.executeNip47Request("lookup_invoice",{invoice:e.paymentRequest,payment_hash:e.paymentHash},(e=>!!e.invoice),(e=>({preimage:e.preimage,paymentRequest:e.invoice,paid:!!e.settled_at})))}async listTransactions(e){return await this.checkConnected(),this.executeNip47Request("list_transactions",e,(e=>!!e.transactions),(e=>({transactions:e.transactions.map(Zh)})))}request(e,t){throw new Error("Method not implemented.")}signMessage(e){throw new Error("Method not implemented.")}verifyMessage(e,t){throw new Error("Method not implemented.")}getAuthorizationUrl(e){if(!this.options.authorizationUrl)throw new Error("Missing authorizationUrl option");const t=new URL(this.options.authorizationUrl);return null!=e&&e.name&&t.searchParams.set("name",null==e?void 0:e.name),t.searchParams.set("pubkey",this.publicKey),null!=e&&e.returnTo&&t.searchParams.set("return_to",e.returnTo),null!=e&&e.budgetRenewal&&t.searchParams.set("budget_renewal",e.budgetRenewal),null!=e&&e.expiresAt&&t.searchParams.set("expires_at",Math.floor(e.expiresAt.getTime()/1e3).toString()),null!=e&&e.maxAmount&&t.searchParams.set("max_amount",e.maxAmount.toString()),void 0!==(null==e?void 0:e.editable)&&t.searchParams.set("editable",e.editable.toString()),null!=e&&e.requestMethods&&t.searchParams.set("request_methods",e.requestMethods.join(" ")),t}initNWC(e={}){e.name||(e.name=document.location.host);const t=this.getAuthorizationUrl(e),n=window.outerHeight/2+window.screenY-300,r=window.outerWidth/2+window.screenX-200;return new Promise(((e,i)=>{const o=window.open(t.toString(),`${document.title} - Wallet Connect`,`height=600,width=400,top=${n},left=${r}`);if(!o)return void i();const a=n=>{const r=n.data;r&&"nwc:success"===r.type&&n.origin===`${t.protocol}//${t.host}`&&(e(r),clearInterval(s),window.removeEventListener("message",a),o&&o.close())},s=setInterval((()=>{o&&o.closed&&(i(),clearInterval(s),window.removeEventListener("message",a))}),500);window.addEventListener("message",a)}))}async checkConnected(){if(!this._enabled)throw new Error("please call enable() and await the promise before calling this function");if(!this.secret)throw new Error("Missing secret key");await this.relay.connect()}executeNip47Request(e,t,n,r){var i=this;const o=$h[e];return new Promise(((a,s)=>{!async function(){const c={method:e,params:t},u=await i.encrypt(i.walletPubkey,JSON.stringify(c)),l={kind:23194,created_at:Math.floor(Date.now()/1e3),tags:[["p",i.walletPubkey]],content:u,pubkey:i.publicKey},f=await i.signEvent(l),h=i.relay.sub([{kinds:[23195],authors:[i.walletPubkey],"#e":[f.id]}]),d=setTimeout((function(){h.unsub(),s({error:`reply timeout: event ${f.id}`,code:"INTERNAL"})}),6e4);h.on("event",(async function(e){clearTimeout(d),h.unsub();const t=await i.decrypt(i.walletPubkey,e.content);let c;try{c=JSON.parse(t)}catch(e){return void s({error:"invalid response",code:"INTERNAL"})}var u,l;23195==e.kind&&c.result?n(c.result)?(a(r(c.result)),i.notify(o,c.result)):s({error:"Response from NWC failed validation: "+JSON.stringify(c.result),code:"INTERNAL"}):s({error:null==(u=c.error)?void 0:u.message,code:null==(l=c.error)?void 0:l.code})}));const p=setTimeout((function(){s({error:`Publish timeout: event ${f.id}`})}),5e3);try{await i.relay.publish(f),clearTimeout(p)}catch(e){clearTimeout(p),s({error:`Failed to publish request: ${e}`})}}()}))}}function Zh(e){return Rh({},e,{amount:Math.floor(e.amount/1e3),fees_paid:e.fees_paid?Math.floor(e.fees_paid/1e3):0})}const Xh=Yh;function Jh(e){const t={};return e.recipient.customKey&&e.recipient.customValue&&(t[e.recipient.customKey]=e.recipient.customValue),t[7629169]=JSON.stringify(e.boostagram),{destination:e.recipient.address,amount:e.amount,customRecords:t}}class Qh{constructor(e,t){this.auth=void 0,this.defaultRequestOptions=void 0,this.auth="string"==typeof e?new Vh(e):e,this.defaultRequestOptions=Rh({},t,{user_agent:null==t?void 0:t.user_agent})}accountBalance(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/balance",params:e,method:"GET"}))}accountSummary(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/user/summary",params:e,method:"GET"}))}accountInformation(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/user/me",params:e,method:"GET"}))}accountValue4Value(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/user/value4value",params:e,method:"GET"}))}incomingInvoices(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices/incoming",params:e,method:"GET"}))}outgoingInvoices(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices/outgoing",params:e,method:"GET"}))}invoices(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices",params:e,method:"GET"}))}getInvoice(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:`/invoices/${e}`,method:"GET"}))}decodeInvoice(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:`/decode/bolt11/${e}`,method:"GET"}))}createInvoice(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/invoices",request_body:e,method:"POST"}))}keysend(e,t){let n,r;return Array.isArray(e)?(n="/payments/keysend/multi",r={keysends:e}):(n="/payments/keysend",r=e),Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:n,request_body:r,method:"POST"}))}sendPayment(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/payments/bolt11",request_body:e,method:"POST"}))}sendBoostagram(e,t){let n,r;return Array.isArray(e)?(n="/payments/keysend/multi",r={keysends:e.map((e=>Jh(e)))}):(n="/payments/keysend",r=Jh(e)),Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:n,request_body:r,method:"POST"}))}sendToAlbyAccount(e,t){return console.warn("sendToAlbyAccount is deprecated. Please use sendBoostagramToAlbyAccount instead."),this.sendBoostagramToAlbyAccount(e,t)}sendBoostagramToAlbyAccount(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/payments/keysend",request_body:{destination:"030a58b8653d32b99200a2334cfe913e51dc7d155aa0116c176657a4f1722677a3",customRecords:{696969:e.account},amount:e.amount,memo:e.memo},method:"POST"}))}createWebhookEndpoint(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/webhook_endpoints",request_body:e,method:"POST"}))}deleteWebhookEndpoint(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:`/webhook_endpoints/${e}`,method:"DELETE"}))}getSwapInfo(e){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,e,{endpoint:"/swaps/info",method:"GET"}))}createSwap(e,t){return Fh(Rh({auth:this.auth},this.defaultRequestOptions,t,{endpoint:"/swaps",method:"POST",request_body:e}))}}var ed={__proto__:null,NostrWebLNProvider:Yh,NWC:Xh,OauthWeblnProvider:class{constructor(e){this.client=void 0,this.auth=void 0,this.oauth=void 0,this.subscribers=void 0,this.isExecuting=void 0,this.auth=e.auth,this.client=new Qh(e.auth),this.oauth=!0,this.subscribers={},this.isExecuting=!1}on(e,t){this.subscribers[e]=t}notify(e,t){const n=this.subscribers[e];n&&n(t)}async enable(){var e;if(!this.isExecuting){if(null!=(e=this.auth.token)&&e.access_token)return{enabled:!0};if("undefined"==typeof window||void 0===window.document)throw new Error("Missing access token");try{this.isExecuting=!0,await this.openAuthorization()}finally{this.isExecuting=!1}}}async sendPayment(e){if(!this.isExecuting)try{this.isExecuting=!0;const t=await this.client.sendPayment({invoice:e});return this.notify("sendPayment",t),{preimage:t.payment_preimage}}catch(e){let t="Unknown Error";throw e instanceof Error&&(t=e.message),new Error(t)}finally{this.isExecuting=!1}}async keysend(e){if(!this.isExecuting)try{this.isExecuting=!0;const t=await this.client.keysend(e);return this.notify("keysend",t),{preimage:t.payment_preimage}}catch(e){let t="Unknown Error";throw e instanceof Error&&(t=e.message),new Error(t)}finally{this.isExecuting=!1}}async getInfo(){return{alias:"Alby"}}async makeInvoice(e){if(!this.isExecuting)try{this.isExecuting=!0;const t=await this.client.createInvoice({amount:parseInt(e.amount.toString()),description:e.defaultMemo});return this.notify("makeInvoice",t),{paymentRequest:t.payment_request}}catch(e){let t="Unknown Error";throw e instanceof Error&&(t=e.message),new Error(t)}finally{this.isExecuting=!1}}async openAuthorization(){var e=this;const t=window.outerHeight/2+window.screenY-350,n=window.outerWidth/2+window.screenX-300,r=await this.auth.generateAuthURL({code_challenge_method:"S256"});return new Promise(((i,o)=>{const a=window.open(r,`${document.title} - WebLN enable`,`height=700,width=600,top=${t},left=${n}`);let s=!1;window.addEventListener("message",(async function(t){const n=t.data;if(n&&"alby:oauth:success"===n.type&&t.origin===`${document.location.protocol}//${document.location.host}`&&!s){s=!0,console.info("Processing OAuth code response");const t=n.payload.code;try{await e.auth.requestAccessToken(t),e.client=new Qh(e.auth),a&&a.close(),e.notify("enable"),i({enabled:!0})}catch(e){console.error(e),o({enabled:!1})}}}))}))}}};function td(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function nd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){td(o,r,i,a,s,"next",e)}function s(e){td(o,r,i,a,s,"throw",e)}a(void 0)}))}}function rd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function id(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){id(e,t,n[t])}))}return e}function ad(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function sd(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var cd=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),id(this,"account",void 0),id(this,"config",void 0),id(this,"_client",void 0),id(this,"_authUser",void 0),id(this,"_cache",new Map),this.account=t,this.config=n}var t,n,r;return t=e,n=[{key:"init",value:function(){var e=this;return nd((function(){var t;return sd(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,e.authorize()];case 1:return e._authUser=n.sent(),e._client=new Qh(e._authUser,e._getRequestOptions()),[3,4];case 2:return t=n.sent(),console.error("Failed to initialize alby connector",t),e._authUser=void 0,e._client=void 0,[4,e.unload()];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))()}},{key:"getOAuthToken",value:function(){return this.config.oAuthToken}},{key:"unload",value:function(){return Promise.resolve()}},{key:"supportedMethods",get:function(){return["getInfo","keysend","makeInvoice","sendPayment","sendPaymentAsync","getBalance","getTransactions"]}},{key:"connectPeer",value:function(){var e=this;return nd((function(){return sd(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the connectPeer call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getTransactions",value:function(){var e=this;return nd((function(){return sd(this,(function(t){switch(t.label){case 0:return[4,e._request((function(e){return e.invoices({})}))];case 1:return[2,{data:{transactions:t.sent().map((function(e,t){var n;return{custom_records:e.custom_records,id:"".concat(e.payment_request,"-").concat(t),memo:e.comment||e.memo,preimage:null!==(n=e.preimage)&&void 0!==n?n:"",payment_hash:e.payment_hash,settled:e.settled,settleDate:new Date(e.settled_at).getTime(),totalAmount:e.amount,type:"incoming"==e.type?"received":"sent"}}))}}]}}))}))()}},{key:"getInfo",value:function(){var e=this;return nd((function(){var t,n,r,i,o;return sd(this,(function(a){switch(a.label){case 0:if(t="getInfo",n=e._cache.get(t))return[2,n];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e._request((function(e){return e.accountInformation({})}))];case 2:return r=a.sent(),i={data:ad(od({},r),{alias:" getalby.com"})},e._cache.set(t,i),[2,i];case 3:throw o=a.sent(),console.error(o),o;case 4:return[2]}}))}))()}},{key:"getBalance",value:function(){var e=this;return nd((function(){return sd(this,(function(t){switch(t.label){case 0:return[4,e._request((function(e){return e.accountBalance({})}))];case 1:return[2,{data:{balance:t.sent().balance}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return nd((function(){var n;return sd(this,(function(r){switch(r.label){case 0:return[4,t._request((function(t){return t.sendPayment({invoice:e.paymentRequest})}))];case 1:return[2,{data:{preimage:(n=r.sent()).payment_preimage,paymentHash:n.payment_hash,route:{total_amt:n.amount,total_fees:n.fee}}}]}}))}))()}},{key:"keysend",value:function(e){var t=this;return nd((function(){var n;return sd(this,(function(r){switch(r.label){case 0:return[4,t._request((function(t){return t.keysend({destination:e.pubkey,amount:e.amount,customRecords:e.customRecords})}))];case 1:return[2,{data:{preimage:(n=r.sent()).payment_preimage,paymentHash:n.payment_hash,route:{total_amt:n.amount,total_fees:n.fee}}}]}}))}))()}},{key:"checkPayment",value:function(e){var t=this;return nd((function(){var n,r,i;return sd(this,(function(o){switch(o.label){case 0:n=!1,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t._request((function(t){return t.getInvoice(e.paymentHash)}))];case 2:return r=o.sent(),n=!!(null==r?void 0:r.settled),[3,4];case 3:return i=o.sent(),console.error(i),[3,4];case 4:return[2,{data:{paid:n}}]}}))}))()}},{key:"signMessage",value:function(e){throw new Error("SignMessage is not supported by Alby accounts. Generate a Master Key to use LNURL auth.")}},{key:"makeInvoice",value:function(e){var t=this;return nd((function(){var n;return sd(this,(function(r){switch(r.label){case 0:return[4,t._request((function(t){return t.createInvoice({amount:parseInt(e.amount.toString()),description:e.memo})}))];case 1:return[2,{data:{paymentRequest:(n=r.sent()).payment_request,rHash:n.payment_hash}}]}}))}))()}},{key:"getSwapInfo",value:function(){var e=this;return nd((function(){return sd(this,(function(t){switch(t.label){case 0:return[4,e._request((function(e){return e.getSwapInfo()}))];case 1:return[2,t.sent()]}}))}))()}},{key:"createSwap",value:function(e){var t=this;return nd((function(){return sd(this,(function(n){switch(n.label){case 0:return[4,t._request((function(t){return t.createSwap(e)}))];case 1:return[2,n.sent()]}}))}))()}},{key:"authorize",value:function(){var e=this;return nd((function(){var t,n,r,i,a,s,c;return sd(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,8,,9]),t="NT8bFB23Sk",n="wWp7BPpYOm1H0GwSVVpY",(r=new Wh({request_options:e._getRequestOptions(),client_id:t,client_secret:n,callback:"https://getalby.com/extension/connect",user_agent:"lightning-browser-extension:".concat("3.7.0"),scopes:["account:read","balance:read","invoices:create","invoices:read","payments:send","transactions:read"],token:e.config.oAuthToken})).on("tokenRefreshed",(function(t){e._updateOAuthToken(t)})),r.on("tokenRefreshFailed",(function(e){console.error("Failed to Refresh token",e)})),!e.config.oAuthToken)return[3,5];u.label=1;case 1:return u.trys.push([1,4,,5]),r.isAccessTokenExpired()?[4,r.refreshAccessToken()]:[3,3];case 2:u.sent(),u.label=3;case 3:return[2,r];case 4:return i=u.sent(),console.error("Failed to request new auth token",i),[3,5];case 5:return[4,r.generateAuthURL({code_challenge_method:"S256",authorizeUrl:""})];case 6:return a=u.sent(),a+="&webln=false",[4,o().tabs.create({url:a})];case 7:return s=u.sent(),[2,new Promise((function(t,n){var i=function(a,c,u){if("complete"===c.status&&a===s.id){var l=e.extractCodeFromTabUrl(u.url);if(!l)throw new Error("no authorization code");r.requestAccessToken(l).then((function(n){e._updateOAuthToken(n.token),t(r)})).catch((function(e){console.error("Failed to request new auth token",e),n(e)})).finally((function(){o().tabs.remove(a),o().tabs.onUpdated.removeListener(i)}))}},a=function(e){if(e===s.id){var t=new Error("OAuth authentication canceled by user");n(t),o().tabs.onRemoved.removeListener(a)}};o().tabs.onUpdated.addListener(i),o().tabs.onRemoved.addListener(a)}))];case 8:throw c=u.sent(),console.error(c),c;case 9:return[2]}}))}))()}},{key:"extractCodeFromTabUrl",value:function(e){return e?new URLSearchParams(e.split("?")[1]).get("code"):null}},{key:"_request",value:function(e){var t=this;return nd((function(){var n,r;return sd(this,(function(i){switch(i.label){case 0:if(!t._authUser||!t._client)throw new Error("Alby client was not initialized");i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e(t._client)];case 2:return n=i.sent(),[3,4];case 3:throw r=i.sent(),console.error(r),r;case 4:return[2,n]}}))}))()}},{key:"_getRequestOptions",value:function(){return od({user_agent:"lightning-browser-extension:".concat("3.7.0")},{base_url:"https://api.getalby.com"})}},{key:"_updateOAuthToken",value:function(e){var t=this;return nd((function(){var n,r,i,o,a,s;return sd(this,(function(c){switch(c.label){case 0:return n=e.access_token,r=e.refresh_token,i=e.expires_at,n&&r&&i?(t.config.oAuthToken={access_token:n,refresh_token:r,expires_at:i},t.account.id?(o=i_.getState().accounts,[4,i_.getState().password()]):[3,3]):[3,4];case 1:return a=c.sent(),(s=z(o[t.account.id].config,a)).oAuthToken=t.config.oAuthToken,o[t.account.id].config=F(s,a),i_.setState({accounts:o}),[4,i_.getState().saveToStorage()];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:throw console.error("Invalid token"),new Error("Invalid token");case 5:return[2]}}))}))()}}],n&&rd(t.prototype,n),r&&rd(t,r),e}();function ud(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ld(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ud(o,r,i,a,s,"next",e)}function s(e){ud(o,r,i,a,s,"throw",e)}a(void 0)}))}}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){hd(e,t,n[t])}))}return e}function pd(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var yd=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hd(this,"account",void 0),hd(this,"config",void 0),hd(this,"jwt",void 0),hd(this,"_requestFunc",void 0),this.account=t,this.config=n,this.jwt=""}var t,n,r;return t=e,n=[{key:"requestFunc",set:function(e){this._requestFunc=e}},{key:"init",value:function(){return Promise.resolve()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"supportedMethods",get:function(){return["makeInvoice","sendPayment","sendPaymentAsync","signMessage","getInfo","getBalance"]}},{key:"getInfo",value:function(){var e=this;return ld((function(){return pd(this,(function(t){switch(t.label){case 0:return[4,e.ensureLogin()];case 1:return t.sent(),[2,e.request("GET","api/v1/lnd/info").then((function(e){return{data:{alias:e.alias,pubkey:e.identityPubkey,color:e.color}}}))]}}))}))()}},{key:"getTransactions",value:function(){var e=this;return ld((function(){return pd(this,(function(t){return console.error("getTransactions() is not yet supported with the currently used account: ".concat(e.constructor.name)),[2,{data:{transactions:[]}}]}))}))()}},{key:"connectPeer",value:function(){var e=this;return ld((function(){return pd(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the getInvoices call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getBalance",value:function(){var e=this;return ld((function(){return pd(this,(function(t){switch(t.label){case 0:return[4,e.ensureLogin()];case 1:return t.sent(),[2,e.request("GET","api/v1/lnd/wallet/lightning").then((function(e){var t;return{data:{balance:parseInt(null===(t=e.localBalance)||void 0===t?void 0:t.sat)}}}))]}}))}))()}},{key:"keysend",value:function(e){return ld((function(){return pd(this,(function(e){throw new Error("not supported")}))}))()}},{key:"sendPayment",value:function(e){var t=this;return ld((function(){return pd(this,(function(n){switch(n.label){case 0:return[4,t.ensureLogin()];case 1:return n.sent(),[2,t.request("POST","api/v1/lnd/lightning/payInvoice",{paymentRequest:e.paymentRequest}).then((function(e){var t,n;return{data:{preimage:e.paymentPreimage,paymentHash:e.paymentHash,route:{total_amt:Math.floor(parseInt(null===(t=e.paymentRoute)||void 0===t?void 0:t.totalAmtMsat)/1e3),total_fees:parseInt(null===(n=e.paymentRoute)||void 0===n?void 0:n.totalFeesMsat)}}}}))]}}))}))()}},{key:"signMessage",value:function(e){var t=this;return ld((function(){return pd(this,(function(n){switch(n.label){case 0:return[4,t.ensureLogin()];case 1:return n.sent(),[2,t.request("POST","api/v1/lnd/util/sign-message",{message:e.message}).then((function(t){return{data:{message:e.message,signature:t.signature}}}))]}}))}))()}},{key:"refresh",value:function(){var e=this;return ld((function(){var t;return pd(this,(function(n){switch(n.label){case 0:return[4,e.request("POST","manager-api/v1/account/refresh")];case 1:if("object"!=typeof(t=n.sent())||null===t||!t.jwt)throw new Error("Failed to login.");return[2,t.jwt]}}))}))()}},{key:"login",value:function(e,t){var n=this;return ld((function(){var r;return pd(this,(function(i){switch(i.label){case 0:return[4,n.request("POST","manager-api/v1/account/login",{password:e,totpToken:t})];case 1:if("object"!=typeof(r=i.sent())||null===r||!r.jwt)throw new Error("Failed to login.");return[2,r.jwt]}}))}))()}},{key:"ensureLogin",value:function(){var e=this;return ld((function(){return pd(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,e.refresh()];case 1:case 3:return e.jwt=t.sent(),[3,4];case 2:return t.sent(),[4,e.login(e.config.password,"")];case 4:return[2]}}))}))()}},{key:"makeInvoice",value:function(e){var t=this;return ld((function(){return pd(this,(function(n){switch(n.label){case 0:return[4,t.ensureLogin()];case 1:return n.sent(),[2,t.request("POST","api/v1/lnd/util/lightning/addInvoice",{memo:e.memo,amt:e.amount.toString()}).then((function(e){return{data:{paymentRequest:e.paymentRequest,rHash:e.rHashStr}}}))]}}))}))()}},{key:"checkPayment",value:function(e){var t=this;return ld((function(){return pd(this,(function(n){switch(n.label){case 0:return[4,t.ensureLogin()];case 1:return n.sent(),[2,t.request("GET","invoice-info?paymentHash=".concat(e.paymentHash)).then((function(e){return{data:{paid:e.isPaid||1===e.state}}}))]}}))}))()}},{key:"request",value:function(e,t,n){var r=this;return ld((function(){var i,o,a,s;return pd(this,(function(c){switch(c.label){case 0:return i=r.config.url+(r.config.url.endsWith("/")?"":"/")+t,(o=new Headers).append("Accept","application/json"),o.append("Content-Type","application/json"),r.jwt&&o.append("Authorization","JWT ".concat(r.jwt)),[4,fetch(i,dd({headers:o,method:e},"GET"!==e?{body:JSON.stringify(n)}:{}))];case 1:return(a=c.sent()).ok?[3,3]:[4,a.json()];case 2:throw s=c.sent(),console.error("errBody",s),new Error(s.detail);case 3:return[4,a.json()];case 4:return[2,c.sent()]}}))}))()}}],n&&fd(t.prototype,n),r&&fd(t,r),e}();const gd=yd;var bd=a(55743),md=a.n(bd),wd=function(e,t){return wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},wd(e,t)};function vd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}wd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function _d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ed(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Sd(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function kd(e){return"function"==typeof e}function Ad(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Od=Ad((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Pd(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Id=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=_d(o),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(kd(c))try{c()}catch(e){i=e instanceof Od?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=_d(u),f=l.next();!f.done;f=l.next()){var h=f.value;try{Nd(h)}catch(e){i=null!=i?i:[],e instanceof Od?i=Sd(Sd([],Ed(i)),Ed(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new Od(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Nd(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Pd(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Pd(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),Td=Id.EMPTY;function xd(e){return e instanceof Id||e&&"closed"in e&&kd(e.remove)&&kd(e.add)&&kd(e.unsubscribe)}function Nd(e){kd(e)?e():e.unsubscribe()}var Rd={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cd={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Cd.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,Sd([e,t],Ed(n))):setTimeout.apply(void 0,Sd([e,t],Ed(n)))},clearTimeout:function(e){var t=Cd.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Bd(){}var Ld=Ud("C",void 0,void 0);function Ud(e,t,n){return{kind:e,value:t,error:n}}var jd=null;function Dd(e){if(Rd.useDeprecatedSynchronousErrorHandling){var t=!jd;if(t&&(jd={errorThrown:!1,error:null}),e(),t){var n=jd,r=n.errorThrown,i=n.error;if(jd=null,r)throw i}}else e()}var Md=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,xd(t)&&t.add(n)):n.destination=Wd,n}return vd(t,e),t.create=function(e,t,n){return new Kd(e,t,n)},t.prototype.next=function(e){this.isStopped?Vd(function(e){return Ud("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Vd(Ud("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Vd(Ld,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Id),Hd=Function.prototype.bind;function Fd(e,t){return Hd.call(e,t)}var zd=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){qd(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){qd(e)}else qd(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){qd(e)}},e}(),Kd=function(e){function t(t,n,r){var i,o,a=e.call(this)||this;kd(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&Rd.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&Fd(t.next,o),error:t.error&&Fd(t.error,o),complete:t.complete&&Fd(t.complete,o)}):i=t;return a.destination=new zd(i),a}return vd(t,e),t}(Md);function qd(e){Rd.useDeprecatedSynchronousErrorHandling?function(e){Rd.useDeprecatedSynchronousErrorHandling&&jd&&(jd.errorThrown=!0,jd.error=e)}(e):function(e){Cd.setTimeout((function(){var t=Rd.onUnhandledError;if(!t)throw e;t(e)}))}(e)}function Vd(e,t){var n=Rd.onStoppedNotification;n&&Cd.setTimeout((function(){return n(e,t)}))}var Wd={closed:!0,next:Bd,error:function(e){throw e},complete:Bd},Gd="function"==typeof Symbol&&Symbol.observable||"@@observable";function $d(e){return e}function Yd(e){return 0===e.length?$d:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Zd=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof Md||function(e){return e&&kd(e.next)&&kd(e.error)&&kd(e.complete)}(r)&&xd(r)?e:new Kd(e,t,n);return Dd((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Xd(t))((function(t,r){var i=new Kd({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Gd]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yd(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Xd(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Xd(e){var t;return null!==(t=null!=e?e:Rd.Promise)&&void 0!==t?t:Promise}var Jd=Ad((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Qd=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return vd(t,e),t.prototype.lift=function(e){var t=new ep(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Jd},t.prototype.next=function(e){var t=this;Dd((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=_d(t.currentObservers),o=i.next();!o.done;o=i.next()){o.value.next(e)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;Dd((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;Dd((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?Td:(this.currentObservers=null,o.push(e),new Id((function(){t.currentObservers=null,Pd(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new Zd;return e.source=this,e},t.create=function(e,t){return new ep(e,t)},t}(Zd),ep=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return vd(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Td},t}(Qd),tp=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return vd(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Qd),np=Ad((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function rp(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o=new Kd({next:function(e){r(e),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new np)}});e.subscribe(o)}))}function ip(e){return function(t){if(function(e){return kd(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function op(e,t,n,r,i){return new ap(e,t,n,r,i)}var ap=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return vd(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Md);function sp(e,t){return ip((function(n,r){var i=0;n.subscribe(op(r,(function(n){r.next(e.call(t,n,i++))})))}))}function cp(e,t){return ip((function(n,r){var i=0;n.subscribe(op(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}var up=a(48764);const lp="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,fp=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),hp=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const dp=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function pp(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=dp[e[n]];return t}function yp(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class gp{clone(){return this._cloneInto()}}function bp(e){const t=t=>e().update(yp(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function mp(e=32){if(lp&&"function"==typeof lp.getRandomValues)return lp.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var wp=a(46403),vp=a.t(wp,2);const _p=BigInt(0),Ep=BigInt(1),Sp=BigInt(2),kp=BigInt(3),Ap=BigInt(8),Op=Object.freeze({a:_p,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Ep,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Pp=(e,t)=>(e+t/Sp)/t,Ip={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=Op,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ep*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),s=Pp(o*e,t),c=Pp(-r*e,t);let u=ny(e-s*n-c*i,t),l=ny(-s*r-c*o,t);const f=u>a,h=l>a;if(f&&(u=t-u),h&&(l=t-l),u>a||l>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:h,k2:l}}},Tp=32,xp=32,Np=Tp+1,Rp=2*Tp+1;function Cp(e){const{a:t,b:n}=Op,r=ny(e*e),i=ny(r*e);return ny(i+t*e+n)}const Bp=Op.a===_p;class Lp extends Error{constructor(e){super(e)}}function Up(e){if(!(e instanceof jp))throw new TypeError("JacobianPoint expected")}class jp{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof Hp))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Hp.ZERO)?jp.ZERO:new jp(e.x,e.y,Ep)}static toAffineBatch(e){const t=function(e,t=Op.P){const n=new Array(e.length),r=e.reduce(((e,r,i)=>r===_p?e:(n[i]=e,ny(e*r,t))),Ep),i=iy(r,t);return e.reduceRight(((e,r,i)=>r===_p?e:(n[i]=ny(e*n[i],t),ny(e*r,t))),i),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return jp.toAffineBatch(e).map(jp.fromAffine)}equals(e){Up(e);const{x:t,y:n,z:r}=this,{x:i,y:o,z:a}=e,s=ny(r*r),c=ny(a*a),u=ny(t*c),l=ny(i*s),f=ny(ny(n*a)*c),h=ny(ny(o*r)*s);return u===l&&f===h}negate(){return new jp(this.x,ny(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,r=ny(e*e),i=ny(t*t),o=ny(i*i),a=e+i,s=ny(Sp*(ny(a*a)-r-o)),c=ny(kp*r),u=ny(c*c),l=ny(u-Sp*s),f=ny(c*(s-l)-Ap*o),h=ny(Sp*t*n);return new jp(l,f,h)}add(e){Up(e);const{x:t,y:n,z:r}=this,{x:i,y:o,z:a}=e;if(i===_p||o===_p)return this;if(t===_p||n===_p)return e;const s=ny(r*r),c=ny(a*a),u=ny(t*c),l=ny(i*s),f=ny(ny(n*a)*c),h=ny(ny(o*r)*s),d=ny(l-u),p=ny(h-f);if(d===_p)return p===_p?this.double():jp.ZERO;const y=ny(d*d),g=ny(d*y),b=ny(u*y),m=ny(p*p-g-Sp*b),w=ny(p*(b-m)-f*g),v=ny(r*a*d);return new jp(m,w,v)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=jp.ZERO;if("bigint"==typeof e&&e===_p)return t;let n=ty(e);if(n===Ep)return this;if(!Bp){let e=t,r=this;for(;n>_p;)n&Ep&&(e=e.add(r)),r=r.double(),n>>=Ep;return e}let{k1neg:r,k1:i,k2neg:o,k2:a}=Ip.splitScalar(n),s=t,c=t,u=this;for(;i>_p||a>_p;)i&Ep&&(s=s.add(u)),a&Ep&&(c=c.add(u)),u=u.double(),i>>=Ep,a>>=Ep;return r&&(s=s.negate()),o&&(c=c.negate()),c=new jp(ny(c.x*Ip.beta),c.y,c.z),s.add(c)}precomputeWindow(e){const t=Bp?128/e+1:256/e+1,n=[];let r=this,i=r;for(let o=0;o<t;o++){i=r,n.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(r),n.push(i);r=i.double()}return n}wNAF(e,t){!t&&this.equals(jp.BASE)&&(t=Hp.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&Mp.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=jp.normalizeZ(r),Mp.set(t,r)));let i=jp.ZERO,o=jp.BASE;const a=1+(Bp?128/n:256/n),s=2**(n-1),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let t=0;t<a;t++){const n=t*s;let a=Number(e&c);e>>=l,a>s&&(a-=u,e+=Ep);const f=n,h=n+Math.abs(a)-1,d=t%2!=0,p=a<0;0===a?o=o.add(Dp(d,r[f])):i=i.add(Dp(p,r[h]))}return{p:i,f:o}}multiply(e,t){let n,r,i=ty(e);if(Bp){const{k1neg:e,k1:o,k2neg:a,k2:s}=Ip.splitScalar(i);let{p:c,f:u}=this.wNAF(o,t),{p:l,f}=this.wNAF(s,t);c=Dp(e,c),l=Dp(a,l),l=new jp(ny(l.x*Ip.beta),l.y,l.z),n=c.add(l),r=u.add(f)}else{const{p:e,f:o}=this.wNAF(i,t);n=e,r=o}return jp.normalizeZ([n,r])[0]}toAffine(e){const{x:t,y:n,z:r}=this,i=this.equals(jp.ZERO);null==e&&(e=i?Ap:iy(r));const o=e,a=ny(o*o),s=ny(a*o),c=ny(t*a),u=ny(n*s),l=ny(r*o);if(i)return Hp.ZERO;if(l!==Ep)throw new Error("invZ was invalid");return new Hp(c,u)}}function Dp(e,t){const n=t.negate();return e?n:t}jp.BASE=new jp(Op.Gx,Op.Gy,Ep),jp.ZERO=new jp(_p,Ep,_p);const Mp=new WeakMap;class Hp{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Mp.delete(this)}hasEvenY(){return this.y%Sp===_p}static fromCompressedHex(e){const t=32===e.length,n=Qp(t?e:e.subarray(1));if(!uy(n))throw new Error("Point is not on curve");let r=function(e){const{P:t}=Op,n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),s=BigInt(88),c=e*e*e%t,u=c*c*e%t,l=ry(u,kp)*u%t,f=ry(l,kp)*u%t,h=ry(f,Sp)*c%t,d=ry(h,r)*h%t,p=ry(d,i)*d%t,y=ry(p,a)*p%t,g=ry(y,s)*y%t,b=ry(g,a)*p%t,m=ry(b,kp)*u%t,w=ry(m,o)*d%t,v=ry(w,n)*c%t,_=ry(v,Sp),E=_*_%t;if(E!==e)throw new Error("Cannot find square root");return _}(Cp(n));const i=(r&Ep)===Ep;if(t)i&&(r=ny(-r));else{1==(1&e[0])!==i&&(r=ny(-r))}const o=new Hp(n,r);return o.assertValidity(),o}static fromUncompressedHex(e){const t=Qp(e.subarray(1,Tp+1)),n=Qp(e.subarray(Tp+1,2*Tp+1)),r=new Hp(t,n);return r.assertValidity(),r}static fromHex(e){const t=ey(e),n=t.length,r=t[0];if(n===Tp)return this.fromCompressedHex(t);if(n===Np&&(2===r||3===r))return this.fromCompressedHex(t);if(n===Rp&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Np} compressed bytes or ${Rp} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return Hp.BASE.multiply(ly(e))}static fromSignature(e,t,n){const{r,s:i}=hy(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const o=oy(ey(e)),{n:a}=Op,s=2===n||3===n?r+a:r,c=iy(s,a),u=ny(-o*c,a),l=ny(i*c,a),f=1&n?"03":"02",h=Hp.fromHex(f+$p(s)),d=Hp.BASE.multiplyAndAddUnsafe(h,u,l);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(e=!1){return Jp(this.toHex(e))}toHex(e=!1){const t=$p(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${$p(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!uy(t)||!uy(n))throw new Error(e);const r=ny(n*n);if(ny(r-Cp(t))!==_p)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Hp(this.x,ny(-this.y))}double(){return jp.fromAffine(this).double().toAffine()}add(e){return jp.fromAffine(this).add(jp.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return jp.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const r=jp.fromAffine(this),i=t===_p||t===Ep||this!==Hp.BASE?r.multiplyUnsafe(t):r.multiply(t),o=jp.fromAffine(e).multiplyUnsafe(n),a=i.add(o);return a.equals(jp.ZERO)?void 0:a.toAffine()}}function Fp(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function zp(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${Wp(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Qp(n),left:e.subarray(t+2)}}Hp.BASE=new Hp(Op.Gx,Op.Gy),Hp.ZERO=new Hp(_p,_p);class Kp{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=t?Wp(e):e;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new Kp(Xp(r.slice(0,64)),Xp(r.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${Wp(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=zp(e.subarray(2)),{data:r,left:i}=zp(n);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Wp(i)}`);return{r:t,s:r}}(t?e:Jp(e));return new Kp(n,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!cy(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!cy(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=Op.n>>Ep;return this.s>e}normalizeS(){return this.hasHighS()?new Kp(this.r,ny(-this.s,Op.n)):this}toDERRawBytes(){return Jp(this.toDERHex())}toDERHex(){const e=Fp(Zp(this.s)),t=Fp(Zp(this.r)),n=e.length/2,r=t.length/2,i=Zp(n),o=Zp(r);return`30${Zp(r+n+4)}02${o}${t}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Jp(this.toCompactHex())}toCompactHex(){return $p(this.r)+$p(this.s)}}function qp(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}const Vp=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Wp(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=Vp[e[n]];return t}const Gp=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function $p(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(_p<=e&&e<Gp))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Yp(e){const t=Jp($p(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function Zp(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Xp(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Jp(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Qp(e){return Xp(Wp(e))}function ey(e){return e instanceof Uint8Array?Uint8Array.from(e):Jp(e)}function ty(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&cy(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ny(e,t=Op.P){const n=e%t;return n>=_p?n:t+n}function ry(e,t){const{P:n}=Op;let r=e;for(;t-- >_p;)r*=r,r%=n;return r}function iy(e,t=Op.P){if(e===_p||t<=_p)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=ny(e,t),r=t,i=_p,o=Ep,a=Ep,s=_p;for(;n!==_p;){const e=r/n,t=r%n,c=i-a*e,u=o-s*e;r=n,n=t,i=a,o=s,a=c,s=u}if(r!==Ep)throw new Error("invert: does not exist");return ny(i,t)}function oy(e,t=!1){const n=function(e){const t=8*e.length-8*xp,n=Qp(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:r}=Op;return n>=r?n-r:n}let ay,sy;function cy(e){return _p<e&&e<Op.n}function uy(e){return _p<e&&e<Op.P}function ly(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*xp)throw new Error("Expected 32 bytes of private key");t=Xp(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==xp)throw new Error("Expected 32 bytes of private key");t=Qp(e)}if(!cy(t))throw new Error("Expected private key: 0 < key < n");return t}function fy(e){return e instanceof Hp?(e.assertValidity(),e):Hp.fromHex(e)}function hy(e){if(e instanceof Kp)return e.assertValidity(),e;try{return Kp.fromDER(e)}catch(t){return Kp.fromCompact(e)}}function dy(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===Np||r===Rp:n?r===2*Np||r===2*Rp:e instanceof Hp}Hp.BASE._setWindowSize(8);const py={node:vp,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},yy={},gy={bytesToHex:Wp,hexToBytes:Jp,concatBytes:qp,mod:ny,invert:iy,isValidPrivateKey(e){try{return ly(e),!0}catch(e){return!1}},_bigintTo32Bytes:Yp,_normalizePrivateKey:ly,hashToPrivateKey:e=>{e=ey(e);const t=xp+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Yp(ny(Qp(e),Op.n-Ep)+Ep)},randomBytes:(e=32)=>{if(py.web)return py.web.getRandomValues(new Uint8Array(e));if(py.node){const{randomBytes:t}=py.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>gy.hashToPrivateKey(gy.randomBytes(xp+8)),precompute(e=8,t=Hp.BASE){const n=t===Hp.BASE?t:new Hp(t.x,t.y);return n._setWindowSize(e),n.multiply(kp),n},sha256:async(...e)=>{if(py.web){const buffer=await py.web.subtle.digest("SHA-256",qp(...e));return new Uint8Array(buffer)}if(py.node){const{createHash:t}=py.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(py.web){const n=await py.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=qp(...t),buffer=await py.web.subtle.sign("HMAC",n,r);return new Uint8Array(buffer)}if(py.node){const{createHmac:n}=py.node,r=n("sha256",e);return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=yy[e];if(void 0===n){const t=await gy.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=qp(t,t),yy[e]=n}return gy.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof ay)throw new Lp("sha256Sync is undefined, you need to set it");let n=yy[e];if(void 0===n){const t=ay(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=qp(t,t),yy[e]=n}return ay(n,...t)},_JacobianPoint:jp};function by(e,t){return e<<t|e>>>32-t}Object.defineProperties(gy,{sha256Sync:{configurable:!1,get:()=>ay,set(e){ay||(ay=e)}},hmacSha256Sync:{configurable:!1,get:()=>sy,set(e){sy||(sy=e)}}});const my=up.Buffer.from("expand 32-byte k");const wy=class{input;cachePos;buffer;output;constructor(e,t){this.input=new Uint32Array(16),this.input[0]=my.readUInt32LE(0),this.input[1]=my.readUInt32LE(4),this.input[2]=my.readUInt32LE(8),this.input[3]=my.readUInt32LE(12),this.input[4]=e.readUInt32LE(0),this.input[5]=e.readUInt32LE(4),this.input[6]=e.readUInt32LE(8),this.input[7]=e.readUInt32LE(12),this.input[8]=e.readUInt32LE(16),this.input[9]=e.readUInt32LE(20),this.input[10]=e.readUInt32LE(24),this.input[11]=e.readUInt32LE(28),this.input[12]=0,this.input[13]=t.readUInt32LE(0),this.input[14]=t.readUInt32LE(4),this.input[15]=t.readUInt32LE(8),this.cachePos=64,this.buffer=new Uint32Array(16),this.output=up.Buffer.alloc(64)}quarterRound(e,t,n,r){const i=this.buffer;i[e]+=i[t],i[r]=by(i[r]^i[e],16),i[n]+=i[r],i[t]=by(i[t]^i[n],12),i[e]+=i[t],i[r]=by(i[r]^i[e],8),i[n]+=i[r],i[t]=by(i[t]^i[n],7)}makeBlock(e,t){let n=-1;for(;++n<16;)this.buffer[n]=this.input[n];for(n=-1;++n<10;)this.quarterRound(0,4,8,12),this.quarterRound(1,5,9,13),this.quarterRound(2,6,10,14),this.quarterRound(3,7,11,15),this.quarterRound(0,5,10,15),this.quarterRound(1,6,11,12),this.quarterRound(2,7,8,13),this.quarterRound(3,4,9,14);for(n=-1;++n<16;)this.buffer[n]+=this.input[n],e.writeUInt32LE(this.buffer[n],t),t+=4;if(this.input[12]++,!this.input[12])throw new Error("counter is exausted")}getBytes(e){let t=0;const n=up.Buffer.alloc(e),r=64-this.cachePos;if(r){if(r>=e)return this.output.copy(n,0,this.cachePos,64),this.cachePos+=e,n;this.output.copy(n,0,this.cachePos,64),e-=r,t+=r,this.cachePos=64}for(;e>0;){if(e<=64)return this.makeBlock(this.output,0),this.output.copy(n,t,0,e),e<64&&(this.cachePos=e),n;this.makeBlock(n,t),e-=64,t+=64}throw new Error("something bad happended")}};const vy=class{buffer;leftover;r;h;pad;finished;constructor(e){this.buffer=up.Buffer.alloc(16),this.leftover=0,this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.finished=0;let t,n=new Uint16Array(8);for(t=8;t--;)n[t]=e.readUInt16LE(2*t);for(this.r[0]=8191&n[0],this.r[1]=8191&(n[0]>>>13|n[1]<<3),this.r[2]=7939&(n[1]>>>10|n[2]<<6),this.r[3]=8191&(n[2]>>>7|n[3]<<9),this.r[4]=255&(n[3]>>>4|n[4]<<12),this.r[5]=n[4]>>>1&8190,this.r[6]=8191&(n[4]>>>14|n[5]<<2),this.r[7]=8065&(n[5]>>>11|n[6]<<5),this.r[8]=8191&(n[6]>>>8|n[7]<<8),this.r[9]=n[7]>>>5&127,t=8;t--;)this.h[t]=0,this.pad[t]=e.readUInt16LE(16+2*t);this.h[8]=0,this.h[9]=0,this.leftover=0,this.finished=0}blocks(e,t,n){const r=this.finished?0:2048;let i=new Uint16Array(8),o=new Uint32Array(10),a=0,s=0,c=0;for(;n>=16;){for(s=8;s--;)i[s]=e.readUInt16LE(2*s+t);for(this.h[0]+=8191&i[0],this.h[1]+=8191&(i[0]>>>13|i[1]<<3),this.h[2]+=8191&(i[1]>>>10|i[2]<<6),this.h[3]+=8191&(i[2]>>>7|i[3]<<9),this.h[4]+=8191&(i[3]>>>4|i[4]<<12),this.h[5]+=i[4]>>>1&8191,this.h[6]+=8191&(i[4]>>>14|i[5]<<2),this.h[7]+=8191&(i[5]>>>11|i[6]<<5),this.h[8]+=8191&(i[6]>>>8|i[7]<<8),this.h[9]+=i[7]>>>5|r,s=0,a=0;s<10;s++){for(o[s]=a,c=0;c<10;c++)o[s]+=(4294967295&this.h[c])*(c<=s?this.r[s-c]:5*this.r[s+10-c]),4===c&&(a=o[s]>>>13,o[s]&=8191);a+=o[s]>>>13,o[s]&=8191}for(a=(a<<2)+a,a+=o[0],o[0]=8191&a,a>>>=13,o[1]+=a,s=10;s--;)this.h[s]=o[s];t+=16,n-=16}}update(e){let t=e.length,n=0,r=0,i=0;if(this.leftover){for(n=16-this.leftover,n>t&&(n=t),r=n;r--;)this.buffer[this.leftover+r]=e[r+i];if(t-=n,i+=n,this.leftover+=n,this.leftover<16)return this;this.blocks(this.buffer,0,16),this.leftover=0}if(t>=16&&(n=-16&t,this.blocks(e,i,n),i+=n,t-=n),t){for(r=t;r--;)this.buffer[this.leftover+r]=e[r+i];this.leftover+=t}return this}finish(){let e=up.Buffer.alloc(16),t=new Uint16Array(10),n=0,r=0,i=0,o=0;if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.finished=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=n,n=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,t[0]=this.h[0]+5,n=t[0]>>>13,t[0]&=8191,o=1;o<10;o++)t[o]=this.h[o]+n,n=t[o]>>>13,t[o]&=8191;for(t[9]-=8192,r=(t[9]>>>15)-1,o=10;o--;)t[o]&=r;for(r=~r,o=10;o--;)this.h[o]=this.h[o]&r|t[o];for(this.h[0]=this.h[0]|this.h[1]<<13,this.h[1]=this.h[1]>>3|this.h[2]<<10,this.h[2]=this.h[2]>>6|this.h[3]<<7,this.h[3]=this.h[3]>>9|this.h[4]<<4,this.h[4]=this.h[4]>>12|this.h[5]<<1|this.h[6]<<14,this.h[5]=this.h[6]>>2|this.h[7]<<11,this.h[6]=this.h[7]>>5|this.h[8]<<8,this.h[7]=this.h[8]>>8|this.h[9]<<5,i=(4294967295&this.h[0])+this.pad[0],this.h[0]=i,o=1;o<8;o++)i=(4294967295&this.h[o])+this.pad[o]+(i>>>16),this.h[o]=i;for(o=8;o--;)e.writeUInt16LE(this.h[o],2*o),this.pad[o]=0;for(o=10;o--;)this.h[o]=0,this.r[o]=0;return e}};class _y{alen;clen;chacha;poly;tag;_decrypt;_hasData;constructor(e,t,n=!1){this.alen=0,this.clen=0,this.chacha=new wy(e,t),this.poly=new vy(this.chacha.getBytes(64)),this.tag=null,this._decrypt=n,this._hasData=!1}setAAD(e){if(this._hasData)throw new Error("Attempting to set AAD in unsupported state");this.alen=e.length,this.poly.update(e);const t=up.Buffer.alloc(Ey(this.alen));t.length&&(t.fill(0),this.poly.update(t))}update(e,t,n){"string"==typeof e&&(e=up.Buffer.from(e,t));let r=this._update(e)||up.Buffer.from("");return n?r.toString(n):r}final(e){let t=this._final()||up.Buffer.from("");return e?t.toString(e):t}_update(e){this._hasData||(this._hasData=!0);const t=e.length;if(!t)return;this.clen+=t;const n=this.chacha.getBytes(t);let r=-1;for(;++r<t;)n[r]^=e[r];return this._decrypt?this.poly.update(e):this.poly.update(n),n}_final(){if(this._decrypt&&!this.tag)throw new Error("Unsupported state or unable to authenticate data");const e=up.Buffer.alloc(Ey(this.clen));e.length&&(e.fill(0),this.poly.update(e));const t=up.Buffer.alloc(16);t.fill(0),t.writeUInt32LE(this.alen,0),t.writeUInt32LE(this.clen,8);const n=this.poly.update(t).finish();if(this._decrypt){if(function(e,t){let n=0;e.length!==t.length&&n++;const r=Math.min(e.length,t.length);let i=-1;for(;++i<r;)n+=e[i]^t[i];return n}(n,this.tag))throw new Error("Unsupported state or unable to authenticate data")}else this.tag=n;return n}getAuthTag(){return this._decrypt||null===this.tag?up.Buffer.from(""):this.tag}setAuthTag(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this.tag=e}}function Ey(e){const t=e%16;return t?16-t:0}function Sy(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ky(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const Ay={number:Sy,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:ky,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Sy(e.outputLen),Sy(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){ky(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Oy=Ay;class Py extends gp{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Oy.hash(e);const n=yp(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Oy.exists(this),this.iHash.update(e),this}digestInto(e){Oy.exists(this),Oy.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Iy=(e,t,n)=>new Py(e,t).update(n).digest();Iy.create=(e,t)=>new Py(e,t);class Ty extends gp{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fp(this.buffer)}update(e){Oy.exists(this);const{view:t,buffer,blockLen:n}=this,r=(e=yp(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)buffer.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=fp(e);for(;n<=r-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oy.exists(this),Oy.output(e,this),this.finished=!0;const{buffer,view:t,blockLen:n,isLE:r}=this;let{pos:i}=this;buffer[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(t,0),i=0);for(let e=i;e<n;e++)buffer[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}(t,n-8,BigInt(8*this.length),r),this.process(t,0);const o=fp(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const s=a/4,c=this.get();if(s>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<s;e++)o.setUint32(4*e,c[e],r)}digest(){const{buffer,outputLen:e}=this;this.digestInto(buffer);const t=buffer.slice(0,e);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(buffer),e}}const xy=(e,t,n)=>e&t^~e&n,Ny=(e,t,n)=>e&t^e&n^t&n,Ry=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cy=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),By=new Uint32Array(64);class Ly extends Ty{constructor(){super(64,32,8,!1),this.A=0|Cy[0],this.B=0|Cy[1],this.C=0|Cy[2],this.D=0|Cy[3],this.E=0|Cy[4],this.F=0|Cy[5],this.G=0|Cy[6],this.H=0|Cy[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:a,H:s}=this;return[e,t,n,r,i,o,a,s]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)By[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=By[e-15],n=By[e-2],r=hp(t,7)^hp(t,18)^t>>>3,i=hp(n,17)^hp(n,19)^n>>>10;By[e]=i+By[e-7]+r+By[e-16]|0}let{A:n,B:r,C:i,D:o,E:a,F:s,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(hp(a,6)^hp(a,11)^hp(a,25))+xy(a,s,c)+Ry[e]+By[e]|0,l=(hp(n,2)^hp(n,13)^hp(n,22))+Ny(n,r,i)|0;u=c,c=s,s=a,a=o+t|0,o=i,i=r,r=n,n=t+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,a,s,c,u)}roundClean(){By.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Uy extends Ly{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const jy=bp((()=>new Ly));bp((()=>new Uy));function Dy(e){return up.Buffer.from(jy(e))}function My(e,t){const n=Hp.fromHex(function(e,t,n=!1){if(dy(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!dy(t))throw new TypeError("getSharedSecret: second arg must be public key");const r=fy(t);return r.assertValidity(),r.multiply(ly(e)).toRawBytes(n)}(t,e));return up.Buffer.from(Dy(n.toRawBytes(!0)))}function Hy(e,t){return up.Buffer.from(Iy(jy,e,t))}function Fy(e,t,n=up.Buffer.alloc(0),r=up.Buffer.alloc(0)){const i=Hy(n,e),o=Math.ceil(t/i.byteLength);if(o>255)throw new Error("Output length exceeds maximum");const a=[up.Buffer.alloc(0)];for(let e=1;e<=o;e++){const t=a[a.length-1],n=up.Buffer.from([e]);a.push(Hy(i,up.Buffer.concat([t,r,n])))}return up.Buffer.concat(a.slice(1)).subarray(0,t)}function zy(e,t=!0){return up.Buffer.from(function(e,t=!1){return Hp.fromPrivateKey(e).toRawBytes(t)}(e,t))}function Ky(e,t,n,r){const i=new _y(e,t);i.setAAD(n);const o=i.update(r);i.final&&i.final();const a=i.getAuthTag();return up.Buffer.concat([o,a])}function qy(e,t,n,r){const i=new _y(e,t,!0);if(i.setAAD(n),16===r.length)return i.setAuthTag(r),i.final();if(r.length>16){const e=r.subarray(r.length-16),t=r.subarray(0,r.length-16);i.setAuthTag(e);let n=i.update(t);const o=i.final();return n=up.Buffer.concat([n,o]),n}}function Vy(){let e;do{e=mp(32)}while(!Wy(up.Buffer.from(e)));return pp(e)}function Wy(e){return gy.isValidPrivateKey(e)}class Gy{protocolName=up.Buffer.from("Noise_XK_secp256k1_ChaChaPoly_SHA256");prologue=up.Buffer.from("lightning");ls;lpk;es;epk;rpk;repk;h;ck;rk;sk;sn;rn;sck;rck;tempK1;tempK2;tempK3;constructor({ls:e,es:t}){this.ls=e,this.lpk=zy(e),this.es=t,this.epk=zy(t)}initiatorAct1(e){this.rpk=e,this._initialize(this.rpk),this.h=Dy(up.Buffer.concat([this.h,this.epk]));const t=Fy(My(this.rpk,this.es),64,this.ck);this.ck=t.subarray(0,32),this.tempK1=up.Buffer.from(t.subarray(32));const n=Ky(this.tempK1,up.Buffer.alloc(12),this.h,up.Buffer.alloc(0));this.h=Dy(up.Buffer.concat([this.h,n]));return up.Buffer.concat([up.Buffer.alloc(1),this.epk,n])}initiatorAct2(e){if(50!==e.length)throw new Error("ACT2_READ_FAILED");const t=e.subarray(0,1)[0],n=e.subarray(1,34),r=e.subarray(34);if(this.repk=n,0!==t)throw new Error("ACT2_BAD_VERSION");this.h=Dy(up.Buffer.concat([this.h,this.repk]));const i=Fy(My(this.repk,this.es),64,this.ck);this.ck=i.subarray(0,32),this.tempK2=i.subarray(32),qy(this.tempK2,up.Buffer.alloc(12),this.h,r),this.h=Dy(up.Buffer.concat([this.h,r]))}initiatorAct3(){const e=Ky(this.tempK2,up.Buffer.from([0,0,0,0,1,0,0,0,0,0,0,0]),this.h,this.lpk);this.h=Dy(up.Buffer.concat([this.h,e]));const t=Fy(My(this.repk,this.ls),64,this.ck);this.ck=t.subarray(0,32),this.tempK3=up.Buffer.from(t.subarray(32)),this.rck=this.sck=this.ck;const n=Ky(this.tempK3,up.Buffer.alloc(12),this.h,up.Buffer.alloc(0)),r=Fy(up.Buffer.alloc(0),64,this.ck);this.rk=r.subarray(32),this.sk=r.subarray(0,32),this.sn=up.Buffer.alloc(12),this.rn=up.Buffer.alloc(12);return up.Buffer.concat([up.Buffer.alloc(1),e,n])}receiveAct1(e){if(this._initialize(this.lpk),50!==e.length)throw new Error("ACT1_READ_FAILED");const t=e.subarray(0,1)[0],n=e.subarray(1,34),r=e.subarray(34);if(this.repk=n,0!==t)throw new Error("ACT1_BAD_VERSION");this.h=Dy(up.Buffer.concat([this.h,n]));const i=Fy(My(n,this.ls),64,this.ck);this.ck=i.subarray(0,32),this.tempK1=i.subarray(32),qy(this.tempK1,up.Buffer.alloc(12),this.h,r),this.h=Dy(up.Buffer.concat([this.h,r]))}recieveAct2(){this.h=Dy(up.Buffer.concat([this.h,this.epk]));const e=Fy(My(this.repk,this.es),64,this.ck);this.ck=e.subarray(0,32),this.tempK2=up.Buffer.from(e.subarray(32));const t=Ky(this.tempK2,up.Buffer.alloc(12),this.h,up.Buffer.alloc(0));this.h=Dy(up.Buffer.concat([this.h,t]));return up.Buffer.concat([up.Buffer.alloc(1),this.epk,t])}receiveAct3(e){if(66!==e.length)throw new Error("ACT3_READ_FAILED");const t=e.subarray(0,1)[0],n=e.subarray(1,50),r=e.subarray(50);if(0!==t)throw new Error("ACT3_BAD_VERSION");const i=qy(this.tempK2,up.Buffer.from("000000000100000000000000","hex"),this.h,n);this.rpk=i,this.h=Dy(up.Buffer.concat([this.h,n]));const o=Fy(My(this.rpk,this.es),64,this.ck);this.ck=o.subarray(0,32),this.tempK3=o.subarray(32),qy(this.tempK3,up.Buffer.alloc(12),this.h,r);const a=Fy(up.Buffer.alloc(0),64,this.ck);this.rk=a.subarray(0,32),this.sk=a.subarray(32),this.rn=up.Buffer.alloc(12),this.sn=up.Buffer.alloc(12)}encryptMessage(e){const t=up.Buffer.alloc(2);t.writeUInt16BE(e.length,0);const n=Ky(this.sk,this.sn,up.Buffer.alloc(0),t);this._incrementSendingNonce()>=1e3&&this._rotateSendingKeys();const r=Ky(this.sk,this.sn,up.Buffer.alloc(0),e);return this._incrementSendingNonce()>=1e3&&this._rotateSendingKeys(),up.Buffer.concat([n,r])}decryptLength(e){const t=qy(this.rk,this.rn,up.Buffer.alloc(0),e);return this._incrementRecievingNonce()>=1e3&&this._rotateRecievingKeys(),t.readUInt16BE(0)}decryptMessage(e){const t=qy(this.rk,this.rn,up.Buffer.alloc(0),e);return this._incrementRecievingNonce()>=1e3&&this._rotateRecievingKeys(),t}_initialize(e){this.h=Dy(up.Buffer.from(this.protocolName)),this.ck=this.h,this.h=Dy(up.Buffer.concat([this.h,this.prologue])),this.h=Dy(up.Buffer.concat([this.h,e]))}_incrementSendingNonce(){const e=this.sn.readUInt16LE(4)+1;return this.sn.writeUInt16LE(e,4),e}_incrementRecievingNonce(){const e=this.rn.readUInt16LE(4)+1;return this.rn.writeUInt16LE(e,4),e}_rotateSendingKeys(){const e=Fy(this.sk,64,this.sck);this.sk=e.subarray(32),this.sck=e.subarray(0,32),this.sn=up.Buffer.alloc(12)}_rotateRecievingKeys(){const e=Fy(this.rk,64,this.rck);this.rk=e.subarray(32),this.rck=e.subarray(0,32),this.rn=up.Buffer.alloc(12)}}function $y(e){const{remoteNodePublicKey:t,wsProxy:n,privateKey:r,ip:i,port:o,logger:a}=e;if(!t||!function(e){try{return Hp.fromHex(e),!0}catch(e){return!1}}(t))throw new Error(`${t} is not a valid public key`);if(!i||!i.match(/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/)&&!i.match(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/)&&"localhost"!==i)throw new Error(`${i} is not a valid IP or DNS address`);if(!o||o<1||o>65535)throw new Error(`${o} is not a valid port number`);if(n){const e=`${n} is not a valid url`;try{const t=new URL(n);if("wss:"!==t.protocol&&"ws:"!==t.protocol)throw new Error(e)}catch(t){throw new Error(e)}}if(r&&!Wy(r))throw new Error(`${r} is not a valid private key`);if(a){if("object"!=typeof a)throw new Error("Logger must be of type object");const e=["info","warn","error"];Object.entries(a).forEach((([t,n])=>{if(!e.includes(t))throw new Error(`Invalid logger level: ${t}`);if("function"!=typeof n)throw new Error(`Logger for level: ${t} is not a function`)}))}}class Yy{static bigSizeBytes(e){return e<BigInt(253)?1:e<BigInt(65536)?3:e<BigInt(4294967296)?5:9}_buffer;_position;_lastReadBytes;constructor(buffer){this._buffer=buffer,this._position=0,this._lastReadBytes=0}get position(){return this._position}set position(e){this._position=e}get eof(){return this._position===this._buffer.length}get buffer(){return this._buffer}get lastReadBytes(){return this._lastReadBytes}readUInt8(){return this._readStandard(this.readUInt8.name,1)}readUInt16LE(){return this._readStandard(this.readUInt16LE.name,2)}readUInt16BE(){return this._readStandard(this.readUInt16BE.name,2)}readUInt32LE(){return this._readStandard(this.readUInt32LE.name,4)}readUInt32BE(){return this._readStandard(this.readUInt32BE.name,4)}readUInt64BE(){return BigInt("0x"+this.readBytes(8).toString("hex"))}readUInt64LE(){return BigInt("0x"+this.readBytes(8).reverse().toString("hex"))}readVarUint(){const e=this.readUInt8();if(e<253)return this._lastReadBytes=1,BigInt(e);switch(e){case 253:return this._lastReadBytes=3,BigInt(this.readUInt16LE());case 254:return this._lastReadBytes=5,BigInt(this.readUInt32LE());case 255:return this._lastReadBytes=9,this.readUInt64LE()}}readBigSize(){const e=this.readUInt8();if(e<253)return this._lastReadBytes=1,BigInt(e);switch(e){case 253:{this._lastReadBytes=3;const e=this.readUInt16BE();if(e<253)throw new Error("decoded varint is not canonical");return BigInt(e)}case 254:{this._lastReadBytes=5;const e=this.readUInt32BE();if(e<65536)throw new Error("decoded varint is not canonical");return BigInt(e)}case 255:{this._lastReadBytes=9;const e=this.readUInt64BE();if(e<BigInt(4294967296))throw new Error("decoded varint is not canonical");return e}default:throw new Error(`Unrecognised size: ${e} when trying to read BigSize`)}}readBytes(e){if(0===e)return this._lastReadBytes=0,up.Buffer.alloc(0);if("number"==typeof e&&e>0){if(this._position+e>this._buffer.length)throw new RangeError("Index out of range");const t=this._buffer.subarray(this._position,this._position+e),n=up.Buffer.alloc(t.length,t);return this._position+=e,this._lastReadBytes=e,n}{if(this._position===this._buffer.length)return this._lastReadBytes=0,up.Buffer.alloc(0);const e=this._buffer.subarray(this._position),t=up.Buffer.alloc(e.length,e);return this._position=this._buffer.length,this._lastReadBytes=t.length,t}}peakBytes(e){if(0===e)return up.Buffer.alloc(0);if("number"==typeof e&&e>0){if(this._position+e>this._buffer.length)throw new RangeError("Index out of range");const t=this._buffer.subarray(this._position,this._position+e);return up.Buffer.alloc(t.length,t)}{if(this._position===this._buffer.length)throw new RangeError("Index out of range");const e=this._buffer.subarray(this._position);return up.Buffer.alloc(e.length,e)}}readTUInt16(){const e=Math.min(2,this._buffer.length-this._position);if(0===e)return 0;const t=this._buffer.readUIntBE(this._position,e);return this._assertMinimalTUInt(BigInt(t),e),this._position+=e,t}readTUInt32(){const e=Math.min(4,this._buffer.length-this._position);if(0===e)return 0;const t=this._buffer.readUIntBE(this._position,e);return this._assertMinimalTUInt(BigInt(t),e),this._position+=e,t}readTUInt64(){const e=Math.min(8,this._buffer.length-this._position);if(0===e)return BigInt(0);const t=this._buffer.subarray(this._position,this._position+e).toString("hex")||"0",n=BigInt("0x"+t);return this._assertMinimalTUInt(n,e),this._position+=e,n}_readStandard(e,t){if(this._position+t>this._buffer.length)throw new RangeError("Index out of range");const n=this._buffer[e](this._position);return this._position+=t,this._lastReadBytes=t,n}_assertMinimalTUInt(e,t){for(let n=0;n<9;n++)if(e<BigInt("0x1"+"".padStart(2*n,"0"))&&t!==n)throw new Error("TUInt not minimal")}}class Zy{_position;_fixed;_buffer;constructor(buffer){this._position=0,this._fixed=!!buffer,this._buffer=buffer||up.Buffer.alloc(0)}get size(){return this._position}toBuffer(){return this._fixed?this._buffer:this._buffer.subarray(0,this._position)}writeUInt8(e){this._writeStandard(this.writeUInt8.name,e,1)}writeUInt16LE(e){this._writeStandard(this.writeUInt16LE.name,e,2)}writeUInt16BE(e){this._writeStandard(this.writeUInt16BE.name,e,2)}writeUInt32LE(e){this._writeStandard(this.writeUInt32LE.name,e,4)}writeUInt32BE(e){this._writeStandard(this.writeUInt32BE.name,e,4)}writeUInt64LE(e){const t=BigInt(e);if(t<0||t>=BigInt(2)**BigInt(64))throw new RangeError(`The value of "value" is out of range. It must be >= 0 and <= 18446744073709551615. Received ${e.toString()}`);const n=up.Buffer.from(t.toString(16).padStart(16,"0"),"hex");this.writeBytes(n.reverse())}writeUInt64BE(e){const t=BigInt(e);if(t<0||t>=BigInt(2)**BigInt(64))throw new RangeError(`The value of "value" is out of range. It must be >= 0 and <= 18446744073709551615. Received ${e.toString()}`);const n=up.Buffer.from(t.toString(16).padStart(16,"0"),"hex");this.writeBytes(n)}writeBytes(buffer){buffer&&buffer.length&&(this._expand(buffer.length),buffer.copy(this._buffer,this._position),this._position+=buffer.length)}writeVarInt(e){const t=BigInt(e);t<BigInt(253)?this.writeUInt8(Number(t)):t<BigInt(65536)?(this.writeUInt8(253),this.writeUInt16LE(Number(t))):t<BigInt(4294967296)?(this.writeUInt8(254),this.writeUInt32LE(Number(t))):(this.writeUInt8(255),this.writeUInt64LE(t))}writeBigSize(e){const t=BigInt(e);t<BigInt(253)?this.writeUInt8(Number(t)):t<BigInt(65536)?(this.writeUInt8(253),this.writeUInt16BE(Number(t))):t<BigInt(4294967296)?(this.writeUInt8(254),this.writeUInt32BE(Number(t))):(this.writeUInt8(255),this.writeUInt64BE(t))}writeTUInt16(e){if(0===e)return;const t=e>255?2:1;this._expand(t),this._buffer.writeUIntBE(e,this._position,t),this._position+=t}writeTUInt32(e){if(0===e)return;const t=e>16777215?4:e>65535?3:e>255?2:1;this._expand(t),this._buffer.writeUIntBE(e,this._position,t),this._position+=t}writeTUInt64(e){if(e===BigInt(0))return;let t=e.toString(16);t.length%2==1&&(t="0"+t);const n=up.Buffer.from(t,"hex");this.writeBytes(n)}_expand(e){const t=this._position+e;if(this._fixed&&t>this._buffer.length)throw new RangeError("Out of range");if(this._buffer.length<t){const e=1<<Math.ceil(Math.log2(t)),n=up.Buffer.alloc(e);this._buffer.copy(n),this._buffer=n}}_writeStandard(e,t,n){this._expand(n),this._buffer[e](t,this._position),this._position+=n}}function Xy(e){const t=function(e){let t=0;for(;e>BigInt(0);)t+=1,e/=BigInt(256);return t}(e);return up.Buffer.from(e.toString(16).padStart(2*t,"0"),"hex")}class Jy{static fromNumber(e){return new Jy(BigInt(e))}static fromBuffer(e){return 0===e.length?new Jy:new Jy(BigInt("0x"+e.toString("hex")))}value;constructor(e){this.value=e||BigInt(0)}isSet(e){return(this.value&BigInt(1)<<BigInt(e))>BigInt(0)}set(e){this.value|=BigInt(1)<<BigInt(e)}unset(e){this.value&=~(this.value&BigInt(1)<<BigInt(e))}toggle(e){this.value^=BigInt(1)<<BigInt(e)}flags(){const e=[];let t=0,n=1n;for(;n<this.value;)this.value&n&&e.push(t),t+=1,n<<=1n;return e}msb(){let e=this.value,t=0;for(;e>1;)e>>=1n,t+=1;return t}and(e){return new Jy(this.value&e.value)}or(e){return new Jy(this.value|e.value)}xor(e){return new Jy(this.value^e.value)}toBigInt(){return this.value}toNumber(){return Number(this.value)}toBuffer(){return this.value===BigInt(0)?up.Buffer.alloc(0):Xy(this.value)}}var Qy,eg,tg;!function(e){e[e.Init=16]="Init",e[e.Error=17]="Error",e[e.Ping=18]="Ping",e[e.Pong=19]="Pong",e[e.OpenChannel=32]="OpenChannel",e[e.AcceptChannel=33]="AcceptChannel",e[e.FundingCreated=34]="FundingCreated",e[e.FundingSigned=35]="FundingSigned",e[e.FundingLocked=36]="FundingLocked",e[e.Shutdown=38]="Shutdown",e[e.ClosingSigned=39]="ClosingSigned",e[e.ChannelAnnouncement=256]="ChannelAnnouncement",e[e.NodeAnnouncement=257]="NodeAnnouncement",e[e.ChannelUpdate=258]="ChannelUpdate",e[e.AnnouncementSignatures=259]="AnnouncementSignatures",e[e.QueryShortChannelIds=261]="QueryShortChannelIds",e[e.ReplyShortChannelIdsEnd=262]="ReplyShortChannelIdsEnd",e[e.QueryChannelRange=263]="QueryChannelRange",e[e.ReplyChannelRange=264]="ReplyChannelRange",e[e.GossipTimestampFilter=265]="GossipTimestampFilter",e[e.CommandoRequest=19535]="CommandoRequest",e[e.CommandoResponseContinues=22859]="CommandoResponseContinues",e[e.CommandoResponse=22861]="CommandoResponse"}(Qy||(Qy={})),function(e){e[e.INITIATOR_INITIATING=0]="INITIATOR_INITIATING",e[e.AWAITING_INITIATOR=1]="AWAITING_INITIATOR",e[e.AWAITING_RESPONDER_REPLY=2]="AWAITING_RESPONDER_REPLY",e[e.AWAITING_INITIATOR_REPLY=3]="AWAITING_INITIATOR_REPLY",e[e.READY=100]="READY"}(eg||(eg={})),function(e){e[e.READY_FOR_LEN=2]="READY_FOR_LEN",e[e.READY_FOR_BODY=3]="READY_FOR_BODY",e[e.BLOCKED=4]="BLOCKED"}(tg||(tg={}));class ng{static deserialize(buffer){const e=new ng,t=new Yy(buffer);t.readUInt16BE();const n=t.readUInt16BE(),r=Jy.fromBuffer(t.readBytes(n)),i=t.readUInt16BE(),o=Jy.fromBuffer(t.readBytes(i));return e.features=(new Jy).or(r).or(o),function(e,t){let n=BigInt(-1);for(;!e.eof;)try{const r=e.readBigSize(),i=e.readBigSize(),o=e.readBytes(Number(i)),a=new Yy(o);if(r<=n)throw new Error("Invalid TLV stream");const s=r%BigInt(2)===BigInt(0),c=t(r,a);if(!c&&s)throw new Error("Unknown even type");if(c&&!a.eof)throw new Error("Non-canonical length");n=r}catch(e){}}(t,((t,n)=>{if(t===BigInt(1)){for(;!n.eof;){const t=n.readBytes(32);e.chainHashes.push(t)}return!0}return!1})),e}type=Qy.Init;features=new Jy;chainHashes=[];serialize(){const e=new Zy;e.writeUInt16BE(this.type);e.writeUInt16BE(0);const t=up.Buffer.from([0,0,0,0,0,0,0,0]),n=t.length;return e.writeUInt16BE(n),e.writeBytes(t),this.chainHashes.length&&(e.writeBigSize(1),e.writeBigSize(32*this.chainHashes.length),e.writeBytes(up.Buffer.concat(this.chainHashes))),e.toBuffer()}}class rg{static deserialize(e){const t=new Yy(e);t.readUInt16BE();const n=new rg;n.numPongBytes=t.readUInt16BE();const r=t.readUInt16BE();return n.ignored=t.readBytes(r),n}type=Qy.Ping;numPongBytes=1;ignored=up.Buffer.alloc(0);serialize(){const e=6+this.ignored.length,t=new Zy(up.Buffer.alloc(e));return t.writeUInt16BE(this.type),t.writeUInt16BE(this.numPongBytes),t.writeUInt16BE(this.ignored.length),t.writeBytes(this.ignored),t.toBuffer()}get triggersReply(){return this.numPongBytes<65532}}class ig{static deserialize(e){const t=new ig,n=new Yy(e);n.readUInt16BE();const r=n.readUInt16BE();return t.ignored=n.readBytes(r),t}type=Qy.Pong;ignored;constructor(e=0){this.ignored=up.Buffer.alloc(e)}serialize(){const e=+this.ignored.length+4,t=new Zy(up.Buffer.alloc(e));return t.writeUInt16BE(this.type),t.writeUInt16BE(this.ignored.length),t.writeBytes(this.ignored),t.toBuffer()}}class og{static deserialize(buffer){const e=new og,t=new Yy(buffer);t.readUInt16BE(),e.id=t.readBytes(8).toString("hex");const n=t.readBytes(buffer.byteLength-26).toString();try{e.response=JSON.parse(n)}catch(t){e.response={jsonrpc:"2.0",id:null,error:{code:1,message:"Could not parse json response"}}}return e}type=Qy.CommandoResponse;id;response}const ag=class{noise;remoteNodePublicKey;publicKey;privateKey;wsUrl;socket;tcpSocket;connected$;connectionStatus$;connecting;decryptedMsgs$;commandoMsgs$;Buffer;_ls;_es;_handshakeState;_readState;_decryptedMsgs$;_commandoMsgs$;_partialCommandoMsgs;_attemptedReconnects;_logger;_attemptReconnect;_messageBuffer;_processingBuffer;_l;constructor(e){$y(e);const{remoteNodePublicKey:t,wsProxy:n,wsProtocol:r="wss:",privateKey:i,ip:o,port:a=9735,logger:s,tcpSocket:c}=e;this._ls=up.Buffer.from(i||Vy(),"hex"),this._es=up.Buffer.from(Vy(),"hex"),this.noise=new Gy({ls:this._ls,es:this._es}),this.remoteNodePublicKey=t,this.publicKey=this.noise.lpk.toString("hex"),this.privateKey=this._ls.toString("hex"),this.wsUrl=n?`${n}/${o}:${a}`:`${r}//${o}:${a}`,this.connectionStatus$=new tp("disconnected"),this.connected$=new tp(!1),this.connecting=!1,this.Buffer=up.Buffer,this.tcpSocket=c,this._handshakeState=eg.INITIATOR_INITIATING,this._decryptedMsgs$=new Qd,this.decryptedMsgs$=this._decryptedMsgs$.asObservable(),this._commandoMsgs$=new Qd,this.commandoMsgs$=this._commandoMsgs$.asObservable().pipe(sp((({response:e,id:t})=>({...e,reqId:t})))),this._partialCommandoMsgs={},this._attemptedReconnects=0,this._logger=s,this._readState=tg.READY_FOR_LEN,this._processingBuffer=!1,this._l=null,this.decryptedMsgs$.subscribe((e=>{this.handleDecryptedMessage(e)}))}async connect(e=!0){const t=this.connectionStatus$.value;return"connected"===t||("connecting"===t||(this._log("info",`Initiating connection to node ${this.remoteNodePublicKey}`),this._messageBuffer=new Yy(up.Buffer.from("")),this.connecting=!0,this.connectionStatus$.next("connecting"),this._attemptReconnect=e,this.socket=this.tcpSocket?new((await a.e(853).then(a.bind(a,9853))).default)(this.wsUrl,this.tcpSocket):void 0===globalThis.WebSocket?new((await a.e(26).then(a.t.bind(a,57026,19))).default)(this.wsUrl):new globalThis.WebSocket(this.wsUrl),this.socket.binaryType&&(this.socket.binaryType="arraybuffer"),this.socket.onopen=async()=>{this._log("info","WebSocket is connected at "+(new Date).toISOString()),this._log("info","Creating Act1 message");const e=this.noise.initiatorAct1(up.Buffer.from(this.remoteNodePublicKey,"hex"));this.socket&&(this._log("info","Sending Act1 message"),this.socket.send(e),this._handshakeState=eg.AWAITING_RESPONDER_REPLY)},this.socket.onclose=async()=>{this._log("error","WebSocket is closed at "+(new Date).toISOString()),this.connectionStatus$.next("disconnected"),this.connected$.next(!1),this._attemptReconnect&&this._attemptedReconnects<5&&(this._log("info","Waiting to reconnect"),this._log("info",`Attempted reconnects: ${this._attemptedReconnects}`),this.connectionStatus$.next("waiting_reconnect"),this.connecting=!0,await new Promise((e=>setTimeout(e,1e3*(this._attemptedReconnects||1)))),this.connect(),this._attemptedReconnects+=1)},this.socket.onerror=e=>{this._log("error",`WebSocket error: ${JSON.stringify(e)}`)},this.socket.onmessage=this.queueMessage.bind(this)),rp(this.connectionStatus$.pipe(cp((e=>"connected"===e||"disconnected"===e)),sp((e=>"connected"===e)))))}queueMessage(e){const{data:t}=e,n=up.Buffer.from(t),r=this._messageBuffer&&!this._messageBuffer.eof&&this._messageBuffer.readBytes();this._messageBuffer=new Yy(r?up.Buffer.concat([r,n]):n),this._processingBuffer||(this._processingBuffer=!0,this._processBuffer())}disconnect(){this._log("info","Manually disconnecting from WebSocket"),this.noise=new Gy({ls:this._ls,es:this._es}),this._attemptReconnect=!1,this.socket&&this.socket.close()}async _processBuffer(){try{let e=!0;do{if(this._handshakeState!==eg.READY)switch(this._handshakeState){case eg.INITIATOR_INITIATING:throw new Error("Received data before intialised");case eg.AWAITING_RESPONDER_REPLY:e=this._processResponderReply()}else switch(this._readState){case tg.READY_FOR_LEN:e=this._processPacketLength();break;case tg.READY_FOR_BODY:e=this._processPacketBody();break;case tg.BLOCKED:e=!1;break;default:throw new Error("Unknown read state")}}while(e)}catch(e){this._log("error",`Noise state has rotated nonce: ${e}`),this.disconnect()}this._processingBuffer=!1}_processResponderReply(){const e=this._messageBuffer.readBytes(50);if(50!==e.byteLength)throw new Error("Invalid message received from remote node");this._log("info","Validating message as part of Act2"),this.noise.initiatorAct2(e),this._log("info","Creating reply for Act3");const t=this.noise.initiatorAct3();return this.socket&&(this._log("info","Sending reply for act3"),this.socket.send(t),this._handshakeState=eg.READY),!0}_processPacketLength(){try{const e=this._messageBuffer.readBytes(18);if(!e)return!1;const t=this.noise.decryptLength(e);return this._l=t,this._readState=tg.READY_FOR_BODY,!0}catch(e){return!1}}_processPacketBody(){if(!this._l)return!1;try{const e=this._messageBuffer.readBytes(this._l+16);if(!e)return!1;const t=this.noise.decryptMessage(e);return this._l=null,this._decryptedMsgs$.next(t),this._readState=tg.READY_FOR_LEN,!0}catch(e){return!1}}async handleDecryptedMessage(e){try{const t=new Yy(e),n=t.readUInt16BE(),[r]=Object.entries(Qy).find((([e,t])=>t===n))||[],i=t.readBytes(8).toString("hex"),o=t.readBytes();if(this._log("info",`Received message type is: ${r||"unknown"}`),n===Qy.CommandoResponseContinues)return this._log("info","Received a partial commando message, caching it to join with other parts"),void(this._partialCommandoMsgs[i]=this._partialCommandoMsgs[i]?up.Buffer.concat([this._partialCommandoMsgs[i],o.subarray(0,o.byteLength-16)]):e.subarray(0,e.length-16));n===Qy.CommandoResponse&&this._partialCommandoMsgs[i]&&(this._log("info","Received a final commando msg and we have a partial message to join it to. Joining now"),e=up.Buffer.concat([this._partialCommandoMsgs[i],o]),delete this._partialCommandoMsgs[i]),this._log("info","Deserialising payload");const a=function(buffer){const e=buffer.readUInt16BE(0);switch(e){case Qy.Init:return ng.deserialize(buffer);case Qy.Ping:return rg.deserialize(buffer);case Qy.Pong:return ig.deserialize(buffer);case Qy.CommandoResponse:case Qy.CommandoResponseContinues:return og.deserialize(buffer)}return{type:e}}(e);switch(a.type){case Qy.Init:{this._log("info","Constructing Init message reply");const e=this.noise.encryptMessage(a.serialize());this.socket&&(this._log("info","Sending Init message reply"),this.socket.send(e),this._log("info","Connected and ready to send messages!"),this.connectionStatus$.next("connected"),this.connected$.next(!0),this.connecting=!1,this._attemptedReconnects=0);break}case Qy.Ping:{this._log("info","Received a Ping message"),this._log("info","Creating a Pong message");const e=new ig(a.numPongBytes).serialize(),t=this.noise.encryptMessage(e);this.socket&&(this._log("info","Sending a Pong message"),this.socket.send(t));break}case Qy.CommandoResponse:this._commandoMsgs$.next(a)}}catch(e){this._log("error",`Error handling incoming message: ${e.message}`)}}async commando({method:e,params:t=[],rune:n,reqId:r}){if(this._log("info",`Commando request method: ${e} params: ${JSON.stringify(t)}`),"disconnected"===this.connectionStatus$.value){this._log("info","No socket connection, so creating one now");if(!await this.connect())throw{code:2,message:"Could not establish a connection to node"}}else this._log("info","Ensuring we have a connection before making request"),await rp(this.connectionStatus$.pipe(cp((e=>"connected"===e))));const i=new Zy;if(!r){const e=mp(8);r=pp(e)}i.writeUInt16BE(Qy.CommandoRequest),i.writeBytes(up.Buffer.from(r,"hex"));const o=`lnmessage:${e}#${r}`;i.writeBytes(up.Buffer.from(JSON.stringify({id:o,rune:n,method:e,params:t}))),this._log("info","Creating message to send");const a=this.noise.encryptMessage(i.toBuffer());if(this.socket){this._log("info","Sending commando message"),this.socket.send(a),this._log("info",`Message sent with id ${o} and awaiting response`);const{response:e}=await rp(this._commandoMsgs$.pipe(cp((e=>e.id===r)))),{result:t}=e,{error:n}=e;if(this._log("info",t?`Successful response received for ID: ${e.id}`:`Error response received: ${n.message}`),n)throw n;return t}throw new Error("No socket initialised and connected")}_log(e,t){this._logger&&this._logger[e]&&this._logger[e](`[${e.toUpperCase()} - ${(new Date).toISOString()}]: ${t}`)}},sg={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let cg;const ug=new Uint8Array(16);function lg(){if(!cg&&(cg="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cg(ug)}const fg=[];for(let e=0;e<256;++e)fg.push((e+256).toString(16).slice(1));function hg(e,t=0){return fg[e[t+0]]+fg[e[t+1]]+fg[e[t+2]]+fg[e[t+3]]+"-"+fg[e[t+4]]+fg[e[t+5]]+"-"+fg[e[t+6]]+fg[e[t+7]]+"-"+fg[e[t+8]]+fg[e[t+9]]+"-"+fg[e[t+10]]+fg[e[t+11]]+fg[e[t+12]]+fg[e[t+13]]+fg[e[t+14]]+fg[e[t+15]]}const dg=function(e,t,n){if(sg.randomUUID&&!t&&!e)return sg.randomUUID();const r=(e=e||{}).random||(e.rng||lg)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return hg(r)};var pg=a(27715),yg=a(48764).Buffer;function gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bg(e){return function(e){if(Array.isArray(e))return gg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gg(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8",n=pg.bech32.decode(e,2e3).words,r=pg.bech32.fromWords(n);return yg.from(r).toString(t)}function wg(e){return e.origin?new URL(e.origin).host:e.url?new URL(e.url).host:null}function vg(e,t){var n=bg(e).concat(bg(t)).sort((function(e,t){return t.settleDate-e.settleDate}));return n}function _g(e){return e.map((function(e){return"request.".concat(e)}))}function Eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sg(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kg(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Sg(o,r,i,a,s,"next",e)}function s(e){Sg(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Og(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pg(e){return function(e){if(Array.isArray(e))return Eg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Eg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eg(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ig(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Tg=["bkpr-listbalances","checkmessage","connect","decode","decodepay","disconnect","feerates","fundchannel","getinfo","getroute","invoice","keysend","listforwards","listfunds","listinvoices","listnodes","listoffers","listpays","listpeers","listsendpays","listtransactions","multifundchannel","offer","pay","sendpay","setchannel","signmessage"],xg=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Og(this,"account",void 0),Og(this,"config",void 0),Og(this,"ln",void 0),this.account=t,this.config=n,this.ln=new ag({remoteNodePublicKey:this.config.pubkey,wsProxy:this.config.wsProxy,ip:this.config.host,port:this.config.port||9735,privateKey:this.config.privateKey})}var t,n,r;return t=e,n=[{key:"init",value:function(){var e=this;return kg((function(){return Ig(this,(function(t){switch(t.label){case 0:return[4,e.ln.connect()];case 1:return t.sent(),[2]}}))}))()}},{key:"unload",value:function(){var e=this;return kg((function(){return Ig(this,(function(t){switch(t.label){case 0:return[4,e.ln.disconnect()];case 1:return t.sent(),[2]}}))}))()}},{key:"supportedMethods",get:function(){return["getInfo","keysend","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"].concat(Pg(_g(Tg)))}},{key:"requestMethod",value:function(e,t){var n=this;return kg((function(){return Ig(this,(function(r){switch(r.label){case 0:if(!n.supportedMethods.includes(e))throw new Error("".concat(e," is not supported"));return[4,n.ln.commando({method:e,params:t,rune:n.config.rune})];case 1:return[2,{data:r.sent()}]}}))}))()}},{key:"connectPeer",value:function(e){var t=this;return kg((function(){return Ig(this,(function(n){return[2,t.ln.commando({method:"connect",params:{id:e.pubkey,host:e.host},rune:t.config.rune}).then((function(e){return{data:!0}}))]}))}))()}},{key:"getInvoices",value:function(){var e=this;return kg((function(){return Ig(this,(function(t){return[2,e.ln.commando({method:"listinvoices",params:{},rune:e.config.rune}).then((function(e){return e.invoices.map((function(e,t){return{id:e.label,memo:e.description,settled:"paid"===e.status,preimage:e.payment_preimage,payment_hash:e.payment_hash,settleDate:1e3*e.paid_at,type:"received",totalAmount:Math.floor(e.amount_received_msat/1e3)}})).filter((function(e){return e.settled}))}))]}))}))()}},{key:"getTransactions",value:function(){var e=this;return kg((function(){var t,n;return Ig(this,(function(r){switch(r.label){case 0:return[4,e.getInvoices()];case 1:return t=r.sent(),[4,e.getPayments()];case 2:return n=r.sent(),[2,{data:{transactions:vg(t,n)}}]}}))}))()}},{key:"getPayments",value:function(){var e=this;return kg((function(){return Ig(this,(function(t){switch(t.label){case 0:return[4,e.ln.commando({method:"listsendpays",params:{},rune:e.config.rune}).then((function(e){return e.payments.map((function(e,t){var n;return{id:"".concat(e.id),memo:null!==(n=e.description)&&void 0!==n?n:"",settled:"complete"===e.status,preimage:e.payment_preimage,payment_hash:e.payment_hash,settleDate:1e3*e.created_at,type:"sent",totalAmount:e.amount_sent_msat/1e3}})).filter((function(e){return e.settled}))}))];case 1:return[2,t.sent()]}}))}))()}},{key:"getInfo",value:function(){var e=this;return kg((function(){var t;return Ig(this,(function(n){switch(n.label){case 0:return[4,e.ln.commando({method:"getinfo",params:{},rune:e.config.rune})];case 1:return[2,{data:{alias:(t=n.sent()).alias,pubkey:t.id,color:t.color}}]}}))}))()}},{key:"getBalance",value:function(){var e=this;return kg((function(){var t,n;return Ig(this,(function(r){switch(r.label){case 0:return[4,e.ln.commando({method:"listfunds",params:{},rune:e.config.rune})];case 1:return t=r.sent(),n=t.channels.filter((function(e){return e.connected&&"CHANNELD_NORMAL"==e.state})).reduce((function(e,t){return e+Math.floor(t.channel_sat||(t.our_amount_msat||0)/1e3)}),0),[2,{data:{balance:n}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return kg((function(){return Ig(this,(function(n){return[2,t.ln.commando({method:"pay",params:{bolt11:e.paymentRequest},rune:t.config.rune}).then((function(e){var t=e;return{data:{paymentHash:t.payment_hash,preimage:t.payment_preimage,route:{total_amt:Math.floor(t.amount_msat/1e3),total_fees:Math.floor((t.amount_sent_msat-t.amount_msat)/1e3)}}}}))]}))}))()}},{key:"keysend",value:function(e){var t=this;return kg((function(){var n,r;return Ig(this,(function(i){for(var o in n={},e.customRecords)n[o]=md().parse(e.customRecords[o]).toString(Za());for(var a in r={},e.customRecords)r[a]=md().parse(e.customRecords[a]).toString(Za());return[2,t.ln.commando({method:"keysend",params:{destination:e.pubkey,msatoshi:1e3*e.amount,extratlvs:r},rune:t.config.rune}).then((function(e){var t=e;return{data:{paymentHash:t.payment_hash,preimage:t.payment_preimage,route:{total_amt:Math.floor(t.amount_msat/1e3),total_fees:Math.floor((t.amount_sent_msat-t.amount_msat)/1e3)}}}}))]}))}))()}},{key:"checkPayment",value:function(e){var t=this;return kg((function(){return Ig(this,(function(n){return[2,t.ln.commando({method:"listinvoices",params:{payment_hash:e.paymentHash},rune:t.config.rune}).then((function(e){var t;return{data:{paid:"paid"===(null===(t=e.invoices[0])||void 0===t?void 0:t.status)}}}))]}))}))()}},{key:"signMessage",value:function(e){return this.ln.commando({method:"signmessage",params:{message:e.message},rune:this.config.rune}).then((function(t){var n=t;return{data:{message:e.message,signature:n.zbase}}}))}},{key:"makeInvoice",value:function(e){var t=this;return kg((function(){var n,r;return Ig(this,(function(i){switch(i.label){case 0:return n=dg(),[4,t.ln.commando({method:"invoice",params:{amount_msat:1e3*e.amount,label:n,description:e.memo},rune:t.config.rune})];case 1:return[2,{data:{paymentRequest:(r=i.sent()).bolt11,rHash:r.payment_hash}}]}}))}))()}}],n&&Ag(t.prototype,n),r&&Ag(t,r),e}(),Ng=a(98269),Rg=a.n(Ng);function Cg(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Bg(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Cg(o,r,i,a,s,"next",e)}function s(e){Cg(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Lg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ug(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jg(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Dg=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ug(this,"account",void 0),Ug(this,"config",void 0),this.account=t,this.config=n}var t,n,r;return t=e,n=[{key:"init",value:function(){return Promise.resolve()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"supportedMethods",get:function(){return["getInfo","keysend","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"]}},{key:"getInfo",value:function(){return this.request("/getinfo",void 0).then((function(e){return{data:{alias:e.alias,pubkey:e.nodeId,color:e.color}}}))}},{key:"connectPeer",value:function(){var e=this;return Bg((function(){return jg(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the getInvoices call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getTransactions",value:function(){var e=this;return Bg((function(){return jg(this,(function(t){return console.error("getTransactions() is not yet supported with the currently used account: ".concat(e.constructor.name)),[2,{data:{transactions:[]}}]}))}))()}},{key:"getBalance",value:function(){var e=this;return Bg((function(){var t,n;return jg(this,(function(r){switch(r.label){case 0:return[4,e.request("/usablebalances")];case 1:return t=r.sent(),n=t.map((function(e){return e.canSend||0})).reduce((function(e,t){return e+t}),0),[2,{data:{balance:Math.floor(n/1e3)}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return Bg((function(){var n,r,i,o,a,s,c;return jg(this,(function(u){switch(u.label){case 0:return[4,t.request("/payinvoice",{invoice:e.paymentRequest,blocking:!0})];case 1:return n=u.sent(),r=n.paymentHash,i=n.paymentPreimage,[4,t.request("/getsentinfo",{paymentHash:r})];case 2:return o=u.sent(),a=o[o.length-1],s=a.status,c=a.recipientAmount,[2,{data:{preimage:i,paymentHash:r,route:{total_amt:Math.floor(c/1e3),total_fees:Math.floor(s.feesPaid/1e3)}}}]}}))}))()}},{key:"keysend",value:function(e){return Bg((function(){return jg(this,(function(e){throw new Error("not supported")}))}))()}},{key:"checkPayment",value:function(e){var t=this;return Bg((function(){var n;return jg(this,(function(r){switch(r.label){case 0:return[4,t.request("/getreceivedinfo",{paymentHash:e.paymentHash})];case 1:return[2,{data:{paid:(n=r.sent())&&"received"===n.status.type}}]}}))}))()}},{key:"signMessage",value:function(e){var t=this;return Bg((function(){var n;return jg(this,(function(r){switch(r.label){case 0:return[4,t.request("/signmessage",{msg:Rg().stringify(md().parse(e.message))})];case 1:return n=r.sent().signature,[2,{data:{message:e.message,signature:n}}]}}))}))()}},{key:"makeInvoice",value:function(e){var t=this;return Bg((function(){var n;return jg(this,(function(r){switch(r.label){case 0:return[4,t.request("/createinvoice",{description:e.memo,amountMsat:1e3*+e.amount})];case 1:return[2,{data:{paymentRequest:(n=r.sent()).serialized,rHash:n.paymentHash}}]}}))}))()}},{key:"request",value:function(e,t){var n=this;return Bg((function(){var r,i,o,a,s,c,u;return jg(this,(function(l){switch(l.label){case 0:if((r=new URL(n.config.url.startsWith("http")?n.config.url:"http://"+n.config.url)).pathname=e,(i=new Headers).append("Accept","application/json"),o=Rg().stringify(md().parse(":"+n.config.password)),i.append("Authorization","Basic "+o),a=new FormData,t)for(var f in t)a.append(f,t[f]);return[4,fetch(r.toString(),{method:"POST",headers:i,body:a})];case 1:if((s=l.sent()).ok)return[3,6];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,s.text()];case 3:u=l.sent();try{if(!(c=JSON.parse(u)).error)throw new Error("error response: "+u.slice(0,200))}catch(e){throw new Error("got a non-JSON response: "+u.slice(0,200))}return[3,5];case 4:throw l.sent(),new Error(s.statusText);case 5:throw console.error("eclair error",c.error),new Error(c.error);case 6:return[4,s.json()];case 7:return[2,l.sent()]}}))}))()}}],n&&Lg(t.prototype,n),r&&Lg(t,r),e}();const Mg=Dg;var Hg=a(9669),Fg=a.n(Hg),zg=a(36026),Kg=a.n(zg),qg=a(15327),Vg=a.n(qg),Wg=a(94097),Gg=a.n(Wg),$g=a(64867);async function Yg(e){const t=function(e){const t=new Headers(e.headers);if(e.auth){const n=e.auth.username||"",r=e.auth.password?decodeURI(encodeURIComponent(e.auth.password)):"";t.set("Authorization",`Basic ${btoa(n+":"+r)}`)}const n=e.method.toUpperCase(),r={headers:t,method:n};"GET"!==n&&"HEAD"!==n&&(r.body=e.data,(0,$g.isFormData)(r.body)&&(0,$g.isStandardBrowserEnv)()&&t.delete("Content-Type"));e.mode&&(r.mode=e.mode);e.cache&&(r.cache=e.cache);e.integrity&&(r.integrity=e.integrity);e.redirect&&(r.redirect=e.redirect);e.referrer&&(r.referrer=e.referrer);(0,$g.isUndefined)(e.withCredentials)||(r.credentials=e.withCredentials?"include":"omit");const i=Gg()(e.baseURL,e.url),o=Vg()(i,e.params,e.paramsSerializer);return new Request(o,r)}(e),n=[Zg(t,e)];e.timeout&&e.timeout>0&&n.push(new Promise((n=>{setTimeout((()=>{const r=e.timeoutErrorMessage?e.timeoutErrorMessage:"timeout of "+e.timeout+"ms exceeded";n(Xg(r,e,"ECONNABORTED",t))}),e.timeout)})));const r=await Promise.race(n);return new Promise(((t,n)=>{r instanceof Error?n(r):"[object Function]"===Object.prototype.toString.call(e.settle)?e.settle(t,n,r):Kg()(t,n,r)}))}async function Zg(e,t){let n;try{n=await fetch(e)}catch(n){return Xg("Network Error",t,"ERR_NETWORK",e)}const r={ok:n.ok,status:n.status,statusText:n.statusText,headers:new Headers(n.headers),config:t,request:e};if(n.status>=200&&204!==n.status)switch(t.responseType){case"arraybuffer":r.data=await n.arrayBuffer();break;case"blob":r.data=await n.blob();break;case"json":r.data=await n.json();break;case"formData":r.data=await n.formData();break;default:r.data=await n.text()}return r}function Xg(e,t,n,r,i){return Fg().AxiosError&&"function"==typeof Fg().AxiosError?new(Fg().AxiosError)(e,Fg().AxiosError[n],t,r,i):function(e,t,n,r,i){e.config=t,n&&(e.code=n);return e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}(new Error(e),t,n,r,i)}var Jg=a(28805),Qg=a.n(Jg);function eb(e){var t=Qg().decode(e).tags.find((function(e){return"description"===e.tagName}));return t?t.data.toString():""}var tb=a(27484),nb=a.n(tb),rb=a(37412),ib=a.n(rb);function ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ab(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var sb=1e8,cb=function(e){return Number(e)*sb},ub=function(e){var t=Number(e.amount)*e.rate;return function(e){var t=(e.locale||"en").toLowerCase().replace("_","-");return new Intl.NumberFormat(t||"en",{style:"currency",currency:e.currency}).format(Number(e.amount))}(ab(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ob(e,t,n[t])}))}return e}({},e),{amount:t}))},lb=function(e){var t=function(e){var t=(e.locale||"en").toLowerCase().replace("_","-");return new Intl.NumberFormat(t||"en").format(Number(e.amount))}(e);return"".concat(t," ").concat(mt.t("common:sats",{count:Number(e.amount)}))};function fb(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function hb(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){fb(o,r,i,a,s,"next",e)}function s(e){fb(o,r,i,a,s,"throw",e)}a(void 0)}))}}function db(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}nb().extend(ib());var pb=function(){var e=hb((function(e){var t,n,r;return db(this,(function(i){switch(i.label){case 0:return t=e.rate,n=e.currency,r={currency:n,rate:t,timestamp:Date.now()},[4,o().storage.local.set({currencyRate:JSON.stringify(r)})];case 1:return i.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),yb=function(){var e=hb((function(e){var t,n,r;return db(this,(function(i){switch(i.label){case 0:return t=i_.getState().settings,"yadio"!==(n=t.exchange)?[3,3]:[4,Fg().get("https://api.yadio.io/exrates/".concat(e.toLowerCase()),{adapter:Yg})];case 1:case 4:case 7:return[4,null==(r=i.sent())?void 0:r.data];case 2:return[2,i.sent().BTC/sb];case 3:return"coindesk"!==n?[3,6]:[4,Fg().get("https://api.coindesk.com/v1/bpi/currentprice/".concat(e.toLowerCase(),".json"),{adapter:Yg})];case 5:return[2,i.sent().bpi[e].rate_float/sb];case 6:return[4,Fg().get("https://getalby.com/api/rates/".concat(e.toLowerCase(),".json"),{adapter:Yg})];case 8:return[2,i.sent()[e].rate_float/sb]}}))}));return function(t){return e.apply(this,arguments)}}(),gb=function(){var e=hb((function(e){var t,n,r,i;return db(this,(function(a){switch(a.label){case 0:return t={},[4,o().storage.local.get(["currencyRate"])];case 1:return(n=a.sent()).currencyRate?(t=JSON.parse(n.currencyRate)).currency!==e?[3,4]:nb()().isSameOrBefore(nb()(null==t?void 0:t.timestamp).add(10,"minute"))&&t.rate?[2,t.rate]:[4,yb(e)]:[3,4];case 2:return r=a.sent(),[4,pb({rate:r,currency:e})];case 3:return a.sent(),[2,r];case 4:return[4,yb(e)];case 5:return i=a.sent(),[4,pb({currency:e,rate:i})];case 6:return a.sent(),[2,i]}}))}));return function(t){return e.apply(this,arguments)}}(),bb=function(){var e=hb((function(e){var t;return db(this,(function(e){switch(e.label){case 0:return t=i_.getState().settings.currency,[4,gb(t)];case 1:return[2,{data:{rate:e.sent()}}]}}))}));return function(t){return e.apply(this,arguments)}}();const mb=bb;function wb(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function vb(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){wb(o,r,i,a,s,"next",e)}function s(e){wb(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function kb(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Ab(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ob=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Eb(this,"account",void 0),Eb(this,"config",void 0),this.account=t;var r=n.accessToken;this.config=Sb(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Eb(e,t,n[t])}))}return e}({},n),{headers:n.headers||this.getLegacyHeaders(r||""),apiCompatibilityMode:void 0===n.apiCompatibilityMode||n.apiCompatibilityMode,currency:n.currency||"BTC"})}var t,n,i;return t=e,n=[{key:"getLegacyHeaders",value:function(e){return{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}},{key:"init",value:function(){return Promise.resolve()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"toFiatCents",value:function(e){return Math.round(100*e)}},{key:"fromFiatCents",value:function(e){return e/100}},{key:"supportedMethods",get:function(){return["getInfo","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"]}},{key:"getInfo",value:function(){var e=this;return vb((function(){var t;return kb(this,(function(n){return t={query:"\n        query getinfo {\n          me {\n              id\n              username\n          }\n        }\n      "},[2,e.request(t).then((function(e){var t=e.data,n=e.errors||t.me.errors;if(n&&n.length)throw new Error(n[0].message||JSON.stringify(n));return{data:{alias:t.me.username?t.me.username.substr(0,10):t.me.id.substr(0,8)}}}))]}))}))()}},{key:"connectPeer",value:function(){var e=this;return vb((function(){return kb(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the getInvoices call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getTransactions",value:function(){var e=this;return vb((function(){var t,n,i,o,a,s;return kb(this,(function(c){switch(c.label){case 0:t=function(){var t,c,u,l,f,h,d,p,y,g,b,m,w,v,_,E,S,k,A,O,P,I;return kb(this,(function(T){switch(T.label){case 0:return c={first:n},null!==o&&(c.after=o),u={query:"\n          query transactionsList($first: Int, $after: String) {\n            me {\n              defaultAccount {\n                wallets {\n                  id\n                  walletCurrency\n                  transactions(first: $first, after: $after) {\n                    pageInfo {\n                      hasNextPage\n                    }\n                    edges {\n                      cursor\n                      node {\n                        status\n                        createdAt\n                        settlementAmount\n                        memo\n                        direction\n                        initiationVia {\n                          ... on InitiationViaLn {\n                            paymentRequest\n                            paymentHash\n                          }\n                        }\n                        settlementVia {\n                          ... on SettlementViaLn {\n                            ".concat(e.config.apiCompatibilityMode?"paymentSecret":"preImage","\n                          }\n                          ... on SettlementViaIntraLedger {\n                            ").concat(e.config.apiCompatibilityMode?"counterPartyWalletId":"preImage","\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        "),variables:c},[4,e.request(u)];case 1:if(l=T.sent(),(f=l.errors||l.data.me.errors)&&f.length)throw new Error(f[0].message||JSON.stringify(f));if(h=l.data.me.defaultAccount.wallets,d=h.find((function(t){return t.id===e.config.walletId})),!d)return[3,10];if(d.walletCurrency!==e.config.currency)throw new Error("Wallet currency does not match the account currency. "+d.walletCurrency+" != "+e.config.currency);p=!0,y=!1,g=void 0,T.label=2;case 2:T.trys.push([2,8,9,10]),b=d.transactions.edges[Symbol.iterator](),T.label=3;case 3:return(p=(m=b.next()).done)?[3,7]:(w=m.value,v=w.node,_="RECEIVE"===v.direction?"received":"sent",E=d.walletCurrency,S=Math.abs(v.settlementAmount),k=void 0,"BTC"===E?[3,5]:[4,gb(r[E])]);case 4:A=T.sent(),S=e.fromFiatCents(S),k=[S,r[E]],S=Math.floor(S/A),T.label=5;case 5:O=new Date(1e3*v.createdAt),P="",!v.memo&&v.initiationVia.paymentRequest&&(P=eb(v.initiationVia.paymentRequest)),s.push({id:w.cursor,memo:v.memo||P,preimage:v.settlementVia.preImage||v.settlementVia.paymentSecret||"",payment_hash:v.initiationVia.paymentHash||"",settled:"SUCCESS"===v.status,settleDate:O.getTime(),totalAmount:S,type:_,displayAmount:k}),T.label=6;case 6:return p=!0,[3,3];case 7:return[3,10];case 8:return I=T.sent(),y=!0,g=I,[3,10];case 9:try{p||null==b.return||b.return()}finally{if(y)throw g}return[7];case 10:return a=(null==d?void 0:d.transactions.pageInfo.hasNextPage)||!1,o=(null==d||null===(t=d.transactions.edges.slice(-1)[0])||void 0===t?void 0:t.cursor)||null,i++,[2]}}))},n=20,i=0,o=null,a=!0,s=[],c.label=1;case 1:return a&&i<5?[5,Ab(t())]:[3,3];case 2:return c.sent(),[3,1];case 3:return[2,{data:{transactions:s}}]}}))}))()}},{key:"getBalance",value:function(){var e=this;return vb((function(){var t;return kb(this,(function(n){return t={query:"\n        query getinfo {\n          me {\n            defaultAccount {\n              wallets {\n                id\n                balance\n                walletCurrency\n              }\n            }\n          }\n        }\n      "},[2,e.request(t).then((function(t){var n=t.data,r=t.errors||n.me.errors;if(r&&r.length)throw new Error(r[0].message||JSON.stringify(r));var i=n.me.defaultAccount.wallets.find((function(t){return t.id===e.config.walletId}));if(i){if(i.walletCurrency!==e.config.currency)throw new Error("Wallet currency does not match the account currency. "+i.walletCurrency+" != "+e.config.currency);var o=i.walletCurrency;return{data:{balance:"BTC"!==o?e.fromFiatCents(i.balance):i.balance,currency:o}}}throw new Error("Valid wallet not found")}))]}))}))()}},{key:"sendPayment",value:function(e){var t=this;return vb((function(){var n,r,i,o;return kb(this,(function(a){return n={query:"\n        mutation lnInvoicePaymentSend($input: LnInvoicePaymentInput!) {\n          lnInvoicePaymentSend(input:$input) {\n            status\n            errors {\n              message\n            }\n            transaction {\n              settlementVia {\n                ... on SettlementViaLn {\n                  ".concat(t.config.apiCompatibilityMode?"paymentSecret":"preImage","\n                }\n                ... on SettlementViaIntraLedger {\n                  ").concat(t.config.apiCompatibilityMode?"counterPartyWalletId":"preImage","\n                }\n              }\n            }\n          }\n        }\n      "),variables:{input:{walletId:t.config.walletId,paymentRequest:e.paymentRequest,memo:"Sent via Alby"}}},r=Qg().decode(e.paymentRequest),i=r.satoshis||0,o=r.tagsObject.payment_hash||"",[2,t.request(n).then((function(e){var t=e.data,n=e.errors||t.lnInvoicePaymentSend.errors;if(n&&n.length)throw new Error(n[0].message||JSON.stringify(n));var r=t.lnInvoicePaymentSend.transaction,a="No preimage received";switch(r&&r.settlementVia&&("preImage"in r.settlementVia||"paymentSecret"in r.settlementVia?a=r.settlementVia.preImage||r.settlementVia.paymentSecret:"counterPartyWalletId"in r.settlementVia&&(a="No preimage, the payment was settled intraledger")),t.lnInvoicePaymentSend.status){case"ALREADY_PAID":throw new Error("Invoice was already paid.");case"FAILURE":throw new Error("Payment failed.");case"PENDING":return{data:{preimage:"No preimage, payment still pending",paymentHash:o,route:{total_amt:i,total_fees:0}}};default:return{data:{preimage:a,paymentHash:o,route:{total_amt:i,total_fees:0}}}}}))]}))}))()}},{key:"checkPayment",value:function(e){var t=this;return vb((function(){var n,r;return kb(this,(function(i){switch(i.label){case 0:n={query:"\n        query transactionsList($first: Int, $after: String) {\n          me {\n            defaultAccount {\n              wallets {\n                id\n                walletCurrency\n                transactions(first: $first, after: $after) {\n                  edges {\n                    cursor\n                    node {\n                      status\n                      initiationVia {\n                        ... on InitiationViaLn {\n                            paymentHash\n                        }\n                      }\n                      settlementVia {\n                        ... on SettlementViaLn {\n                          ".concat(t.config.apiCompatibilityMode?"paymentSecret":"preImage","\n                        }\n                        ... on SettlementViaIntraLedger {\n                          ").concat(t.config.apiCompatibilityMode?"counterPartyWalletId":"preImage","\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ")},r=!0,i.label=1;case 1:return!0!==r?[3,3]:[4,t.request(n).then((function(n){var r=n.data,i=n.errors||r.me.errors;if(i&&i.length)throw new Error(i[0].message||JSON.stringify(i));var o=r.me.defaultAccount.wallets.find((function(e){return e.id===t.config.walletId}));if(void 0===o)throw new Error("Bad data received.");if(o.walletCurrency!==t.config.currency)throw new Error("Wallet currency does not match the account currency. "+o.walletCurrency+" != "+t.config.currency);var a=o.transactions.edges.find((function(t){return t.node.initiationVia.paymentHash===e.paymentHash}));return void 0===a||{data:{paid:"SUCCESS"===a.node.status,preimage:a.node.settlementVia.counterPartyWalletId?"Payment executed internally":a.node.settlementVia.preImage||"No preimage received"}}}))];case 2:return r=i.sent(),[3,1];case 3:return[2,r]}}))}))()}},{key:"keysend",value:function(e){return vb((function(){return kb(this,(function(e){throw new Error("not supported")}))}))()}},{key:"signMessage",value:function(e){return Promise.reject(new Error("Not yet supported with Galoy."))}},{key:"makeInvoice",value:function(e){var t=this;return vb((function(){var n,r,i,o,a,s;return kb(this,(function(c){return n="USD"==t.config.currency,r=n?"LnUsdInvoiceBtcDenominatedCreateOnBehalfOfRecipient":"LnInvoiceCreate",i=n?"LnUsdInvoiceBtcDenominatedCreateOnBehalfOfRecipientInput":"LnInvoiceCreateInput",o=n?"lnUsdInvoiceBtcDenominatedCreateOnBehalfOfRecipient":"lnInvoiceCreate",a=Number(e.amount),s={query:"\n        mutation ".concat(r,"($input: ").concat(i,"!) {\n          ").concat(o,"(input: $input) {\n            invoice {\n              paymentRequest\n              paymentHash\n              paymentSecret\n              satoshis\n            }\n            errors {\n              message\n            }\n          }\n        }\n            "),variables:{input:{walletId:n?void 0:t.config.walletId,recipientWalletId:n?t.config.walletId:void 0,amount:a,memo:e.memo}}},[2,t.request(s).then((function(e){var t=e.data,n=e.errors||t[o].errors;if(n&&n.length)throw new Error(n[0].message||JSON.stringify(n));return{data:{paymentRequest:t[o].invoice.paymentRequest,rHash:t[o].invoice.paymentHash}}}))]}))}))()}},{key:"request",value:function(e){var t=this;return vb((function(){var n,r,i,o;return kb(this,(function(a){switch(a.label){case 0:(n={method:"POST",url:t.config.url,responseType:"json",headers:t.config.headers,adapter:Yg}).data=e,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Fg()(n)];case 2:return i=a.sent(),r=i.data,[3,4];case 3:if(o=a.sent(),console.error(o),s=o,null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](s):s instanceof c)throw new Error(o.message);return[3,4];case 4:return[2,r]}var s,c}))}))()}}],n&&_b(t.prototype,n),i&&_b(t,i),e}();const Pb=Ob;var Ib=a(86266),Tb=a.n(Ib),xb=a(48764).Buffer;function Nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cb=new(Tb().ec)("secp256k1"),Bb=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rb(this,"sk",void 0),Rb(this,"keyHex",void 0),this.keyHex=t,!t)throw new Error("Invalid key");this.sk=Cb.keyFromPrivate(xb.from(t,"hex"))}var t,n,r;return t=e,n=[{key:"pk",get:function(){return this.sk.getPublic()}},{key:"pkHex",get:function(){return this.pk.encodeCompressed("hex")}},{key:"sign",value:function(e){if(!e)throw new Error("Invalid message");return this.sk.sign(e,{canonical:!0})}},{key:"verify",value:function(e,t){try{return this.sk.verify(e,t)}catch(e){return console.error(e),!1}}}],n&&Nb(t.prototype,n),r&&Nb(t,r),e}();const Lb=Bb;function Ub(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function jb(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ub(o,r,i,a,s,"next",e)}function s(e){Ub(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mb(e,t,n[t])}))}return e}function Fb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function zb(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Kb="https://kollider.me/api",qb={Accept:"application/json","Content-Type":"application/json"},Vb=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mb(this,"account",void 0),Mb(this,"config",void 0),Mb(this,"access_token",void 0),Mb(this,"access_token_created",void 0),Mb(this,"refresh_token",void 0),Mb(this,"refresh_token_created",void 0),Mb(this,"noRetry",void 0),Mb(this,"accounts",void 0),Mb(this,"currency",void 0),Mb(this,"currentAccountId",void 0),this.account=t,this.config=n,this.currency=n.currency,this.currentAccountId=null}var t,n,r;return t=e,n=[{key:"init",value:function(){var e=this;return jb((function(){return zb(this,(function(t){switch(t.label){case 0:return[4,e.authorize()];case 1:return t.sent(),[4,e.loadAccounts()];case 2:return t.sent(),[4,e.findAccountId(e.config.currency)];case 3:return e.currentAccountId=t.sent(),[2]}}))}))()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"connectPeer",value:function(){var e=this;return jb((function(){return zb(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the connectPeer call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getTransactions",value:function(){var e=this;return jb((function(){return zb(this,(function(t){return console.error("getTransactions() is not yet supported with the currently used account: ".concat(e.constructor.name)),[2,{data:{transactions:[]}}]}))}))()}},{key:"getInfo",value:function(){var e=this;return jb((function(){return zb(this,(function(t){return[2,{data:{alias:"Kollider (".concat(e.currency,")")}}]}))}))()}},{key:"getBalance",value:function(){var e=this;return jb((function(){var t,n;return zb(this,(function(r){switch(r.label){case 0:return[4,e.loadAccounts()];case 1:return r.sent(),[4,e.findAccount(e.currency)];case 2:if(!(t=r.sent()))throw new Error("Account not found");return n=t.balance,"BTC"===t.currency&&(n=Math.round(cb(t.balance)).toString()),[2,{data:{balance:parseFloat(n),currency:t.currency}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return jb((function(){var n,r,i,o,a,s;return zb(this,(function(c){switch(c.label){case 0:return[4,t.request("POST","/payinvoice",{payment_request:e.paymentRequest,currency:t.config.currency})];case 1:if((i=c.sent()).error)throw new Error(i.error);return o=cb((null===(n=i.amount)||void 0===n?void 0:n.value)||0).toString(),a=cb((null===(r=i.fees)||void 0===r?void 0:r.value)||0).toString(),s={total_amt:parseFloat(o),total_fees:parseFloat(a)},[2,{data:{preimage:i.payment_preimage||"",paymentHash:i.payment_hash,route:s}}]}}))}))()}},{key:"keysend",value:function(e){return jb((function(){return zb(this,(function(e){throw new Error("Keysend is not supported with the currently used account.")}))}))()}},{key:"checkPayment",value:function(e){var t=this;return jb((function(){var n;return zb(this,(function(r){switch(r.label){case 0:return[4,t.request("GET","/checkpayment",{payment_hash:e.paymentHash})];case 1:return[2,{data:{paid:!!(null==(n=r.sent())?void 0:n.paid)}}]}}))}))()}},{key:"signMessage",value:function(e){if(!this.config.username||!this.config.password)return Promise.reject(new Error("Missing config"));if(!e.message)return Promise.reject(new Error("Invalid message"));var t=Ja()(e.message).toString(Za()),n=Ja()("kollider://".concat(this.config.username,":").concat(this.config.password)).toString(Za());if(!n)return Promise.reject(new Error("Could not create key"));var r=new Lb(n).sign(t).toDER("hex");return r?Promise.resolve({data:{message:e.message,signature:r}}):Promise.reject(new Error("Signing failed"))}},{key:"makeInvoice",value:function(e){var t=this;return jb((function(){var n,r;return zb(this,(function(i){switch(i.label){case 0:return o=e.amount,n=Number(o)/sb,[4,t.request("GET","/addinvoice",{amount:n,currency:"BTC",target_account_currency:t.currency,account_id:t.currentAccountId,meta:e.memo})];case 1:if((r=i.sent()).error)throw new Error(r.error);return[2,{data:{paymentRequest:r.payment_request,rHash:r.payment_hash}}]}var o}))}))()}},{key:"authorize",value:function(){var e=this;return jb((function(){var t,n,r,i,o,a,s;return zb(this,(function(c){switch(c.label){case 0:return[4,Fg().post("".concat(Kb,"/auth"),{username:e.config.username,password:e.config.password},{headers:qb,adapter:Yg})];case 1:if(t=c.sent(),(n=t.data).error||n.errors)throw a=n.error||n.errors,s=(null==a||null===(i=a.errors)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.message)||(null==a||null===(o=a[0])||void 0===o?void 0:o.message),console.error(s),new Error("Kollider API error: "+s);return e.refresh_token=n.refresh,e.access_token=n.token,e.refresh_token_created=+new Date,e.access_token_created=+new Date,[2,n]}}))}))()}},{key:"loadAccounts",value:function(){var e=this;return jb((function(){var t;return zb(this,(function(n){switch(n.label){case 0:return[4,e.request("GET","/balance",void 0)];case 1:return t=n.sent(),e.accounts=t.accounts,[2]}}))}))()}},{key:"findAccount",value:function(e){var t=this;return jb((function(){var n;return zb(this,(function(r){switch(r.label){case 0:return[4,t.findAccountId(e)];case 1:return(n=r.sent())&&t.accounts?[2,t.accounts[n]]:[2,null]}}))}))()}},{key:"findAccountId",value:function(e){var t=this;return jb((function(){var n;return zb(this,(function(r){switch(r.label){case 0:return t.accounts?[3,2]:[4,t.loadAccounts()];case 1:r.sent(),r.label=2;case 2:return t.accounts?(n=t.accounts,[2,Object.keys(t.accounts).find((function(t){return n[t].currency===e}))||null]):[2,null]}}))}))()}},{key:"request",value:function(e,t,n){var r=this;return jb((function(){var i,o,a,s,c,u,l,f;return zb(this,(function(h){switch(h.label){case 0:return r.access_token?[3,2]:[4,r.authorize()];case 1:h.sent(),h.label=2;case 2:i={method:e,url:"".concat(Kb).concat(t),responseType:"json",adapter:Yg,headers:Fb(Hb({},qb),{Authorization:"".concat(r.access_token)})},"POST"===e?i.data=n:void 0!==n&&(i.params=n),h.label=3;case 3:return h.trys.push([3,5,,12]),[4,Fg()(i)];case 4:return a=h.sent(),o=a.data,[3,12];case 5:if(s=h.sent(),console.error(s),!Fg().isAxiosError(s))return[3,11];if(404===(null==(c=s.response)?void 0:c.status))throw u=t.replace("/",""),new Error("".concat(u," not supported by the connected account."));if(401!==(null==c?void 0:c.status))return[3,10];h.label=6;case 6:return h.trys.push([6,8,,9]),[4,r.authorize()];case 7:return h.sent(),[3,9];case 8:if(l=h.sent(),console.error(l),d=l,null!=(p=Error)&&"undefined"!=typeof Symbol&&p[Symbol.hasInstance]?p[Symbol.hasInstance](d):d instanceof p)throw new Error(l.message);return[3,9];case 9:return[2,r.request(e,t,n)];case 10:throw f="".concat(null==c?void 0:c.data.error,"\n(").concat(s.message,")"),new Error(f);case 11:return[3,12];case 12:return[2,o]}var d,p}))}))()}}],n&&Db(t.prototype,n),r&&Db(t,r),e}();function Wb(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Gb(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Wb(o,r,i,a,s,"next",e)}function s(e){Wb(o,r,i,a,s,"throw",e)}a(void 0)}))}}function $b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yb(e,t,n[t])}))}return e}function Xb(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Jb=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yb(this,"account",void 0),Yb(this,"config",void 0),this.account=t,this.config=n}var t,n,r;return t=e,n=[{key:"init",value:function(){return Promise.resolve()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"supportedMethods",get:function(){return["getInfo","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"]}},{key:"getInfo",value:function(){return this.request("GET","/api/v1/wallet",this.config.adminkey,void 0).then((function(e){return{data:{alias:e.name}}}))}},{key:"connectPeer",value:function(){var e=this;return Gb((function(){return Xb(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the getInvoices call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getTransactions",value:function(){return this.request("GET","/api/v1/payments",this.config.adminkey,void 0).then((function(e){return{data:{transactions:e.map((function(e,t){return{id:"".concat(e.checking_id,"-").concat(t),memo:e.memo,preimage:"0000000000000000000000000000000000000000000000000000000000000000"!=e.preimage?e.preimage:"",payment_hash:e.payment_hash,settled:!e.pending,settleDate:1e3*e.time,totalAmount:Math.abs(Math.floor(e.amount/1e3)),type:e.amount>0?"received":"sent"}}))}}}))}},{key:"getBalance",value:function(){return this.request("GET","/api/v1/wallet",this.config.adminkey,void 0).then((function(e){return{data:{balance:Math.floor(e.balance/1e3)}}}))}},{key:"sendPayment",value:function(e){var t=this,n=Qg().decode(e.paymentRequest).satoshis||0;return this.request("POST","/api/v1/payments",this.config.adminkey,{bolt11:e.paymentRequest,out:!0}).then((function(e){return t.checkPayment({paymentHash:e.payment_hash}).then((function(t){var r=t.data;return{data:{preimage:(null==r?void 0:r.preimage)||"",paymentHash:e.payment_hash,route:{total_amt:n,total_fees:0}}}}))}))}},{key:"keysend",value:function(e){return Gb((function(){return Xb(this,(function(e){throw new Error("not supported")}))}))()}},{key:"checkPayment",value:function(e){var t=this;return Gb((function(){var n;return Xb(this,(function(r){switch(r.label){case 0:return[4,t.request("GET","/api/v1/payments/".concat(e.paymentHash),t.config.adminkey)];case 1:return[2,{data:Zb({paid:(n=r.sent()).isPaid},n)}]}}))}))()}},{key:"signMessage",value:function(e){if(!this.config.url||!this.config.adminkey)return Promise.reject(new Error("Missing config"));if(!e.message)return Promise.reject(new Error("Invalid message"));var t;t=Ja()(e.message).toString(Za());var n=Ja()("lnbits://".concat(this.config.adminkey)).toString(Za());if(i_.getState().settings.legacyLnurlAuth&&(t=_.stringToUint8Array(e.message),n=Ja()("LBE-LNBITS-".concat(this.config.url,"-").concat(this.config.adminkey)).toString(Za())),!n)return Promise.reject(new Error("Could not create key"));var r=new Lb(n).sign(t).toDER("hex");return r?Promise.resolve({data:{message:e.message,signature:r}}):Promise.reject(new Error("Signing failed"))}},{key:"makeInvoice",value:function(e){return this.request("POST","/api/v1/payments",this.config.adminkey,{amount:e.amount,memo:e.memo,out:!1}).then((function(e){return{data:{paymentRequest:e.payment_request,rHash:e.payment_hash}}}))}},{key:"request",value:function(e,t,n,r){var i=this;return Gb((function(){var o,a,s,c,u;return Xb(this,(function(l){switch(l.label){case 0:return o=null,a="",(s=new Headers).append("Accept","application/json"),s.append("Content-Type","application/json"),s.append("X-Api-Key",n),"POST"===e?o=JSON.stringify(r):void 0!==r&&(a="?"),[4,fetch(i.config.url+t+a,{method:e,headers:s,body:o})];case 1:return(c=l.sent()).ok?[3,3]:[4,c.json()];case 2:throw u=l.sent(),console.error("errBody",u),new Error(u.detail);case 3:return[4,c.json()];case 4:return[2,l.sent()]}}))}))()}}],n&&$b(t.prototype,n),r&&$b(t,r),e}();const Qb=Jb;var em=a(34503),tm=a.n(em),nm=a(4433),rm=a.n(nm),im=a(47044),om=a.n(im);function am(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sm(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function cm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){sm(o,r,i,a,s,"next",e)}function s(e){sm(o,r,i,a,s,"throw",e)}a(void 0)}))}}function um(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fm(e,t,n){return t&&lm(e.prototype,t),n&&lm(e,n),e}function hm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dm(e){return function(e){if(Array.isArray(e))return am(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return am(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return am(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pm(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ym={addinvoice:"lnd.lightning.AddInvoice",addholdinvoice:"lnd.invoices.AddHoldInvoice",settleinvoice:"lnd.invoices.SettleInvoice",channelbalance:"lnd.lightning.ChannelBalance",connectpeer:"lnd.lightning.ConnectPeer",decodepayreq:"lnd.lightning.DecodePayReq",disconnectpeer:"lnd.lightning.DisconnectPeer",estimatefee:"lnd.lightning.EstimateFee",getchaninfo:"lnd.lightning.GetChanInfo",getinfo:"lnd.lightning.GetInfo",getnetworkinfo:"lnd.lightning.GetNetworkInfo",getnodeinfo:"lnd.lightning.GetNodeInfo",gettransactions:"lnd.lightning.GetTransactions",listchannels:"lnd.lightning.ListChannels",listinvoices:"lnd.lightning.ListInvoices",listpayments:"lnd.lightning.ListPayments",listpeers:"lnd.lightning.ListPeers",lookupinvoice:"lnd.lightning.LookupInvoice",openchannel:"lnd.lightning.OpenChannelSync",queryroutes:"lnd.lightning.QueryRoutes",routermc:"lnd.router.QueryMissionControl",sendtoroute:"lnd.lightning.SendToRouteSync",verifymessage:"lnd.lightning.VerifyMessage",walletbalance:"lnd.lightning.WalletBalance",newaddress:"lnd.lightning.NewAddress",nextaddr:"lnd.walletKit.nextAddr",listaddresses:"lnd.walletKit.ListAddresses",listunspent:"lnd.walletKit.ListUnspent"},gm=function(e){if(Array.isArray(e))return e.map(gm);if(e&&"object"==typeof e&&e.constructor===Object){for(var t={},n=Object.keys(e),r=n.length,i=0;i<r;i+=1)t[om()(n[i])]=gm(e[n[i]]);return t}return e},bm=function(){function e(t,n){um(this,e),hm(this,"account",void 0),hm(this,"config",void 0),this.account=t,this.config=n}return fm(e,[{key:"password",get:function(){return""}},{key:"localKey",get:function(){return this.config.localKey||""},set:function(e){this.config.localKey=e,this._save()}},{key:"remoteKey",get:function(){return this.config.remoteKey||""},set:function(e){this.config.remoteKey=e,this._save()}},{key:"pairingPhrase",get:function(){return this.config.pairingPhrase}},{key:"serverHost",get:function(){return this.config.serverHost||"mailbox.terminal.lightning.today:443"},set:function(e){this.config.serverHost=e,this._save()}},{key:"isPaired",get:function(){return!0}},{key:"clear",value:function(){var e=this;return cm((function(){return pm(this,(function(t){return e.config.localKey="",e.config.remoteKey="",e._save(),[2]}))}))()}},{key:"_save",value:function(){var e=this;return cm((function(){var t,n;return pm(this,(function(r){switch(r.label){case 0:return t=i_.getState().accounts,[4,i_.getState().password()];case 1:return n=r.sent(),t[e.account.id].config=F(e.config,n),i_.setState({accounts:t}),[4,i_.getState().saveToStorage()];case 2:return r.sent(),[2,!0]}}))}))()}}]),e}(),mm=function(){function e(t,n){um(this,e),hm(this,"account",void 0),hm(this,"config",void 0),hm(this,"lnc",void 0),this.account=t,this.config=n,this.lnc=new(tm())({credentialStore:new bm(t,n),namespace:this.account.id})}return fm(e,[{key:"init",value:function(){var e=this;return cm((function(){var t;return pm(this,(function(n){switch(n.label){case 0:console.info("init LNC"),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,e.lnc.connect()];case 2:return n.sent(),[3,5];case 3:return t=n.sent(),console.error("Init LNC failed",t),[4,e.unload()];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))()}},{key:"unload",value:function(){var e=this;return cm((function(){var t;return pm(this,(function(n){switch(n.label){case 0:if(!e.lnc)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),console.info("LNC disconnect"),[4,e.lnc.disconnect()];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),console.error("Unload LNC failed",t),[3,4];case 4:return[2]}}))}))()}},{key:"supportedMethods",get:function(){return["getInfo","keysend","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"].concat(dm(_g(Object.keys(ym))))}},{key:"requestMethod",value:function(e,t){var n=this;return cm((function(){var r;return pm(this,(function(i){if(!(r=ym[e]))throw new Error("".concat(e," is not supported"));return[2,r.split(".").reduce((function(e,t){return e[t]}),n.lnc)(t).then((function(e){return{data:gm(e)}}))]}))}))()}},{key:"getInfo",value:function(){var e=this;return cm((function(){var t;return pm(this,(function(n){switch(n.label){case 0:return e.checkConnection(),[4,e.lnc.lnd.lightning.getInfo()];case 1:return[2,{data:{alias:(t=n.sent()).alias,pubkey:t.identityPubkey,color:t.color}}]}}))}))()}},{key:"getBalance",value:function(){var e=this;return cm((function(){var t,n,r;return pm(this,(function(i){switch(i.label){case 0:return e.checkConnection(),[4,e.lnc.lnd.lightning.channelBalance()];case 1:return n=i.sent(),[2,{data:{balance:parseInt(null!==(r=null===(t=n.localBalance)||void 0===t?void 0:t.sat)&&void 0!==r?r:"")}}]}}))}))()}},{key:"getInvoices",value:function(){var e=this;return cm((function(){var t;return pm(this,(function(n){switch(n.label){case 0:return e.checkConnection(),[4,e.lnc.lnd.lightning.listInvoices({reversed:!0})];case 1:return t=n.sent(),[2,t.invoices.map((function(e,t){return{custom_records:undefined,id:"".concat(e.paymentRequest,"-").concat(t),memo:e.memo,preimage:e.rPreimage.toString(),settled:"SETTLED"===e.state,settleDate:1e3*parseInt(e.settleDate),totalAmount:parseInt(e.value),type:"received"}})).reverse()]}}))}))()}},{key:"getTransactions",value:function(){var e=this;return cm((function(){var t,n;return pm(this,(function(r){switch(r.label){case 0:return[4,e.getInvoices()];case 1:return t=r.sent(),[4,e.getPayments()];case 2:return n=r.sent(),[2,{data:{transactions:vg(t,n)}}]}}))}))()}},{key:"getPayments",value:function(){var e=this;return cm((function(){var t;return pm(this,(function(n){switch(n.label){case 0:return[4,e.lnc.lnd.lightning.listPayments({reversed:!0,maxPayments:"100",includeIncomplete:!1})];case 1:return t=n.sent(),[2,t.payments.map((function(e,t){var n="";return e.paymentRequest&&(n=eb(e.paymentRequest)),{id:"".concat(e.paymentRequest,"-").concat(t),memo:n,preimage:e.paymentPreimage,payment_hash:e.paymentHash,settled:!0,settleDate:parseInt(e.creationTimeNs)/1e6,totalAmount:parseInt(e.valueSat),type:"sent"}}))]}}))}))()}},{key:"connectPeer",value:function(){var e=this;return cm((function(){return pm(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the getInvoices call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"checkPayment",value:function(e){var t=this;return cm((function(){return pm(this,(function(n){switch(n.label){case 0:return t.checkConnection(),[4,t.lnc.lnd.lightning.lookupInvoice({rHash:e.paymentHash})];case 1:return[2,{data:{paid:"SETTLED"===n.sent().state}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return cm((function(){var n,r,i,o,a;return pm(this,(function(s){switch(s.label){case 0:return t.checkConnection(),[4,t.lnc.lnd.lightning.sendPaymentSync({paymentRequest:e.paymentRequest})];case 1:if((i=s.sent()).paymentError)throw new Error(i.paymentError);return[2,{data:{preimage:_.base64ToHex(i.paymentPreimage.toString()),paymentHash:_.base64ToHex(i.paymentHash.toString()),route:{total_amt:parseInt(null!==(o=null===(n=i.paymentRoute)||void 0===n?void 0:n.totalAmtMsat)&&void 0!==o?o:"0")/1e3,total_fees:parseInt(null!==(a=null===(r=i.paymentRoute)||void 0===r?void 0:r.totalFeesMsat)&&void 0!==a?a:"0")/1e3}}}]}}))}))()}},{key:"keysend",value:function(e){var t=this;return cm((function(){var n,r,i,o,a,s,c,u,l,f,h;return pm(this,(function(d){switch(d.label){case 0:for(var p in t.checkConnection(),i=e.pubkey,o=Za().parse(i).toString(Rg()),a=rm().random(32),s=a.toString(Rg()),c=Ja()(a).toString(Rg()),u={},e.customRecords)u[parseInt(p)]=md().parse(e.customRecords[p]).toString(Rg());return u[5482373484]=s,[4,t.lnc.lnd.lightning.sendPaymentSync({dest:o,amt:e.amount.toString(),paymentHash:c,destCustomRecords:u})];case 1:if((l=d.sent()).paymentError)throw new Error(l.paymentError);return[2,{data:{preimage:_.base64ToHex(l.paymentPreimage.toString()),paymentHash:_.base64ToHex(l.paymentHash.toString()),route:{total_amt:parseInt(null!==(f=null===(n=l.paymentRoute)||void 0===n?void 0:n.totalAmtMsat)&&void 0!==f?f:"0")/1e3,total_fees:parseInt(null!==(h=null===(r=l.paymentRoute)||void 0===r?void 0:r.totalFeesMsat)&&void 0!==h?h:"0")/1e3}}}]}}))}))()}},{key:"signMessage",value:function(e){var t=this;return cm((function(){var n;return pm(this,(function(r){switch(r.label){case 0:return t.checkConnection(),[4,t.lnc.lnd.lightning.signMessage({msg:Rg().stringify(md().parse(e.message))})];case 1:return n=r.sent(),[2,{data:{message:e.message,signature:n.signature}}]}}))}))()}},{key:"makeInvoice",value:function(e){var t=this;return cm((function(){var n;return pm(this,(function(r){switch(r.label){case 0:return t.checkConnection(),[4,t.lnc.lnd.lightning.addInvoice({memo:e.memo,value:e.amount.toString()})];case 1:return[2,{data:{paymentRequest:(n=r.sent()).paymentRequest,rHash:_.base64ToHex(n.rHash.toString())}}]}}))}))()}},{key:"checkConnection",value:function(){if(!this.lnc)throw new Error("Account failed to load");if(!this.lnc.isConnected)throw new Error("Account is still loading")}}]),e}();const wm=mm;function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _m(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Em(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_m(o,r,i,a,s,"next",e)}function s(e){_m(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function km(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Am(e){return function(e){if(Array.isArray(e))return vm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vm(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Om(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Pm={getinfo:{path:"/v1/getinfo",httpMethod:"GET"},listchannels:{path:"/v1/channels",httpMethod:"GET"},listinvoices:{path:"/v1/invoices",httpMethod:"GET"},channelbalance:{path:"/v1/balance/channels",httpMethod:"GET"},walletbalance:{path:"/v1/balance/blockchain",httpMethod:"GET"},openchannel:{path:"/v1/channels",httpMethod:"POST"},connectpeer:{path:"/v1/peers",httpMethod:"POST"},disconnectpeer:{path:"/v1/peers/{{pub_key}}",httpMethod:"DELETE"},estimatefee:{path:"/v1/transactions/fee",httpMethod:"GET"},getchaninfo:{path:"/v1/graph/edge/{{chan_id}}",httpMethod:"GET"},getnetworkinfo:{path:"/v1/graph/info",httpMethod:"GET"},getnodeinfo:{path:"/v1/graph/node/{{pub_key}}",httpMethod:"GET"},gettransactions:{path:"/v1/transactions",httpMethod:"GET"},listpayments:{path:"/v1/payments",httpMethod:"GET"},listpeers:{path:"/v1/peers",httpMethod:"GET"},lookupinvoice:{path:"/v1/invoice/{{r_hash_str}}",httpMethod:"GET"},queryroutes:{path:"/v1/graph/routes/{{pub_key}}/{{amt}}",httpMethod:"GET"},verifymessage:{path:"/v1/verifymessage",httpMethod:"POST"},sendtoroute:{path:"/v1/channels/transactions/route",httpMethod:"POST"},decodepayreq:{path:"/v1/payreq/{{pay_req}}",httpMethod:"GET"},routermc:{path:"/v2/router/mc",httpMethod:"GET"},addinvoice:{path:"/v1/invoices",httpMethod:"POST"},addholdinvoice:{path:"/v2/invoices/hodl",httpMethod:"POST"},settleinvoice:{path:"/v2/invoices/settle",httpMethod:"POST"},newaddress:{path:"/v1/newaddress",httpMethod:"GET"},nextaddr:{path:"/v2/wallet/address/next",httpMethod:"POST"},listaddresses:{path:"/v2/wallet/addresses",httpMethod:"GET"},listunspent:{path:"/v2/wallet/utxos",httpMethod:"POST"}},Im=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),km(this,"account",void 0),km(this,"config",void 0),km(this,"getBlockchainBalance",(function(){return r.request("GET","/v1/balance/blockchain",void 0,{unconfirmed_balance:"0",confirmed_balance:"0",total_balance:"0"})})),km(this,"getChannelsBalance",(function(){return r.request("GET","/v1/balance/channels",void 0,{balance:0}).then((function(e){return{data:{balance:+e.balance}}}))})),this.account=t,this.config=n}var t,n,r;return t=e,n=[{key:"init",value:function(){return Promise.resolve()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"supportedMethods",get:function(){return["getInfo","keysend","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"].concat(Am(_g(Object.keys(Pm))))}},{key:"requestMethod",value:function(e,t){var n=this;return Em((function(){var r,i,o;return Om(this,(function(a){switch(a.label){case 0:if(!(r=Pm[e]))throw new Error("".concat(e," is not supported"));return i=r.httpMethod,o=r.path,s=t,o=o.replace(/{{(.*?)}}/g,(function(e){var t=e.split(/{{|}}/).filter(Boolean)[0],n=s[t];if(void 0===n)throw new Error("Missing parameter ".concat(t));return delete s[t],String(n)})),[4,n.request(i,o,t)];case 1:return[2,{data:a.sent()}]}var s}))}))()}},{key:"getInfo",value:function(){return this.request("GET","/v1/getinfo",void 0,{}).then((function(e){return{data:{alias:e.alias,pubkey:e.identity_pubkey,color:e.color}}}))}},{key:"getBalance",value:function(){return this.getChannelsBalance()}},{key:"connectPeer",value:function(e){var t=e.pubkey,n=e.host;return this.request("POST","/v1/peers",{addr:{pubkey:t,host:n},perm:!0}).then((function(e){return{data:!0}})).catch((function(e){if(e.message.match(/already connected/))return{data:!0};throw new Error(e.message)}))}},{key:"sendPayment",value:function(e){return this.request("POST","/v1/channels/transactions",{payment_request:e.paymentRequest},{}).then((function(e){if(e.payment_error)throw new Error(e.payment_error);return{data:{preimage:_.base64ToHex(e.payment_preimage),paymentHash:_.base64ToHex(e.payment_hash),route:e.payment_route}}}))}},{key:"keysend",value:function(e){var t=this;return Em((function(){var n,r,i,o,a,s;return Om(this,(function(c){for(var u in n=e.pubkey,r=Za().parse(n).toString(Rg()),i=rm().random(32),o=i.toString(Rg()),a=Ja()(i).toString(Rg()),s={},e.customRecords)s[u]=md().parse(e.customRecords[u]).toString(Rg());return s[5482373484]=o,[2,t.request("POST","/v1/channels/transactions",{dest:r,amt:e.amount,payment_hash:a,dest_custom_records:s},{}).then((function(e){if(e.payment_error)throw new Error(e.payment_error);return{data:{preimage:_.base64ToHex(e.payment_preimage),paymentHash:_.base64ToHex(e.payment_hash),route:e.payment_route}}}))]}))}))()}},{key:"checkPayment",value:function(e){var t=this;return Em((function(){return Om(this,(function(n){switch(n.label){case 0:return[4,t.request("GET","/v1/invoice/".concat(e.paymentHash))];case 1:return[2,{data:{paid:n.sent().settled}}]}}))}))()}},{key:"signMessage",value:function(e){return this.request("POST","/v1/signmessage",{msg:Rg().stringify(md().parse(e.message))}).then((function(t){return{data:{message:e.message,signature:t.signature}}}))}},{key:"makeInvoice",value:function(e){return this.request("POST","/v1/invoices",{memo:e.memo,value:e.amount}).then((function(e){return{data:{paymentRequest:e.payment_request,rHash:_.base64ToHex(e.r_hash)}}}))}},{key:"getAddress",value:function(){return this.request("POST","/v2/wallet/address/next",void 0,{})}},{key:"getInvoices",value:function(){var e=this;return Em((function(){return Om(this,(function(t){switch(t.label){case 0:return[4,e.request("GET","/v1/invoices",{reversed:!0})];case 1:return[2,t.sent().invoices.map((function(e,t){var n=e.htlcs[0]&&e.htlcs[0].custom_records;return{id:"".concat(e.payment_request,"-").concat(t),memo:e.memo,preimage:_.base64ToHex(e.r_preimage),payment_hash:_.base64ToHex(e.r_hash),settled:e.settled,settleDate:1e3*parseInt(e.settle_date),totalAmount:parseInt(e.value),type:"received",custom_records:n}}))]}}))}))()}},{key:"getTransactions",value:function(){var e=this;return Em((function(){var t,n;return Om(this,(function(r){switch(r.label){case 0:return[4,e.getInvoices()];case 1:return t=r.sent(),[4,e.getPayments()];case 2:return n=r.sent(),[2,{data:{transactions:vg(t,n)}}]}}))}))()}},{key:"getPayments",value:function(){var e=this;return Em((function(){return Om(this,(function(t){switch(t.label){case 0:return[4,e.request("GET","/v1/payments",{reversed:!0,max_payments:100,include_incomplete:!1})];case 1:return[2,t.sent().payments.map((function(e,t){var n;return e.payment_request&&(n=eb(e.payment_request)),{id:"".concat(e.payment_request,"-").concat(t++),memo:n,preimage:e.payment_preimage,payment_hash:e.payment_hash,settled:!0,settleDate:1e3*parseInt(e.creation_date),totalAmount:e.value_sat,type:"sent"}}))]}}))}))()}},{key:"request",value:function(e,t,n,r){var i=this;return Em((function(){var o,a,s,c,u,l;return Om(this,(function(f){switch(f.label){case 0:return(o=new URL(i.config.url)).pathname="".concat(o.pathname.replace(/\/$/,"")).concat(t),a=null,(s=new Headers).append("Accept","application/json"),"POST"===e?(a=JSON.stringify(n),s.append("Content-Type","application/json")):void 0!==n&&(o.search=new URLSearchParams(n).toString()),i.config.macaroon&&s.append("Grpc-Metadata-macaroon",i.config.macaroon),[4,fetch(o.toString(),{method:e,headers:s,body:a})];case 1:if((c=f.sent()).ok)return[3,6];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,c.json()];case 3:if((u=f.sent()).message&&!u.error&&(u.error=u.message,delete u.message),!u.error)throw new Error("Something went wrong");return[3,5];case 4:throw f.sent(),new Error(c.statusText);case 5:throw console.error(u),new Error(u.error);case 6:return[4,c.json()];case 7:return l=f.sent(),r&&(l=Object.assign(Object.assign({},r),l)),[2,l]}}))}))()}}],n&&Sm(t.prototype,n),r&&Sm(t,r),e}();const Tm=Im;var xm=a(88010),Nm=a.n(xm),Rm=a(48764).Buffer;function Cm(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Bm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Cm(o,r,i,a,s,"next",e)}function s(e){Cm(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Um(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jm(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Dm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Um(e,t,n[t])}))}return e}function Mm(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Hm(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Fm={Accept:"application/json","Content-Type":"application/json","X-User-Agent":"alby-extension"},zm=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Um(this,"account",void 0),Um(this,"config",void 0),Um(this,"access_token",void 0),Um(this,"access_token_created",void 0),Um(this,"refresh_token",void 0),Um(this,"refresh_token_created",void 0),Um(this,"noRetry",void 0),this.account=t,this.config=n}var t,n,r;return t=e,n=[{key:"init",value:function(){var e=this;return Bm((function(){return Hm(this,(function(t){return[2,e.authorize()]}))}))()}},{key:"unload",value:function(){return Promise.resolve()}},{key:"supportedMethods",get:function(){return["getInfo","keysend","makeInvoice","sendPayment","sendPaymentAsync","signMessage","getBalance"]}},{key:"connectPeer",value:function(){var e=this;return Bm((function(){return Hm(this,(function(t){throw console.error("".concat(e.constructor.name," does not implement the getInvoices call")),new Error("Not yet supported with the currently used account.")}))}))()}},{key:"getInvoices",value:function(){var e=this;return Bm((function(){var t,n;return Hm(this,(function(r){switch(r.label){case 0:return[4,e.request("GET","/getuserinvoices",void 0)];case 1:return t=r.sent(),n=t.map((function(e,t){return{custom_records:e.custom_records,id:"".concat(e.payment_request,"-").concat(t),memo:e.description,preimage:"",payment_hash:e.payment_hash,settled:e.ispaid,settleDate:1e3*e.timestamp,totalAmount:e.amt,type:"received"}})).sort((function(e,t){return t.settleDate-e.settleDate})),[2,n]}}))}))()}},{key:"getTransactions",value:function(){var e=this;return Bm((function(){var t,n;return Hm(this,(function(r){switch(r.label){case 0:return[4,e.getInvoices()];case 1:return t=r.sent(),[4,e.getPayments()];case 2:return n=r.sent(),[2,{data:{transactions:vg(t,n)}}]}}))}))()}},{key:"getPayments",value:function(){var e=this;return Bm((function(){return Hm(this,(function(t){switch(t.label){case 0:return[4,e.request("GET","/gettxs",{limit:100})];case 1:return[2,t.sent().map((function(e,t){return{id:"".concat(t),memo:e.memo,preimage:e.payment_preimage,payment_hash:Rm.from(e.payment_hash.data).toString("hex"),settled:!0,settleDate:1e3*e.timestamp,totalAmount:e.value,type:"sent"}}))]}}))}))()}},{key:"getInfo",value:function(){var e=this;return Bm((function(){return Hm(this,(function(t){switch(t.label){case 0:return[4,e.request("GET","/getinfo",void 0)];case 1:return[2,{data:{alias:t.sent().alias}}]}}))}))()}},{key:"getBalance",value:function(){var e=this;return Bm((function(){return Hm(this,(function(t){switch(t.label){case 0:return[4,e.request("GET","/balance",void 0)];case 1:return[2,{data:{balance:t.sent().BTC.AvailableBalance}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return Bm((function(){var n,r,i;return Hm(this,(function(o){switch(o.label){case 0:return[4,t.request("POST","/payinvoice",{invoice:e.paymentRequest})];case 1:if((n=o.sent()).error)throw new Error(n.message);if(n.payment_error)throw new Error(n.payment_error);return"object"==typeof n.payment_hash&&"Buffer"===n.payment_hash.type&&(n.payment_hash=Rm.from(n.payment_hash.data).toString("hex")),"object"==typeof n.payment_preimage&&"Buffer"===n.payment_preimage.type&&(n.payment_preimage=Rm.from(n.payment_preimage.data).toString("hex")),n.payment_route||(r=Qg().decode(e.paymentRequest),i=r.satoshis||0,n.payment_route={total_amt:i,total_fees:0}),[2,{data:{preimage:n.payment_preimage,paymentHash:n.payment_hash,route:n.payment_route}}]}}))}))()}},{key:"keysend",value:function(e){var t=this;return Bm((function(){var n;return Hm(this,(function(r){switch(r.label){case 0:return[4,t.request("POST","/keysend",{destination:e.pubkey,amount:e.amount,customRecords:e.customRecords})];case 1:if((n=r.sent()).error)throw new Error(n.message);if(n.payment_error)throw new Error(n.payment_error);return"object"==typeof n.payment_hash&&"Buffer"===n.payment_hash.type&&(n.payment_hash=Rm.from(n.payment_hash.data).toString("hex")),"object"==typeof n.payment_preimage&&"Buffer"===n.payment_preimage.type&&(n.payment_preimage=Rm.from(n.payment_preimage.data).toString("hex")),[2,{data:{preimage:n.payment_preimage,paymentHash:n.payment_hash,route:n.payment_route}}]}}))}))()}},{key:"checkPayment",value:function(e){var t=this;return Bm((function(){return Hm(this,(function(n){switch(n.label){case 0:return[4,t.request("GET","/checkpayment/".concat(e.paymentHash),void 0)];case 1:return[2,{data:{paid:n.sent().paid}}]}}))}))()}},{key:"signMessage",value:function(e){if(!this.config.url||!this.config.login||!this.config.password)return Promise.reject(new Error("Missing config"));if(!e.message)return Promise.reject(new Error("Invalid message"));var t;t=Ja()(e.message).toString(Za());var n=Ja()("lndhub://".concat(this.config.login,":").concat(this.config.password)).toString(Za());if(i_.getState().settings.legacyLnurlAuth&&(t=_.stringToUint8Array(e.message),n=Ja()("LBE-LNDHUB-".concat(this.config.url,"-").concat(this.config.login,"-").concat(this.config.password)).toString(Za())),!n)return Promise.reject(new Error("Could not create key"));var r=new Lb(n).sign(t).toDER("hex");return r?Promise.resolve({data:{message:e.message,signature:r}}):Promise.reject(new Error("Signing failed"))}},{key:"makeInvoice",value:function(e){var t=this;return Bm((function(){var n;return Hm(this,(function(r){switch(r.label){case 0:return[4,t.request("POST","/addinvoice",{amt:e.amount,memo:e.memo})];case 1:return"object"==typeof(n=r.sent()).r_hash&&"Buffer"===n.r_hash.type&&(n.r_hash=Rm.from(n.r_hash.data).toString("hex")),[2,{data:{paymentRequest:n.payment_request,rHash:n.r_hash}}]}}))}))()}},{key:"authorize",value:function(){var e=this;return Bm((function(){var t,n,r,i,o,a,s,c,u;return Hm(this,(function(l){switch(l.label){case 0:t="".concat(e.config.url,"/auth?type=auth"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Fg().post(t,{login:e.config.login,password:e.config.password},{headers:Mm(Dm({},Fm),{"X-TS":Math.floor(Date.now()/1e3),"X-VERIFY":e.generateHmacVerification(t)}),adapter:Yg})];case 2:if(n=l.sent(),(r=n.data).error||r.errors)throw s=r.error||r.errors,c=(null==s||null===(o=s.errors)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.message)||(null==s||null===(a=s[0])||void 0===a?void 0:a.message),new Error(c);return e.refresh_token=r.refresh_token,e.access_token=r.access_token,e.refresh_token_created=+new Date,e.access_token_created=+new Date,[2,r];case 3:throw u=l.sent(),new Error("API error (".concat(e.config.url,")").concat(jm(u,Error)?": ".concat(u.message):""));case 4:return[2]}}))}))()}},{key:"generateHmacVerification",value:function(e){var t=Nm()(e,"alby-extension").toString(Rg());return encodeURIComponent(t)}},{key:"request",value:function(e,t,n){var r=this;return Bm((function(){var i,o,a,s,c,u,l,f,h,d;return Hm(this,(function(p){switch(p.label){case 0:return r.access_token?[3,2]:[4,r.authorize()];case 1:p.sent(),p.label=2;case 2:i="".concat(r.config.url).concat(t),o={method:e,url:i,responseType:"json",headers:Mm(Dm({},Fm),{Authorization:"Bearer ".concat(r.access_token),"X-TS":Math.floor(Date.now()/1e3),"X-VERIFY":r.generateHmacVerification(i)}),adapter:Yg},"POST"===e?o.data=n:void 0!==n&&(o.params=n),p.label=3;case 3:return p.trys.push([3,5,,12]),[4,Fg()(o)];case 4:return s=p.sent(),a=s.data,[3,12];case 5:if(c=p.sent(),console.error(c),!Fg().isAxiosError(c))return[3,11];if(404===(null==(u=c.response)?void 0:u.status))throw l=t.replace("/",""),new Error("".concat(l," not supported by the connected account."));if(401!==(null==u?void 0:u.status))return[3,10];p.label=6;case 6:return p.trys.push([6,8,,9]),[4,r.authorize()];case 7:return p.sent(),[3,9];case 8:if(f=p.sent(),console.error(f),jm(f,Error))throw new Error(f.message);return[3,9];case 9:return[2,r.request(e,t,n)];case 10:throw h="".concat(null==u?void 0:u.data.message,"\n(").concat(c.message,")"),new Error(h);case 11:return[3,12];case 12:if(!(null==a?void 0:a.error))return[3,18];if(1*a.code!=1||r.noRetry)return[3,17];p.label=13;case 13:return p.trys.push([13,15,,16]),[4,r.authorize()];case 14:return p.sent(),[3,16];case 15:if(d=p.sent(),console.error(d),jm(d,Error))throw new Error(d.message);return[3,16];case 16:return r.noRetry=!0,[2,r.request(e,t,n)];case 17:throw new Error(a.message);case 18:return[2,a]}}))}))()}}],n&&Lm(t.prototype,n),r&&Lm(t,r),e}();function Km(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qm(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wm(e)}function Gm(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?Km(e):t;var n}function $m(e,t){return $m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$m(e,t)}function Ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wm(e);if(t){var i=Wm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gm(this,n)}}function Zm(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Xm(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$m(e,t)}(a,e);var t,n,r,i=Ym(a);function a(){var e,t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.apply(this,arguments),t=Km(e),r=void 0,(n="_port")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=a,n=[{key:"port",get:function(){return this._port||this.connectNativeCompanion(),this._port}},{key:"connectNativeCompanion",value:function(){var e=this;this._port=o().runtime.connectNative("alby"),this._port.onMessage.addListener((function(t){"status"===t.id&&502===t.status&&t.header["X-Alby-Internal"]&&(console.error("Error in the native companion. Shutting it down"),console.error(t),e.unload())})),this._port.onDisconnect.addListener((function(t){console.error("Native companion disconnected"),t.error&&console.error("Native companion error: ".concat(t.error.message)),e._port=null}))}},{key:"init",value:function(){var e=this;return function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){qm(o,r,i,a,s,"next",e)}function s(e){qm(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){return Zm(this,(function(t){return e._port||e.connectNativeCompanion(),[2]}))}))()}},{key:"unload",value:function(){var e=this;return new Promise((function(t,n){e._port?(e._port.disconnect(),e._port=null,setTimeout(t,5e3)):t()}))}}],n&&Vm(t.prototype,n),r&&Vm(t,r),a}(e)}function Jm(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Qm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ew(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tw(e){return tw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tw(e)}function nw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function rw(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function iw(e,t){return iw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},iw(e,t)}function ow(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tw(e);if(t){var i=tw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rw(this,n)}}function aw(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var sw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iw(e,t)}(o,e);var t,n,r,i=ow(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,n=[{key:"_nativeRequest",value:function(e){var t=this;return new Promise((function(n,r){var i=function(o){o.id===e.id&&(t.port.onMessage.removeListener(i),o.status>299?r(new Error(o.body)):n(o))};t.port.onMessage.addListener(i),t.port.postMessage(e)}))}},{key:"request",value:function(e,t,n){var r=this;return function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Jm(o,r,i,a,s,"next",e)}function s(e){Jm(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){var i,o,a,s,c;return aw(this,(function(u){switch(u.label){case 0:return o={},t=r.config.url+(r.config.url.endsWith("/")?"":"/")+t,"GET"!==e&&(o={"Content-type":"application/json"}),r.jwt&&(o=nw(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ew(e,t,n[t])}))}return e}({},o),{Authorization:"JWT ".concat(r.jwt)})),"POST"===e&&(i=JSON.stringify(n)),[4,r._nativeRequest({headers:o,url:t,method:e||"GET",id:t+Math.floor(1e3*Math.random()+1).toString(),body:i})];case 1:if(200!==(a=u.sent()).status)throw new Error(a.body);s=a.body;try{c=JSON.parse(s)}catch(e){throw new Error("Received invalid data: ".concat(s))}if("string"==typeof c)throw new Error(c);return[2,c]}}))}))()}}],n&&Qm(t.prototype,n),r&&Qm(t,r),o}(Xm(gd));function cw(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lw(e){return lw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lw(e)}function fw(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function hw(e,t){return hw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hw(e,t)}function dw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lw(e);if(t){var i=lw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fw(this,n)}}function pw(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var yw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hw(e,t)}(o,e);var t,n,r,i=dw(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,n=[{key:"_nativeRequest",value:function(e){var t=this;return new Promise((function(n,r){var i=function(o){o.id===e.id&&(t.port.onMessage.removeListener(i),o.status>299?r(new Error(o.body)):n(o))};t.port.onMessage.addListener(i),t.port.postMessage(e)}))}},{key:"request",value:function(e,t,n,r){var i=this;return function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){cw(o,r,i,a,s,"next",e)}function s(e){cw(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){var o,a,s,c,u,l,f;return pw(this,(function(h){switch(h.label){case 0:a={Accept:"application/json","Content-Type":"application/json","X-Api-Key":n},"POST"===e&&(o=JSON.stringify(r)),(s=new URL(i.config.url)).pathname=t,c={id:t,method:e,url:s.toString(),headers:a,body:o},h.label=1;case 1:return h.trys.push([1,3,,4]),[4,i._nativeRequest(c)];case 2:return l=h.sent(),u=JSON.parse(l.body),[3,4];case 3:if(f=h.sent(),console.error(f),d=f,null!=(p=Error)&&"undefined"!=typeof Symbol&&p[Symbol.hasInstance]?p[Symbol.hasInstance](d):d instanceof p)throw new Error(f.message);return[3,4];case 4:return[2,u]}var d,p}))}))()}}],n&&uw(t.prototype,n),r&&uw(t,r),o}(Xm(Qb));function gw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bw(e){return bw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bw(e)}function mw(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function ww(e,t){return ww=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ww(e,t)}function vw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bw(e);if(t){var i=bw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mw(this,n)}}var _w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ww(e,t)}(o,e);var t,n,r,i=vw(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,n=[{key:"request",value:function(e,t,n){var r=this,i=new URL(this.config.url);i.pathname=t;var o="",a={Accept:"application/json"};return"POST"===e?(o=JSON.stringify(n),a["Content-Type"]="application/json"):void 0!==n&&(i.search=new URLSearchParams(n).toString()),this.config.macaroon&&(a["Grpc-Metadata-macaroon"]=this.config.macaroon),new Promise((function(n,s){var c=function(e){if(e.id===t)if(r.port.onMessage.removeListener(c),e.status>299)s(new Error(e.body));else{var i=JSON.parse(e.body);n(i)}};r.port.onMessage.addListener(c),r.port.postMessage({id:t,method:e,url:i.toString(),body:o,headers:a})}))}}],n&&gw(t.prototype,n),r&&gw(t,r),o}(Xm(Tm));function Ew(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Sw(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ew(o,r,i,a,s,"next",e)}function s(e){Ew(o,r,i,a,s,"throw",e)}a(void 0)}))}}function kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aw(e){return Aw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Aw(e)}function Ow(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Pw(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function Iw(e,t){return Iw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Iw(e,t)}function Tw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Aw(e);if(t){var i=Aw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pw(this,n)}}function xw(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Nw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iw(e,t)}(o,e);var t,n,r,i=Tw(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,n=[{key:"_nativeRequest",value:function(e){var t=this;return new Promise((function(n,r){var i=function(o){o.id===e.id&&(t.port.onMessage.removeListener(i),o.status>299?r(new Error(o.body)):n(o))};t.port.onMessage.addListener(i),t.port.postMessage(e)}))}},{key:"authorize",value:function(){var e=this;return Sw((function(){var t,n,r,i;return xw(this,(function(o){return t={Accept:"application/json","Content-Type":"application/json"},(n=new URL(e.config.url)).pathname="/auth",r={type:"auth"},i=JSON.stringify({login:e.config.login,password:e.config.password}),[2,e._nativeRequest({id:"auth",method:"POST",url:n.toString(),body:i,params:r,headers:t}).then((function(t){var n=JSON.parse(t.body);if(n&&n.error)throw new Error("API error: "+n.message+" (code "+n.code+")");if(!n.access_token||!n.refresh_token)throw new Error("API unexpected response: "+JSON.stringify(n));return e.refresh_token=n.refresh_token,e.access_token=n.access_token,e.refresh_token_created=+new Date,e.access_token_created=+new Date,n}))]}))}))()}},{key:"request",value:function(e,t,n){var r=this;return Sw((function(){var i,o,a,s,c,u,l,f,h;return xw(this,(function(d){switch(d.label){case 0:return r.access_token?[3,2]:[4,r.authorize()];case 1:d.sent(),d.label=2;case 2:i={Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r.access_token)},(o=new URL(r.config.url)).pathname=t,"POST"===e?a=JSON.stringify(n):s=n,c={id:t,method:e,url:o.toString(),headers:i,body:a,params:s},d.label=3;case 3:return d.trys.push([3,5,,6]),[4,r._nativeRequest(c)];case 4:return l=d.sent(),u=JSON.parse(l.body),[3,6];case 5:if(f=d.sent(),console.error(f),Ow(f,Error))throw new Error(f.message);return[3,6];case 6:if(!u||!u.error)return[3,12];if(1*u.code!=1||r.noRetry)return[3,11];d.label=7;case 7:return d.trys.push([7,9,,10]),[4,r.authorize()];case 8:return d.sent(),[3,10];case 9:if(h=d.sent(),console.error(h),Ow(h,Error))throw new Error(h.message);return[3,10];case 10:return r.noRetry=!0,[2,r.request(e,t,n)];case 11:throw new Error(u.message);case 12:return[2,u]}}))}))()}}],n&&kw(t.prototype,n),r&&kw(t,r),o}(Xm(zm));function Rw(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Cw(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Rw(o,r,i,a,s,"next",e)}function s(e){Rw(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Bw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uw(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var jw=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lw(this,"config",void 0),Lw(this,"nwc",void 0),this.config=n,this.nwc=new ed.NostrWebLNProvider({nostrWalletConnectUrl:this.config.nostrWalletConnectUrl})}var t,n,r;return t=e,(n=[{key:"supportedMethods",get:function(){return["getInfo","makeInvoice","sendPayment","sendPaymentAsync","getBalance","keysend","getTransactions"]}},{key:"init",value:function(){var e=this;return Cw((function(){return Uw(this,(function(t){return[2,e.nwc.enable()]}))}))()}},{key:"unload",value:function(){var e=this;return Cw((function(){return Uw(this,(function(t){return e.nwc.close(),[2]}))}))()}},{key:"getInfo",value:function(){var e=this;return Cw((function(){return Uw(this,(function(t){switch(t.label){case 0:return[4,e.nwc.getInfo()];case 1:return[2,{data:t.sent().node}]}}))}))()}},{key:"getBalance",value:function(){var e=this;return Cw((function(){return Uw(this,(function(t){switch(t.label){case 0:return[4,e.nwc.getBalance()];case 1:return[2,{data:{balance:t.sent().balance,currency:"BTC"}}]}}))}))()}},{key:"getTransactions",value:function(){var e=this;return Cw((function(){return Uw(this,(function(t){switch(t.label){case 0:return[4,e.nwc.listTransactions({unpaid:!1,limit:50})];case 1:return[2,{data:{transactions:t.sent().transactions.map((function(e,t){return{id:"".concat(t),memo:e.description,preimage:e.preimage,payment_hash:e.payment_hash,settled:!0,settleDate:1e3*e.settled_at,totalAmount:e.amount,type:"incoming"==e.type?"received":"sent"}}))}}]}}))}))()}},{key:"makeInvoice",value:function(e){var t=this;return Cw((function(){var n,r,i,o;return Uw(this,(function(a){switch(a.label){case 0:return[4,t.nwc.makeInvoice({amount:e.amount,defaultMemo:e.memo})];case 1:if(r=a.sent(),i=Qg().decode(r.paymentRequest),!(o=null===(n=i.tags.find((function(e){return"payment_hash"===e.tagName})))||void 0===n?void 0:n.data))throw new Error("Could not find payment hash in invoice");return[2,{data:{paymentRequest:r.paymentRequest,rHash:o}}]}}))}))()}},{key:"sendPayment",value:function(e){var t=this;return Cw((function(){var n,r,i;return Uw(this,(function(o){switch(o.label){case 0:if(r=Qg().decode(e.paymentRequest),!(i=null===(n=r.tags.find((function(e){return"payment_hash"===e.tagName})))||void 0===n?void 0:n.data))throw new Error("Could not find payment hash in invoice");return[4,t.nwc.sendPayment(e.paymentRequest)];case 1:return[2,{data:{preimage:o.sent().preimage,paymentHash:i,route:{total_amt:parseInt(r.millisatoshis||"0")/1e3,total_fees:0}}}]}}))}))()}},{key:"keysend",value:function(e){var t=this;return Cw((function(){var n,r;return Uw(this,(function(i){switch(i.label){case 0:return[4,t.nwc.keysend({destination:e.pubkey,amount:e.amount,customRecords:e.customRecords})];case 1:return n=i.sent(),r=Ja()(n.preimage).toString(Za()),[2,{data:{preimage:n.preimage,paymentHash:r,route:{total_amt:e.amount,total_fees:0}}}]}}))}))()}},{key:"checkPayment",value:function(e){var t=this;return Cw((function(){var n,r;return Uw(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.nwc.lookupInvoice({paymentHash:e.paymentHash})];case 1:return[2,{data:{paid:(n=i.sent()).paid,preimage:n.preimage}}];case 2:return r=i.sent(),console.error(r),[2,{data:{paid:!1}}];case 3:return[2]}}))}))()}},{key:"signMessage",value:function(e){throw new Error("Method not implemented.")}},{key:"connectPeer",value:function(e){throw new Error("Method not implemented.")}}])&&Bw(t.prototype,n),r&&Bw(t,r),e}();const Dw={lnd:Tm,nativelnd:_w,lndhub:zm,nativelndhub:Nw,kollider:Vb,lnbits:Qb,lnc:wm,nativelnbits:yw,galoy:Pb,eclair:Mg,citadel:gd,nativecitadel:sw,commando:xg,alby:cd,nwc:jw};var Mw=a(84434),Hw=a(432);function Fw(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function zw(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Fw(o,r,i,a,s,"next",e)}function s(e){Fw(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qw(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Vw=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(r="httpClient")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.httpClient=Fg().create({baseURL:t,adapter:Yg})}var t,n,r;return t=e,r=[{key:"fromNetwork",value:function(t){switch(t){case"liquid":return new e("https://blockstream.info/liquid/api");case"testnet":return new e("https://blockstream.info/liquidtestnet/api");default:throw new Error("Unsupported network: ".concat(t))}}}],(n=[{key:"getAsset",value:function(e){var t=this;return zw((function(){var n;return qw(this,(function(r){switch(r.label){case 0:return Ww.includes(e)?[2,Gw(e)]:[4,t.httpClient.get("/asset/".concat(e))];case 1:if(n=r.sent(),!("object"==typeof(o=n.data)&&null!==o&&"asset_id"in o&&"string"==typeof o.asset_id&&"ticker"in o&&"string"==typeof o.ticker&&"name"in o&&"string"==typeof o.name&&"precision"in o&&"number"==typeof o.precision))throw new Error("Invalid response");return[2,(i=n.data,{assetHash:i.asset_id,ticker:i.ticker,name:i.name,precision:i.precision})]}var i,o}))}))()}}])&&Kw(t.prototype,n),r&&Kw(t,r),e}();var Ww=[Mw.networks.liquid.assetHash,Mw.networks.testnet.assetHash,Mw.networks.regtest.assetHash],Gw=function(e){return{assetHash:e,ticker:"LBTC",name:"Liquid Bitcoin",precision:8}};function $w(){return $w=zw((function(e,t,n){var r,i,o,a,s,c,u,l,f,h,d,p,y,g,b,m,w,v,_,E,S;return qw(this,(function(k){switch(k.label){case 0:r=new Set,i=!0,o=!1,a=void 0;try{for(s=t.inputs[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)u=c.value,r.add(u.asset)}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}l=!0,f=!1,h=void 0;try{for(d=t.outputs[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)y=p.value,r.add(y.asset)}catch(e){f=!0,h=e}finally{try{l||null==d.return||d.return()}finally{if(f)throw h}}return g={},[4,Promise.allSettled(Array.from(r).map((function(t){return e.getAsset(t)})))];case 1:b=k.sent(),m=!0,w=!1,v=void 0;try{for(_=b[Symbol.iterator]();!(m=(E=_.next()).done);m=!0)"fulfilled"!==(S=E.value).status?"rejected"===S.status&&n(S.reason):g[S.value.assetHash]=S.value}catch(e){w=!0,v=e}finally{try{m||null==_.return||_.return()}finally{if(w)throw v}}return[2,g]}}))})),$w.apply(this,arguments)}function Yw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xw(e,t){var n=e.inputs[t];return n.explicitValue?n.explicitValue:n.witnessUtxo&&!Mw.ElementsValue.fromBytes(n.witnessUtxo.value).isConfidential?Mw.ElementsValue.fromBytes(n.witnessUtxo.value).number:void 0}function Jw(e,t){var n=e.inputs[t];return n.explicitAsset?Mw.AssetHash.fromBytes(n.explicitAsset).hex:!n.witnessUtxo||n.witnessUtxo.rangeProof||n.witnessUtxo.surjectionProof?void 0:Mw.AssetHash.fromBytes(n.witnessUtxo.asset).hex}var Qw=a(48764).Buffer;var ev=Xi.CURVE.n;function tv(e,t,n){if(t.length!==n)throw new Error("(".concat(e,") Expected ").concat(n," bytes, got ").concat(t.length))}function nv(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+(void 0===e?"undefined":(t=e)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t));var t;return BigInt("0x".concat(e))}var rv=function(e){return nv(Qw.from(e).toString("hex"))},iv=function(e){return e.toString(16).padStart(64,"0")};function ov(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Xi.ProjectivePoint.fromPrivateKey(e).toRawBytes(t)}function av(e,t){var n=Xi.ProjectivePoint.fromPrivateKey(e),r=Xi.ProjectivePoint.fromHex(t);return n.subtract(r).toRawBytes(!0)}function sv(e,t,n){return go.sign(e,t,n)}function cv(e,t,n){return go.verify(n,e,t)}function uv(e){try{return Xi.ProjectivePoint.fromHex(e),!0}catch(e){return!1}}function lv(e,t){return Xi.ProjectivePoint.fromHex(e).toRawBytes(t)}function fv(e){try{return Xi.ProjectivePoint.fromPrivateKey(e),!0}catch(e){return!1}}function hv(e,t){e=Qw.concat([Qw.from([2]),e]);var n=Xi.ProjectivePoint.fromHex(e),r=Xi.ProjectivePoint.fromPrivateKey(t),i=null;try{i=n.add(r)}catch(e){return null}return{parity:i.hasEvenY()?0:1,xOnlyPubkey:i.toRawBytes(!0).slice(1)}}function dv(e,t){tv("privateKey",e,32),tv("tweak",t,32);var n=rv(t);if(n===BigInt(0))throw new Error("Tweak must not be zero");if(n>=ev)throw new Error("Tweak bigger than curve order");if((n+=rv(e))>=ev&&(n-=ev),n===BigInt(0))throw new Error("The tweak was out of range or the resulted private key is invalid");return Qw.from(iv(n),"hex")}function pv(e){tv("privateKey",e,32);var t=_i(-rv(e),ev);return Qw.from(iv(t),"hex")}function yv(e,t,n){throw new Error("sign not implemented")}function gv(e,t,n,r){throw new Error("verify not implemented")}var bv=a(48764).Buffer;function mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ev(e,t){var n=e,r=bv.from(tn(n,!0));3===r[0]&&(n=bv.from(pv(e)));var i=dv(n,function(e,t){return Mw.crypto.taggedHash("TapTweak/elements",bv.concat(t?[e,t]:[e]))}(r.subarray(1),t));if(!i)throw new Error("Invalid tweaked private key");return bv.from(i)}var Sv=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vv(this,"slip77",void 0),vv(this,"network",void 0),vv(this,"mnemonic",void 0),vv(this,"networkType",void 0),vv(this,"privateKey",void 0),this.mnemonic=t,this.privateKey=this.deriveLiquidPrivateKeyHex(r),this.networkType=r,this.network=Mw.networks[r],!this.network)throw new Error('Invalid network: "'.concat(r,'"'));var i=this.deriveLiquidMasterBlindingKey();this.slip77=(0,Hw.e)(n).fromMasterBlindingKey(i)}var t,r,i;return t=e,r=[{key:"getPublicKey",value:function(){var e=tn(bv.from(this.privateKey,"hex"),!0);return bv.from(e).toString("hex")}},{key:"getPsetPreview",value:function(e){return function(e,t){var n=t?Mw.networks[t]:void 0,r=Mw.Pset.fromBase64(e),i={inputs:[],outputs:[]},o=!0,a=!1,s=void 0;try{for(var c,u=r.inputs.entries()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=Zw(c.value,2),f=l[0],h=l[1].witnessUtxo;if(!h)throw new Error("No witnessUtxo in input #".concat(f));var d=void 0;try{d=Mw.address.fromOutputScript(h.script,n)}catch(e){d=Mw.script.toASM(h.script)}var p=Jw(r,f);if(p){var y=Xw(r,f);y&&i.inputs.push({address:d,asset:p,amount:y})}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var g=!0,b=!1,m=void 0;try{for(var w,v=r.outputs.entries()[Symbol.iterator]();!(g=(w=v.next()).done);g=!0){var _=Zw(w.value,2),E=_[0],S=_[1];if(S.script&&0!==S.script.length){var k=void 0;try{k=Mw.address.fromOutputScript(S.script,n)}catch(e){k=Mw.script.toASM(S.script)}var A=S.asset;if(!A)throw new Error("No asset in output #".concat(E));var O=S.value;if(!O)throw new Error("No value in output #".concat(E));i.outputs.push({address:k,asset:Mw.AssetHash.fromBytes(A).hex,amount:O})}}}catch(e){b=!0,m=e}finally{try{g||null==v.return||v.return()}finally{if(b)throw m}}return i}(e,this.networkType)}},{key:"fetchAssetRegistry",value:function(e){return function(e,t,n){return $w.apply(this,arguments)}(Vw.fromNetwork(this.networkType),e,console.error)}},{key:"getAddress",value:function(){var e=Mw.bip341.BIP341Factory(n).taprootOutputScript(bv.from(this.getPublicKey(),"hex")),t=Mw.address.fromOutputScript(e,this.network),r=this.slip77.derive(e);if(!r.publicKey||!r.privateKey)throw new Error("Invalid blinding keys");return{address:Mw.address.toConfidential(t,r.publicKey),blindingPrivateKey:r.privateKey.toString("hex")}}},{key:"signSchnorr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=bv.from(this.privateKey,"hex");t&&(n=Ev(n));var r=sv(bv.from(e,"hex"),n,bv.alloc(32));return bv.from(r).toString("hex")}},{key:"signPset",value:function(e){var t=bv.from(bv.from(this.getPublicKey(),"hex")).subarray(1),r=new Mw.Signer(e),i=!0,o=!1,a=void 0;try{for(var s,c=e.inputs.entries()[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=_v(s.value,2),l=u[0],f=u[1];if(f.tapInternalKey&&f.tapInternalKey.equals(t)){var h=f.sighashType||Mw.Transaction.SIGHASH_DEFAULT,d=e.getInputPreimage(l,h,this.network.genesisBlockHash),p=this.signSchnorr(bv.from(d).toString("hex"),!0),y={tapKeySig:Av(bv.from(p,"hex"),h),genesisBlockHash:this.network.genesisBlockHash};r.addSignature(l,y,Mw.Pset.SchnorrSigValidator(n))}else if(f.tapLeafScript&&f.tapLeafScript.length>0){var g=!0,b=!1,m=void 0;try{for(var w,v=f.tapLeafScript[Symbol.iterator]();!(g=(w=v.next()).done);g=!0){var _=w.value,E=_.script.toString("hex");if(E.includes(t.subarray(1).toString("hex"))){var S=Mw.bip341.tapLeafHash({scriptHex:E,version:_.leafVersion}),k=f.sighashType||Mw.Transaction.SIGHASH_DEFAULT,A=e.getInputPreimage(l,k,this.network.genesisBlockHash,S),O=this.signSchnorr(A.toString("hex")),P={tapScriptSigs:[{leafHash:S,pubkey:t,signature:Av(bv.from(O,"hex"),k)}],genesisBlockHash:this.network.genesisBlockHash};r.addSignature(l,P,Mw.Pset.SchnorrSigValidator(n))}}}catch(e){b=!0,m=e}finally{try{g||null==v.return||v.return()}finally{if(b)throw m}}}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.pset}},{key:"deriveLiquidPrivateKeyHex",value:function(e){var t="liquid"===e?"m/84'/1776'/0'/0/0":"m/84'/1'/0'/0/0";return yn.bytesToHex(this.mnemonic.deriveKey(t).privateKey)}},{key:"deriveLiquidMasterBlindingKey",value:function(){return(0,Hw.e)(n).fromSeed(bv.from($a(this.mnemonic.mnemonic))).masterKey.toString("hex")}}],r&&wv(t.prototype,r),i&&wv(t,i),e}();const kv=Sv;var Av=function(e,t){return bv.concat([e,0!==t?bv.of(t):bv.alloc(0)])};function Ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Iv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pv(this,"maxSize",void 0),Pv(this,"map",void 0),Pv(this,"keys",void 0),this.maxSize=t,this.map=new Map,this.keys=[]}var t,n,r;return t=e,n=[{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){var t=this.map.get(e);return void 0!==t&&(this.keys.push(e),this.keys.length>2*this.maxSize&&this.keys.splice(-this.maxSize)),t}},{key:"set",value:function(e,t){this.map.set(e,t),this.keys.push(e),this.map.size>this.maxSize&&this.map.delete(this.keys.shift())}}],n&&Ov(t.prototype,n),r&&Ov(t,r),e}(),Tv=new TextDecoder,xv={minPlaintextSize:1,maxPlaintextSize:65535,utf8Encode:bs,utf8Decode:function(e){return Tv.decode(e)},getConversationKey:function(e,t){var n=Xi.getSharedSecret(e,"02"+t).subarray(1,33);return Hl(Rs,n,"nip44-v2")},getMessageKeys:function(e,t){var n=Kl(Rs,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}},calcPaddedLen:function(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;var t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},writeU16BE:function(e){if(!Number.isSafeInteger(e)||e<xv.minPlaintextSize||e>xv.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");var t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t},pad:function(e){var t=xv.utf8Encode(e),n=t.length;return ws(xv.writeU16BE(n),t,new Uint8Array(xv.calcPaddedLen(n)-n))},unpad:function(e){var t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<xv.minPlaintextSize||t>xv.maxPlaintextSize||n.length!==t||e.length!==2+xv.calcPaddedLen(t))throw new Error("invalid padding");return xv.utf8Decode(n)},hmacAad:function(e,t,n){if(32!==n.length)throw new Error("AAD associated data must be 32 bytes");var r=ws(n,t);return kc(Rs,e,r)},decodePayload:function(e){if("string"!=typeof e)throw new Error("payload must be a valid string");var t,n=e.length;if(n<132||n>87472)throw new Error("invalid payload length: "+n);if("#"===e[0])throw new Error("unknown encryption version");try{t=du.decode(e)}catch(e){throw new Error("invalid base64: "+e.message)}var r=t.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);var i=t[0];if(2!==i)throw new Error("unknown encryption version "+i);return{nonce:t.subarray(1,33),ciphertext:t.subarray(33,-32),mac:t.subarray(-32)}}};var Nv={utils:xv,encrypt:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ss(32),r=xv.getMessageKeys(t,n),i=r.chacha_key,o=r.chacha_nonce,a=r.hmac_key,s=xv.pad(e),c=Ml(i,o,s),u=xv.hmacAad(a,c,n);return du.encode(ws(new Uint8Array([2]),n,c,u))},decrypt:function(e,t){var n=xv.decodePayload(e),r=n.nonce,i=n.ciphertext,o=n.mac,a=xv.getMessageKeys(t,r),s=a.chacha_key,c=a.chacha_nonce,u=a.hmac_key;if(!kl(xv.hmacAad(u,i,r),o))throw new Error("invalid MAC");var l=Ml(s,c,i);return xv.unpad(l)}};function Rv(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Cv(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Bv(e){if(t=e,!(null!=(n=Object)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n))return!1;var t,n;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if(!Array.isArray(e.tags))return!1;for(var r=0;r<e.tags.length;r++){var i=e.tags[r];if(!Array.isArray(i))return!1;for(var o=0;o<i.length;o++)if("object"==typeof i[o])return!1}return!0}function Lv(e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Rv(o,r,i,a,s,"next",e)}function s(e){Rv(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n;return Cv(this,(function(r){switch(r.label){case 0:return[4,go.sign(jv(e),t)];case 1:return n=r.sent(),[2,yn.bytesToHex(n)]}}))})),Uv.apply(this,arguments)}function jv(e){return Ja()(function(e){if(!Bv(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)).toString(Za())}function Dv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mv(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Hv(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Mv(o,r,i,a,s,"next",e)}function s(e){Mv(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Fv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qv(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Vv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zv(this,"privateKey",void 0),zv(this,"nip44SharedSecretCache",void 0),this.privateKey=t,this.nip44SharedSecretCache=new Iv(100)}var t,n,r;return t=e,(n=[{key:"getNip44SharedSecret",value:function(e){var t=this.nip44SharedSecretCache.get(e);return t||(t=Nv.utils.getConversationKey(this.privateKey,e),this.nip44SharedSecretCache.set(e,t)),t}},{key:"getPublicKey",value:function(){var e=go.getPublicKey(yn.hexToBytes(this.privateKey));return yn.bytesToHex(e)}},{key:"signEvent",value:function(e){var t=this;return Hv((function(){var n;return qv(this,(function(r){switch(r.label){case 0:return[4,Lv(e,t.privateKey)];case 1:return n=r.sent(),e.sig=n,[2,e]}}))}))()}},{key:"signSchnorr",value:function(e){var t=this;return Hv((function(){var n;return qv(this,(function(r){switch(r.label){case 0:return[4,go.sign(up.Buffer.from(yn.hexToBytes(e)),yn.hexToBytes(t.privateKey))];case 1:return n=r.sent(),[2,yn.bytesToHex(n)]}}))}))()}},{key:"nip04Encrypt",value:function(e,t){var n=dn(this.privateKey,"02"+e),r=up.Buffer.from(n.slice(1,33)),i=yn.bytesToHex(r),o=Za().parse(i),a=H.AES.encrypt(t,o,{iv:H.lib.WordArray.random(16)});return"".concat(a.toString(),"?iv=").concat(a.iv.toString(H.enc.Base64))}},{key:"nip04Decrypt",value:function(e,t){var n=this;return Hv((function(){var r,i,o,a,s,c,u,l;return qv(this,(function(f){return r=Kv(t.split("?iv="),2),i=r[0],o=r[1],a=dn(n.privateKey,"02"+e),s=up.Buffer.from(a.slice(1,33)),c=yn.bytesToHex(s),u=Za().parse(c),l=H.AES.decrypt(i,u,{iv:Rg().parse(o)}),[2,md().stringify(l)]}))}))()}},{key:"nip44Encrypt",value:function(e,t){return Nv.encrypt(t,this.getNip44SharedSecret(e))}},{key:"nip44Decrypt",value:function(e,t){return Nv.decrypt(t,this.getNip44SharedSecret(e))}},{key:"getEventHash",value:function(e){return jv(e)}}])&&Fv(t.prototype,n),r&&Fv(t,r),e}();const Wv=Vv;function Gv(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function $v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Gv(o,r,i,a,s,"next",e)}function s(e){Gv(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yv(e,t,n[t])}))}return e}function Xv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Jv(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Qv={settings:Zv({},vt),accounts:{},currentAccountId:null,migrations:[],nostrPrivateKey:null},e_=Object.keys(Qv),t_="sync",n_=function(){return{connector:null,account:null,settings:Zv({},vt),migrations:[],accounts:{},currentAccountId:null,liquid:null,nostr:null,nostrPrivateKey:null,mnemonic:null,bitcoin:null,mv2Password:null}},r_=M((function(e,t){return Xv(Zv({},n_()),{password:function(){var n=$v((function(n){return Jv(this,(function(r){switch(r.label){case 0:return E?n?[4,o().storage.session.set({password:n})]:[3,2]:[3,4];case 1:r.sent(),r.label=2;case 2:return[4,o().storage.session.get("password")];case 3:return[2,r.sent().password];case 4:return n&&e({mv2Password:n}),[2,t().mv2Password];case 5:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),getAccount:function(){var e=t().currentAccountId,n=null;return e&&(n=t().accounts[e]),n},getConnector:$v((function(){var n;return Jv(this,(function(r){switch(r.label){case 0:return t().connector?[4,t().connector]:[3,2];case 1:return[2,r.sent()];case 2:return n=$v((function(){var e,n,r,i,o;return Jv(this,(function(a){switch(a.label){case 0:return e=t().currentAccountId,n=t().accounts[e],[4,t().password()];case 1:if(!(r=a.sent()))throw new Error("Password is not set");return i=z(n.config,r),[4,(o=new Dw[n.connector](n,i)).init()];case 2:return a.sent(),[2,o]}}))}))(),e({connector:n}),[4,n];case 3:return[2,r.sent()]}}))})),getLiquid:$v((function(){var n,r,i,o,a,s;return Jv(this,(function(c){switch(c.label){case 0:return(n=t().liquid)?[2,n]:[4,t().getMnemonic()];case 1:return r=c.sent(),i=t().currentAccountId,o=t().accounts[i],a=o.bitcoinNetwork||"bitcoin",s=new kv(r,"bitcoin"===a?"liquid":a),e({liquid:s}),[2,s]}}))})),getNostr:$v((function(){var n,r,i,o,a,s;return Jv(this,(function(c){switch(c.label){case 0:return(n=t().nostr)?[2,n]:(r=t().currentAccountId,i=t().accounts[r],[4,t().password()]);case 1:if(!(o=c.sent()))throw new Error("Password is not set");return a=z(i.nostrPrivateKey,o),s=new Wv(a),e({nostr:s}),[2,s]}}))})),getMnemonic:$v((function(){var n,r,i,o,a,s;return Jv(this,(function(c){switch(c.label){case 0:return(n=t().mnemonic)?[2,n]:(r=t().currentAccountId,i=t().accounts[r],[4,t().password()]);case 1:if(!(o=c.sent()))throw new Error("Password is not set");return a=z(i.mnemonic,o),s=new is(a),e({mnemonic:s}),[2,s]}}))})),getBitcoin:$v((function(){var n,r,i,o,a,s;return Jv(this,(function(c){switch(c.label){case 0:return(n=t().bitcoin)?[2,n]:[4,t().getMnemonic()];case 1:return r=c.sent(),i=t().currentAccountId,o=t().accounts[i],a=o.bitcoinNetwork||"bitcoin",s=new On(r,a),e({bitcoin:s}),[2,s]}}))})),lock:$v((function(){var n,r;return Jv(this,(function(i){switch(i.label){case 0:return E?[4,o().storage.session.set({password:null})]:[3,2];case 1:return i.sent(),[3,3];case 2:e({mv2Password:null}),i.label=3;case 3:return[4,o().tabs.query({title:"Alby"})];case 4:return n=i.sent(),(r=Array.from(n,(function(e){return e.id})).filter((function(e,t){return"number"==typeof e&&""!==n[t].title}))).length&&o().tabs.remove(r),t().connector?[4,t().connector]:[3,7];case 5:return[4,i.sent().unload()];case 6:i.sent(),i.label=7;case 7:return e({connector:null,account:null,liquid:null,nostr:null,mnemonic:null,bitcoin:null}),[2]}}))})),isUnlocked:$v((function(){return Jv(this,(function(e){switch(e.label){case 0:return[4,t().password()];case 1:return[4,e.sent()];case 2:return[2,!!e.sent()]}}))})),init:function(){return o().storage.sync.get(e_).then((function(t){var n=P()(Qv,t);e(n)})).catch((function(t){return console.info("storage.sync is not available. using storage.local"),t_="local",o().storage.local.get("__sync").then((function(t){var n=P()(Qv,t.mockSync);e(n)}))}))},reset:$v((function(){var n;return Jv(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o().storage.session.clear()];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),console.error("Failed to clear session storage",n),[3,3];case 3:return"sync"!==t_?[3,5]:[4,o().storage.sync.clear()];case 4:return r.sent(),[3,7];case 5:return[4,o().storage.local.clear()];case 6:r.sent(),r.label=7;case 7:return e(Zv({},n_())),[4,t().saveToStorage()];case 8:return r.sent(),[2]}}))})),saveToStorage:function(){var e=t(),n=Zv({},Qv,T()(e,e_));return"sync"===t_?o().storage.sync.set(n):o().storage.local.set({__sync:n})}})}));const i_=r_;function o_(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a_(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){o_(o,r,i,a,s,"next",e)}function s(e){o_(o,r,i,a,s,"throw",e)}a(void 0)}))}}function s_(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var c_,u_=new Map;!function(e){e.Default="alby_icon_yellow",e.Tipping="alby_icon_blue",e.Active="alby_icon_green"}(c_||(c_={}));var l_=function(){var e=a_((function(e,t){var n;return s_(this,(function(r){switch(r.label){case 0:return(null===(n=t.tab)||void 0===n?void 0:n.id)?[4,f_(e.args.icon,t.tab.id)]:[2,Promise.resolve({data:!1})];case 1:return r.sent(),[2,Promise.resolve({data:!0})]}}))}));return function(t,n){return e.apply(this,arguments)}}(),f_=function(){var e=a_((function(e,t){var n,r,i;return s_(this,(function(a){return(n=u_.get(t))&&"alby_icon_green"===n&&"alby_icon_blue"===e?[2,Promise.resolve()]:(u_.set(t,e),r="dark"==i_.getState().settings.theme?"_dark":"",i={path:{16:"../assets/icons/".concat(e).concat(r,"_16x16.png"),32:"../assets/icons/".concat(e).concat(r,"_32x32.png"),48:"../assets/icons/".concat(e).concat(r,"_48x48.png"),128:"../assets/icons/".concat(e).concat(r,"_128x128.png")},tabId:t},[2,E?o().action.setIcon(i):o().browserAction.setIcon(i)])}))}));return function(t,n){return e.apply(this,arguments)}}();const h_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,d_=Object.keys,p_=Array.isArray;function y_(e,t){return"object"!=typeof t||d_(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||h_.Promise||(h_.Promise=Promise);const g_=Object.getPrototypeOf,b_={}.hasOwnProperty;function m_(e,t){return b_.call(e,t)}function w_(e,t){"function"==typeof t&&(t=t(g_(e))),("undefined"==typeof Reflect?d_:Reflect.ownKeys)(t).forEach((n=>{__(e,n,t[n])}))}const v_=Object.defineProperty;function __(e,t,n,r){v_(e,t,y_(n&&m_(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function E_(e){return{from:function(t){return e.prototype=Object.create(t.prototype),__(e.prototype,"constructor",e),{extend:w_.bind(null,e.prototype)}}}}const S_=Object.getOwnPropertyDescriptor;function k_(e,t){let n;return S_(e,t)||(n=g_(e))&&k_(n,t)}const A_=[].slice;function O_(e,t,n){return A_.call(e,t,n)}function P_(e,t){return t(e)}function I_(e){if(!e)throw new Error("Assertion Failed")}function T_(e){h_.setImmediate?setImmediate(e):setTimeout(e,0)}function x_(e,t){return e.reduce(((e,n,r)=>{var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function N_(e,t){if(m_(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=N_(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:N_(s,t.substr(a+1))}}function R_(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){I_("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)R_(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?p_(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var c=e[a];c&&m_(e,a)||(c=e[a]={}),R_(c,s,n)}}else void 0===n?p_(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function C_(e){var t={};for(var n in e)m_(e,n)&&(t[n]=e[n]);return t}const B_=[].concat;function L_(e){return B_.apply([],e)}const U_="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L_([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>h_[e])),j_=U_.map((e=>h_[e]));x_(U_,(e=>[e,!0]));let D_=null;function M_(e){D_="undefined"!=typeof WeakMap&&new WeakMap;const t=H_(e);return D_=null,t}function H_(e){if(!e||"object"!=typeof e)return e;let t=D_&&D_.get(e);if(t)return t;if(p_(e)){t=[],D_&&D_.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(H_(e[n]))}else if(j_.indexOf(e.constructor)>=0)t=e;else{const n=g_(e);for(var i in t=n===Object.prototype?{}:Object.create(n),D_&&D_.set(e,t),e)m_(e,i)&&(t[i]=H_(e[i]))}return t}const{toString:F_}={};function z_(e){return F_.call(e).slice(8,-1)}const K_="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",q_="symbol"==typeof K_?function(e){var t;return null!=e&&(t=e[K_])&&t.apply(e)}:function(){return null},V_={};function W_(e){var t,n,r,i;if(1===arguments.length){if(p_(e))return e.slice();if(this===V_&&"string"==typeof e)return[e];if(i=q_(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const G_="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var $_="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Y_(e,t){$_=e,Z_=t}var Z_=()=>!0;const X_=!new Error("").stack;function J_(){if(X_)try{throw J_.arguments,new Error}catch(e){return e}return new Error}function Q_(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Z_).map((e=>"\n"+e)).join("")):""}var eE=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],tE=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(eE),nE={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function rE(e,t){this._e=J_(),this.name=e,this.message=t}function iE(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function oE(e,t,n,r){this._e=J_(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=iE(e,t)}function aE(e,t){this._e=J_(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=iE(e,t)}E_(rE).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Q_(this._e,2))}},toString:function(){return this.name+": "+this.message}}),E_(oE).from(rE),E_(aE).from(rE);var sE=tE.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const cE=rE;var uE=tE.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=J_(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=nE[t]||n,this.inner=null)}return E_(r).from(cE),e[t]=r,e}),{});uE.Syntax=SyntaxError,uE.Type=TypeError,uE.Range=RangeError;var lE=eE.reduce(((e,t)=>(e[t+"Error"]=uE[t],e)),{}),fE=tE.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=uE[t]),e)),{});function hE(){}function dE(e){return e}function pE(e,t){return null==e||e===dE?t:function(n){return t(e(n))}}function yE(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function gE(e,t){return e===hE?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?yE(r,this.onsuccess):r),i&&(this.onerror=this.onerror?yE(i,this.onerror):i),void 0!==o?o:n}}function bE(e,t){return e===hE?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?yE(n,this.onsuccess):n),r&&(this.onerror=this.onerror?yE(r,this.onerror):r)}}function mE(e,t){return e===hE?t:function(n){var r=e.apply(this,arguments);y_(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?yE(i,this.onsuccess):i),o&&(this.onerror=this.onerror?yE(o,this.onerror):o),void 0===r?void 0===a?void 0:a:y_(r,a)}}function wE(e,t){return e===hE?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function vE(e,t){return e===hE?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}fE.ModifyError=oE,fE.DexieError=rE,fE.BulkError=aE;var _E={};const EE=100,[SE,kE,AE]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,g_(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,g_(t),e]})(),OE=kE&&kE.then,PE=SE&&SE.constructor,IE=!!AE;var TE=!1,xE=AE?()=>{AE.then(QE)}:h_.setImmediate?setImmediate.bind(null,QE):h_.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{QE(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(QE,0)},NE=function(e,t){HE.push([e,t]),CE&&(xE(),CE=!1)},RE=!0,CE=!0,BE=[],LE=[],UE=null,jE=dE,DE={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:kS,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{kS(e[0],e[1])}catch(e){}}))}},ME=DE,HE=[],FE=0,zE=[];function KE(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=hE,this._lib=!1;var t=this._PSD=ME;if($_&&(this._stackHolder=J_(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==_E)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&GE(this,this._value))}this._state=null,this._value=null,++t.ref,WE(this,e)}const qE={get:function(){var e=ME,t=uS;function n(n,r){var i=!e.global&&(e!==ME||t!==uS);const o=i&&!dS();var a=new KE(((t,a)=>{YE(this,new VE(_S(n,e,i,o),_S(r,e,i,o),t,a,e))}));return $_&&JE(a,this),a}return n.prototype=_E,n},set:function(e){__(this,"then",e&&e.prototype===_E?qE:{get:function(){return e},set:qE.set})}};function VE(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function WE(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&eS();t&&"function"==typeof t.then?WE(e,((e,n)=>{t instanceof KE?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,$E(e)),n&&tS()}}),GE.bind(null,e))}catch(t){GE(e,t)}}function GE(e,t){if(LE.push(t),null===e._state){var n=e._lib&&eS();t=jE(t),e._state=!1,e._value=t,$_&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=k_(t,"stack");t._promise=e,__(t,"stack",{get:()=>TE?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){BE.some((t=>t._value===e._value))||BE.push(e)}(e),$E(e),n&&tS()}}function $E(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)YE(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===FE&&(++FE,NE((()=>{0==--FE&&nS()}),[]))}function YE(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++FE,NE(ZE,[n,e,t])}else e._listeners.push(t)}function ZE(e,t,n){try{UE=t;var r,i=t._value;t._state?r=e(i):(LE.length&&(LE=[]),r=e(i),-1===LE.indexOf(i)&&function(e){for(var t=BE.length;t;)if(BE[--t]._value===e._value)return void BE.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{UE=null,0==--FE&&nS(),--n.psd.ref||n.psd.finalize()}}function XE(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=Q_(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return $_&&((r=Q_(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&XE(e._prev,t,n)),t}function JE(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function QE(){eS()&&tS()}function eS(){var e=RE;return RE=!1,CE=!1,e}function tS(){var e,t,n;do{for(;HE.length>0;)for(e=HE,HE=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(HE.length>0);RE=!0,CE=!0}function nS(){var e=BE;BE=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=zE.slice(0),n=t.length;n;)t[--n]()}function rS(e){return new KE(_E,!1,e)}function iS(e,t){var n=ME;return function(){var r=eS(),i=ME;try{return bS(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{bS(i,!1),r&&tS()}}}w_(KE.prototype,{then:qE,_then:function(e,t){YE(this,new VE(null,null,e,t,ME))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):rS(e))):this.then(null,(e=>e&&e.name===t?n(e):rS(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),rS(t))))},stack:{get:function(){if(this._stack)return this._stack;try{TE=!0;var e=XE(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{TE=!1}}},timeout:function(e,t){return e<1/0?new KE(((n,r)=>{var i=setTimeout((()=>r(new uE.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&__(KE.prototype,Symbol.toStringTag,"Dexie.Promise"),DE.env=mS(),w_(KE,{all:function(){var e=W_.apply(null,arguments).map(pS);return new KE((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((i,o)=>KE.resolve(i).then((n=>{e[o]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof KE)return e;if(e&&"function"==typeof e.then)return new KE(((t,n)=>{e.then(t,n)}));var t=new KE(_E,!0,e);return JE(t,UE),t},reject:rS,race:function(){var e=W_.apply(null,arguments).map(pS);return new KE(((t,n)=>{e.map((e=>KE.resolve(e).then(t,n)))}))},PSD:{get:()=>ME,set:e=>ME=e},totalEchoes:{get:()=>uS},newPSD:fS,usePSD:wS,scheduler:{get:()=>NE,set:e=>{NE=e}},rejectionMapper:{get:()=>jE,set:e=>{jE=e}},follow:(e,t)=>new KE(((n,r)=>fS(((t,n)=>{var r=ME;r.unhandleds=[],r.onunhandled=n,r.finalize=yE((function(){!function(e){zE.push((function t(){e(),zE.splice(zE.indexOf(t),1)})),++FE,NE((()=>{0==--FE&&nS()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),PE&&(PE.allSettled&&__(KE,"allSettled",(function(){const e=W_.apply(null,arguments).map(pS);return new KE((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,i)=>KE.resolve(e).then((e=>r[i]={status:"fulfilled",value:e}),(e=>r[i]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),PE.any&&"undefined"!=typeof AggregateError&&__(KE,"any",(function(){const e=W_.apply(null,arguments).map(pS);return new KE(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach(((e,o)=>KE.resolve(e).then((e=>t(e)),(e=>{i[o]=e,--r||n(new AggregateError(i))}))))}))})));const oS={awaits:0,echoes:0,id:0};var aS=0,sS=[],cS=0,uS=0,lS=0;function fS(e,t,n,r){var i=ME,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++lS;var a=DE.env;o.env=IE?{Promise:KE,PromiseProp:{value:KE,configurable:!0,writable:!0},all:KE.all,race:KE.race,allSettled:KE.allSettled,any:KE.any,resolve:KE.resolve,reject:KE.reject,nthen:ES(a.nthen,o),gthen:ES(a.gthen,o)}:{},t&&y_(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=wS(o,e,n,r);return 0===o.ref&&o.finalize(),s}function hS(){return oS.id||(oS.id=++aS),++oS.awaits,oS.echoes+=EE,oS.id}function dS(){return!!oS.awaits&&(0==--oS.awaits&&(oS.id=0),oS.echoes=oS.awaits*EE,!0)}function pS(e){return oS.echoes&&e&&e.constructor===PE?(hS(),e.then((e=>(dS(),e)),(e=>(dS(),AS(e))))):e}function yS(e){++uS,oS.echoes&&0!=--oS.echoes||(oS.echoes=oS.id=0),sS.push(ME),bS(e,!0)}function gS(){var e=sS[sS.length-1];sS.pop(),bS(e,!1)}function bS(e,t){var n=ME;if((t?!oS.echoes||cS++&&e===ME:!cS||--cS&&e===ME)||vS(t?yS.bind(null,e):gS),e!==ME&&(ME=e,n===DE&&(DE.env=mS()),IE)){var r=DE.env.Promise,i=e.env;kE.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(h_,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function mS(){var e=h_.Promise;return IE?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(h_,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:kE.then,gthen:e.prototype.then}:{}}function wS(e,t,n,r,i){var o=ME;try{return bS(e,!0),t(n,r,i)}finally{bS(o,!1)}}function vS(e){OE.call(SE,e)}function _S(e,t,n,r){return"function"!=typeof e?e:function(){var i=ME;n&&hS(),bS(t,!0);try{return e.apply(this,arguments)}finally{bS(i,!1),r&&vS(dS)}}}function ES(e,t){return function(n,r){return e.call(this,_S(n,t),_S(r,t))}}-1===(""+OE).indexOf("[native code]")&&(hS=dS=hE);const SS="unhandledrejection";function kS(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(h_.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(SS,!0,!0),y_(r,i)):h_.CustomEvent&&y_(r=new CustomEvent(SS,{detail:i}),i),r&&h_.dispatchEvent&&(dispatchEvent(r),!h_.PromiseRejectionEvent&&h_.onunhandledrejection))try{h_.onunhandledrejection(r)}catch(e){}$_&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}var AS=KE.reject;function OS(e,t,n,r){if(e.idbdb&&(e._state.openComplete||ME.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===sE.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>OS(e,t,n,r)))):AS(i)}return i._promise(t,((e,t)=>fS((()=>(ME.trans=i,r(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return AS(new uE.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return AS(new uE.DatabaseClosed);e.open().catch(hE)}return e._state.dbReadyPromise.then((()=>OS(e,t,n,r)))}const PS="3.2.4",IS=String.fromCharCode(65535),TS=-1/0,xS="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",NS="String expected.",RS=[],CS="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),BS=CS,LS=CS,US=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),jS="__dbnames",DS="readonly",MS="readwrite";function HS(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const FS={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zS(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=M_(t))[e],t)}class KS{_trans(e,t,n){const r=this._tx||ME.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new uE.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}const a=eS();try{return r&&r.db===this.db?r===ME.trans?r._promise(e,o,n):fS((()=>r._promise(e,o,n)),{trans:r,transless:ME.transless||ME}):OS(this.db,e,[this.name],o)}finally{a&&tS()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(p_(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=d_(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==IS)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&$_&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}const[a,s]=t.reduce((([t,n],i)=>{const a=r[i],s=e[i];return[t||a,t||!a?HS(n,a&&a.multi?e=>{const t=N_(e,i);return p_(t)&&t.some((e=>o(s,e)))}:e=>o(s,N_(e,i))):n]}),[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,p_(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(m_(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){y_(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=zS(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?KE.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{R_(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||p_(e))return this.where(":id").equals(e).modify(t);{const n=N_(e,this.schema.primKey.keyPath);if(void 0===n)return AS(new uE.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?d_(t).forEach((n=>{R_(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=zS(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?KE.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{R_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?KE.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:FS}))).then((e=>e.numFailures?KE.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new uE.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new uE.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let s=o&&n?e.map(zS(o)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:s,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new aE(`${this.name}.bulkAdd(): ${e} of ${a} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new uE.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new uE.InvalidArgument("Arguments objects and keys must have the same length");const a=e.length;let s=o&&n?e.map(zS(o)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:s,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new aE(`${this.name}.bulkPut(): ${e} of ${a} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new aE(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function qS(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"!=typeof e){var a;r||(r=wE),i||(i=hE);var s={subscribers:[],fire:i,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=r(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e})),s.fire=s.subscribers.reduce(r,i)}};return t[e]=n[e]=s,s}d_(a=e).forEach((function(e){var t=a[e];if(p_(t))o(e,a[e][0],a[e][1]);else{if("asap"!==t)throw new uE.InvalidArgument("Invalid event config");var n=o(e,dE,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){T_((function(){e.apply(null,t)}))}))}))}}))}}function VS(e,t){return E_(t).from({prototype:e}),t}function WS(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function GS(e,t){e.filter=HS(e.filter,t)}function $S(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>HS(r(),t()):t,e.justLimit=n&&!r}function YS(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new uE.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ZS(e,t,n){const r=YS(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function XS(e,t,n,r){const i=e.replayFilter?HS(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},a=(e,n,r)=>{if(!i||i(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),m_(o,s)||(o[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),JS(ZS(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return JS(ZS(e,r,n),HS(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function JS(e,t,n,r){var i=iS(r?(e,t,i)=>n(r(e),t,i):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=hE}),(t=>{e.fail(t),n=hE}))||i(e.value,e,(e=>n=e)),n()}))}))}function QS(e,t){try{const n=ek(e),r=ek(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(tk(e),tk(t));case"Array":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n){const r=QS(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ek(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=z_(e);return"ArrayBuffer"===n?"binary":n}function tk(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class nk{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,AS.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,AS.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=HS(t.algorithm,e)}_iterate(e,t){return XS(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&y_(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>XS(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(WS(t,!0))return n.count({trans:e,query:{index:YS(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return XS(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&WS(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=YS(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return XS(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,WS(t)?$S(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):$S(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),$S(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return GS(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return GS(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=HS(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&WS(t,!0)&&t.limit>0)return this._read((e=>{var n=YS(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return GS(this._ctx,(function(e){var t=e.primaryKey.toString(),r=m_(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var i=d_(e),o=i.length;r=function(t){for(var n=!1,r=0;r<o;++r){var a=i[r],s=e[a];N_(t,a)!==s&&(R_(t,a,s),n=!0)}return n}}const a=t.table.core,{outbound:s,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,l=[];let f=0;const h=[],d=(e,t)=>{const{failures:n,numFailures:r}=t;f+=e-r;for(let e of d_(n))l.push(n[e])};return this.clone().primaryKeys().then((i=>{const o=l=>{const f=Math.min(u,i.length-l);return a.getMany({trans:n,keys:i.slice(l,l+f),cache:"immutable"}).then((h=>{const p=[],y=[],g=s?[]:null,b=[];for(let e=0;e<f;++e){const t=h[e],n={value:M_(t),primKey:i[l+e]};!1!==r.call(n,n.value,n)&&(null==n.value?b.push(i[l+e]):s||0===QS(c(t),c(n.value))?(y.push(n.value),s&&g.push(i[l+e])):(b.push(i[l+e]),p.push(n.value)))}const m=WS(t)&&t.limit===1/0&&("function"!=typeof e||e===rk)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&a.mutate({trans:n,type:"add",values:p}).then((e=>{for(let t in e.failures)b.splice(parseInt(t),1);d(p.length,e)}))).then((()=>(y.length>0||m&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:g,values:y,criteria:m,changeSpec:"function"!=typeof e&&e}).then((e=>d(y.length,e))))).then((()=>(b.length>0||m&&e===rk)&&a.mutate({trans:n,type:"delete",keys:b,criteria:m}).then((e=>d(b.length,e))))).then((()=>i.length>l+f&&o(l+u)))}))};return o(0).then((()=>{if(l.length>0)throw new oE("Error modifying one or more objects",l,f,h);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return WS(e)&&(e.isPrimKey&&!LS||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((({failures:e,lastResult:n,results:r,numFailures:i})=>{if(i)throw new oE("Could not delete some values",Object.keys(e).map((t=>e[t])),t-i);return t-i}))))})):this.modify(rk)}}const rk=(e,t)=>t.value=null;function ik(e,t){return e<t?-1:e===t?0:1}function ok(e,t){return e>t?-1:e===t?0:1}function ak(e,t,n){var r=e instanceof hk?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function sk(e){return new e.Collection(e,(()=>fk(""))).limit(0)}function ck(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,c=0;c<a;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[c],u)<0&&(s=c)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function uk(e,t,n,r){var i,o,a,s,c,u,l,f=n.length;if(!n.every((e=>"string"==typeof e)))return ak(e,NS);function h(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),o=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),a="next"===e?ik:ok;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),c=t.map((function(e){return e.lower})),u=e,l="next"===e?"":r}h("next");var d=new e.Collection(e,(()=>lk(s[0],c[f-1]+r)));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(t(h,c,p))return!0;for(var d=null,y=p;y<f;++y){var g=ck(i,h,s[y],c[y],a,u);null===g&&null===d?p=y+1:(null===d||a(d,g)>0)&&(d=g)}return n(null!==d?function(){e.continue(d+l)}:r),!1})),d}function lk(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function fk(e){return{type:1,lower:e,upper:e}}class hk{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?sk(this):new this.Collection(this,(()=>lk(e,t,!n,!r)))}catch(e){return ak(this,xS)}}equals(e){return null==e?ak(this,xS):new this.Collection(this,(()=>fk(e)))}above(e){return null==e?ak(this,xS):new this.Collection(this,(()=>lk(e,void 0,!0)))}aboveOrEqual(e){return null==e?ak(this,xS):new this.Collection(this,(()=>lk(e,void 0,!1)))}below(e){return null==e?ak(this,xS):new this.Collection(this,(()=>lk(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?ak(this,xS):new this.Collection(this,(()=>lk(void 0,e)))}startsWith(e){return"string"!=typeof e?ak(this,NS):this.between(e,e+IS,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):uk(this,((e,t)=>0===e.indexOf(t[0])),[e],IS)}equalsIgnoreCase(e){return uk(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=W_.apply(V_,arguments);return 0===e.length?sk(this):uk(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=W_.apply(V_,arguments);return 0===e.length?sk(this):uk(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,IS)}anyOf(){const e=W_.apply(V_,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return ak(this,xS)}if(0===e.length)return sk(this);const n=new this.Collection(this,(()=>lk(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,i,o)=>{const a=n.key;for(;t(a,e[r])>0;)if(++r,r===e.length)return i(o),!1;return 0===t(a,e[r])||(i((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[TS,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=W_.apply(V_,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return ak(this,xS)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[TS,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,i=this._descending,o=this._min,a=this._max;if(0===e.length)return sk(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return ak(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",uE.InvalidArgument);const s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;let u,l=r;function f(e,t){return l(e[0],t[0])}try{u=e.reduce((function(e,t){let r=0,i=e.length;for(;r<i;++r){const i=e[r];if(n(t[0],i[1])<0&&n(t[1],i[0])>0){i[0]=o(i[0],t[0]),i[1]=a(i[1],t[1]);break}}return r===i&&e.push(t),e}),[]),u.sort(f)}catch(e){return ak(this,xS)}let h=0;const d=c?e=>r(e,u[h][1])>0:e=>r(e,u[h][1])>=0,p=s?e=>i(e,u[h][0])>0:e=>i(e,u[h][0])>=0;let y=d;const g=new this.Collection(this,(()=>lk(u[0][0],u[u.length-1][1],!s,!c)));return g._ondirectionchange=e=>{"next"===e?(y=d,l=r):(y=p,l=i),u.sort(f)},g._addAlgorithm(((e,t,n)=>{for(var i=e.key;y(i);)if(++h,h===u.length)return t(n),!1;return!!function(e){return!d(e)&&!p(e)}(i)||(0===this._cmp(i,u[h][1])||0===this._cmp(i,u[h][0])||t((()=>{l===r?e.continue(u[h][0]):e.continue(u[h][1])})),!1)})),g}startsWithAnyOf(){const e=W_.apply(V_,arguments);return e.every((e=>"string"==typeof e))?0===e.length?sk(this):this.inAnyRange(e.map((e=>[e,e+IS]))):ak(this,"startsWithAnyOf() only works with strings")}}function dk(e){return iS((function(t){return pk(t),e(t.target.error),!1}))}function pk(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const yk="storagemutated",gk="x-storagemutated-1",bk=qS(null,yk);class mk{_lock(){return I_(!ME.global),++this._reculock,1!==this._reculock||ME.global||(ME.lockOwnerFor=this),this}_unlock(){if(I_(!ME.global),0==--this._reculock)for(ME.global||(ME.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{wS(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&ME.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(I_(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new uE.DatabaseClosed(n);case"MissingAPIError":throw new uE.MissingAPI(n.message,n);default:throw new uE.OpenFailed(n)}if(!this.active)throw new uE.TransactionInactive;return I_(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=iS((t=>{pk(t),this._reject(e.error)})),e.onabort=iS((t=>{pk(t),this.active&&this._reject(new uE.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=iS((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&bk.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return AS(new uE.ReadOnly("Transaction is readonly"));if(!this.active)return AS(new uE.TransactionInactive);if(this._locked())return new KE(((r,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,i)},ME])}));if(n)return fS((()=>{var e=new KE(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new KE(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=KE.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new KE(((e,r)=>{n.then((n=>t._waitingQueue.push(iS(e.bind(null,n)))),(e=>t._waitingQueue.push(iS(r.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new uE.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(m_(t,e))return t[e];const n=this.schema[e];if(!n)throw new uE.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function wk(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+vk(t)}}function vk(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function _k(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:x_(n,(e=>[e.name,e]))}}let Ek=e=>{try{return e.only([[]]),Ek=()=>[[]],[[]]}catch(e){return Ek=()=>IS,IS}};function Sk(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>N_(t,e)}(e):t=>N_(t,e)}function kk(e){return[].slice.call(e)}let Ak=0;function Ok(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function Pk({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},i){const o=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(function(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:i,upperOpen:o}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}const{schema:i,hasGetAll:o}=function(e,t){const n=kk(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=p_(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Sk(t)},indexes:kk(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:i}=e,a={name:t,compound:p_(i),keyPath:i,unique:n,multiEntry:r,extractKey:Sk(i)};return o[Ok(i)]=a,a})),getIndexByKeyPath:e=>o[Ok(e)]};return o[":id"]=a.primaryKey,null!=t&&(o[Ok(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:i,values:o,range:a}){return new Promise(((s,c)=>{s=iS(s);const u=e.objectStore(t),l=null==u.keyPath,f="put"===n||"add"===n;if(!f&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:h}=i||o||{length:1};if(i&&o&&i.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return s({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const p=[],y=[];let g=0;const b=e=>{++g,pk(e)};if("deleteRange"===n){if(4===a.type)return s({numFailures:g,failures:y,results:[],lastResult:void 0});3===a.type?p.push(d=u.clear()):p.push(d=u.delete(r(a)))}else{const[e,t]=f?l?[o,i]:[o,null]:[i,null];if(f)for(let r=0;r<h;++r)p.push(d=t&&void 0!==t[r]?u[n](e[r],t[r]):u[n](e[r])),d.onerror=b;else for(let t=0;t<h;++t)p.push(d=u[n](e[t])),d.onerror=b}const m=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(y[t]=e.error))),s({numFailures:g,failures:y,results:"delete"===n?i:p.map((e=>e.result)),lastResult:t})};d.onerror=e=>{b(e),m(e)},d.onsuccess=m}))},getMany:({trans:e,keys:n})=>new Promise(((r,i)=>{r=iS(r);const o=e.objectStore(t),a=n.length,s=new Array(a);let c,u=0,l=0;const f=e=>{const t=e.target;s[t._pos]=t.result,++l===u&&r(s)},h=dk(i);for(let e=0;e<a;++e)null!=n[e]&&(c=o.get(n[e]),c._pos=e,c.onsuccess=f,c.onerror=h,++u);0===u&&r(s)})),get:({trans:e,key:n})=>new Promise(((r,i)=>{r=iS(r);const o=e.objectStore(t).get(n);o.onsuccess=e=>r(e.target.result),o.onerror=dk(i)})),query:function(e){return n=>new Promise(((i,o)=>{i=iS(i);const{trans:a,values:s,limit:c,query:u}=n,l=c===1/0?void 0:c,{index:f,range:h}=u,d=a.objectStore(t),p=f.isPrimaryKey?d:d.index(f.name),y=r(h);if(0===c)return i({result:[]});if(e){const e=s?p.getAll(y,l):p.getAllKeys(y,l);e.onsuccess=e=>i({result:e.target.result}),e.onerror=dk(o)}else{let e=0;const t=s||!("openKeyCursor"in p)?p.openCursor(y):p.openKeyCursor(y),n=[];t.onsuccess=r=>{const o=t.result;return o?(n.push(s?o.value:o.primaryKey),++e===c?i({result:n}):void o.continue()):i({result:n})},t.onerror=dk(o)}}))}(o),openCursor:function({trans:e,values:n,query:i,reverse:o,unique:a}){return new Promise(((s,c)=>{s=iS(s);const{index:u,range:l}=i,f=e.objectStore(t),h=u.isPrimaryKey?f:f.index(u.name),d=o?a?"prevunique":"prev":a?"nextunique":"next",p=n||!("openKeyCursor"in h)?h.openCursor(r(l),d):h.openKeyCursor(r(l),d);p.onerror=dk(c),p.onsuccess=iS((t=>{const n=p.result;if(!n)return void s(null);n.___id=++Ak,n.done=!1;const r=n.continue.bind(n);let i=n.continuePrimaryKey;i&&(i=i.bind(n));const o=n.advance.bind(n),a=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=iS(c),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=iS(e),p.onerror=dk(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=a,e(t)}})),s=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return p.onsuccess=iS((e=>{p.onsuccess=s,s()})),n.continue=r,n.continuePrimaryKey=i,n.advance=o,s(),t},s(n)}),c)}))},count({query:e,trans:n}){const{index:i,range:o}=e;return new Promise(((e,a)=>{const s=n.objectStore(t),c=i.isPrimaryKey?s:s.index(i.name),u=r(o),l=u?c.count(u):c.count();l.onsuccess=iS((t=>e(t.target.result))),l.onerror=dk(a)}))}}}(e))),s={};return a.forEach((e=>s[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!s[e])throw new Error(`Table '${e}' not found`);return s[e]},MIN_KEY:-1/0,MAX_KEY:Ek(t),schema:i}}(t,n,i),e.dbcore);return{dbcore:o}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Ik({_novip:e},t,n,r){n.forEach((n=>{const i=r[n];t.forEach((t=>{const r=k_(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?__(t,n,{get(){return this.table(n)},set(e){v_(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function Tk({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function xk(e,t){return e._cfg.version-t._cfg.version}function Nk(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const e={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!CS)e.recreate=!0,n.change.push(e);else{const t=i.idxByName,r=o.idxByName;let a;for(a in t)r[a]||e.del.push(a);for(a in r){const n=t[a],i=r[a];n?n.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,o])}return n}function Rk(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>Ck(i,e))),i}function Ck(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Bk(e,t,n){const r={};return O_(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let i=t.keyPath;const o=wk(vk(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);i=n.keyPath;var s=wk(n.name,i,!!n.unique,!!n.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(s)}r[e]=_k(e,o,a)})),r}function Lk({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],a=n.objectStore(o);e._hasGetAll="getAll"in a;for(let e=0;e<a.indexNames.length;++e){const n=a.indexNames[e],r=a.index(n).keyPath,i="string"==typeof r?r:"["+O_(r).join("+")+"]";if(t[o]){const e=t[o].idxByName[i];e&&(e.name=n,delete t[o].idxByName[i],t[o].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h_.WorkerGlobalScope&&h_ instanceof h_.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Uk{_parseStoresSpec(e,t){d_(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return wk(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),p_(r),0===t)})),i=r.shift();if(i.multi)throw new uE.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new uE.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new uE.Schema("Index must have a name and cannot be an empty string")})),t[n]=_k(n,i,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?y_(this._cfg.storesSource,e):e;const n=t._versions,r={};let i={};return n.forEach((e=>{y_(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Tk(t,[t._allTables,t,t.Transaction.prototype]),Ik(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],d_(i),i),t._storeNames=d_(i),this}upgrade(e){return this._cfg.contentUpgrade=vE(this._cfg.contentUpgrade||hE,e),this}}function jk(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new oA(jS,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Dk(e){return e&&"function"==typeof e.databases}function Mk(e){return fS((function(){return ME.letThrough=!0,e()}))}function Hk(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Fk(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?AS(t.dbOpenError):e));$_&&(t.openCanceller._stackHolder=J_()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new uE.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,a=null,s=!1;return KE.race([r,("undefined"==typeof navigator?KE.resolve():Hk()).then((()=>new KE(((r,o)=>{if(i(),!n)throw new uE.MissingAPI;const c=e.name,u=t.autoSchema?n.open(c):n.open(c,Math.round(10*e.verno));if(!u)throw new uE.MissingAPI;u.onerror=dk(o),u.onblocked=iS(e._fireOnBlocked),u.onupgradeneeded=iS((r=>{if(a=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=pk,a.abort(),u.result.close();const e=n.deleteDatabase(c);e.onsuccess=e.onerror=iS((()=>{o(new uE.NoSuchDatabase(`Database ${c} doesnt exist`))}))}else{a.onerror=dk(o);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;s=i<1,e._novip.idbdb=u.result,function(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const a=o._reject.bind(o),s=ME.transless||ME;fS((()=>{ME.trans=o,ME.transless=s,0===t?(d_(i).forEach((e=>{Rk(n,e,i[e].primKey,i[e].indexes)})),Pk(e,n),KE.follow((()=>e.on.populate.fire(o))).catch(a)):function({_novip:e},t,n,r){const i=[],o=e._versions;let a=e._dbSchema=Bk(0,e.idbdb,r),s=!1;const c=o.filter((e=>e._cfg.version>=t));return c.forEach((o=>{i.push((()=>{const i=a,c=o._cfg.dbschema;Lk(e,i,r),Lk(e,c,r),a=e._dbSchema=c;const u=Nk(i,c);u.add.forEach((e=>{Rk(r,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((e=>{if(e.recreate)throw new uE.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>Ck(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),Ck(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const l=o._cfg.contentUpgrade;if(l&&o._cfg.version>t){Pk(e,r),n._memoizedTables={},s=!0;let t=C_(c);u.del.forEach((e=>{t[e]=i[e]})),Tk(e,[e.Transaction.prototype]),Ik(e,[e.Transaction.prototype],d_(t),t),n.schema=t;const o=G_(l);let a;o&&hS();const f=KE.follow((()=>{if(a=l(n),a&&o){var e=dS.bind(null,null);a.then(e,e)}}));return a&&"function"==typeof a.then?KE.resolve(a):f.then((()=>a))}})),i.push((t=>{s&&BS||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t),Tk(e,[e.Transaction.prototype]),Ik(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return i.length?KE.resolve(i.shift()(n.idbtrans)).then(e):KE.resolve()}().then((()=>{var e,t;t=r,d_(e=a).forEach((n=>{t.db.objectStoreNames.contains(n)||Rk(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}(e,i/10,a,o)}}),o),u.onsuccess=iS((()=>{a=null;const n=e._novip.idbdb=u.result,i=O_(n.objectStoreNames);if(i.length>0)try{const r=n.transaction(1===(o=i).length?o[0]:o,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=Bk(0,t,n);e._storeNames=O_(t.objectStoreNames,0),Ik(e,[e._allTables],d_(r),r)}(e,n,r):(Lk(e,e._dbSchema,r),function(e,t){const n=Nk(Bk(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Pk(e,r)}catch(e){}var o;RS.push(e),n.onversionchange=iS((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=iS((t=>{e.on("close").fire(t)})),s&&function({indexedDB:e,IDBKeyRange:t},n){!Dk(e)&&n!==jS&&jk(e,t).put({name:n}).catch(hE)}(e._deps,c),r()}),o)}))))]).then((()=>(i(),t.onReadyBeingFired=[],KE.resolve(Mk((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(vE,hE);return t.onReadyBeingFired=[],KE.resolve(Mk((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),AS(n)})).finally((()=>{t.openComplete=!0,o()}))}function zk(e){var t=t=>e.next(t),n=i(t),r=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):p_(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function Kk(e,t,n){var r=arguments.length;if(r<2)throw new uE.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,L_(i),n]}function qk(e,t,n,r,i){return KE.resolve().then((()=>{const o=ME.transless||ME,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===sE.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>qk(e,t,n,null,i)))):AS(r)}const c=G_(i);let u;c&&hS();const l=KE.follow((()=>{if(u=i.call(a,a),u)if(c){var e=dS.bind(null,null);u.then(e,e)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=zk(u))}),s);return(u&&"function"==typeof u.then?KE.resolve(u).then((e=>a.active?e:AS(new uE.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):l.then((()=>u))).then((e=>(r&&a._resolve(),a._completion.then((()=>e))))).catch((e=>(a._reject(e),AS(e))))}))}function Vk(e,t,n){const r=p_(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const Wk={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function a(e,t,n){const r=Ok(e),s=i[r]=i[r]||[],c=null==e?0:"string"==typeof e?1:e.length,u=t>0,l={...n,isVirtual:u,keyTail:t,keyLength:c,extractKey:Sk(e),unique:!u&&n.unique};return s.push(l),l.isPrimaryKey||o.push(l),c>1&&a(2===c?e[0]:e.slice(0,c-1),t+1,n),s.sort(((e,t)=>e.keyTail-t.keyTail)),l}const s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(const e of r.indexes)a(e.keyPath,0,e);function c(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,i=n.keyTail,{type:1===r.type?2:r.type,lower:Vk(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Vk(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var r,i}const u={...n,schema:{...r,primaryKey:s,indexes:o,getIndexByKeyPath:function(e){const t=i[Ok(e)];return t&&t[0]}},count:e=>n.count(c(e)),query:e=>n.query(c(e)),openCursor(t){const{keyTail:r,isVirtual:i,keyLength:o}=t.query.index;return i?n.openCursor(c(t)).then((n=>n&&function(n){const i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(Vk(i,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,i){n.continuePrimaryKey(Vk(t,e.MAX_KEY,r),i)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:()=>n.value}});return i}(n))):n.openCursor(t)}};return u}}}};function Gk(e,t,n,r){return n=n||{},r=r||"",d_(e).forEach((i=>{if(m_(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){const e=z_(o);e!==z_(a)?n[r+i]=t[i]:"Object"===e?Gk(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),d_(t).forEach((i=>{m_(e,i)||(n[r+i]=t[i])})),n}const $k={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,i={...n,mutate(e){const i=ME.trans,{deleting:o,creating:a,updating:s}=i.table(t).hook;switch(e.type){case"add":if(a.fire===hE)break;return i._promise("readwrite",(()=>c(e)),!0);case"put":if(a.fire===hE&&s.fire===hE)break;return i._promise("readwrite",(()=>c(e)),!0);case"delete":if(o.fire===hE)break;return i._promise("readwrite",(()=>c(e)),!0);case"deleteRange":if(o.fire===hE)break;return i._promise("readwrite",(()=>function(e){return u(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function c(e){const t=ME.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((c=>{const u=i.map(((n,i)=>{const u=c[i],l={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(l,n,u,t);else if("add"===e.type||void 0===u){const o=a.fire.call(l,n,e.values[i],t);null==n&&null!=o&&(n=o,e.keys[i]=n,r.outbound||R_(e.values[i],r.keyPath,n))}else{const r=Gk(u,e.values[i]),o=s.fire.call(l,r,n,u,t);if(o){const t=e.values[i];Object.keys(o).forEach((e=>{m_(t,e)?t[e]=o[e]:R_(t,e,o[e])}))}}return l}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:o})=>{for(let r=0;r<i.length;++r){const o=n?n[r]:i[r],a=u[r];null==o?a.onerror&&a.onerror(t[r]):a.onsuccess&&a.onsuccess("put"===e.type&&c[r]?e.values[r]:o)}return{failures:t,results:n,numFailures:r,lastResult:o}})).catch((e=>(u.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function u(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((({result:n})=>c({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:n[n.length-1],lowerOpen:!0},i)))))}}};return i}})};function Yk(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)0===QS(t.keys[i],e[o])&&(r.push(n?M_(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}const Zk={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Yk(e.keys,e.trans._cache,"clone"===e.cache);return t?KE.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?M_(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Xk(e){return!("from"in e)}const Jk=function(e,t){if(!this){const t=new Jk;return e&&"d"in e&&y_(t,e),t}y_(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Qk(e,t,n){const r=QS(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Xk(e))return y_(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(QS(n,e.from)<0)return i?Qk(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},nA(e);if(QS(t,e.to)>0)return o?Qk(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},nA(e);QS(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),QS(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&eA(e,i),o&&a&&eA(e,o)}function eA(e,t){Xk(t)||function e(t,{from:n,to:r,l:i,r:o}){Qk(t,n,r),i&&e(t,i),o&&e(t,o)}(e,t)}function tA(e){let t=Xk(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&QS(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||QS(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function nA(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const t="r"===i?"l":"r",n={...e},r=e[i];e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],e[t]=n,n.d=rA(n)}e.d=rA(e)}function rA({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}w_(Jk.prototype,{add(e){return eA(this,e),this},addKey(e){return Qk(this,e,e),this},addKeys(e){return e.forEach((e=>Qk(this,e,e))),this},[K_](){return tA(this)}});const iA={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Jk(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:a}=o,{extractKey:s,outbound:c}=a,u={...i,mutate:e=>{const a=e.trans,s=a.mutatedParts||(a.mutatedParts={}),c=e=>{const n=`idb://${t}/${r}/${e}`;return s[n]||(s[n]=new Jk)},u=c(""),l=c(":dels"),{type:f}=e;let[h,d]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const p=e.trans._cache;return i.mutate(e).then((e=>{if(p_(h)){"delete"!==f&&(h=e.results),u.addKeys(h);const t=Yk(h,p);t||"add"===f||l.addKeys(h),(t||d)&&function(e,t,n,r){t.indexes.forEach((function(t){const i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&p_(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(n||r).forEach(((e,t)=>{const i=n&&o(n[t]),s=r&&o(r[t]);0!==QS(i,s)&&(null!=i&&a(i),null!=s&&a(s))}))}))}(c,o,t,d)}else if(h){const e={from:h.lower,to:h.upper};l.add(e),u.add(e)}else u.add(n),l.add(n),o.indexes.forEach((e=>c(e.name).add(n)));return e}))}},l=({query:{index:t,range:n}})=>{var r,i;return[t,new Jk(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(i=n.upper)&&void 0!==i?i:e.MAX_KEY)]},f={get:e=>[a,new Jk(e.key)],getMany:e=>[a,(new Jk).addKeys(e.keys)],count:l,query:l,openCursor:l};return d_(f).forEach((e=>{u[e]=function(o){const{subscr:a}=ME;if(a){const u=e=>{const n=`idb://${t}/${r}/${e}`;return a[n]||(a[n]=new Jk)},l=u(""),h=u(":dels"),[d,p]=f[e](o);if(u(d.name||"").add(p),!d.isPrimaryKey){if("count"!==e){const t="query"===e&&c&&o.values&&i.query({...o,values:!1});return i[e].apply(this,arguments).then((n=>{if("query"===e){if(c&&o.values)return t.then((({result:e})=>(l.addKeys(e),n)));const e=o.values?n.result.map(s):n.result;o.values?l.addKeys(e):h.addKeys(e)}else if("openCursor"===e){const e=n,t=o.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(t&&l.addKey(e.primaryKey),e.value)}})}return n}))}h.add(n)}}return i[e].apply(this,arguments)}})),u}}}};class oA{constructor(e,t){this._middlewares={},this.verno=0;const n=oA.dependencies;this._options=t={addons:oA.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:hE,dbReadyPromise:null,cancelOpen:hE,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new KE((e=>{i.dbReadyResolve=e})),i.openCanceller=new KE(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=qS(this,"populate","blocked","versionchange","close",{ready:[vE,hE]}),this.on.ready.subscribe=P_(this.on.ready.subscribe,(e=>(t,n)=>{oA.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||KE.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(o=this,VS(nk.prototype,(function(e,t){this.db=o;let n=FS,r=null;if(t)try{n=t()}catch(e){r=e}const i=e._ctx,a=i.table,s=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==dE?s:null}}))),this.Table=function(e){return VS(KS.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:qS(null,{creating:[gE,hE],reading:[pE,dE],updating:[mE,hE],deleting:[bE,hE]})}))}(this),this.Transaction=function(e){return VS(mk.prototype,(function(t,n,r,i,o){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=qS(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new KE(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),AS(e)}))}))}(this),this.Version=function(e){return VS(Uk.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return VS(hk.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const i=e._deps.indexedDB;if(!i)throw new uE.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=Ek(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),RS.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Wk),this.use($k),this.use(iA),this.use(Zk),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new uE.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new uE.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(xk),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ME.letThrough||this._vip)?e():new KE(((e,t)=>{if(this._state.openComplete)return t(new uE.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new uE.DatabaseClosed);this.open().catch(hE)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==n?10:n,name:r}),i.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return Fk(this)}_close(){const e=this._state,t=RS.indexOf(this);if(t>=0&&RS.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new KE((t=>{e.dbReadyResolve=t})),e.openCanceller=new KE(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new uE.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new KE(((n,r)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=iS((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!Dk(e)&&n!==jS&&jk(e,t).delete(n).catch(hE)}(this._deps,this.name),n()})),e.onerror=dk(r),e.onblocked=this._fireOnBlocked};if(e)throw new uE.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return d_(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Kk.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=ME.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const i=-1!==e.indexOf("?");let o,a;e=e.replace("!","").replace("?","");try{if(a=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===DS)o=DS;else{if("rw"!=e&&e!=MS)throw new uE.InvalidArgument("Invalid transaction mode: "+e);o=MS}if(r){if(r.mode===DS&&o===MS){if(!i)throw new uE.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new uE.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):AS(e)}const s=qk.bind(null,this,o,a,r,n);return r?r._promise(o,s,"lock"):ME.trans?wS(ME.transless,(()=>this._whenReady(s))):this._whenReady(s)}table(e){if(!m_(this._allTables,e))throw new uE.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const aA="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class sA{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[aA](){return this}}function cA(e,t){return d_(t).forEach((n=>{eA(e[n]||(e[n]=new Jk),t[n])})),e}let uA;try{uA={indexedDB:h_.indexedDB||h_.mozIndexedDB||h_.webkitIndexedDB||h_.msIndexedDB,IDBKeyRange:h_.IDBKeyRange||h_.webkitIDBKeyRange}}catch(h_){uA={indexedDB:null,IDBKeyRange:null}}const lA=oA;function fA(e){let t=hA;try{hA=!0,bk.storagemutated.fire(e)}finally{hA=t}}w_(lA,{...fE,delete:e=>new lA(e,{addons:[]}).delete(),exists:e=>new lA(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return Dk(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==jS)))):jk(e,t).toCollection().primaryKeys()}(lA.dependencies).then(e)}catch(e){return AS(new uE.MissingAPI)}},defineClass:()=>function(e){y_(this,e)},ignoreTransaction:e=>ME.trans?wS(ME.transless,e):e(),vip:Mk,async:function(e){return function(){try{var t=zk(e.apply(this,arguments));return t&&"function"==typeof t.then?t:KE.resolve(t)}catch(e){return AS(e)}}},spawn:function(e,t,n){try{var r=zk(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:KE.resolve(r)}catch(e){return AS(e)}},currentTransaction:{get:()=>ME.trans||null},waitFor:function(e,t){const n=KE.resolve("function"==typeof e?lA.ignoreTransaction(e):e).timeout(t||6e4);return ME.trans?ME.trans.waitFor(n):n},Promise:KE,debug:{get:()=>$_,set:e=>{Y_(e,"dexie"===e?()=>!0:US)}},derive:E_,extend:y_,props:w_,override:P_,Events:qS,on:bk,liveQuery:function(e){let t,n=!1;const r=new sA((r=>{const i=G_(e);let o=!1,a={},s={};const c={get closed(){return o},unsubscribe:()=>{o=!0,bk.storagemutated.unsubscribe(h)}};r.start&&r.start(c);let u=!1,l=!1;function f(){return d_(s).some((e=>a[e]&&function(e,t){const n=tA(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=tA(e);let a=o.next(i.from),s=a.value;for(;!r.done&&!a.done;){if(QS(s.from,i.to)<=0&&QS(s.to,i.from)>=0)return!0;QS(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}(a[e],s[e])))}const h=e=>{cA(a,e),f()&&d()},d=()=>{if(u||o)return;a={};const p={},y=function(t){i&&hS();const n=()=>fS(e,{subscr:t,trans:null}),r=ME.trans?wS(ME.transless,n):n();return i&&r.then(dS,dS),r}(p);l||(bk(yk,h),l=!0),u=!0,Promise.resolve(y).then((e=>{n=!0,t=e,u=!1,o||(f()?d():(a={},s=p,r.next&&r.next(e)))}),(e=>{u=!1,n=!1,r.error&&r.error(e),c.unsubscribe()}))};return d(),c}));return r.hasValue=()=>n,r.getValue=()=>t,r},extendObservabilitySet:cA,getByKeyPath:N_,setByKeyPath:R_,delByKeyPath:function(e,t){"string"==typeof t?R_(e,t,void 0):"length"in t&&[].map.call(t,(function(t){R_(e,t,void 0)}))},shallowClone:C_,deepClone:M_,getObjectDiff:Gk,cmp:QS,asap:T_,minKey:TS,addons:[],connections:RS,errnames:sE,dependencies:uA,semVer:PS,version:PS.split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),lA.maxKey=Ek(lA.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(bk(yk,(e=>{if(!hA){let t;CS?(t=document.createEvent("CustomEvent"),t.initCustomEvent(gk,!0,!0,e)):t=new CustomEvent(gk,{detail:e}),hA=!0,dispatchEvent(t),hA=!1}})),addEventListener(gk,(({detail:e})=>{hA||fA(e)})));let hA=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(gk);"function"==typeof e.unref&&e.unref(),bk(yk,(t=>{hA||e.postMessage(t)})),e.onmessage=e=>{e.data&&fA(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){bk(yk,(e=>{try{hA||("undefined"!=typeof localStorage&&localStorage.setItem(gk,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:gk,changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if(e.key===gk){const t=JSON.parse(e.newValue);t&&fA(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&e.type===gk&&fA(e.changedParts)}))}KE.rejectionMapper=function(e,t){if(!e||e instanceof rE||e instanceof TypeError||e instanceof SyntaxError||!e.name||!lE[e.name])return e;var n=new lE[e.name](t||e.message,e);return"stack"in e&&__(n,"stack",{get:function(){return this.inner.stack}}),n},Y_($_,US);const dA="A request was aborted, for example through a call to IDBTransaction.abort.",pA="A mutation operation in the transaction failed because a constraint was not satisfied. For example, an object such as an object store or index already exists and a request attempted to create a new one.",yA="The data being stored could not be cloned by the internal structured cloning algorithm.",gA="Data provided to an operation does not meet requirements.",bA="An invalid operation was performed on an object. For example transaction creation attempt was made, but an empty scope was provided.",mA="An operation was called on an object on which it is not allowed or at a time when it is not allowed. Also occurs if a request is made on a source object that has been deleted or removed. Use TransactionInactiveError or ReadOnlyError when possible, as they are more specific variations of InvalidStateError.",wA="The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened.",vA='The mutating operation was attempted in a "readonly" transaction.',_A="A request was placed against a transaction which is currently not active, or which is finished.",EA="An attempt was made to open a database using a lower version than the existing version.";class SA extends Error{constructor(e=dA){super(),this.name="AbortError",this.message=e}}class kA extends Error{constructor(e=pA){super(),this.name="ConstraintError",this.message=e}}class AA extends Error{constructor(e=yA){super(),this.name="DataCloneError",this.message=e}}class OA extends Error{constructor(e=gA){super(),this.name="DataError",this.message=e}}class PA extends Error{constructor(e=bA){super(),this.name="InvalidAccessError",this.message=e}}class IA extends Error{constructor(e=mA){super(),this.name="InvalidStateError",this.message=e}}class TA extends Error{constructor(e=wA){super(),this.name="NotFoundError",this.message=e}}class xA extends Error{constructor(e=vA){super(),this.name="ReadOnlyError",this.message=e}}class NA extends Error{constructor(e=_A){super(),this.name="TransactionInactiveError",this.message=e}}class RA extends Error{constructor(e=EA){super(),this.name="VersionError",this.message=e}}const CA=(e,t)=>{if("number"==typeof e){if(isNaN(e))throw new OA;return e}if(e instanceof Date){const t=e.valueOf();if(isNaN(t))throw new OA;return new Date(t)}if("string"==typeof e)return e;if(e instanceof ArrayBuffer||"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))return e instanceof ArrayBuffer?new Uint8Array(e).buffer:new Uint8Array(e.buffer).buffer;if(Array.isArray(e)){if(void 0===t)t=new Set;else if(t.has(e))throw new OA;t.add(e);const n=[];for(let r=0;r<e.length;r++){if(!e.hasOwnProperty(r))throw new OA;const i=e[r],o=CA(i,t);n.push(o)}return n}throw new OA},BA=CA,LA=e=>{if("number"==typeof e)return"Number";if(e instanceof Date)return"Date";if(Array.isArray(e))return"Array";if("string"==typeof e)return"String";if(e instanceof ArrayBuffer)return"Binary";throw new OA},UA=(e,t)=>{if(void 0===t)throw new TypeError;e=BA(e),t=BA(t);const n=LA(e),r=LA(t);if(n!==r)return"Array"===n?1:("Binary"!==n||"String"!==r&&"Date"!==r&&"Number"!==r)&&("String"!==n||"Date"!==r&&"Number"!==r)?"Date"===n&&"Number"===r?1:-1:1;if("Binary"===n&&(e=new Uint8Array(e),t=new Uint8Array(t)),"Array"===n||"Binary"===n){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=UA(e[r],t[r]);if(0!==n)return n}return e.length>t.length?1:e.length<t.length?-1:0}if("Date"===n){if(e.getTime()===t.getTime())return 0}else if(e===t)return 0;return e>t?1:-1},jA=UA;class DA{static only(e){if(0===arguments.length)throw new TypeError;return e=BA(e),new DA(e,e,!1,!1)}static lowerBound(e,t=!1){if(0===arguments.length)throw new TypeError;return e=BA(e),new DA(e,void 0,t,!0)}static upperBound(e,t=!1){if(0===arguments.length)throw new TypeError;return e=BA(e),new DA(void 0,e,!0,t)}static bound(e,t,n=!1,r=!1){if(arguments.length<2)throw new TypeError;const i=jA(e,t);if(1===i||0===i&&(n||r))throw new OA;return e=BA(e),t=BA(t),new DA(e,t,n,r)}constructor(e,t,n,r){this.lower=e,this.upper=t,this.lowerOpen=n,this.upperOpen=r}includes(e){if(0===arguments.length)throw new TypeError;if(e=BA(e),void 0!==this.lower){const t=jA(this.lower,e);if(1===t||0===t&&this.lowerOpen)return!1}if(void 0!==this.upper){const t=jA(this.upper,e);if(-1===t||0===t&&this.upperOpen)return!1}return!0}toString(){return"[object IDBKeyRange]"}}const MA=DA,HA=(e,t)=>{if(Array.isArray(e)){const n=[];for(let r of e)null!=r&&"string"!=typeof r&&r.toString&&(r=r.toString()),n.push(BA(HA(r,t)));return n}if(""===e)return t;let n=e,r=t;for(;null!==n;){let e;const t=n.indexOf(".");if(t>=0?(e=n.slice(0,t),n=n.slice(t+1)):(e=n,n=null),null==r||!r.hasOwnProperty(e))return;r=r[e]}return r},FA=HA;var zA=a(63694);const KA=e=>{if("undefined"!=typeof structuredClone)return structuredClone(e);try{return zA(e)}catch(e){throw new AA}},qA=e=>e.source instanceof dO?e.source:e.source.objectStore,VA=(e,t,n)=>{let r=void 0!==e?e.lower:void 0,i=void 0!==e?e.upper:void 0;for(const e of t)void 0!==e&&(void 0!==r&&1!==jA(r,e)||(r=e));for(const e of n)void 0!==e&&(void 0!==i&&-1!==jA(i,e)||(i=e));return void 0!==r&&void 0!==i?MA.bound(r,i):void 0!==r?MA.lowerBound(r):void 0!==i?MA.upperBound(i):void 0};const WA=class{_gotValue=!1;_position=void 0;_objectStorePosition=void 0;_keyOnly=!1;_key=void 0;_primaryKey=void 0;constructor(e,t,n="next",r,i=!1){this._range=t,this._source=e,this._direction=n,this._request=r,this._keyOnly=i}get source(){return this._source}set source(e){}get request(){return this._request}set request(e){}get direction(){return this._direction}set direction(e){}get key(){return this._key}set key(e){}get primaryKey(){return this._primaryKey}set primaryKey(e){}_iterate(e,t){const n=this.source instanceof dO,r=this.source instanceof dO?this.source._rawObjectStore.records:this.source._rawIndex.records;let i,o;if("next"===this.direction){const o=VA(this._range,[e,this._position],[]);for(const a of r.values(o)){const r=void 0!==e?jA(a.key,e):void 0,o=void 0!==this._position?jA(a.key,this._position):void 0;if(void 0===e||-1!==r){if(void 0!==t){if(-1===r)continue;const e=jA(a.value,t);if(0===r&&-1===e)continue}if(void 0===this._position||!n||1===o){if(void 0!==this._position&&!n){if(-1===o)continue;if(0===o&&1!==jA(a.value,this._objectStorePosition))continue}if(void 0===this._range||this._range.includes(a.key)){i=a;break}}}}}else if("nextunique"===this.direction){const t=VA(this._range,[e,this._position],[]);for(const n of r.values(t))if((void 0===e||-1!==jA(n.key,e))&&(void 0===this._position||1===jA(n.key,this._position))&&(void 0===this._range||this._range.includes(n.key))){i=n;break}}else if("prev"===this.direction){const o=VA(this._range,[],[e,this._position]);for(const a of r.values(o,"prev")){const r=void 0!==e?jA(a.key,e):void 0,o=void 0!==this._position?jA(a.key,this._position):void 0;if(void 0===e||1!==r){if(void 0!==t){if(1===r)continue;const e=jA(a.value,t);if(0===r&&1===e)continue}if(void 0===this._position||!n||-1===o){if(void 0!==this._position&&!n){if(1===o)continue;if(0===o&&-1!==jA(a.value,this._objectStorePosition))continue}if(void 0===this._range||this._range.includes(a.key)){i=a;break}}}}}else if("prevunique"===this.direction){let t;const n=VA(this._range,[],[e,this._position]);for(const i of r.values(n,"prev"))if((void 0===e||1!==jA(i.key,e))&&(void 0===this._position||-1===jA(i.key,this._position))&&(void 0===this._range||this._range.includes(i.key))){t=i;break}t&&(i=r.get(t.key))}if(i){if(this._position=i.key,n||(this._objectStorePosition=i.value),this._key=i.key,n)this._primaryKey=KA(i.key),this._keyOnly||"[object IDBCursorWithValue]"!==this.toString()||(this.value=KA(i.value));else if(this._primaryKey=KA(i.value),!this._keyOnly&&"[object IDBCursorWithValue]"===this.toString()){if(this.source instanceof dO)throw new Error("This should never happen");const e=this.source.objectStore._rawObjectStore.getValue(i.value);this.value=KA(e)}this._gotValue=!0,o=this}else this._key=void 0,n||(this._objectStorePosition=void 0),this._keyOnly||"[object IDBCursorWithValue]"!==this.toString()||(this.value=void 0),o=null;return o}update(e){if(void 0===e)throw new TypeError;const t=qA(this),n=this.source.hasOwnProperty("_rawIndex")?this.primaryKey:this._position,r=t.transaction;if("active"!==r._state)throw new NA;if("readonly"===r.mode)throw new xA;if(t._rawObjectStore.deleted)throw new IA;if(!(this.source instanceof dO)&&this.source._rawIndex.deleted)throw new IA;if(!this._gotValue||!this.hasOwnProperty("value"))throw new IA;const i=KA(e);if(null!==t.keyPath){let e;try{e=FA(t.keyPath,i)}catch(e){}if(0!==jA(e,n))throw new OA}const o={key:n,value:i};return r._execRequestAsync({operation:t._rawObjectStore.storeRecord.bind(t._rawObjectStore,o,!1,r._rollbackLog),source:this})}advance(e){if(!Number.isInteger(e)||e<=0)throw new TypeError;const t=qA(this),n=t.transaction;if("active"!==n._state)throw new NA;if(t._rawObjectStore.deleted)throw new IA;if(!(this.source instanceof dO)&&this.source._rawIndex.deleted)throw new IA;if(!this._gotValue)throw new IA;this._request&&(this._request.readyState="pending"),n._execRequestAsync({operation:()=>{let t;for(let n=0;n<e&&(t=this._iterate(),t);n++);return t},request:this._request,source:this.source}),this._gotValue=!1}continue(e){const t=qA(this),n=t.transaction;if("active"!==n._state)throw new NA;if(t._rawObjectStore.deleted)throw new IA;if(!(this.source instanceof dO)&&this.source._rawIndex.deleted)throw new IA;if(!this._gotValue)throw new IA;if(void 0!==e){e=BA(e);const t=jA(e,this._position);if(t<=0&&("next"===this.direction||"nextunique"===this.direction)||t>=0&&("prev"===this.direction||"prevunique"===this.direction))throw new OA}this._request&&(this._request.readyState="pending"),n._execRequestAsync({operation:this._iterate.bind(this,e),request:this._request,source:this.source}),this._gotValue=!1}continuePrimaryKey(e,t){const n=qA(this),r=n.transaction;if("active"!==r._state)throw new NA;if(n._rawObjectStore.deleted)throw new IA;if(!(this.source instanceof dO)&&this.source._rawIndex.deleted)throw new IA;if(this.source instanceof dO||"next"!==this.direction&&"prev"!==this.direction)throw new PA;if(!this._gotValue)throw new IA;if(void 0===e||void 0===t)throw new OA;e=BA(e);const i=jA(e,this._position);if(-1===i&&"next"===this.direction||1===i&&"prev"===this.direction)throw new OA;const o=jA(t,this._objectStorePosition);if(0===i&&(o<=0&&"next"===this.direction||o>=0&&"prev"===this.direction))throw new OA;this._request&&(this._request.readyState="pending"),r._execRequestAsync({operation:this._iterate.bind(this,e,t),request:this._request,source:this.source}),this._gotValue=!1}delete(){const e=qA(this),t=this.source.hasOwnProperty("_rawIndex")?this.primaryKey:this._position,n=e.transaction;if("active"!==n._state)throw new NA;if("readonly"===n.mode)throw new xA;if(e._rawObjectStore.deleted)throw new IA;if(!(this.source instanceof dO)&&this.source._rawIndex.deleted)throw new IA;if(!this._gotValue||!this.hasOwnProperty("value"))throw new IA;return n._execRequestAsync({operation:e._rawObjectStore.deleteRecord.bind(e._rawObjectStore,t,n._rollbackLog),source:this})}toString(){return"[object IDBCursor]"}};const GA=class extends WA{value=void 0;constructor(e,t,n,r){super(e,t,n,r)}toString(){return"[object IDBCursorWithValue]"}},$A=(e,t)=>e.immediatePropagationStopped||e.eventPhase===e.CAPTURING_PHASE&&!1===t.capture||e.eventPhase===e.BUBBLING_PHASE&&!0===t.capture,YA=(e,t)=>{e.currentTarget=t;for(const n of t.listeners.slice())e.type!==n.type||$A(e,n)||n.callback.call(e.currentTarget,e);const n={abort:"onabort",blocked:"onblocked",complete:"oncomplete",error:"onerror",success:"onsuccess",upgradeneeded:"onupgradeneeded",versionchange:"onversionchange"}[e.type];if(void 0===n)throw new Error(`Unknown event type: "${e.type}"`);const r=e.currentTarget[n];if(r){const t={callback:r,capture:!1,type:e.type};$A(e,t)||t.callback.call(e.currentTarget,e)}};const ZA=class{listeners=[];addEventListener(e,t,n=!1){this.listeners.push({callback:t,capture:n,type:e})}removeEventListener(e,t,n=!1){const r=this.listeners.findIndex((r=>r.type===e&&r.callback===t&&r.capture===n));this.listeners.splice(r,1)}dispatchEvent(e){if(e.dispatched||!e.initialized)throw new IA("The object is in an invalid state.");e.isTrusted=!1,e.dispatched=!0,e.target=this,e.eventPhase=e.CAPTURING_PHASE;for(const t of e.eventPath)e.propagationStopped||YA(e,t);if(e.eventPhase=e.AT_TARGET,e.propagationStopped||YA(e,e.target),e.bubbles){e.eventPath.reverse(),e.eventPhase=e.BUBBLING_PHASE;for(const t of e.eventPath)e.propagationStopped||YA(e,t)}return e.dispatched=!1,e.eventPhase=e.NONE,e.currentTarget=null,!e.canceled}};const XA=class extends ZA{_result=null;_error=null;source=null;transaction=null;readyState="pending";onsuccess=null;onerror=null;get error(){if("pending"===this.readyState)throw new IA;return this._error}set error(e){this._error=e}get result(){if("pending"===this.readyState)throw new IA;return this._result}set result(e){this._result=e}toString(){return"[object IDBRequest]"}},JA=(e,t)=>{const n="unsigned long"===t?4294967295:9007199254740991;if(isNaN(e)||e<0||e>n)throw new TypeError;if(e>=0)return Math.floor(e)};const QA=class extends Array{contains(e){for(const t of this)if(e===t)return!0;return!1}item(e){return e<0||e>=this.length?null:this[e]}_push(...e){return Array.prototype.push.call(this,...e)}_sort(...e){return Array.prototype.sort.call(this,...e)}},eO=(e,t=!1)=>{if(e instanceof MA)return e;if(null==e){if(t)throw new OA;return new MA(void 0,void 0,!1,!1)}const n=BA(e);return MA.only(n)},tO=e=>{if(e._rawIndex.deleted||e.objectStore._rawObjectStore.deleted)throw new IA;if("active"!==e.objectStore.transaction._state)throw new NA};const nO=class{constructor(e,t){this._rawIndex=t,this._name=t.name,this.objectStore=e,this.keyPath=t.keyPath,this.multiEntry=t.multiEntry,this.unique=t.unique}get name(){return this._name}set name(e){const t=this.objectStore.transaction;if(!t.db._runningVersionchangeTransaction)throw new IA;if("active"!==t._state)throw new NA;if(this._rawIndex.deleted||this.objectStore._rawObjectStore.deleted)throw new IA;if((e=String(e))===this._name)return;if(this.objectStore.indexNames.contains(e))throw new kA;const n=this._name,r=[...this.objectStore.indexNames];this._name=e,this._rawIndex.name=e,this.objectStore._indexesCache.delete(n),this.objectStore._indexesCache.set(e,this),this.objectStore._rawObjectStore.rawIndexes.delete(n),this.objectStore._rawObjectStore.rawIndexes.set(e,this._rawIndex),this.objectStore.indexNames=new QA(...Array.from(this.objectStore._rawObjectStore.rawIndexes.keys()).filter((e=>{const t=this.objectStore._rawObjectStore.rawIndexes.get(e);return t&&!t.deleted})).sort()),t._rollbackLog.push((()=>{this._name=n,this._rawIndex.name=n,this.objectStore._indexesCache.delete(e),this.objectStore._indexesCache.set(n,this),this.objectStore._rawObjectStore.rawIndexes.delete(e),this.objectStore._rawObjectStore.rawIndexes.set(n,this._rawIndex),this.objectStore.indexNames=new QA(...r)}))}openCursor(e,t){tO(this),null===e&&(e=void 0),void 0===e||e instanceof MA||(e=MA.only(BA(e)));const n=new XA;n.source=this,n.transaction=this.objectStore.transaction;const r=new GA(this,e,t,n);return this.objectStore.transaction._execRequestAsync({operation:r._iterate.bind(r),request:n,source:this})}openKeyCursor(e,t){tO(this),null===e&&(e=void 0),void 0===e||e instanceof MA||(e=MA.only(BA(e)));const n=new XA;n.source=this,n.transaction=this.objectStore.transaction;const r=new WA(this,e,t,n,!0);return this.objectStore.transaction._execRequestAsync({operation:r._iterate.bind(r),request:n,source:this})}get(e){return tO(this),e instanceof MA||(e=BA(e)),this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getValue.bind(this._rawIndex,e),source:this})}getAll(e,t){arguments.length>1&&void 0!==t&&(t=JA(t,"unsigned long")),tO(this);const n=eO(e);return this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getAllValues.bind(this._rawIndex,n,t),source:this})}getKey(e){return tO(this),e instanceof MA||(e=BA(e)),this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getKey.bind(this._rawIndex,e),source:this})}getAllKeys(e,t){arguments.length>1&&void 0!==t&&(t=JA(t,"unsigned long")),tO(this);const n=eO(e);return this.objectStore.transaction._execRequestAsync({operation:this._rawIndex.getAllKeys.bind(this._rawIndex,n,t),source:this})}count(e){return tO(this),null===e&&(e=void 0),void 0===e||e instanceof MA||(e=MA.only(BA(e))),this.objectStore.transaction._execRequestAsync({operation:()=>{let t=0;const n=new WA(this,e);for(;null!==n._iterate();)t+=1;return t},source:this})}toString(){return"[object IDBIndex]"}},rO=(e,t)=>{if(Array.isArray(e))throw new Error("The key paths used in this section are always strings and never sequences, since it is not possible to create a object store which has a key generator and also has a key path that is a sequence.");const n=e.split(".");if(0===n.length)throw new Error("Assert: identifiers is not empty");n.pop();for(const e of n){if("object"!=typeof t&&!Array.isArray(t))return!1;if(!t.hasOwnProperty(e))return!0;t=t[e]}return"object"==typeof t||Array.isArray(t)};function iO(e,t){let n,r=0,i=e.length;for(;r<i;)n=r+i>>>1,jA(e[n].key,t)<0?r=n+1:i=n;return r}function oO(e,t){const n=iO(e,t),r=e[n];return r&&0===jA(r.key,t)?n:-1}function aO(e,t){const n=void 0===t.lower?0:iO(e,t.lower),r=void 0===t.upper?e.length-1:iO(e,t.upper);for(let i=n;i<=r;i++){const n=e[i];if(n&&t.includes(n.key))return i}return-1}const sO=class{records=[];get(e){return e instanceof MA?(t=this.records)[aO(t,e)]:function(e,t){return e[oO(e,t)]}(this.records,e);var t}add(e){let t;if(0===this.records.length)t=0;else if(t=function(e,t){const n=iO(e,t),r=e[n];return r&&jA(r.key,t)>=0?n:-1}(this.records,e.key),-1===t)t=this.records.length;else for(;t<this.records.length&&0===jA(this.records[t].key,e.key)&&-1===jA(this.records[t].value,e.value);)t+=1;this.records.splice(t,0,e)}delete(e){const t=[],n=e instanceof MA;for(;;){const r=n?aO(this.records,e):oO(this.records,e);if(-1===r)break;t.push(this.records[r]),this.records.splice(r,1)}return t}deleteByValue(e){const t=e instanceof MA?e:MA.only(e),n=[];return this.records=this.records.filter((e=>{const r=t.includes(e.value);return r&&n.push(e),!r})),n}clear(){const e=this.records.slice();return this.records=[],e}values(e,t="next"){return{[Symbol.iterator]:()=>{let n;if("next"===t){if(n=0,void 0!==e&&void 0!==e.lower)for(;void 0!==this.records[n];){const t=jA(this.records[n].key,e.lower);if(1===t||0===t&&!e.lowerOpen)break;n+=1}}else if(n=this.records.length-1,void 0!==e&&void 0!==e.upper)for(;void 0!==this.records[n];){const t=jA(this.records[n].key,e.upper);if(-1===t||0===t&&!e.upperOpen)break;n-=1}return{next:()=>{let r,i;if("next"===t){if(i=this.records[n],r=n>=this.records.length,n+=1,!r&&void 0!==e&&void 0!==e.upper){const t=jA(i.key,e.upper);r=1===t||0===t&&e.upperOpen,r&&(i=void 0)}}else if(i=this.records[n],r=n<0,n-=1,!r&&void 0!==e&&void 0!==e.lower){const t=jA(i.key,e.lower);r=-1===t||0===t&&e.lowerOpen,r&&(i=void 0)}return{done:r,value:i}}}}}}};const cO=class{deleted=!1;initialized=!1;records=new sO;constructor(e,t,n,r,i){this.rawObjectStore=e,this.name=t,this.keyPath=n,this.multiEntry=r,this.unique=i}getKey(e){const t=this.records.get(e);return void 0!==t?t.value:void 0}getAllKeys(e,t){void 0!==t&&0!==t||(t=1/0);const n=[];for(const r of this.records.values(e))if(n.push(KA(r.value)),n.length>=t)break;return n}getValue(e){const t=this.records.get(e);return void 0!==t?this.rawObjectStore.getValue(t.value):void 0}getAllValues(e,t){void 0!==t&&0!==t||(t=1/0);const n=[];for(const r of this.records.values(e))if(n.push(this.rawObjectStore.getValue(r.value)),n.length>=t)break;return n}storeRecord(e){let t;try{t=FA(this.keyPath,e.value)}catch(e){if("DataError"===e.name)return;throw e}if(this.multiEntry&&Array.isArray(t)){const e=[];for(const n of t)if(e.indexOf(n)<0)try{e.push(BA(n))}catch(e){}t=e}else try{BA(t)}catch(e){return}if(this.multiEntry&&Array.isArray(t)){if(this.unique)for(const e of t){if(this.records.get(e))throw new kA}}else if(this.unique){if(this.records.get(t))throw new kA}if(this.multiEntry&&Array.isArray(t))for(const n of t)this.records.add({key:n,value:e.key});else this.records.add({key:t,value:e.key})}initialize(e){if(this.initialized)throw new Error("Index already initialized");e._execRequestAsync({operation:()=>{try{for(const e of this.rawObjectStore.records.values())this.storeRecord(e);this.initialized=!0}catch(t){e._abort(t.name)}},source:null})}},uO=(e,t)=>{if(null==e||"string"==typeof e||!e.toString||"array"!==t&&Array.isArray(e)||(e=e.toString()),"string"==typeof e){if(""===e&&"string"!==t)return;try{const t=/^(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC])(?:[\$0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC])*$/;if(e.length>=1&&t.test(e))return}catch(e){throw new SyntaxError(e.message)}if(e.indexOf(" ")>=0)throw new SyntaxError("The keypath argument contains an invalid key path (no spaces allowed).")}if(Array.isArray(e)&&e.length>0){if(t)throw new SyntaxError("The keypath argument contains an invalid key path (nested arrays).");for(const t of e)uO(t,"array")}else{if(!("string"==typeof e&&e.indexOf(".")>=0))throw new SyntaxError;e=e.split(".");for(const t of e)uO(t,"string")}},lO=uO,fO=e=>{if(e._rawObjectStore.deleted)throw new IA;if("active"!==e.transaction._state)throw new NA},hO=(e,t,n)=>{if(fO(e),"readonly"===e.transaction.mode)throw new xA;if(null!==e.keyPath&&void 0!==n)throw new OA;const r=KA(t);if(null!==e.keyPath){const t=FA(e.keyPath,r);if(void 0!==t)BA(t);else{if(!e._rawObjectStore.keyGenerator)throw new OA;if(!rO(e.keyPath,r))throw new OA}}if(null===e.keyPath&&null===e._rawObjectStore.keyGenerator&&void 0===n)throw new OA;return void 0!==n&&(n=BA(n)),{key:n,value:r}};const dO=class{_indexesCache=new Map;constructor(e,t){this._rawObjectStore=t,this._name=t.name,this.keyPath=t.keyPath,this.autoIncrement=t.autoIncrement,this.transaction=e,this.indexNames=new QA(...Array.from(t.rawIndexes.keys()).sort())}get name(){return this._name}set name(e){const t=this.transaction;if(!t.db._runningVersionchangeTransaction)throw new IA;if(fO(this),(e=String(e))===this._name)return;if(this._rawObjectStore.rawDatabase.rawObjectStores.has(e))throw new kA;const n=this._name,r=[...t.db.objectStoreNames];this._name=e,this._rawObjectStore.name=e,this.transaction._objectStoresCache.delete(n),this.transaction._objectStoresCache.set(e,this),this._rawObjectStore.rawDatabase.rawObjectStores.delete(n),this._rawObjectStore.rawDatabase.rawObjectStores.set(e,this._rawObjectStore),t.db.objectStoreNames=new QA(...Array.from(this._rawObjectStore.rawDatabase.rawObjectStores.keys()).filter((e=>{const t=this._rawObjectStore.rawDatabase.rawObjectStores.get(e);return t&&!t.deleted})).sort());const i=new Set(t._scope),o=[...t.objectStoreNames];this.transaction._scope.delete(n),t._scope.add(e),t.objectStoreNames=new QA(...Array.from(t._scope).sort()),t._rollbackLog.push((()=>{this._name=n,this._rawObjectStore.name=n,this.transaction._objectStoresCache.delete(e),this.transaction._objectStoresCache.set(n,this),this._rawObjectStore.rawDatabase.rawObjectStores.delete(e),this._rawObjectStore.rawDatabase.rawObjectStores.set(n,this._rawObjectStore),t.db.objectStoreNames=new QA(...r),t._scope=i,t.objectStoreNames=new QA(...o)}))}put(e,t){if(0===arguments.length)throw new TypeError;const n=hO(this,e,t);return this.transaction._execRequestAsync({operation:this._rawObjectStore.storeRecord.bind(this._rawObjectStore,n,!1,this.transaction._rollbackLog),source:this})}add(e,t){if(0===arguments.length)throw new TypeError;const n=hO(this,e,t);return this.transaction._execRequestAsync({operation:this._rawObjectStore.storeRecord.bind(this._rawObjectStore,n,!0,this.transaction._rollbackLog),source:this})}delete(e){if(0===arguments.length)throw new TypeError;if(fO(this),"readonly"===this.transaction.mode)throw new xA;return e instanceof MA||(e=BA(e)),this.transaction._execRequestAsync({operation:this._rawObjectStore.deleteRecord.bind(this._rawObjectStore,e,this.transaction._rollbackLog),source:this})}get(e){if(0===arguments.length)throw new TypeError;return fO(this),e instanceof MA||(e=BA(e)),this.transaction._execRequestAsync({operation:this._rawObjectStore.getValue.bind(this._rawObjectStore,e),source:this})}getAll(e,t){arguments.length>1&&void 0!==t&&(t=JA(t,"unsigned long")),fO(this);const n=eO(e);return this.transaction._execRequestAsync({operation:this._rawObjectStore.getAllValues.bind(this._rawObjectStore,n,t),source:this})}getKey(e){if(0===arguments.length)throw new TypeError;return fO(this),e instanceof MA||(e=BA(e)),this.transaction._execRequestAsync({operation:this._rawObjectStore.getKey.bind(this._rawObjectStore,e),source:this})}getAllKeys(e,t){arguments.length>1&&void 0!==t&&(t=JA(t,"unsigned long")),fO(this);const n=eO(e);return this.transaction._execRequestAsync({operation:this._rawObjectStore.getAllKeys.bind(this._rawObjectStore,n,t),source:this})}clear(){if(fO(this),"readonly"===this.transaction.mode)throw new xA;return this.transaction._execRequestAsync({operation:this._rawObjectStore.clear.bind(this._rawObjectStore,this.transaction._rollbackLog),source:this})}openCursor(e,t){fO(this),null===e&&(e=void 0),void 0===e||e instanceof MA||(e=MA.only(BA(e)));const n=new XA;n.source=this,n.transaction=this.transaction;const r=new GA(this,e,t,n);return this.transaction._execRequestAsync({operation:r._iterate.bind(r),request:n,source:this})}openKeyCursor(e,t){fO(this),null===e&&(e=void 0),void 0===e||e instanceof MA||(e=MA.only(BA(e)));const n=new XA;n.source=this,n.transaction=this.transaction;const r=new WA(this,e,t,n,!0);return this.transaction._execRequestAsync({operation:r._iterate.bind(r),request:n,source:this})}createIndex(e,t,n={}){if(arguments.length<2)throw new TypeError;const r=void 0!==n.multiEntry&&n.multiEntry,i=void 0!==n.unique&&n.unique;if("versionchange"!==this.transaction.mode)throw new IA;if(fO(this),this.indexNames.contains(e))throw new kA;if(lO(t),Array.isArray(t)&&r)throw new PA;const o=[...this.indexNames];this.transaction._rollbackLog.push((()=>{const t=this._rawObjectStore.rawIndexes.get(e);t&&(t.deleted=!0),this.indexNames=new QA(...o),this._rawObjectStore.rawIndexes.delete(e)}));const a=new cO(this._rawObjectStore,e,t,r,i);return this.indexNames._push(e),this.indexNames._sort(),this._rawObjectStore.rawIndexes.set(e,a),a.initialize(this.transaction),new nO(this,a)}index(e){if(0===arguments.length)throw new TypeError;if(this._rawObjectStore.deleted||"finished"===this.transaction._state)throw new IA;const t=this._indexesCache.get(e);if(void 0!==t)return t;const n=this._rawObjectStore.rawIndexes.get(e);if(!this.indexNames.contains(e)||void 0===n)throw new TA;const r=new nO(this,n);return this._indexesCache.set(e,r),r}deleteIndex(e){if(0===arguments.length)throw new TypeError;if("versionchange"!==this.transaction.mode)throw new IA;fO(this);const t=this._rawObjectStore.rawIndexes.get(e);if(void 0===t)throw new TA;this.transaction._rollbackLog.push((()=>{t.deleted=!1,this._rawObjectStore.rawIndexes.set(e,t),this.indexNames._push(e),this.indexNames._sort()})),this.indexNames=new QA(...Array.from(this.indexNames).filter((t=>t!==e))),t.deleted=!0,this.transaction._execRequestAsync({operation:()=>{const n=this._rawObjectStore.rawIndexes.get(e);t===n&&this._rawObjectStore.rawIndexes.delete(e)},source:this})}count(e){return fO(this),null===e&&(e=void 0),void 0===e||e instanceof MA||(e=MA.only(BA(e))),this.transaction._execRequestAsync({operation:()=>{let t=0;const n=new WA(this,e);for(;null!==n._iterate();)t+=1;return t},source:this})}toString(){return"[object IDBObjectStore]"}};const pO=class{eventPath=[];NONE=0;CAPTURING_PHASE=1;AT_TARGET=2;BUBBLING_PHASE=3;propagationStopped=!1;immediatePropagationStopped=!1;canceled=!1;initialized=!0;dispatched=!1;target=null;currentTarget=null;eventPhase=0;defaultPrevented=!1;isTrusted=!1;timeStamp=Date.now();constructor(e,t={}){this.type=e,this.bubbles=void 0!==t.bubbles&&t.bubbles,this.cancelable=void 0!==t.cancelable&&t.cancelable}preventDefault(){this.cancelable&&(this.canceled=!0)}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.propagationStopped=!0,this.immediatePropagationStopped=!0}};const yO=globalThis.setImmediate||function(){if("undefined"!=typeof navigator&&/jsdom/.test(navigator.userAgent)){return new(0,Node.constructor)("return setImmediate")()}}()||(e=>setTimeout(e,0));const gO=class extends ZA{_state="active";_started=!1;_rollbackLog=[];_objectStoresCache=new Map;error=null;onabort=null;oncomplete=null;onerror=null;_requests=[];constructor(e,t,n){super(),this._scope=new Set(e),this.mode=t,this.db=n,this.objectStoreNames=new QA(...Array.from(this._scope).sort())}_abort(e){for(const e of this._rollbackLog.reverse())e();if(null!==e){const t=new Error;t.name=e,this.error=t}for(const{request:e}of this._requests)if("done"!==e.readyState&&(e.readyState="done",e.source)){e.result=void 0,e.error=new SA;const t=new pO("error",{bubbles:!0,cancelable:!0});t.eventPath=[this.db,this],e.dispatchEvent(t)}yO((()=>{const e=new pO("abort",{bubbles:!0,cancelable:!1});e.eventPath=[this.db],this.dispatchEvent(e)})),this._state="finished"}abort(){if("committing"===this._state||"finished"===this._state)throw new IA;this._state="active",this._abort(null)}objectStore(e){if("active"!==this._state)throw new IA;const t=this._objectStoresCache.get(e);if(void 0!==t)return t;const n=this.db._rawDatabase.rawObjectStores.get(e);if(!this._scope.has(e)||void 0===n)throw new TA;const r=new dO(this,n);return this._objectStoresCache.set(e,r),r}_execRequestAsync(e){const t=e.source,n=e.operation;let r=e.hasOwnProperty("request")?e.request:null;if("active"!==this._state)throw new NA;return r||(t?(r=new XA,r.source=t,r.transaction=t.transaction):r=new XA),this._requests.push({operation:n,request:r}),r}_start(){let e,t;for(this._started=!0;this._requests.length>0;){const n=this._requests.shift();if(n&&"done"!==n.request.readyState){t=n.request,e=n.operation;break}}if(t&&e){if(t.source){let n,r;try{const n=e();t.readyState="done",t.result=n,t.error=void 0,"inactive"===this._state&&(this._state="active"),r=new pO("success",{bubbles:!1,cancelable:!1})}catch(e){t.readyState="done",t.result=void 0,t.error=e,"inactive"===this._state&&(this._state="active"),r=new pO("error",{bubbles:!0,cancelable:!0}),n=this._abort.bind(this,e.name)}try{r.eventPath=[this.db,this],t.dispatchEvent(r)}catch(e){throw"committing"!==this._state&&this._abort("AbortError"),e}r.canceled||n&&n()}else e();yO(this._start.bind(this))}else if("finished"!==this._state&&(this._state="finished",!this.error)){const e=new pO("complete");this.dispatchEvent(e)}}commit(){if("active"!==this._state)throw new IA;this._state="committing"}toString(){return"[object IDBRequest]"}},bO=9007199254740992;const mO=class{num=0;next(){if(this.num>=bO)throw new kA;return this.num+=1,this.num}setIfLarger(e){const t=Math.floor(Math.min(e,bO))-1;t>=this.num&&(this.num=t+1)}};const wO=class{deleted=!1;records=new sO;rawIndexes=new Map;constructor(e,t,n,r){this.rawDatabase=e,this.keyGenerator=!0===r?new mO:null,this.deleted=!1,this.name=t,this.keyPath=n,this.autoIncrement=r}getKey(e){const t=this.records.get(e);return void 0!==t?KA(t.key):void 0}getAllKeys(e,t){void 0!==t&&0!==t||(t=1/0);const n=[];for(const r of this.records.values(e))if(n.push(KA(r.key)),n.length>=t)break;return n}getValue(e){const t=this.records.get(e);return void 0!==t?KA(t.value):void 0}getAllValues(e,t){void 0!==t&&0!==t||(t=1/0);const n=[];for(const r of this.records.values(e))if(n.push(KA(r.value)),n.length>=t)break;return n}storeRecord(e,t,n){if(null!==this.keyPath){const t=FA(this.keyPath,e.value);void 0!==t&&(e.key=t)}if(null!==this.keyGenerator&&void 0===e.key){if(n){const e=this.keyGenerator.num;n.push((()=>{this.keyGenerator&&(this.keyGenerator.num=e)}))}if(e.key=this.keyGenerator.next(),null!==this.keyPath){if(Array.isArray(this.keyPath))throw new Error("Cannot have an array key path in an object store with a key generator");let t,n=this.keyPath,r=e.value,i=0;for(;i>=0;){if("object"!=typeof r)throw new OA;i=n.indexOf("."),i>=0&&(t=n.slice(0,i),n=n.slice(i+1),r.hasOwnProperty(t)||(r[t]={}),r=r[t])}t=n,r[t]=e.key}}else null!==this.keyGenerator&&"number"==typeof e.key&&this.keyGenerator.setIfLarger(e.key);if(this.records.get(e.key)){if(t)throw new kA;this.deleteRecord(e.key,n)}this.records.add(e),n&&n.push((()=>{this.deleteRecord(e.key)}));for(const t of this.rawIndexes.values())t.initialized&&t.storeRecord(e);return e.key}deleteRecord(e,t){const n=this.records.delete(e);if(t)for(const e of n)t.push((()=>{this.storeRecord(e,!0)}));for(const t of this.rawIndexes.values())t.records.deleteByValue(e)}clear(e){const t=this.records.clear();if(e)for(const n of t)e.push((()=>{this.storeRecord(n,!0)}));for(const e of this.rawIndexes.values())e.records.clear()}},vO=e=>{if(!e._runningVersionchangeTransaction)throw new IA;const t=e._rawDatabase.transactions.filter((e=>"versionchange"===e.mode)),n=t[t.length-1];if(!n||"finished"===n._state)throw new IA;if("active"!==n._state)throw new NA;return n},_O=e=>{e._closePending=!0;e._rawDatabase.transactions.every((e=>"finished"===e._state))?(e._closed=!0,e._rawDatabase.connections=e._rawDatabase.connections.filter((t=>e!==t))):yO((()=>{_O(e)}))};const EO=class extends ZA{_closePending=!1;_closed=!1;_runningVersionchangeTransaction=!1;constructor(e){super(),this._rawDatabase=e,this._rawDatabase.connections.push(this),this.name=e.name,this.version=e.version,this.objectStoreNames=new QA(...Array.from(e.rawObjectStores.keys()).sort())}createObjectStore(e,t={}){if(void 0===e)throw new TypeError;const n=vO(this),r=null!==t&&void 0!==t.keyPath?t.keyPath:null,i=null!==t&&void 0!==t.autoIncrement&&t.autoIncrement;if(null!==r&&lO(r),this._rawDatabase.rawObjectStores.has(e))throw new kA;if(i&&(""===r||Array.isArray(r)))throw new PA;const o=[...this.objectStoreNames];n._rollbackLog.push((()=>{const t=this._rawDatabase.rawObjectStores.get(e);t&&(t.deleted=!0),this.objectStoreNames=new QA(...o),n._scope.delete(e),this._rawDatabase.rawObjectStores.delete(e)}));const a=new wO(this._rawDatabase,e,r,i);return this.objectStoreNames._push(e),this.objectStoreNames._sort(),n._scope.add(e),this._rawDatabase.rawObjectStores.set(e,a),n.objectStoreNames=new QA(...this.objectStoreNames),n.objectStore(e)}deleteObjectStore(e){if(void 0===e)throw new TypeError;const t=vO(this),n=this._rawDatabase.rawObjectStores.get(e);if(void 0===n)throw new TA;this.objectStoreNames=new QA(...Array.from(this.objectStoreNames).filter((t=>t!==e))),t.objectStoreNames=new QA(...this.objectStoreNames),t._rollbackLog.push((()=>{n.deleted=!1,this._rawDatabase.rawObjectStores.set(e,n),this.objectStoreNames._push(e),this.objectStoreNames._sort()})),n.deleted=!0,this._rawDatabase.rawObjectStores.delete(e),t._objectStoresCache.delete(e)}transaction(e,t){if("readonly"!==(t=void 0!==t?t:"readonly")&&"readwrite"!==t&&"versionchange"!==t)throw new TypeError("Invalid mode: "+t);if(this._rawDatabase.transactions.some((e=>"active"===e._state&&"versionchange"===e.mode&&e.db===this)))throw new IA;if(this._closePending)throw new IA;if(Array.isArray(e)||(e=[e]),0===e.length&&"versionchange"!==t)throw new PA;for(const t of e)if(!this.objectStoreNames.contains(t))throw new TA("No objectStore named "+t+" in this database");const n=new gO(e,t,this);return this._rawDatabase.transactions.push(n),this._rawDatabase.processTransactions(),n}close(){_O(this)}toString(){return"[object IDBDatabase]"}};const SO=class extends XA{onupgradeneeded=null;onblocked=null;toString(){return"[object IDBOpenDBRequest]"}};const kO=class extends pO{constructor(e,t={}){super(e),this.newVersion=void 0!==t.newVersion?t.newVersion:null,this.oldVersion=void 0!==t.oldVersion?t.oldVersion:0}toString(){return"[object IDBVersionChangeEvent]"}};const AO=class{deletePending=!1;transactions=[];rawObjectStores=new Map;connections=[];constructor(e,t){this.name=e,this.version=t,this.processTransactions=this.processTransactions.bind(this)}processTransactions(){yO((()=>{if(!this.transactions.some((e=>e._started&&"finished"!==e._state))){const e=this.transactions.find((e=>!e._started&&"finished"!==e._state));e&&(e.addEventListener("complete",this.processTransactions),e.addEventListener("abort",this.processTransactions),e._start())}}))}},OO=(e,t,n,r)=>{n.some((e=>!e._closed&&!e._closePending))?yO((()=>OO(e,t,n,r))):(e.delete(t),r(null))},PO=(e,t,n,r,i)=>{let o=e.get(t);if(void 0===o&&(o=new AO(t,0),e.set(t,o)),void 0===n&&(n=0!==o.version?o.version:1),o.version>n)return i(new RA);const a=new EO(o);o.version<n?((e,t,n,r)=>{e._runningVersionchangeTransaction=!0;const i=e.version,o=e._rawDatabase.connections.filter((t=>e!==t));for(const e of o)if(!e._closed&&!e._closePending){const n=new kO("versionchange",{newVersion:t,oldVersion:i});e.dispatchEvent(n)}if(o.some((e=>!e._closed&&!e._closePending))){const e=new kO("blocked",{newVersion:t,oldVersion:i});n.dispatchEvent(e)}const a=()=>{if(o.some((e=>!e._closed&&!e._closePending)))return void yO(a);e._rawDatabase.version=t,e.version=t;const s=e.transaction(e.objectStoreNames,"versionchange");n.result=e,n.readyState="done",n.transaction=s,s._rollbackLog.push((()=>{e._rawDatabase.version=i,e.version=i}));const c=new kO("upgradeneeded",{newVersion:t,oldVersion:i});n.dispatchEvent(c),s.addEventListener("error",(()=>{e._runningVersionchangeTransaction=!1})),s.addEventListener("abort",(()=>{e._runningVersionchangeTransaction=!1,n.transaction=null,yO((()=>{r(new SA)}))})),s.addEventListener("complete",(()=>{e._runningVersionchangeTransaction=!1,n.transaction=null,yO((()=>{e._closePending?r(new SA):r(null)}))}))};a()})(a,n,r,(e=>{if(e)return i(e);i(null,a)})):i(null,a)};const IO=class{cmp=jA;_databases=new Map;deleteDatabase(e){const t=new SO;return t.source=null,yO((()=>{const n=this._databases.get(e),r=void 0!==n?n.version:0;((e,t,n,r)=>{try{const i=e.get(t);if(void 0===i)return void r(null);i.deletePending=!0;const o=i.connections.filter((e=>!e._closed&&!e._closePending));for(const e of o)if(!e._closePending){const t=new kO("versionchange",{newVersion:null,oldVersion:i.version});e.dispatchEvent(t)}const a=o.some((e=>!e._closed&&!e._closePending));if(n&&a){const e=new kO("blocked",{newVersion:null,oldVersion:i.version});n.dispatchEvent(e)}OO(e,t,o,r)}catch(e){r(e)}})(this._databases,e,t,(e=>{if(e){t.error=new Error,t.error.name=e.name,t.readyState="done";const n=new pO("error",{bubbles:!0,cancelable:!0});return n.eventPath=[],void t.dispatchEvent(n)}t.result=void 0,t.readyState="done";const n=new kO("success",{newVersion:null,oldVersion:r});t.dispatchEvent(n)}))})),t}open(e,t){if(arguments.length>1&&void 0!==t&&(t=JA(t,"MAX_SAFE_INTEGER")),0===t)throw new TypeError;const n=new SO;return n.source=null,yO((()=>{PO(this._databases,e,t,n,((e,t)=>{if(e){n.result=void 0,n.readyState="done",n.error=new Error,n.error.name=e.name;const t=new pO("error",{bubbles:!0,cancelable:!0});return t.eventPath=[],void n.dispatchEvent(t)}n.result=t,n.readyState="done";const r=new pO("success");r.eventPath=[],n.dispatchEvent(r)}))})),n}databases(){return new Promise((e=>{const t=[];for(const[e,n]of this._databases)t.push({name:e,version:n.version});e(t)}))}toString(){return"[object IDBFactory]"}},TO=new IO;function xO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NO(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function RO(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){NO(o,r,i,a,s,"next",e)}function s(e){NO(o,r,i,a,s,"throw",e)}a(void 0)}))}}function CO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LO(e){return LO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},LO(e)}function UO(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?xO(e):t;var n}function jO(e,t){return jO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jO(e,t)}function DO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LO(e);if(t){var i=LO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return UO(this,n)}}function MO(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var HO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jO(e,t)}(a,e);var t,n,r,i=DO(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),BO(xO(e=i.call(this,"LBE")),"allowances",void 0),BO(xO(e),"payments",void 0),BO(xO(e),"blocklist",void 0),BO(xO(e),"permissions",void 0),e.version(1).stores({allowances:"++id,&host,name,imageURL,tag,enabled,totalBudget,remainingBudget,lastPaymentAt,lnurlAuth,createdAt",payments:"++id,allowanceId,host,location,name,description,totalAmount,totalFees,preimage,paymentRequest,paymentHash,destination,createdAt"}),e.version(2).stores({blocklist:"++id,host,name,imageURL,isBlocked,createdAt"}),e.version(3).stores({permissions:"++id,allowanceId,host,method,enabled,blocked,createdAt"}),e.version(4).stores({permissions:"++id,accountId,allowanceId,host,method,enabled,blocked,createdAt"}),e.version(5).stores({payments:"++id,accountId,allowanceId,host,location,name,description,totalAmount,totalFees,preimage,paymentRequest,paymentHash,destination,createdAt"}),e.version(6).stores({allowances:"++id,&host,name,imageURL,tag,enabled,*enabledFor,totalBudget,remainingBudget,lastPaymentAt,lnurlAuth,createdAt"}),e.on("ready",e.loadFromStorage.bind(xO(e))),e.allowances=e.table("allowances"),e.payments=e.table("payments"),e.blocklist=e.table("blocklist"),e.permissions=e.table("permissions"),e}return t=a,n=[{key:"openWithInMemoryDB",value:function(){var e=this;return RO((function(){return MO(this,(function(t){return console.info("Opening DB using fake indexedDB"),e._options.indexedDB=TO,e._options.IDBKeyRange=MA,e._deps.indexedDB=TO,e._deps.IDBKeyRange=MA,[2,e.open()]}))}))()}},{key:"saveToStorage",value:function(){var e=this;return RO((function(){var t,n,r,i;return MO(this,(function(a){switch(a.label){case 0:return[4,e.allowances.toArray()];case 1:return t=a.sent(),[4,e.payments.toArray()];case 2:return n=a.sent(),[4,e.blocklist.toArray()];case 3:return r=a.sent(),[4,e.permissions.toArray()];case 4:return i=a.sent(),[4,o().storage.local.set({allowances:t,payments:n,blocklist:r,permissions:i})];case 5:return a.sent(),[2,!0]}}))}))()}},{key:"clearAllTables",value:function(){var e=this;return RO((function(){return MO(this,(function(t){return[2,Promise.all(e.tables.map((function(e){return e.clear()})))]}))}))()}},{key:"loadFromStorage",value:function(){var e=this;return RO((function(){return MO(this,(function(t){return console.info("Current DB version: ".concat(e.verno)),console.info("Loading DB data from storage"),[2,o().storage.local.get(["allowances","payments","blocklist","permissions"]).then((function(t){var n=e.allowances.count().then((function(n){if(!(n>0))return t.allowances&&t.allowances.length>0?e.allowances.bulkAdd(t.allowances).catch(oA.BulkError,(function(e){console.error("Failed to add allowances; ignoring",e)})):void 0;console.info("Found ".concat(n," allowances already in the DB"))})),r=e.payments.count().then((function(n){if(!(n>0))return t.payments&&t.payments.length>0?e.payments.bulkAdd(t.payments).catch(oA.BulkError,(function(e){console.error("Failed to add payments; ignoring",e)})):void 0;console.info("Found ".concat(n," payments already in the DB"))})),i=e.blocklist.count().then((function(n){if(!(n>0))return t.blocklist&&t.blocklist.length>0?e.blocklist.bulkAdd(t.blocklist).catch(oA.BulkError,(function(e){console.error("Failed to add blocklist; ignoring",e)})):void 0;console.info("Found ".concat(n," blocklist already in the DB"))})),o=e.permissions.count().then((function(n){if(!(n>0))return t.permissions&&t.permissions.length>0?e.permissions.bulkAdd(t.permissions).catch(oA.BulkError,(function(e){console.error("Failed to add permissions; ignoring",e)})):void 0;console.info("Found ".concat(n," permissions already in the DB"))}));return Promise.all([n,r,i,o])})).catch((function(e){console.error("Failed to load DB data from storage",e)}))]}))}))()}}],n&&CO(t.prototype,n),r&&CO(t,r),a}(oA),FO=new HO;const zO=FO;var KO=a(1798),qO=a.n(KO);function VO(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function WO(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var GO=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){VO(o,r,i,a,s,"next",e)}function s(e){VO(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s,c;return WO(this,(function(e){switch(e.label){case 0:return t.origin&&t.origin.host?(n=t.origin.host,"error"in(r=t.response)?[2]:(i=r.data.route,o=i.total_amt,[4,zO.allowances.where("host").equalsIgnoreCase(n).first()])):[2];case 1:return(a=e.sent())&&a.id?(s=a.remainingBudget||0,c=Math.max(s-o,0),[4,zO.allowances.update(a.id,{remainingBudget:c,lastPaymentAt:Date.now()})]):[2];case 2:return e.sent(),[4,zO.saveToStorage()];case 3:return e.sent(),[2,!0]}}))}));return function(t,n){return e.apply(this,arguments)}}();function $O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YO=function(e){if(i_.getState().settings.browserNotifications){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$O(e,t,n[t])}))}return e}({type:"basic",iconUrl:"../assets/icons/alby_icon_yellow_48x48.png"},e);return o().notifications.create(t)}};function ZO(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function XO(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var JO=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ZO(o,r,i,a,s,"next",e)}function s(e){ZO(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s,c,u,l,f,h,d,p,y,g;return XO(this,(function(e){switch(e.label){case 0:return r=null==t||null===(n=t.origin)||void 0===n?void 0:n.name,"error"in(i=t.response)?[2]:(a=null==i?void 0:i.data.route,s=a.total_amt,c=a.total_fees,u=s-c,l=i_.getState().settings,f=l.showFiat,h=l.currency,d=l.locale,f?[4,gb(h)]:[3,2]);case 1:p=e.sent(),o=ub({amount:u,rate:p,currency:h,locale:d}),e.label=2;case 2:return y=" Successfully paid",r&&(y="".concat(y," to ").concat(r,"")),g="Amount: ".concat(lb({amount:u,locale:d})),f&&(g="".concat(g," (").concat(o,")")),g="".concat(g,"\nFee: ").concat(lb({amount:c,locale:d})),[2,YO({title:y,message:g})]}}))}));return function(t,n){return e.apply(this,arguments)}}(),QO=function(e,t){var n,r=t.response;return"error"in r&&(n=r.error),YO({title:" Payment failed",message:"Error: ".concat(n)})},eP=function(e,t){var n,r=" Login";return(null==t||null===(n=t.origin)||void 0===n?void 0:n.name)&&(r="".concat(r," to ").concat(t.origin.name)),YO({title:r,message:"Successfully logged in to ".concat(t.lnurlDetails.domain)})},tP=function(e,t){return YO({title:" Login failed",message:"".concat(t.error)})};function nP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function rP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var iP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nP(o,r,i,a,s,"next",e)}function s(e){nP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s,c,u,l,f,h,d,p;return rP(this,(function(e){switch(e.label){case 0:return o=null==t||null===(n=t.origin)||void 0===n?void 0:n.name,a=(null==t||null===(r=t.origin)||void 0===r?void 0:r.host)||"",s=null==t||null===(i=t.origin)||void 0===i?void 0:i.location,c=t.accountId,"error"in(u=t.response)?[2]:[4,zO.allowances.where("host").equalsIgnoreCase(a).first()];case 1:return l=e.sent(),f=u.data.route,h=f.total_amt,d=f.total_fees,[4,zO.payments.add({accountId:c,host:a,location:s,name:o,description:t.details.description,preimage:u.data.preimage,paymentHash:u.data.paymentHash,destination:t.details.destination,totalAmount:h,totalFees:d,createdAt:Date.now().toString(),allowanceId:l?(null!==(p=l.id)&&void 0!==p?p:"").toString():"",paymentRequest:""})];case 2:return e.sent(),[4,zO.saveToStorage()];case 3:return e.sent(),console.info("Persisted payment ".concat(u.data.paymentHash)),[2,!0]}}))}));return function(t,n){return e.apply(this,arguments)}}(),oP=function(){["sendPayment","keysend"].forEach((function(e){qO().subscribe("ln.".concat(e,".success"),JO),qO().subscribe("ln.".concat(e,".failed"),QO),qO().subscribe("ln.".concat(e,".success"),iP),qO().subscribe("ln.".concat(e,".success"),GO)})),qO().subscribe("lnurl.auth.success",eP),qO().subscribe("lnurl.auth.failed",tP),console.info("Event subscriptions registered")};function aP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function sP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var cP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){aP(o,r,i,a,s,"next",e)}function s(e){aP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){return sP(this,(function(e){return[2]}))}));return function(){return e.apply(this,arguments)}}();const uP=cP;function lP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function fP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var hP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){lP(o,r,i,a,s,"next",e)}function s(e){lP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return fP(this,(function(r){switch(r.label){case 0:return t=i_.getState().accounts,(n=e.args.id)in t?(e.args.name&&(t[n].name=e.args.name),e.args.bitcoinNetwork&&(t[n].bitcoinNetwork=e.args.bitcoinNetwork,i_.setState({bitcoin:null,liquid:null})),void 0!==e.args.useMnemonicForLnurlAuth&&(t[n].useMnemonicForLnurlAuth=e.args.useMnemonicForLnurlAuth),void 0!==e.args.isMnemonicBackupDone&&(t[n].isMnemonicBackupDone=e.args.isMnemonicBackupDone),i_.setState({accounts:t}),[4,i_.getState().saveToStorage()]):[3,2];case 1:return r.sent(),[2,{}];case 2:return[2,{error:"Account not found: ".concat(n)}];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const dP=hP,pP="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");function yP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function gP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var bP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){yP(o,r,i,a,s,"next",e)}function s(e){yP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){return gP(this,(function(e){return[2,{data:qa(pP,128)}]}))}));return function(t){return e.apply(this,arguments)}}();const mP=bP;function wP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function vP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var _P=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){wP(o,r,i,a,s,"next",e)}function s(e){wP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return vP(this,(function(a){switch(a.label){case 0:return n=(null===(t=e.args)||void 0===t?void 0:t.id)||i_.getState().currentAccountId,r=i_.getState().accounts,n&&Object.keys(r).includes(n)?[4,i_.getState().password()]:[3,2];case 1:return(i=a.sent())?(o=r[n]).mnemonic?[2,{data:z(o.mnemonic,i)}]:[2,{data:null}]:[2,{error:"Password is missing."}];case 2:return[2,{error:"Account does not exist."}]}}))}));return function(t){return e.apply(this,arguments)}}();const EP=_P;function SP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var AP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){SP(o,r,i,a,s,"next",e)}function s(e){SP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s;return kP(this,(function(c){switch(c.label){case 0:return n=(null===(t=e.args)||void 0===t?void 0:t.id)||i_.getState().currentAccountId,[4,i_.getState().password()];case 1:return(r=c.sent())?(i=e.args.mnemonic,o=i_.getState().accounts,n&&Object.keys(o).includes(n)?((a=o[n]).mnemonic=i?F(i,r):null,i&&!a.nostrPrivateKey?(s=new is(i).deriveNostrPrivateKeyHex(),a.nostrPrivateKey=F(s,r),a.hasImportedNostrKey=!1):a.hasImportedNostrKey=!0,o[n]=a,i_.setState({accounts:o,mnemonic:null,bitcoin:null}),[4,i_.getState().saveToStorage()]):[3,3]):[2,{error:"Password is missing."}];case 2:return c.sent(),[2,{data:{accountId:n}}];case 3:return[2,{error:"No account selected."}]}}))}));return function(t){return e.apply(this,arguments)}}();const OP=AP;function PP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function IP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){IP(e,t,n[t])}))}return e}function xP(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function NP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var RP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){PP(o,r,i,a,s,"next",e)}function s(e){PP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c;return NP(this,(function(u){switch(u.label){case 0:return t=e.args,n=i_.getState().accounts,r=function(e,t){for(var n=Object.values(t).map((function(e){return e.name})),r=1,i=e;n.includes(i);){var o=i.match(/\((\d+)\)$/);o?(r=parseInt(o[1])+1,i=i.replace(/\(\d+\)$/,"(".concat(r,")"))):i="".concat(e," (").concat(r,")")}return i}(t.name,n),i=TP({},n),[4,i_.getState().password()];case 1:return(o=u.sent())?(a=i_.getState().currentAccountId,s=dg(),t.config=F(t.config,o),i[s]=xP(TP({},t),{id:s,name:r,isMnemonicBackupDone:!1}),[4,mP({action:"generateMnemonic",origin:{internal:!0}})]):[2,{error:"Password is missing"}];case 2:return c=u.sent(),OP({args:{id:s,mnemonic:c.data},action:"setMnemonic",origin:{internal:!0}}),i_.setState({accounts:i}),a||i_.setState({currentAccountId:s}),dP({args:{id:s,useMnemonicForLnurlAuth:!0},action:"editAccount",origin:{internal:!0}}),[4,i_.getState().saveToStorage()];case 3:return u.sent(),[2,{data:{accountId:s}}]}}))}));return function(t){return e.apply(this,arguments)}}();const CP=RP;function BP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function LP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var UP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){BP(o,r,i,a,s,"next",e)}function s(e){BP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){return LP(this,(function(e){switch(e.label){case 0:return[4,i_.getState().accounts];case 1:return[2,{data:e.sent()}]}}))}));return function(t){return e.apply(this,arguments)}}();const jP=UP;function DP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function MP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var HP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){DP(o,r,i,a,s,"next",e)}function s(e){DP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return MP(this,(function(i){switch(i.label){case 0:return t=i_.getState().accounts,[4,i_.getState().password()];case 1:return(n=i.sent())?(r=e.args.id)in t?[2,{data:z(t[r].config,n)}]:[2,{error:"Account not found: ".concat(r)}]:[2,{error:"Password is missing"}]}}))}));return function(t){return e.apply(this,arguments)}}();const FP=HP;function zP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function KP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var qP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){zP(o,r,i,a,s,"next",e)}function s(e){zP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return KP(this,(function(o){return(n=(null==e||null===(t=e.args)||void 0===t?void 0:t.id)||i_.getState().currentAccountId)?(r=i_.getState().accounts,(i=r[n])?[2,{data:{id:i.id,connectorType:i.connector,name:i.name,liquidEnabled:!!i.mnemonic,nostrEnabled:!!i.nostrPrivateKey,hasMnemonic:!!i.mnemonic,isMnemonicBackupDone:void 0===i.isMnemonicBackupDone||i.isMnemonicBackupDone,hasImportedNostrKey:!1!==i.hasImportedNostrKey,bitcoinNetwork:i.bitcoinNetwork||"bitcoin",useMnemonicForLnurlAuth:i.useMnemonicForLnurlAuth||!1}}]:[2]):[2,{error:"No account selected."}]}))}));return function(t){return e.apply(this,arguments)}}();const VP=qP;function WP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function GP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $P=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){WP(o,r,i,a,s,"next",e)}function s(e){WP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return GP(this,(function(e){switch(e.label){case 0:return[4,i_.getState().getConnector()];case 1:return t=e.sent(),n=i_.getState().currentAccountId,r=i_.getState().getAccount(),[4,t.getInfo()];case 2:return i=e.sent(),[4,t.getBalance()];case 3:return o=e.sent(),r&&n?[2,{data:{currentAccountId:n,name:r.name,avatarUrl:r.avatarUrl,info:i.data,connectorType:r.connector,balance:{balance:o.data.balance,currency:o.data.currency||"BTC"}}}]:[2,{error:"No current account set"}]}}))}));return function(t){return e.apply(this,arguments)}}();const YP=$P;function ZP(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function XP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var JP=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ZP(o,r,i,a,s,"next",e)}function s(e){ZP(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){return XP(this,(function(e){switch(e.label){case 0:return[4,i_.getState().lock()];case 1:return e.sent(),[2,{data:{unlocked:!1}}]}}))}));return function(t){return e.apply(this,arguments)}}();const QP=JP;function eI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function tI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tI(e,t,n[t])}))}return e}function rI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function iI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function oI(){return oI=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){eI(o,r,i,a,s,"next",e)}function s(e){eI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return iI(this,(function(n){switch(n.label){case 0:if("string"!=typeof e.args.name)return[2,{error:"Name missing."}];if("string"!=typeof e.args.connector)return[2,{error:"Connector missing."}];if("object"!=typeof e.args.config)return[2,{error:"Config missing."}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,_.openPrompt(rI(nI({},e),{action:"confirmAddAccount"}))];case 2:return n.sent(),[2,{data:{success:!0}}];case 3:return t=n.sent(),console.error("Adding account cancelled",t),r=t,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?[2,{success:!1,error:t.message}]:[2,{success:!1}];case 4:return[2]}var r,i}))})),oI.apply(this,arguments)}function aI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function sI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var cI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){aI(o,r,i,a,s,"next",e)}function s(e){aI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a;return sI(this,(function(s){switch(s.label){case 0:return n=i_.getState().accounts,r=i_.getState().currentAccountId,(i=null==e||null===(t=e.args)||void 0===t?void 0:t.id)||null===r||(i=r),"string"!=typeof i&&"number"!=typeof i?[3,2]:(delete n[i],i_.setState({accounts:n}),o=i_.getState().accounts,a=Object.keys(o),i===r&&a.length>0&&(r=a[0],i_.setState({currentAccountId:r})),[4,i_.getState().saveToStorage()]);case 1:return s.sent(),[2,{data:{removed:i}}];case 2:return[2,{error:"Account not found: ".concat(i)}];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const uI=cI;function lI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function fI(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){lI(o,r,i,a,s,"next",e)}function s(e){lI(o,r,i,a,s,"throw",e)}a(void 0)}))}}function hI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var dI=function(){var e=fI((function(e){var t,n,r;return hI(this,(function(i){switch(i.label){case 0:return t=i_.getState(),n=e.args.id,(r=t.accounts[n])?t.connector?(console.info("Unloading connector"),[4,t.connector]):[3,3]:[3,7];case 1:return[4,i.sent().unload()];case 2:i.sent(),i.label=3;case 3:return i_.setState({account:r,nostr:null,liquid:null,mnemonic:null,bitcoin:null,connector:null,currentAccountId:n}),[4,i_.getState().getConnector()];case 4:return i.sent(),[4,i_.getState().saveToStorage()];case 5:return i.sent(),[4,yI()];case 6:return i.sent(),[2,{data:{unlocked:!0}}];case 7:return console.error("Account not found: ".concat(n)),[2,{error:"Account not found: ".concat(n)}];case 8:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const pI=dI;function yI(){return gI.apply(this,arguments)}function gI(){return gI=fI((function(){var e,t,n,r,i,a,s,c,u,l;return hI(this,(function(f){switch(f.label){case 0:return[4,o().tabs.query({})];case 1:if(!(e=f.sent()))return[3,12];t=e.filter((function(e){var t=e.url||"";return t.startsWith("http")||t.startsWith("https")})),n=!0,r=!1,i=void 0,f.label=2;case 2:f.trys.push([2,10,11,12]),a=t[Symbol.iterator](),f.label=3;case 3:if(n=(s=a.next()).done)return[3,9];c=s.value,f.label=4;case 4:return f.trys.push([4,7,,8]),c.id?[4,o().tabs.sendMessage(c.id,{action:"accountChanged"})]:[3,6];case 5:f.sent(),f.label=6;case 6:return[3,8];case 7:return u=f.sent(),console.error("Failed to notify account changed",u),[3,8];case 8:return n=!0,[3,3];case 9:return[3,12];case 10:return l=f.sent(),r=!0,i=l,[3,12];case 11:try{n||null==a.return||a.return()}finally{if(r)throw i}return[7];case 12:return[2]}}))})),gI.apply(this,arguments)}function bI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function mI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var wI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bI(o,r,i,a,s,"next",e)}function s(e){bI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return mI(this,(function(a){switch(a.label){case 0:if(t=e.args.password,n="number"==typeof t?"".concat(t):t,r=i_.getState().getAccount(),i=i_.getState().currentAccountId,!r)return console.error("No account configured"),[2,Promise.resolve({error:"No account configured"})];if("string"!=typeof r.config)return console.error("Config must be a string"),[2,Promise.resolve({error:"Config must be a string"})];try{z(r.config,n)}catch(e){return console.error("Invalid password"),[2,Promise.resolve({error:mt.t("translation:unlock.errors.invalid_password")})]}return[4,i_.getState().password(n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,i_.getState().getConnector()];case 3:return a.sent(),[3,5];case 4:return o=a.sent(),console.error(o),[3,5];case 5:return[2,{data:{unlocked:!0,currentAccountId:i}}]}}))}));return function(t){return e.apply(this,arguments)}}();const vI=wI;function _I(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function EI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var SI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){_I(o,r,i,a,s,"next",e)}function s(e){_I(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s;return EI(this,(function(c){switch(c.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=c.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=c.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("alby")?[2,{data:{enabled:!0}}]:[3,3];case 3:return c.trys.push([3,13,,14]),[4,_.openPrompt(e)];case 4:return(a=c.sent()).data.enabled&&t.tab?[4,f_(c_.Active,t.tab.id)]:[3,6];case 5:c.sent(),c.label=6;case 6:return a.data.enabled&&a.data.remember?i?i.id?(o.add("alby"),[4,zO.allowances.update(i.id,{enabled:!0,enabledFor:o,name:e.origin.name,imageURL:e.origin.icon})]):[2,{data:{error:"id is missing"}}]:[3,8]:[3,12];case 7:return c.sent(),[3,10];case 8:return[4,zO.allowances.add({host:n,name:e.origin.name,imageURL:e.origin.icon,enabled:!0,enabledFor:["alby"],lastPaymentAt:0,totalBudget:0,remainingBudget:0,createdAt:Date.now().toString(),lnurlAuth:!1,tag:""})];case 9:c.sent(),c.label=10;case 10:return[4,zO.saveToStorage()];case 11:c.sent(),c.label=12;case 12:return[2,{data:{enabled:a.data.enabled,remember:a.data.remember}}];case 13:return s=c.sent(),console.error(s),u=s,(null!=(l=Error)&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](u):u instanceof l)?[2,{error:s.message}]:[3,14];case 14:return[2]}var u,l}))}));return function(t,n){return e.apply(this,arguments)}}();const kI=SI;function AI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function OI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var PI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){AI(o,r,i,a,s,"next",e)}function s(e){AI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o;return OI(this,(function(e){switch(e.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=e.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=e.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("alby")?[2,{data:{isEnabled:!0}}]:[2,{data:{isEnabled:!1}}]}}))}));return function(t,n){return e.apply(this,arguments)}}();const II=PI;function TI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function xI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var NI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){TI(o,r,i,a,s,"next",e)}function s(e){TI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a;return xI(this,(function(s){switch(s.label){case 0:return t=e.args.host,n=e.args.name,r=e.args.imageURL,i=e.args.totalBudget,[4,zO.allowances.where("host").equalsIgnoreCase(t).first()];case 1:return(o=s.sent())?o.id?[4,zO.allowances.update(o.id,{enabled:!0,imageURL:r,name:n,remainingBudget:i,totalBudget:i})]:[2,{error:"id is missing"}]:[3,3];case 2:return s.sent(),[3,5];case 3:return a={createdAt:Date.now().toString(),enabled:!0,host:t,imageURL:r,lastPaymentAt:0,lnurlAuth:!1,name:n,remainingBudget:i,tag:"",totalBudget:i},[4,zO.allowances.add(a)];case 4:s.sent(),s.label=5;case 5:return[4,zO.saveToStorage()];case 6:return s.sent(),[2,{data:{allowance:o}}]}}))}));return function(t){return e.apply(this,arguments)}}();const RI=NI;function CI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function BI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var LI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){CI(o,r,i,a,s,"next",e)}function s(e){CI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return BI(this,(function(n){switch(n.label){case 0:return(t=e.args.id)?[4,zO.allowances.delete(t)]:[2,{error:"id is missing"}];case 1:return n.sent(),[4,zO.permissions.where({allowanceId:t}).delete()];case 2:return n.sent(),[4,zO.saveToStorage()];case 3:return n.sent(),[2,{data:!0}]}}))}));return function(t){return e.apply(this,arguments)}}();const UI=LI;function jI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function DI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){DI(e,t,n[t])}))}return e}function HI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function FI(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var zI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){jI(o,r,i,a,s,"next",e)}function s(e){jI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return FI(this,(function(a){switch(a.label){case 0:return t=e.args.host,[4,zO.allowances.where("host").equalsIgnoreCase(t).first()];case 1:return(n=a.sent())&&n.id?(r=n.id,(i=HI(MI({},n),{id:r,payments:[],paymentsAmount:0,paymentsCount:0,percentage:0,usedBudget:0})).usedBudget=n.totalBudget-n.remainingBudget,i.percentage=n.totalBudget?i.usedBudget/n.totalBudget*100:0,[4,zO.payments.where("host").equalsIgnoreCase(n.host).count()]):[3,4];case 2:return i.paymentsCount=a.sent(),[4,zO.payments.where("host").equalsIgnoreCase(n.host).reverse().toArray()];case 3:return o=a.sent(),i.payments=o.reduce((function(e,t){if(!(null==t?void 0:t.id))return e;var n=t.id;return e.push(HI(MI({},t),{id:n})),e}),[]),i.paymentsAmount=i.payments.map((function(e){return"string"==typeof e.totalAmount?parseInt(e.totalAmount):e.totalAmount})).reduce((function(e,t){return e+t}),0),[2,{data:i}];case 4:return[2,{data:{enabled:!1}}];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const KI=zI;function qI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function VI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){VI(e,t,n[t])}))}return e}function GI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $I(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var YI=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){qI(o,r,i,a,s,"next",e)}function s(e){qI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return $I(this,(function(o){switch(o.label){case 0:return t=e.args.id,[4,zO.allowances.get({id:t})];case 1:return(n=o.sent())?((r=GI(WI({},n),{id:t,payments:[],paymentsAmount:0,paymentsCount:0,percentage:0,usedBudget:0})).usedBudget=n.totalBudget-n.remainingBudget,r.percentage=n.totalBudget?r.usedBudget/n.totalBudget*100:0,[4,zO.payments.where("host").equalsIgnoreCase(n.host).count()]):[3,4];case 2:return r.paymentsCount=o.sent(),[4,zO.payments.where("host").equalsIgnoreCase(n.host).reverse().toArray()];case 3:return i=o.sent(),r.payments=i.reduce((function(e,t){if(!(null==t?void 0:t.id))return e;var n=t.id;return e.push(GI(WI({},t),{id:n})),e}),[]),r.paymentsAmount=r.payments.map((function(e){return"string"==typeof e.totalAmount?parseInt(e.totalAmount):e.totalAmount})).reduce((function(e,t){return e+t}),0),[2,{data:r}];case 4:return[2,{data:{enabled:!1}}];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const ZI=YI;function XI(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function JI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function eT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var tT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){XI(o,r,i,a,s,"next",e)}function s(e){XI(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c,u,l,f,h;return eT(this,(function(e){switch(e.label){case 0:return[4,zO.allowances.toCollection().reverse().sortBy("lastPaymentAt")];case 1:t=e.sent(),n=[],r=!0,i=!1,o=void 0,e.label=2;case 2:e.trys.push([2,8,9,10]),a=t[Symbol.iterator](),e.label=3;case 3:return(r=(s=a.next()).done)?[3,7]:(c=s.value).id?(u=c.id,l=QI(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){JI(e,t,n[t])}))}return e}({},c),{id:u,payments:[],paymentsAmount:0,paymentsCount:0,percentage:0,usedBudget:0}),l.usedBudget=l.totalBudget-l.remainingBudget,l.percentage=l.totalBudget?l.usedBudget/l.totalBudget*100:0,[4,zO.payments.where("host").equalsIgnoreCase(l.host).count()]):[3,6];case 4:return l.paymentsCount=e.sent(),[4,zO.payments.where("host").equalsIgnoreCase(l.host).reverse().toArray()];case 5:f=e.sent(),l.paymentsAmount=f.map((function(e){return"string"==typeof e.totalAmount?parseInt(e.totalAmount):e.totalAmount})).reduce((function(e,t){return e+t}),0),n.push(l),e.label=6;case 6:return r=!0,[3,3];case 7:return[3,10];case 8:return h=e.sent(),i=!0,o=h,[3,10];case 9:try{r||null==a.return||a.return()}finally{if(i)throw o}return[7];case 10:return[2,{data:{allowances:n}}]}}))}));return function(t){return e.apply(this,arguments)}}();const nT=tT;function rT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function iT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var oT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){rT(o,r,i,a,s,"next",e)}function s(e){rT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return iT(this,(function(i){switch(i.label){case 0:return(t=e.args.id)?(n={},Object.prototype.hasOwnProperty.call(e.args,"totalBudget")&&(n.totalBudget=e.args.totalBudget,n.remainingBudget=e.args.totalBudget),Object.prototype.hasOwnProperty.call(e.args,"enabled")&&(n.enabled=e.args.enabled),Object.prototype.hasOwnProperty.call(e.args,"lnurlAuth")&&(n.lnurlAuth=e.args.lnurlAuth),[4,zO.allowances.update(t,n)]):[2,{error:"id is missing"}];case 1:return r=i.sent(),[4,zO.saveToStorage()];case 2:return i.sent(),[2,{data:r}]}}))}));return function(t){return e.apply(this,arguments)}}();const aT=oT;function sT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function cT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var uT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){sT(o,r,i,a,s,"next",e)}function s(e){sT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return cT(this,(function(o){switch(o.label){case 0:return t=e.args,n=t.host,r=t.name,i=t.imageURL,[4,zO.blocklist.add({host:n,name:r,imageURL:i,isBlocked:!0})];case 1:return o.sent(),[4,zO.saveToStorage()];case 2:return o.sent(),[2,{data:!0}]}}))}));return function(t){return e.apply(this,arguments)}}();const lT=uT;function fT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function hT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var dT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){fT(o,r,i,a,s,"next",e)}function s(e){fT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return hT(this,(function(r){switch(r.label){case 0:return t=e.args.host,[4,zO.blocklist.where("host").equalsIgnoreCase(t).first()];case 1:return(null==(n=r.sent())?void 0:n.id)?[4,zO.blocklist.delete(n.id)]:[3,4];case 2:return r.sent(),[4,zO.saveToStorage()];case 3:r.sent(),r.label=4;case 4:return[2,{data:!0}]}}))}));return function(t){return e.apply(this,arguments)}}();const pT=dT;function yT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function gT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var bT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){yT(o,r,i,a,s,"next",e)}function s(e){yT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return gT(this,(function(n){switch(n.label){case 0:return t=e.args.host,[4,zO.blocklist.where("host").equalsIgnoreCase(t).first()];case 1:return n.sent()?[2,{data:{blocked:!0}}]:[2,{data:{blocked:!1}}]}}))}));return function(t){return e.apply(this,arguments)}}();const mT=bT;function wT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function vT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var _T=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){wT(o,r,i,a,s,"next",e)}function s(e){wT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){return vT(this,(function(e){switch(e.label){case 0:return[4,zO.blocklist.toArray()];case 1:return[2,{data:{blocklist:e.sent()}}]}}))}));return function(t){return e.apply(this,arguments)}}();const ET=_T;function ST(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var AT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ST(o,r,i,a,s,"next",e)}function s(e){ST(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s,c;return kT(this,(function(u){switch(u.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=u.sent(),[4,i_.getState().getAccount()];case 2:return i=u.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 3:return o=u.sent(),a=new Set(null==o?void 0:o.enabledFor),r&&o&&o.enabled&&(null==i?void 0:i.mnemonic)&&a.has("liquid")?[2,{data:{enabled:!0}}]:[3,4];case 4:return u.trys.push([4,14,,15]),[4,_.openPrompt(e)];case 5:return(s=u.sent()).data.enabled&&t.tab?[4,f_(c_.Active,t.tab.id)]:[3,7];case 6:u.sent(),u.label=7;case 7:return s.data.enabled&&s.data.remember?o?o.id?(a.add("liquid"),[4,zO.allowances.update(o.id,{enabled:!0,enabledFor:a,name:e.origin.name,imageURL:e.origin.icon})]):[2,{data:{error:"id is missing"}}]:[3,9]:[3,13];case 8:return u.sent(),[3,11];case 9:return[4,zO.allowances.add({host:n,name:e.origin.name,imageURL:e.origin.icon,enabled:!0,enabledFor:["liquid"],lastPaymentAt:0,totalBudget:0,remainingBudget:0,createdAt:Date.now().toString(),lnurlAuth:!1,tag:""})];case 10:u.sent(),u.label=11;case 11:return[4,zO.saveToStorage()];case 12:u.sent(),u.label=13;case 13:return[2,{data:{enabled:s.data.enabled,remember:s.data.remember}}];case 14:return c=u.sent(),console.error(c),l=c,(null!=(f=Error)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)?[2,{error:c.message}]:[3,15];case 15:return[2]}var l,f}))}));return function(t,n){return e.apply(this,arguments)}}();const OT=AT;function PT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function IT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var TT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){PT(o,r,i,a,s,"next",e)}function s(e){PT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return IT(this,(function(r){switch(r.label){case 0:t=e.args.psetPreview,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,i_.getState().getLiquid()];case 2:return[4,r.sent().fetchAssetRegistry(t)];case 3:return[2,{data:r.sent()}];case 4:return n=r.sent(),console.error(n),[2,{error:"fetchAssetRegistry failed: "+n}];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const xT=TT;function NT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function RT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function CT(e,t){return BT.apply(this,arguments)}function BT(){return BT=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){NT(o,r,i,a,s,"next",e)}function s(e){NT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a;return RT(this,(function(s){switch(s.label){case 0:return n=i_.getState().currentAccountId,[4,zO.allowances.get({host:t})];case 1:return(null==(r=s.sent())?void 0:r.id)&&n?[4,zO.permissions.filter((function(i){return i.accountId===n&&i.allowanceId===r.id&&i.host===t&&i.method===e})).first()]:[2,!1];case 2:return i=s.sent(),o=0,i?[3,4]:[4,zO.permissions.add({createdAt:Date.now().toString(),accountId:n,allowanceId:r.id,host:t,method:e,enabled:!0,blocked:!1})];case 3:return o=s.sent(),[3,6];case 4:return[4,zO.permissions.update(i.id,{enabled:!0,blocked:!1})];case 5:o=s.sent(),s.label=6;case 6:return(a=!!o)?[4,zO.saveToStorage()]:[3,8];case 7:a=s.sent(),s.label=8;case 8:return[2,a]}}))})),BT.apply(this,arguments)}function LT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function UT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function jT(e,t){return DT.apply(this,arguments)}function DT(){return DT=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){LT(o,r,i,a,s,"next",e)}function s(e){LT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i;return UT(this,(function(o){switch(o.label){case 0:return t?[4,zO.allowances.where("host").equalsIgnoreCase(t).first()]:[2,!1];case 1:if(!(null==(n=o.sent())?void 0:n.id))throw new Error("Could not find an allowance for this host");if(!(r=i_.getState().currentAccountId))throw new Error("Account doesn't exist");return[4,zO.permissions.get({host:t,method:e,accountId:r})];case 2:return[2,!!(null==(i=o.sent())?void 0:i.enabled)]}}))})),DT.apply(this,arguments)}var MT,HT,FT,zT,KT;function qT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function VT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){VT(e,t,n[t])}))}return e}function GT(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $T(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}!function(e){e.TRUST_FULLY="trust_fully",e.REASONABLE="reasonable",e.PARANOID="paranoid"}(MT||(MT={})),function(e){e.ASK_EVERYTIME="ask_everytime",e.DONT_ASK_CURRENT="dont_ask_current",e.DONT_ASK_ANY="dont_ask_any"}(HT||(HT={})),function(e){e.BITCOIN_GETADDRESS="bitcoin/getAddress"}(FT||(FT={})),function(e){e.LIQUID_GETADDRESS="liquid/getAddress"}(zT||(zT={})),function(e){e.NOSTR_SIGNMESSAGE="nostr/signMessage",e.NOSTR_SIGNSCHNORR="nostr/signSchnorr",e.NOSTR_GETPUBLICKEY="nostr/getPublicKey",e.NOSTR_NIP04DECRYPT="nostr/nip04decrypt",e.NOSTR_NIP04ENCRYPT="nostr/nip04encrypt",e.NOSTR_NIP44DECRYPT="nostr/nip44decrypt",e.NOSTR_NIP44ENCRYPT="nostr/nip44encrypt"}(KT||(KT={}));var YT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){qT(o,r,i,a,s,"next",e)}function s(e){qT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a;return $T(this,(function(s){switch(s.label){case 0:if(!("host"in e.origin))return console.error("error",e.origin),[2];s.label=1;case 1:return s.trys.push([1,9,,10]),[4,jT(zT.LIQUID_GETADDRESS,e.origin.host)];case 2:return t=s.sent(),[4,i_.getState().getLiquid()];case 3:return n=s.sent(),t?(r=n.getPublicKey(),[2,{data:GT(WT({},n.getAddress()),{publicKey:r})}]):[3,4];case 4:return[4,_.openPrompt(GT(WT({args:{}},e),{action:"public/liquid/confirmGetAddress"}))];case 5:return(i=s.sent()).data.rememberPermission?[4,CT(zT.LIQUID_GETADDRESS,e.origin.host)]:[3,7];case 6:s.sent(),s.label=7;case 7:return i.data.confirm?(o=n.getPublicKey(),[2,{data:GT(WT({},n.getAddress()),{publicKey:o})}]):[2,{error:"User rejected"}];case 8:return[3,10];case 9:return a=s.sent(),console.error("getAddress failed",a),c=a,(null!=(u=Error)&&"undefined"!=typeof Symbol&&u[Symbol.hasInstance]?u[Symbol.hasInstance](c):c instanceof u)?[2,{error:a.message}]:[3,10];case 10:return[2]}var c,u}))}));return function(t){return e.apply(this,arguments)}}();const ZT=YT;function XT(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function JT(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var QT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){XT(o,r,i,a,s,"next",e)}function s(e){XT(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return JT(this,(function(i){switch(i.label){case 0:t=e.args.pset,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,i_.getState().getLiquid()];case 2:return n=i.sent(),[2,{data:n.getPsetPreview(t)}];case 3:return r=i.sent(),console.error(r),[2,{error:"getPsetPreview failed: "+r}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const ex=QT;function tx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function nx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var rx=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){tx(o,r,i,a,s,"next",e)}function s(e){tx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o;return nx(this,(function(e){switch(e.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=e.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=e.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("liquid")?[2,{data:{isEnabled:!0}}]:[2,{data:{isEnabled:!1}}]}}))}));return function(t,n){return e.apply(this,arguments)}}();const ix=rx;function ox(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ax(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var sx=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ox(o,r,i,a,s,"next",e)}function s(e){ox(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return ax(this,(function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),!(t=e.args.pset)||"string"!=typeof t)throw new Error("PSET missing");return[4,i_.getState().getLiquid()];case 1:return n=o.sent(),r=Mw.Pset.fromBase64(t),[2,{data:{signed:n.signPset(r).toBase64()}}];case 2:return i=o.sent(),console.error(i),[2,{error:"signPset failed: "+i}];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const cx=sx;function ux(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function lx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lx(e,t,n[t])}))}return e}function hx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function dx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var px=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ux(o,r,i,a,s,"next",e)}function s(e){ux(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return dx(this,(function(r){switch(r.label){case 0:if(!(t=e.args.pset)||"string"!=typeof t)return[2,{error:"PSET missing."}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,_.openPrompt(hx(fx({},e),{action:"public/liquid/confirmSignPset"}))];case 2:return[2,r.sent()];case 3:return n=r.sent(),console.error("signPset cancelled",n),i=n,(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)?[2,{error:n.message}]:[3,4];case 4:return[2]}var i,o}))}));return function(t){return e.apply(this,arguments)}}();const yx=px;function gx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function bx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var mx=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){gx(o,r,i,a,s,"next",e)}function s(e){gx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return bx(this,(function(r){switch(r.label){case 0:return"string"==typeof e.args.paymentHash&&e.args.paymentHash?[4,i_.getState().getConnector()]:[2,{error:"Payment hash missing."}];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,t.checkPayment({paymentHash:e.args.paymentHash})];case 3:return[2,r.sent()];case 4:return n=r.sent(),i=n,(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)?[2,{error:n.message}]:[3,5];case 5:return[2]}var i,o}))}));return function(t){return e.apply(this,arguments)}}();const wx=mx;function vx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function _x(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Ex=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){vx(o,r,i,a,s,"next",e)}function s(e){vx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s;return _x(this,(function(c){switch(c.label){case 0:return t=e.args,n=t.pubkey,r=t.host,"string"!=typeof n||"string"!=typeof r?[2,{error:"Peer data missing."}]:[4,i_.getState().getConnector()];case 1:i=c.sent(),o={pubkey:n,host:r},c.label=2;case 2:return c.trys.push([2,4,,5]),[4,i.connectPeer(o)];case 3:return a=c.sent(),[3,5];case 4:return s=c.sent(),console.error(s),a={error:(u=s,l=Error,(null!=l&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](u):u instanceof l)?s.message:"Something went wrong")},[3,5];case 5:return[2,a]}var u,l}))}));return function(t){return e.apply(this,arguments)}}();const Sx=Ex;function kx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ax(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Ox=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){kx(o,r,i,a,s,"next",e)}function s(e){kx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return Ax(this,(function(e){switch(e.label){case 0:return[4,i_.getState().getConnector()];case 1:return[4,(t=e.sent()).getInfo()];case 2:return n=e.sent(),[2,{data:{version:"Alby",supports:["lightning"],methods:t.supportedMethods,node:{alias:n.data.alias,pubkey:n.data.pubkey,color:n.data.color}}}]}}))}));return function(t){return e.apply(this,arguments)}}();const Px=Ox;function Ix(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Tx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Nx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Rx=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ix(o,r,i,a,s,"next",e)}function s(e){Ix(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return Nx(this,(function(a){switch(a.label){case 0:return t=e.args.limit,[4,i_.getState().getConnector()];case 1:n=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,n.getTransactions()];case 3:return r=a.sent(),i=r.data.transactions.filter((function(e){return e.settled})).map((function(e){var t=_.getBoostagramFromInvoiceCustomRecords(e.custom_records);return xx(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Tx(e,t,n[t])}))}return e}({},e),{boostagram:t,paymentHash:e.payment_hash})})),t&&(i=i.slice(0,t)),[2,{data:{transactions:i}}];case 4:return o=a.sent(),console.error(o),s=o,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](s):s instanceof c)?[2,{error:o.message}]:[3,5];case 5:return[2]}var s,c}))}));return function(t){return e.apply(this,arguments)}}();const Cx=Rx;const Bx={publishPaymentNotification:function(e,t,n){var r="success";"error"in n.response&&(r="failed"),qO().publish("ln.".concat(e,".").concat(r),{accountId:n.accountId,response:n.response,details:n.details,paymentRequestDetails:n.paymentRequestDetails,origin:t.origin})}};function Lx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ux(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function jx(e){return Dx.apply(this,arguments)}function Dx(){return Dx=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Lx(o,r,i,a,s,"next",e)}function s(e){Lx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c;return Ux(this,(function(u){switch(u.label){case 0:return qO().publish("ln.keysend.start",e),t=e.args,n=t.destination,r=t.amount,i=t.customRecords,[4,i_.getState().currentAccountId];case 1:return(o=u.sent())?"string"!=typeof n||"string"!=typeof r&&"number"!=typeof r?[2,{error:"Destination or amount missing."}]:[4,i_.getState().getConnector()]:[2,{error:"Select an account."}];case 2:a=u.sent(),u.label=3;case 3:return u.trys.push([3,5,,6]),[4,a.keysend({pubkey:n,amount:parseInt(r),customRecords:i})];case 4:return s=u.sent(),[3,6];case 5:return c=u.sent(),s={error:(l=c,f=Error,(null!=f&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)?c.message:"Something went wrong")},[3,6];case 6:return Bx.publishPaymentNotification("keysend",e,{accountId:o,response:s,details:{destination:n}}),[2,s]}var l,f}))})),Dx.apply(this,arguments)}function Mx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Hx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Hx(e,t,n[t])}))}return e}function zx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Kx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var qx=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Mx(o,r,i,a,s,"next",e)}function s(e){Mx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return Kx(this,(function(o){switch(o.label){case 0:return qO().publish("ln.makeInvoice.start",e),n=e.args.memo||e.args.defaultMemo||"Alby invoice",e.args.amount?(t=parseInt(e.args.amount),[4,i_.getState().getConnector()]):[3,6];case 1:r=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,r.makeInvoice({amount:t,memo:n})];case 3:return[2,o.sent()];case 4:return i=o.sent(),a=i,(null!=(s=Error)&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)?[2,{error:i.message}]:[3,5];case 5:return[3,8];case 6:return[4,_.openPrompt(zx(Fx({},e),{action:"makeInvoice",args:{invoiceAttributes:Fx({},e.args)}}))];case 7:return[2,o.sent()];case 8:return[2]}var a,s}))}));return function(t){return e.apply(this,arguments)}}();const Vx=qx;function Wx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Gx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $x=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Wx(o,r,i,a,s,"next",e)}function s(e){Wx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c,u,l,f,h,d;return Gx(this,(function(p){switch(p.label){case 0:return[4,i_.getState().getConnector()];case 1:t=p.sent(),n=i_.getState().currentAccountId,r=e.origin,i=e.args,p.label=2;case 2:if(p.trys.push([2,12,,13]),!i.method||"string"!=typeof i.method)throw new Error("Request method is missing or not correct");if(o=i.method.toLowerCase(),a="request.".concat(o),s=t.supportedMethods||[],!t.requestMethod||!s.includes(a))throw new Error("".concat(o," is not supported by your account"));return[4,zO.allowances.where("host").equalsIgnoreCase(r.host).first()];case 3:if(!(null==(c=p.sent())?void 0:c.id))throw new Error("Could not find an allowance for this host");if(!n)throw new Error("Could not find a selected account");return u=t.constructor.name.toLowerCase(),[4,jT(l="".concat("webln/").concat(u,"/").concat(o),r.host)];case 4:return p.sent()?[4,t.requestMethod(o,i.params)]:[3,6];case 5:return[2,p.sent()];case 6:return[4,_.openPrompt({args:{requestPermission:{method:o,description:"".concat(u,".").concat(o)}},origin:r,action:"public/confirmRequestPermission"})];case 7:return f=p.sent(),[4,t.requestMethod(o,i.params)];case 8:return h=p.sent(),f.data.enabled?[4,CT(l,r.host)]:[3,10];case 9:p.sent(),p.label=10;case 10:return[2,h];case 11:return[3,13];case 12:return d=p.sent(),console.error(d),[2,{error:(y=d,g=Error,(null!=g&&"undefined"!=typeof Symbol&&g[Symbol.hasInstance]?g[Symbol.hasInstance](y):y instanceof g)?d.message:"Something went wrong with request ".concat(null==i?void 0:i.method))}];case 13:return[2]}var y,g}))}));return function(t){return e.apply(this,arguments)}}();const Yx=$x;function Zx(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Xx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xx(e,t,n[t])}))}return e}function Qx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function eN(e){return tN.apply(this,arguments)}function tN(){return tN=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Zx(o,r,i,a,s,"next",e)}function s(e){Zx(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s;return Qx(this,(function(c){switch(c.label){case 0:return qO().publish("ln.sendPayment.start",e),[4,i_.getState().currentAccountId];case 1:return(t=c.sent())?"string"!=typeof(n=e.args.paymentRequest)?[2,{error:"Payment request missing."}]:[4,i_.getState().getConnector()]:[2,{error:"Select an account."}];case 2:r=c.sent(),c.label=3;case 3:return c.trys.push([3,5,,6]),o=Qg().decode(n),[4,r.sendPayment({paymentRequest:n})];case 4:return i=c.sent(),[3,6];case 5:return a=c.sent(),s="string"==typeof a?a:a.message?a.message:"Something went wrong",i={error:s},[3,6];case 6:return Bx.publishPaymentNotification("sendPayment",e,{accountId:t,paymentRequestDetails:o,response:i,details:Jx({},o&&{description:o.tagsObject.description,destination:o.payeeNodeKey})}),[2,i]}}))})),tN.apply(this,arguments)}function nN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function rN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function iN(){return iN=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nN(o,r,i,a,s,"next",e)}function s(e){nN(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return rN(this,(function(n){switch(n.label){case 0:return[4,i_.getState().currentAccountId];case 1:return n.sent()?"string"!=typeof(t=e.args.paymentRequest)?[2,{error:"Payment request missing."}]:[4,i_.getState().getConnector()]:[2,{error:"Select an account."}];case 2:return n.sent().sendPayment({paymentRequest:t}),[2,{data:{}}]}}))})),iN.apply(this,arguments)}function oN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function aN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var sN=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){oN(o,r,i,a,s,"next",e)}function s(e){oN(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return aN(this,(function(i){switch(i.label){case 0:return qO().publish("ln.signMessage.start",e),"string"!=typeof(t=e.args.message)?[2,{error:"Message missing."}]:t.startsWith("DO NOT EVER SIGN THIS TEXT")?[2,{error:"forbidden"}]:[4,i_.getState().getConnector()];case 1:n=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.signMessage({message:t,key_loc:{key_family:0,key_index:0}})];case 3:return[2,i.sent()];case 4:return r=i.sent(),console.error(r),o=r,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)?(qO().publish("ln.signMessage.failed",{error:r.message,message:t,origin:e.origin}),[2,{error:r.message}]):[3,5];case 5:return[2]}var o,a}))}));return function(t){return e.apply(this,arguments)}}();const cN=sN;var uN=function(e){return"status"in e&&"ERROR"===e.status.toUpperCase()};function lN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function hN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function pN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var gN=function(e){if(e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-_0-9]+\.)+[a-zA-Z]{2,}))$/)){var t=pN(e.split("@"),2),n=t[0],r=t[1];return n=n.replace(/[^ -~]+/g,""),r=r.replace(/[^ -~]+/g,""),"https://".concat(r,"/.well-known/lnurlp/").concat(n)}return null},bN={isLightningAddress:function(e){return Boolean(gN(e))},findLnurl:function(e){var t,n=e.trim();return(t=n.match(/lnurl[pwc]:(\S+)/i))||(t=n.match(/(lnurl[a-zA-HJ-NP-Z0-9]+)/i))?t[1]:null},getDetails:function(e){return function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){fN(o,r,i,a,s,"next",e)}function s(e){fN(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){var t,n,r,i,o,a,s,c,u,l,f;return yN(this,(function(h){switch(h.label){case 0:return t=function(e){try{var t=mg(e);return new URL(t)}catch(e){console.info("ignoring bech32 parsing error",e)}var n=gN(e);return n?new URL(n):new URL("https://".concat(e.replace(/^lnurl[pwc]/i,"")))}(e),n=t.searchParams.get("tag"),r=t.searchParams.get("k1"),i=t.searchParams.get("action"),n&&"login"===n&&r?(o=dN(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){hN(e,t,n[t])}))}return e}({},i&&{action:i}),{domain:t.hostname,k1:r,tag:n,url:t.toString()}),[2,o]):[3,1];case 1:return h.trys.push([1,3,,4]),[4,Fg().get(t.toString(),{adapter:Yg})];case 2:if(a=h.sent().data,uN(s=a))throw new Error(s.reason);return s.domain=t.hostname,s.url=t.toString(),[2,s];case 3:throw c=h.sent(),u="",Fg().isAxiosError(c)?u=(null===(l=null===(f=c.response)||void 0===f?void 0:f.data)||void 0===l?void 0:l.reason)||c.message:(d=c,(null!=(p=Error)&&"undefined"!=typeof Symbol&&p[Symbol.hasInstance]?p[Symbol.hasInstance](d):d instanceof p)&&(u=c.message)),new Error(u);case 4:return[2]}var d,p}))}))()},verifyInvoice:function(e){var t=e.paymentInfo,n=e.amount;switch(!0){case Qg().decode(t.pr).millisatoshis!==String(n):case t.successAction&&!["url","message","aes"].includes(t.successAction.tag):return!1;default:return!0}}};const mN=bN;function wN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function vN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){wN(o,r,i,a,s,"next",e)}function s(e){wN(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _N(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var EN="DO NOT EVER SIGN THIS TEXT WITH YOUR PRIVATE KEYS! IT IS ONLY USED FOR DERIVATION OF LNURL-AUTH HASHING-KEY, DISCLOSING ITS SIGNATURE WILL COMPROMISE YOUR LNURL-AUTH IDENTITY AND MAY LEAD TO LOSS OF FUNDS!";function SN(e){return kN.apply(this,arguments)}function kN(){return kN=vN((function(e){var t,n,r,i,o,a,s,c,u,l,f,h,d,p,y,g,b,m,w,v,E,S,k,A,O,P,I,T,x,N,R,C;return _N(this,(function(B){switch(B.label){case 0:if(t=e.lnurlDetails,n=e.origin,"login"!==t.tag)throw new Error("LNURL-AUTH FAIL: incorrect tag: ".concat(t.tag," was used"));return[4,i_.getState().getAccount()];case 1:if(!(r=B.sent()))throw new Error("LNURL-AUTH FAIL: no account selected");if(!(i=new URL(t.url)).host)throw new Error("Invalid input");return r.mnemonic&&r.useMnemonicForLnurlAuth?[4,i_.getState().getMnemonic()]:[3,3];case 2:a=B.sent(),s=a.deriveKey("m/138'/0"),c=s.privateKey,u=function(e,t){for(var n=Nm()(md().parse(e),Za().parse(t)).toString(Za()),r=up.Buffer.from(n,"hex"),i=[],o=0;o<4;o++)i.push(r.readUint32BE(4*o));return i}(i.host,yn.bytesToHex(c)),l=a.deriveKey("m/138'"),f=!0,h=!1,d=void 0;try{for(p=u[Symbol.iterator]();!(f=(y=p.next()).done);f=!0)g=y.value,l=l.deriveChild(g)}catch(e){h=!0,d=e}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return o=yn.bytesToHex(l.privateKey),[3,6];case 3:return[4,i_.getState().getConnector()];case 4:return[4,B.sent().signMessage({message:EN,key_loc:{key_family:0,key_index:0}})];case 5:if(b=B.sent(),!(m=b.data.signature))throw new Error("Invalid Signature");w=Ja()(m).toString(Za()),v=i_.getState().settings,o=v.isUsingLegacyLnurlAuthKey?Nm()(i.host,w).toString(Za()):Nm()(i.host,Za().parse(w)).toString(Za()),B.label=6;case 6:if(!o)throw new Error("Invalid linkingKey");if(E=new Lb(o),S=_.hexToUint8Array(t.k1),!t.k1||!S)throw new Error("Invalid K1");k=E.sign(S),A=k.toDER("hex"),(O=i).searchParams.set("sig",A),O.searchParams.set("key",E.pkHex),O.searchParams.set("t",Date.now().toString()),B.label=7;case 7:return B.trys.push([7,9,,10]),[4,Fg().get(O.toString(),{adapter:Yg})];case 8:if("OK"!==(null==(I=B.sent())||null===(P=I.data.status)||void 0===P?void 0:P.toUpperCase()))throw new Error((null==I||null===(T=I.data)||void 0===T?void 0:T.reason)||"Auth: Something went wrong");return qO().publish("lnurl.auth.success",{authResponse:I,lnurlDetails:t,origin:n}),[2,{success:!0,status:I.data.status,reason:I.data.reason,authResponseData:I.data}];case 9:if(x=B.sent(),Fg().isAxiosError(x))throw console.error("LNURL-AUTH FAIL:",x),C=(null===(N=null===(R=x.response)||void 0===R?void 0:R.data)||void 0===N?void 0:N.reason)||x.message,qO().publish("lnurl.auth.failed",{error:C,lnurlDetails:t,origin:n}),new Error(C);if(L=x,null!=(U=Error)&&"undefined"!=typeof Symbol&&U[Symbol.hasInstance]?U[Symbol.hasInstance](L):L instanceof U)throw qO().publish("lnurl.auth.failed",{error:x.message,lnurlDetails:t,origin:n}),x;return[3,10];case 10:return[2]}var L,U}))})),kN.apply(this,arguments)}var AN=function(){var e=vN((function(e){var t,n,r;return _N(this,(function(i){switch(i.label){case 0:return t=e.args,n=t.lnurlDetails,r=t.origin,[4,SN({lnurlDetails:n,origin:r})];case 1:return[2,{data:i.sent()}]}}))}));return function(t){return e.apply(this,arguments)}}();const ON=AN;function PN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function IN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){PN(o,r,i,a,s,"next",e)}function s(e){PN(o,r,i,a,s,"throw",e)}a(void 0)}))}}function TN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){TN(e,t,n[t])}))}return e}function NN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function RN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function CN(){return CN=IN((function(e,t,n){var r,i,o,a;function s(){return c.apply(this,arguments)}function c(){return c=IN((function(){var t,r;return RN(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=NN(xN({},e),{action:"lnurlAuth",args:NN(xN({},e.args),{lnurlDetails:n})}),[4,_.openPrompt(t)];case 1:return[2,i.sent()];case 2:return r=i.sent(),[2,{error:(o=r,a=Error,(null!=a&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)?r.message:r)}];case 3:return[2]}var o,a}))})),c.apply(this,arguments)}return RN(this,(function(c){switch(c.label){case 0:return(r=wg(t))&&"host"in e.origin?(qO().publish("lnurl.auth.start",{message:e,lnurlDetails:n}),[4,zO.allowances.where("host").equalsIgnoreCase(r).first()]):[2];case 1:return i=c.sent(),[4,i_.getState().isUnlocked()];case 2:return o=c.sent(),[4,i_.getState().getAccount()];case 3:return a=c.sent(),o&&i&&i.enabled&&i.lnurlAuth&&(!(null==a?void 0:a.useMnemonicForLnurlAuth)||(null==a?void 0:a.mnemonic))?[4,SN({lnurlDetails:n,origin:e.origin})]:[3,5];case 4:case 6:return[2,c.sent()];case 5:return[4,s()]}}))})),CN.apply(this,arguments)}const BN=function(e,t,n){return CN.apply(this,arguments)};function LN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function UN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){UN(e,t,n[t])}))}return e}function DN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function MN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function HN(){return HN=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){LN(o,r,i,a,s,"next",e)}function s(e){LN(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n;return MN(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_.openPrompt({origin:e.origin,action:"lnurlChannel",args:DN(jN({},e.args),{lnurlDetails:t})})];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,{error:(i=n,o=Error,(null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)?n.message:n)}];case 3:return[2]}var i,o}))})),HN.apply(this,arguments)}const FN=function(e,t){return HN.apply(this,arguments)};function zN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function KN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){KN(e,t,n[t])}))}return e}function VN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function WN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function GN(){return GN=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){zN(o,r,i,a,s,"next",e)}function s(e){zN(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n;return WN(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_.openPrompt({origin:e.origin,action:"lnurlPay",args:VN(qN({},e.args),{lnurlDetails:t})})];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,{error:(i=n,o=Error,(null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)?n.message:n)}];case 3:return[2]}var i,o}))})),GN.apply(this,arguments)}const $N=function(e,t){return GN.apply(this,arguments)};function YN(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ZN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ZN(e,t,n[t])}))}return e}function JN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function QN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function eR(){return eR=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){YN(o,r,i,a,s,"next",e)}function s(e){YN(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n;return QN(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_.openPrompt({origin:e.origin,action:"lnurlWithdraw",args:JN(XN({},e.args),{lnurlDetails:t})})];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,{error:(i=n,o=Error,(null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)?n.message:n)}];case 3:return[2]}var i,o}))})),eR.apply(this,arguments)}const tR=function(e,t){return eR.apply(this,arguments)};function nR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function rR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function iR(){return iR=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nR(o,r,i,a,s,"next",e)}function s(e){nR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r;return rR(this,(function(i){switch(i.label){case 0:if("string"!=typeof e.args.lnurlEncoded)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,mN.getDetails(e.args.lnurlEncoded)];case 2:return n=i.sent(),uN(n)?[2,{error:n.reason}]:[3,4];case 3:return r=i.sent(),[2,{error:(o=r,a=Error,(null!=a&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)?r.message:"Failed to parse LNURL")}];case 4:switch(n.tag){case"channelRequest":return[2,FN(e,n)];case"login":return[2,BN(e,t,n)];case"payRequest":return[2,$N(e,n)];case"withdrawRequest":return[2,tR(e,n)];default:return[2,{error:"not implemented"}]}return[2]}var o,a}))})),iR.apply(this,arguments)}const oR=function(e,t){return iR.apply(this,arguments)};function aR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function sR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var cR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){aR(o,r,i,a,s,"next",e)}function s(e){aR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return sR(this,(function(a){switch(a.label){case 0:return t=e.args.id,n=i_.getState().accounts,Object.keys(n).includes(t)?[4,i_.getState().password()]:[3,2];case 1:return(r=a.sent())?(i=n[t]).nostrPrivateKey?(o=z(i.nostrPrivateKey,r),[2,{data:new Wv(o).getPublicKey()}]):[2,{data:null}]:[2,{error:"Password is missing."}];case 2:return[2,{error:"Account does not exist."}]}}))}));return function(t){return e.apply(this,arguments)}}();const uR=cR;function lR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function fR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fR(e,t,n[t])}))}return e}function dR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function pR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var yR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){lR(o,r,i,a,s,"next",e)}function s(e){lR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i;return pR(this,(function(o){switch(o.label){case 0:if(!(n=wg(t)))return[2];o.label=1;case 1:return o.trys.push([1,13,,14]),[4,jT(KT.NOSTR_NIP04DECRYPT,n)];case 2:return o.sent()?[4,i_.getState().getNostr()]:[3,5];case 3:return[4,o.sent().nip04Decrypt(e.args.peer,e.args.ciphertext)];case 4:return[2,{data:o.sent()}];case 5:return[4,_.openPrompt(dR(hR({},e),{action:"public/nostr/confirmDecrypt"}))];case 6:return(r=o.sent()).data.rememberPermission?[4,CT(KT.NOSTR_NIP04DECRYPT,n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return r.data.confirm?[4,i_.getState().getNostr()]:[3,11];case 9:return[4,o.sent().nip04Decrypt(e.args.peer,e.args.ciphertext)];case 10:return[2,{data:o.sent()}];case 11:return[2,{error:s}];case 12:return[3,14];case 13:return i=o.sent(),console.error("decrypt failed",i),a=i,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](a):a instanceof c)?[2,{error:i.message}]:[3,14];case 14:return[2]}var a,c}))}));return function(t,n){return e.apply(this,arguments)}}();const gR=yR;function bR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function mR(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bR(o,r,i,a,s,"next",e)}function s(e){bR(o,r,i,a,s,"throw",e)}a(void 0)}))}}function wR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var vR=function(){var e=mR((function(e,t){var n,r,i,o,a,s,c;return wR(this,(function(u){switch(u.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=u.sent(),[4,i_.getState().getAccount()];case 2:return i=u.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 3:return o=u.sent(),a=new Set(null==o?void 0:o.enabledFor),r&&o&&o.enabled&&(null==i?void 0:i.nostrPrivateKey)&&a.has("nostr")?[2,{data:{enabled:!0}}]:[3,4];case 4:return u.trys.push([4,14,,15]),[4,_.openPrompt(e)];case 5:return(s=u.sent()).data.enabled&&t.tab?[4,f_(c_.Active,t.tab.id)]:[3,7];case 6:u.sent(),u.label=7;case 7:return s.data.enabled&&s.data.remember?o?o.id?(a.add("nostr"),[4,zO.allowances.update(o.id,{enabled:!0,enabledFor:a,name:e.origin.name,imageURL:e.origin.icon})]):[2,{data:{error:"id is missing"}}]:[3,9]:[3,13];case 8:return u.sent(),[3,11];case 9:return[4,zO.allowances.add({host:n,name:e.origin.name,imageURL:e.origin.icon,enabledFor:["nostr"],enabled:!0,lastPaymentAt:0,totalBudget:0,remainingBudget:0,createdAt:Date.now().toString(),lnurlAuth:!1,tag:""})];case 10:u.sent(),u.label=11;case 11:return s.data.preset===MT.REASONABLE?([KT.NOSTR_GETPUBLICKEY,KT.NOSTR_NIP04ENCRYPT,KT.NOSTR_NIP04DECRYPT,KT.NOSTR_NIP44ENCRYPT,KT.NOSTR_NIP44DECRYPT].forEach(function(){var e=mR((function(e){return wR(this,(function(t){switch(t.label){case 0:return[4,CT(e,n)];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[0,1,3,4,7,9734,10002,22242,30023,30008,30009].forEach(function(){var e=mR((function(e){return wR(this,(function(t){switch(t.label){case 0:return[4,CT(KT.NOSTR_SIGNMESSAGE+"/"+e,n)];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}())):s.data.preset===MT.TRUST_FULLY&&Object.values(KT).forEach(function(){var e=mR((function(e){return wR(this,(function(t){switch(t.label){case 0:return[4,CT(e,n)];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[4,zO.saveToStorage()];case 12:u.sent(),u.label=13;case 13:return[2,{data:{enabled:s.data.enabled,remember:s.data.remember}}];case 14:return c=u.sent(),console.error(c),l=c,(null!=(f=Error)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)?[2,{error:c.message}]:[3,15];case 15:return[2]}var l,f}))}));return function(t,n){return e.apply(this,arguments)}}();const _R=vR;var ER={normalizeToHex:function(e){var t=e.substring(0,4);if(["npub","nsec","note"].includes(t))try{return mg(e,"hex")}catch(e){console.info("ignoring bech32 parsing error",e)}return e},hexToNip19:function(e){return function(e,t){var n=yn.hexToBytes(t),r=pg.bech32.toWords(n);return pg.bech32.encode(e,r,1e3)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nsec",e)},derivePublicKey:function(e){var t=go.getPublicKey(yn.hexToBytes(e)),n=yn.bytesToHex(t);return SR.hexToNip19(n,"npub")}};const SR=ER;function kR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function AR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){AR(e,t,n[t])}))}return e}function PR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function IR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var TR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){kR(o,r,i,a,s,"next",e)}function s(e){kR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i;return IR(this,(function(o){switch(o.label){case 0:if(!(n=wg(t)))return[2];o.label=1;case 1:return o.trys.push([1,13,,14]),[4,jT(KT.NOSTR_NIP04ENCRYPT,n)];case 2:return o.sent()?[4,i_.getState().getNostr()]:[3,5];case 3:return[4,o.sent().nip04Encrypt(e.args.peer,e.args.plaintext)];case 4:return[2,{data:o.sent()}];case 5:return[4,_.openPrompt(PR(OR({},e),{action:"public/nostr/confirmEncrypt",args:{encrypt:{recipientNpub:SR.hexToNip19(e.args.peer,"npub"),message:e.args.plaintext}}}))];case 6:return(r=o.sent()).data.rememberPermission?[4,CT(KT.NOSTR_NIP04ENCRYPT,n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return r.data.confirm?[4,i_.getState().getNostr()]:[3,11];case 9:return[4,o.sent().nip04Encrypt(e.args.peer,e.args.plaintext)];case 10:return[2,{data:o.sent()}];case 11:return[2,{error:s}];case 12:return[3,14];case 13:return i=o.sent(),console.error("encrypt failed",i),a=i,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](a):a instanceof c)?[2,{error:i.message}]:[3,14];case 14:return[2]}var a,c}))}));return function(t,n){return e.apply(this,arguments)}}();const xR=TR;function NR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function RR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var CR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){NR(o,r,i,a,s,"next",e)}function s(e){NR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a;return RR(this,(function(s){switch(s.label){case 0:return n=(null===(t=e.args)||void 0===t?void 0:t.id)||i_.getState().currentAccountId,[4,i_.getState().password()];case 1:return(r=s.sent())?(i=i_.getState().accounts,n&&Object.keys(i).includes(n)?(o=i[n]).mnemonic?(a=new is(z(o.mnemonic,r)),[2,{data:a.deriveNostrPrivateKeyHex()}]):[2,{error:"Master Key is missing."}]:[2,{error:"Error generating private key."}]):[2,{error:"Password is missing."}]}}))}));return function(t){return e.apply(this,arguments)}}();const BR=CR;function LR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function UR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var jR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){LR(o,r,i,a,s,"next",e)}function s(e){LR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a;return UR(this,(function(s){switch(s.label){case 0:return(n=null==e||null===(t=e.args)||void 0===t?void 0:t.id)?[3,2]:(r={},[4,i_.getState().getNostr()]);case 1:return[2,(r.data=s.sent().privateKey,r)];case 2:return i=i_.getState().accounts,Object.keys(i).includes(n)?[4,i_.getState().password()]:[3,4];case 3:return(o=s.sent())?(a=i[n]).nostrPrivateKey?[2,{data:z(a.nostrPrivateKey,o)}]:[2,{data:null}]:[2,{error:"Password is missing."}];case 4:return[2,{error:"Account does not exist."}]}}))}));return function(t){return e.apply(this,arguments)}}();const DR=jR;function MR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function HR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){HR(e,t,n[t])}))}return e}function zR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function KR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var qR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){MR(o,r,i,a,s,"next",e)}function s(e){MR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i;return KR(this,(function(o){switch(o.label){case 0:if(!(n=wg(t)))return[2];o.label=1;case 1:return o.trys.push([1,11,,12]),[4,jT(KT.NOSTR_GETPUBLICKEY,n)];case 2:return o.sent()?[4,i_.getState().getNostr()]:[3,4];case 3:return[2,{data:o.sent().getPublicKey()}];case 4:return[4,_.openPrompt(zR(FR({args:{}},e),{action:"public/nostr/confirmGetPublicKey"}))];case 5:return(r=o.sent()).data.rememberPermission?[4,CT(KT.NOSTR_GETPUBLICKEY,n)]:[3,7];case 6:o.sent(),o.label=7;case 7:return r.data.confirm?[4,i_.getState().getNostr()]:[3,9];case 8:return[2,{data:o.sent().getPublicKey()}];case 9:return[2,{error:"User rejected"}];case 10:return[3,12];case 11:return i=o.sent(),console.error("getPublicKey failed",i),a=i,(null!=(s=Error)&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)?[2,{error:i.message}]:[3,12];case 12:return[2]}var a,s}))}));return function(t,n){return e.apply(this,arguments)}}();const VR=qR;function WR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function GR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $R=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){WR(o,r,i,a,s,"next",e)}function s(e){WR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r;return GR(this,(function(e){switch(e.label){case 0:return(n=wg(t))?[4,zO.allowances.get({host:n})]:[2];case 1:return(null==(r=e.sent())?void 0:r.id)?[2,{data:{"wss://relay.damus.io":{read:!0,write:!0},"wss://nostr1.tunnelsats.com":{read:!0,write:!0},"wss://nostr-pub.wellorder.net":{read:!0,write:!0},"wss://relay.nostr.info":{read:!0,write:!0},"wss://nostr-relay.wlvs.space":{read:!0,write:!0},"wss://nostr.bitcoiner.social":{read:!0,write:!0},"wss://nostr-01.bolt.observer":{read:!0,write:!0},"wss://relayer.fiatjaf.com":{read:!0,write:!0}}}]:[2,{error:"Could not find an allowance for this host"}]}}))}));return function(t,n){return e.apply(this,arguments)}}();const YR=$R;function ZR(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function XR(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var JR=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ZR(o,r,i,a,s,"next",e)}function s(e){ZR(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o;return XR(this,(function(e){switch(e.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=e.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=e.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("nostr")?[2,{data:{isEnabled:!0}}]:[2,{data:{isEnabled:!1}}]}}))}));return function(t,n){return e.apply(this,arguments)}}();const QR=JR;function eC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function tC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tC(e,t,n[t])}))}return e}function rC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function iC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var oC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){eC(o,r,i,a,s,"next",e)}function s(e){eC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i;return iC(this,(function(o){switch(o.label){case 0:if(!(n=wg(t)))return[2];o.label=1;case 1:return o.trys.push([1,13,,14]),[4,jT(KT.NOSTR_NIP44DECRYPT,n)];case 2:return o.sent()?[4,i_.getState().getNostr()]:[3,5];case 3:return[4,o.sent().nip44Decrypt(e.args.peer,e.args.ciphertext)];case 4:return[2,{data:o.sent()}];case 5:return[4,_.openPrompt(rC(nC({},e),{action:"public/nostr/confirmDecrypt"}))];case 6:return(r=o.sent()).data.rememberPermission?[4,CT(KT.NOSTR_NIP44DECRYPT,n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return r.data.confirm?[4,i_.getState().getNostr()]:[3,11];case 9:return[4,o.sent().nip44Decrypt(e.args.peer,e.args.ciphertext)];case 10:return[2,{data:o.sent()}];case 11:return[2,{error:s}];case 12:return[3,14];case 13:return i=o.sent(),console.error("decrypt failed",i),a=i,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](a):a instanceof c)?[2,{error:i.message}]:[3,14];case 14:return[2]}var a,c}))}));return function(t,n){return e.apply(this,arguments)}}();const aC=oC;function sC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function cC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){cC(e,t,n[t])}))}return e}function lC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function fC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var hC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){sC(o,r,i,a,s,"next",e)}function s(e){sC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i;return fC(this,(function(o){switch(o.label){case 0:if(!(n=wg(t)))return[2];o.label=1;case 1:return o.trys.push([1,11,,12]),[4,jT(KT.NOSTR_NIP44ENCRYPT,n)];case 2:return o.sent()?[4,i_.getState().getNostr()]:[3,4];case 3:return[2,{data:o.sent().nip44Encrypt(e.args.peer,e.args.plaintext)}];case 4:return[4,_.openPrompt(lC(uC({},e),{action:"public/nostr/confirmEncrypt",args:{encrypt:{recipientNpub:SR.hexToNip19(e.args.peer,"npub"),message:e.args.plaintext}}}))];case 5:return(r=o.sent()).data.rememberPermission?[4,CT(KT.NOSTR_NIP44ENCRYPT,n)]:[3,7];case 6:o.sent(),o.label=7;case 7:return r.data.confirm?[4,i_.getState().getNostr()]:[3,9];case 8:return[2,{data:o.sent().nip44Encrypt(e.args.peer,e.args.plaintext)}];case 9:return[2,{error:s}];case 10:return[3,12];case 11:return i=o.sent(),console.error("encrypt failed",i),a=i,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](a):a instanceof c)?[2,{error:i.message}]:[3,12];case 12:return[2]}var a,c}))}));return function(t,n){return e.apply(this,arguments)}}();const dC=hC;function pC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function yC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var gC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){pC(o,r,i,a,s,"next",e)}function s(e){pC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return yC(this,(function(o){switch(o.label){case 0:return n=(null===(t=e.args)||void 0===t?void 0:t.id)||i_.getState().currentAccountId,r=i_.getState().accounts,n&&Object.keys(r).includes(n)?((i=r[n]).nostrPrivateKey&&delete i.nostrPrivateKey,i.hasImportedNostrKey=!0,r[n]=i,i_.setState({accounts:r,nostr:null}),[4,i_.getState().saveToStorage()]):[3,2];case 1:return o.sent(),[2,{data:{accountId:n}}];case 2:return[2,{error:"No account selected."}]}}))}));return function(t){return e.apply(this,arguments)}}();const bC=gC;function mC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function wC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var vC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){mC(o,r,i,a,s,"next",e)}function s(e){mC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a;return wC(this,(function(s){switch(s.label){case 0:return n=(null===(t=e.args)||void 0===t?void 0:t.id)||i_.getState().currentAccountId,[4,i_.getState().password()];case 1:if(!(r=s.sent()))return[2,{error:"Password is missing."}];try{i=SR.normalizeToHex(e.args.privateKey),SR.derivePublicKey(i),SR.hexToNip19(i,"nsec")}catch(e){return[2,{error:"Invalid private key"}]}return o=i_.getState().accounts,n&&Object.keys(o).includes(n)?((a=o[n]).nostrPrivateKey=i?F(i,r):null,a.hasImportedNostrKey=!a.mnemonic||new is(z(a.mnemonic,r)).deriveNostrPrivateKeyHex()!==i,o[n]=a,i_.setState({accounts:o,nostr:null}),[4,i_.getState().saveToStorage()]):[3,3];case 2:return s.sent(),[2,{data:{accountId:n}}];case 3:return[2,{error:"No account selected."}]}}))}));return function(t){return e.apply(this,arguments)}}();const _C=vC;function EC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function SC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){SC(e,t,n[t])}))}return e}function AC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function OC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var PC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){EC(o,r,i,a,s,"next",e)}function s(e){EC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s;return OC(this,(function(c){switch(c.label){case 0:return(n=wg(t))?[4,i_.getState().getNostr()]:[2];case 1:r=c.sent(),i=e.args.event,c.label=2;case 2:return c.trys.push([2,12,,13]),Bv(i)?[4,jT(KT.NOSTR_SIGNMESSAGE,n)]:(console.error("Invalid event"),[2,{error:"Invalid event."}]);case 3:return(o=c.sent())?[3,5]:[4,jT(KT.NOSTR_SIGNMESSAGE+"/"+i.kind,n)];case 4:o=c.sent(),c.label=5;case 5:return o?[3,10]:[4,_.openPrompt(AC(kC({},e),{action:"public/nostr/confirmSignMessage"}))];case 6:return"dont_ask_current"!=(a=c.sent()).data.permissionOption?[3,8]:[4,CT(KT.NOSTR_SIGNMESSAGE+"/"+i.kind,n)];case 7:c.sent(),c.label=8;case 8:return"dont_ask_any"!=a.data.permissionOption?[3,10]:[4,CT(KT.NOSTR_SIGNMESSAGE,n)];case 9:c.sent(),c.label=10;case 10:return i.pubkey||(i.pubkey=r.getPublicKey()),i.id||(i.id=r.getEventHash(i)),[4,r.signEvent(i)];case 11:return[2,{data:c.sent()}];case 12:return s=c.sent(),console.error("signEvent cancelled",s),u=s,(null!=(l=Error)&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](u):u instanceof l)?[2,{error:s.message}]:[3,13];case 13:return[2]}var u,l}))}));return function(t,n){return e.apply(this,arguments)}}();const IC=PC;function TC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function xC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xC(e,t,n[t])}))}return e}function RC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function CC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var BC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){TC(o,r,i,a,s,"next",e)}function s(e){TC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o;return CC(this,(function(a){switch(a.label){case 0:return(n=wg(t))?[4,i_.getState().getNostr()]:[2];case 1:r=a.sent(),i=e.args.sigHash,a.label=2;case 2:if(a.trys.push([2,8,,9]),!i||"string"!=typeof i)throw new Error("sigHash is missing or not correct");return[4,jT(KT.NOSTR_SIGNSCHNORR,n)];case 3:return a.sent()?[3,6]:[4,_.openPrompt(RC(NC({},e),{action:"public/nostr/confirmSignSchnorr"}))];case 4:return a.sent().data.enabled?[4,CT(KT.NOSTR_SIGNSCHNORR,n)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[4,r.signSchnorr(i)];case 7:return[2,{data:a.sent()}];case 8:return o=a.sent(),console.error("signSchnorr cancelled",o),s=o,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](s):s instanceof c)?[2,{error:o.message}]:[3,9];case 9:return[2]}var s,c}))}));return function(t,n){return e.apply(this,arguments)}}();const LC=BC;function UC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function jC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var DC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){UC(o,r,i,a,s,"next",e)}function s(e){UC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return jC(this,(function(r){switch(r.label){case 0:return n=(null==e||null===(t=e.args)||void 0===t?void 0:t.limit)||2121,[4,zO.payments.toCollection().limit(n).reverse().sortBy("createdAt")];case 1:return[2,{data:{payments:r.sent()}}]}}))}));return function(t){return e.apply(this,arguments)}}();const MC=DC;function HC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function FC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var zC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){HC(o,r,i,a,s,"next",e)}function s(e){HC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return FC(this,(function(i){switch(i.label){case 0:return n=e.args.accountId,r=(null==e||null===(t=e.args)||void 0===t?void 0:t.limit)||2121,[4,zO.payments.toCollection().filter((function(e){return e.accountId===n})).limit(r).reverse().sortBy("createdAt")];case 1:return[2,{data:{payments:i.sent()}}]}}))}));return function(t){return e.apply(this,arguments)}}();const KC=zC;function qC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function VC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var WC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){qC(o,r,i,a,s,"next",e)}function s(e){qC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c;return VC(this,(function(u){switch(u.label){case 0:return t=e.args,n=t.host,r=t.method,i=t.enabled,o=t.blocked,a=i_.getState().currentAccountId,[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 1:return(null==(s=u.sent())?void 0:s.id)?a?[4,zO.permissions.add({createdAt:Date.now().toString(),allowanceId:s.id,accountId:a,host:n,method:r,enabled:i,blocked:o})]:[2,{error:"No Account selected"}]:[2,{error:"No Allowance set for this host"}];case 2:return c=u.sent(),[4,zO.saveToStorage()];case 3:return u.sent(),[2,{data:c}]}}))}));return function(t){return e.apply(this,arguments)}}();const GC=WC;function $C(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function YC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ZC=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$C(o,r,i,a,s,"next",e)}function s(e){$C(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o;return YC(this,(function(a){switch(a.label){case 0:return t=e.args,n=t.host,r=t.method,i=t.accountId,[4,zO.permissions.where("host").equalsIgnoreCase(n).and((function(e){return e.accountId===i&&e.method===r})).delete()];case 1:return o=a.sent(),[4,zO.saveToStorage()];case 2:return a.sent(),[2,{data:!!o}]}}))}));return function(t){return e.apply(this,arguments)}}();const XC=ZC;function JC(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function QC(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var eB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){JC(o,r,i,a,s,"next",e)}function s(e){JC(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return QC(this,(function(i){switch(i.label){case 0:return t=e.args,n=t.ids,(r=t.accountId)?[4,zO.permissions.where("id").anyOf(n).and((function(e){return e.accountId===r})).delete()]:[2,{error:"Missing account id to delete permission(s)."}];case 1:return i.sent(),[4,zO.saveToStorage()];case 2:return i.sent(),[2,{data:!0}]}}))}));return function(t){return e.apply(this,arguments)}}();const tB=eB;function nB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function rB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rB(e,t,n[t])}))}return e}function oB(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function aB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var sB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nB(o,r,i,a,s,"next",e)}function s(e){nB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c,u,l,f,h,d;return aB(this,(function(p){switch(p.label){case 0:return t=e.args,n=t.id,(r=t.accountId)?[4,zO.permissions.where({allowanceId:n,accountId:r}).toArray()]:[2,{error:"Missing account id to fetch permissions."}];case 1:i=p.sent(),o=[],a=!0,s=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)(f=l.value).id&&(h=f.id,d=oB(iB({},f),{id:h}),o.push(d))}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}return[2,{data:{permissions:o}}]}}))}));return function(t){return e.apply(this,arguments)}}();const cB=sB;function uB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function lB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var hB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){uB(o,r,i,a,s,"next",e)}function s(e){uB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s;return fB(this,(function(c){switch(c.label){case 0:return t=i_.getState().accounts,[4,i_.getState().password()];case 1:if(!(n=c.sent()))return[2,{error:"Password is missing"}];for(var u in r=e.args.password,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lB(e,t,n[t])}))}return e}({},t),i)o=z(t[u].config,n),i[u].config=F(o,r),t[u].nostrPrivateKey&&(a=z(t[u].nostrPrivateKey,n),i[u].nostrPrivateKey=F(a,r)),t[u].mnemonic&&(s=z(t[u].mnemonic,n),i[u].mnemonic=F(s,r));return[4,i_.getState().password(r)];case 2:return c.sent(),i_.setState({accounts:i}),[4,i_.getState().saveToStorage()];case 3:return c.sent(),[2,{}]}}))}));return function(t){return e.apply(this,arguments)}}();const dB=hB;function pB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function yB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var gB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){pB(o,r,i,a,s,"next",e)}function s(e){pB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(){return yB(this,(function(e){return[2,{data:i_.getState().settings}]}))}));return function(){return e.apply(this,arguments)}}();const bB=gB;function mB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function wB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var _B=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){mB(o,r,i,a,s,"next",e)}function s(e){mB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r;return vB(this,(function(i){switch(i.label){case 0:return t=i_.getState().settings,"object"!=typeof(n=e.args.setting)?[3,2]:(r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){wB(e,t,n[t])}))}return e}({},t,n),i_.setState({settings:r}),[4,i_.getState().saveToStorage()]);case 1:return i.sent(),[2,Promise.resolve({data:r})];case 2:return[2,Promise.reject(new Error("Incorrect setting"))];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const EB=_B;function SB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var AB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){SB(o,r,i,a,s,"next",e)}function s(e){SB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){return kB(this,(function(e){switch(e.label){case 0:return[4,i_.getState().reset()];case 1:return e.sent(),[4,zO.clearAllTables()];case 2:return e.sent(),[2,{data:{reset:!0}}]}}))}));return function(t){return e.apply(this,arguments)}}();const OB=AB;function PB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function IB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var TB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){PB(o,r,i,a,s,"next",e)}function s(e){PB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return IB(this,(function(n){switch(n.label){case 0:return t=e.args.password,[4,i_.getState().password(t)];case 1:return n.sent(),[2,Promise.resolve({data:{unlocked:!0}})]}}))}));return function(t){return e.apply(this,arguments)}}();const xB=TB;function NB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function RB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var CB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){NB(o,r,i,a,s,"next",e)}function s(e){NB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return RB(this,(function(e){switch(e.label){case 0:return[4,i_.getState().isUnlocked()];case 1:return t=e.sent(),n=i_.getState().getAccount(),r=i_.getState().currentAccountId,i=null!=n,[2,Promise.resolve({data:{unlocked:t,configured:i,currentAccountId:r}})]}}))}));return function(t){return e.apply(this,arguments)}}();const BB=CB;function LB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function UB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var jB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){LB(o,r,i,a,s,"next",e)}function s(e){LB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a;return UB(this,(function(t){switch(t.label){case 0:return n=e.args,[4,(r=new Dw[n.connector](n,n.config)).init()];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,r.getInfo()];case 3:return o=t.sent(),[4,r.unload()];case 4:return t.sent(),[2,{data:{valid:!0,info:o,oAuthToken:null===(i=r.getOAuthToken)||void 0===i?void 0:i.call(r)}}];case 5:return a=t.sent(),console.error(a),[2,{data:{valid:!1,error:a.message}}];case 6:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();const DB=jB;function MB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function HB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var FB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){MB(o,r,i,a,s,"next",e)}function s(e){MB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return HB(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,i_.getState().getConnector()];case 1:if(!(t=r.sent()).createSwap)throw new Error("This connector does not support createSwap");return[4,t.createSwap(e.args)];case 2:return[2,{data:r.sent()}];case 3:return n=r.sent(),console.error(n),[2,{error:"Creating swap failed: "+(i=n,o=Error,(null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](i):i instanceof o)?n.message:"")}];case 4:return[2]}var i,o}))}));return function(t){return e.apply(this,arguments)}}();const zB=FB;function KB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function qB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var VB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){KB(o,r,i,a,s,"next",e)}function s(e){KB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return qB(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,i_.getState().getConnector()];case 1:if(!(t=e.sent()).getSwapInfo)throw new Error("This connector does not support createSwap");return[4,t.getSwapInfo()];case 2:return[2,{data:e.sent()}];case 3:return n=e.sent(),console.error(n),[2,{error:"Getting swap info failed: "+(r=n,i=Error,(null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?n.message:"")}];case 4:return[2]}var r,i}))}));return function(t){return e.apply(this,arguments)}}();const WB=VB;function GB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function $B(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var YB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){GB(o,r,i,a,s,"next",e)}function s(e){GB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s,c;return $B(this,(function(u){switch(u.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=u.sent(),[4,i_.getState().getAccount()];case 2:return i=u.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 3:return o=u.sent(),a=new Set(null==o?void 0:o.enabledFor),r&&o&&o.enabled&&(null==i?void 0:i.mnemonic)&&a.has("webbtc")?[2,{data:{enabled:!0}}]:[3,4];case 4:return u.trys.push([4,14,,15]),[4,_.openPrompt(e)];case 5:return(s=u.sent()).data.enabled&&t.tab?[4,f_(c_.Active,t.tab.id)]:[3,7];case 6:u.sent(),u.label=7;case 7:return s.data.enabled&&s.data.remember?o?o.id?(a.add("webbtc"),[4,zO.allowances.update(o.id,{enabled:!0,enabledFor:a,name:e.origin.name,imageURL:e.origin.icon})]):[2,{data:{error:"id is missing"}}]:[3,9]:[3,13];case 8:return u.sent(),[3,11];case 9:return[4,zO.allowances.add({host:n,name:e.origin.name,imageURL:e.origin.icon,enabled:!0,enabledFor:["webbtc"],lastPaymentAt:0,totalBudget:0,remainingBudget:0,createdAt:Date.now().toString(),lnurlAuth:!1,tag:""})];case 10:u.sent(),u.label=11;case 11:return[4,zO.saveToStorage()];case 12:u.sent(),u.label=13;case 13:return[2,{data:{enabled:s.data.enabled,remember:s.data.remember}}];case 14:return c=u.sent(),console.error(c),l=c,(null!=(f=Error)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)?[2,{error:c.message}]:[3,15];case 15:return[2]}var l,f}))}));return function(t,n){return e.apply(this,arguments)}}();const ZB=YB;function XB(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function JB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var QB=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){XB(o,r,i,a,s,"next",e)}function s(e){XB(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return JB(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i_.getState().getBitcoin()];case 1:return t=e.sent(),[2,{data:t.getTaprootAddress()}];case 2:return n=e.sent(),console.error("getAddress failed: ",n),[2,{error:"getAddress failed: "+n}];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const eL=QB;function tL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function nL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nL(e,t,n[t])}))}return e}function iL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function oL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var aL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){tL(o,r,i,a,s,"next",e)}function s(e){tL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i;return oL(this,(function(o){switch(o.label){case 0:if(!("host"in e.origin))return console.error("error",e.origin),[2];o.label=1;case 1:return o.trys.push([1,9,,10]),[4,jT(FT.BITCOIN_GETADDRESS,e.origin.host)];case 2:return t=o.sent(),[4,i_.getState().getBitcoin()];case 3:return n=o.sent(),t?[2,{data:n.getTaprootAddress()}]:[3,4];case 4:return[4,_.openPrompt(iL(rL({},e),{action:"public/webbtc/confirmGetAddress"}))];case 5:return(r=o.sent()).data.rememberPermission?[4,CT(FT.BITCOIN_GETADDRESS,e.origin.host)]:[3,7];case 6:o.sent(),o.label=7;case 7:return r.data.confirm?[2,{data:n.getTaprootAddress()}]:[2,{error:"User rejected"}];case 8:return[3,10];case 9:return i=o.sent(),console.error("getAddress failed",i),a=i,(null!=(s=Error)&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)?[2,{error:i.message}]:[3,10];case 10:return[2]}var a,s}))}));return function(t){return e.apply(this,arguments)}}();const sL=aL;function cL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function uL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var lL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){cL(o,r,i,a,s,"next",e)}function s(e){cL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){return uL(this,(function(e){return[2,{data:{version:"Alby",supports:["bitcoin"],methods:["getInfo","signPsbt","getAddress"]}}]}))}));return function(t){return e.apply(this,arguments)}}();const fL=lL;function hL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function dL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var pL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){hL(o,r,i,a,s,"next",e)}function s(e){hL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n;return dL(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i_.getState().getBitcoin()];case 1:return t=r.sent(),[2,{data:t.getPsbtPreview(e.args.psbt)}];case 2:return n=r.sent(),console.error("getPsbtPreview failed: ",n),[2,{error:"getPsbtPreview failed: "+n}];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const yL=pL;function gL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function bL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var mL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){gL(o,r,i,a,s,"next",e)}function s(e){gL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o;return bL(this,(function(e){switch(e.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=e.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=e.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("webbtc")?[2,{data:{isEnabled:!0}}]:[2,{data:{isEnabled:!1}}]}}))}));return function(t,n){return e.apply(this,arguments)}}();const wL=mL;function vL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function _L(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var EL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){vL(o,r,i,a,s,"next",e)}function s(e){vL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return _L(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,i_.getState().getBitcoin()];case 1:return[4,n.sent().signPsbt(e.args.psbt)];case 2:return[2,{data:{signed:n.sent()}}];case 3:return t=n.sent(),console.error("signPsbt failed: ",t),[2,{error:"signPsbt failed: "+t}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();const SL=EL;function kL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function AL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){AL(e,t,n[t])}))}return e}function PL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function IL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var TL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){kL(o,r,i,a,s,"next",e)}function s(e){kL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return IL(this,(function(n){switch(n.label){case 0:if("string"!=typeof e.args.psbt)return[2,{error:"PSBT missing."}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,_.openPrompt(PL(OL({},e),{action:"webbtc/confirmSignPsbt"}))];case 2:return[2,n.sent()];case 3:return t=n.sent(),console.error("signPsbt cancelled",t),r=t,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?[2,{error:t.message}]:[3,4];case 4:return[2]}var r,i}))}));return function(t){return e.apply(this,arguments)}}();const xL=TL;function NL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function RL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var CL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){NL(o,r,i,a,s,"next",e)}function s(e){NL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o,a,s;return RL(this,(function(c){switch(c.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=c.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=c.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("webln")?[2,{data:{enabled:!0}}]:[3,3];case 3:return c.trys.push([3,13,,14]),[4,_.openPrompt(e)];case 4:return(a=c.sent()).data.enabled&&t.tab?[4,f_(c_.Active,t.tab.id)]:[3,6];case 5:c.sent(),c.label=6;case 6:return a.data.enabled&&a.data.remember?i?i.id?(o.add("webln"),[4,zO.allowances.update(i.id,{enabled:!0,enabledFor:o,name:e.origin.name,imageURL:e.origin.icon})]):[2,{data:{error:"id is missing"}}]:[3,8]:[3,12];case 7:return c.sent(),[3,10];case 8:return[4,zO.allowances.add({host:n,name:e.origin.name,imageURL:e.origin.icon,enabled:!0,enabledFor:["webln"],lastPaymentAt:0,totalBudget:0,remainingBudget:0,createdAt:Date.now().toString(),lnurlAuth:!1,tag:""})];case 9:c.sent(),c.label=10;case 10:return[4,zO.saveToStorage()];case 11:c.sent(),c.label=12;case 12:return[2,{data:{enabled:a.data.enabled,remember:a.data.remember}}];case 13:return s=c.sent(),console.error(s),u=s,(null!=(l=Error)&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](u):u instanceof l)?[2,{error:s.message}]:[3,14];case 14:return[2]}var u,l}))}));return function(t,n){return e.apply(this,arguments)}}();const BL=CL;function LL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function UL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var jL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){LL(o,r,i,a,s,"next",e)}function s(e){LL(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t,n,r,i,o,a,s,c;return UL(this,(function(u){switch(u.label){case 0:return"host"in e.origin?[4,i_.getState().getConnector()]:[2];case 1:t=u.sent(),n=i_.getState().currentAccountId,u.label=2;case 2:return u.trys.push([2,14,,15]),[4,zO.allowances.where("host").equalsIgnoreCase(e.origin.host).first()];case 3:if(!(null==(r=u.sent())?void 0:r.id))throw new Error("Could not find an allowance for this host");if(!n)throw new Error("Could not find a selected account");return[4,zO.permissions.where("host").equalsIgnoreCase(e.origin.host).and((function(e){return e.accountId===n&&"webln.getbalance"===e.method})).first()];case 4:return(i=u.sent())&&i.enabled?[4,t.getBalance()]:[3,6];case 5:return[2,u.sent()];case 6:return[4,_.openPrompt({args:{requestPermission:{method:"getBalance",description:"webln.getbalance.description"}},origin:e.origin,action:"public/confirmRequestPermission"})];case 7:return o=u.sent(),[4,t.getBalance()];case 8:return a=u.sent(),o.data.enabled?[4,zO.permissions.add({createdAt:Date.now().toString(),accountId:n,allowanceId:r.id,host:e.origin.host,method:"webln.getbalance",enabled:o.data.enabled,blocked:o.data.blocked})]:[3,12];case 9:return s=u.sent(),!!s?[4,zO.saveToStorage()]:[3,11];case 10:u.sent(),u.label=11;case 11:u.label=12;case 12:return[2,a];case 13:return[3,15];case 14:return c=u.sent(),console.error(c),[2,{error:(l=c,f=Error,(null!=f&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)?c.message:"Something went wrong with during webln.getBalance()")}];case 15:return[2]}var l,f}))}));return function(t){return e.apply(this,arguments)}}();const DL=jL;function ML(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function HL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var FL=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ML(o,r,i,a,s,"next",e)}function s(e){ML(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e,t){var n,r,i,o;return HL(this,(function(e){switch(e.label){case 0:return(n=wg(t))?[4,i_.getState().isUnlocked()]:[2];case 1:return r=e.sent(),[4,zO.allowances.where("host").equalsIgnoreCase(n).first()];case 2:return i=e.sent(),o=new Set(null==i?void 0:i.enabledFor),r&&i&&i.enabled&&o.has("webln")?[2,{data:{isEnabled:!0}}]:[2,{data:{isEnabled:!1}}]}}))}));return function(t,n){return e.apply(this,arguments)}}();const zL=FL;function KL(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function qL(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){KL(o,r,i,a,s,"next",e)}function s(e){KL(o,r,i,a,s,"throw",e)}a(void 0)}))}}function VL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WL(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function GL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){VL(e,t,n[t])}))}return e}function $L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function YL(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ZL=function(){var e=qL((function(e,t){var n,r,i;return YL(this,(function(o){switch(o.label){case 0:return(n=wg(t))?"string"!=typeof(r=e.args.paymentRequest)?[2,{error:"Payment request missing."}]:(i=Qg().decode(r),[4,XL(n,i.satoshis||0)]):[2];case 1:return o.sent()?[2,QL(e)]:[2,tU(e)]}}))}));return function(t,n){return e.apply(this,arguments)}}();function XL(e,t){return JL.apply(this,arguments)}function JL(){return(JL=qL((function(e,t){var n;return YL(this,(function(r){switch(r.label){case 0:return[4,zO.allowances.where("host").equalsIgnoreCase(e).first()];case 1:return[2,(n=r.sent())&&n.remainingBudget>t]}}))}))).apply(this,arguments)}function QL(e){return eU.apply(this,arguments)}function eU(){return eU=qL((function(e){var t;return YL(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,eN(e)];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error(t),WL(t,Error)?[2,{error:t.message}]:[3,3];case 3:return[2]}}))})),eU.apply(this,arguments)}function tU(e){return nU.apply(this,arguments)}function nU(){return nU=qL((function(e){var t;return YL(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_.openPrompt($L(GL({},e),{action:"confirmPayment"}))];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error("Payment cancelled",t),WL(t,Error)?[2,{error:t.message}]:[3,3];case 3:return[2]}}))})),nU.apply(this,arguments)}function rU(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function iU(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){rU(o,r,i,a,s,"next",e)}function s(e){rU(o,r,i,a,s,"throw",e)}a(void 0)}))}}function oU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aU(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function sU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oU(e,t,n[t])}))}return e}function cU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function uU(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var lU=function(){var e=iU((function(e,t){var n,r,i;return uU(this,(function(o){switch(o.label){case 0:return(n=wg(t))?(r=e.args.destination,i=e.args.amount,"string"!=typeof r||"string"!=typeof i&&"number"!=typeof i?[2,{error:"Destination or amount missing."}]:[4,XL(n,parseInt(i))]):[2];case 1:return o.sent()?[2,fU(e)]:[2,dU(e)]}}))}));return function(t,n){return e.apply(this,arguments)}}();function fU(e){return hU.apply(this,arguments)}function hU(){return hU=iU((function(e){var t;return uU(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,jx(e)];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error(t),aU(t,Error)?[2,{error:t.message}]:[3,3];case 3:return[2]}}))})),hU.apply(this,arguments)}function dU(e){return pU.apply(this,arguments)}function pU(){return pU=iU((function(e){var t;return uU(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_.openPrompt(cU(sU({},e),{action:"confirmKeysend"}))];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error("Payment cancelled",t),aU(t,Error)?[2,{error:t.message}]:[3,3];case 3:return[2]}}))})),pU.apply(this,arguments)}const yU=lU,gU=oR;function bU(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function mU(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bU(o,r,i,a,s,"next",e)}function s(e){bU(o,r,i,a,s,"throw",e)}a(void 0)}))}}function wU(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var vU=function(){var e=mU((function(e){return wU(this,(function(t){return[2,_U(e)]}))}));return function(t){return e.apply(this,arguments)}}(),_U=function(){var e=mU((function(e){var t,n,r,i,o;return wU(this,(function(a){switch(a.label){case 0:t=e.args.amount||e.args.defaultAmount,n=e.args.memo||e.args.defaultMemo,r=!e.args.amount,i=!e.args.memo||""===e.args.memo,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,_.openPrompt({origin:e.origin,action:"makeInvoice",args:{amountEditable:r,memoEditable:i,invoiceAttributes:{amount:t,memo:n,minimumAmount:e.args.minimumAmount,maximumAmount:e.args.maximumAmount}}})];case 2:return[2,a.sent()];case 3:return o=a.sent(),[2,{error:(s=o,c=Error,(null!=c&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](s):s instanceof c)?o.message:o)}];case 4:return[2]}var s,c}))}));return function(t){return e.apply(this,arguments)}}();const EU=vU;function SU(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function kU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){kU(e,t,n[t])}))}return e}function OU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function PU(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function IU(){return IU=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){SU(o,r,i,a,s,"next",e)}function s(e){SU(o,r,i,a,s,"throw",e)}a(void 0)}))}}((function(e){var t;return PU(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_.openPrompt(OU(AU({},e),{action:"confirmPaymentAsync"}))];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error("Payment cancelled",t),r=t,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?[2,{error:t.message}]:[3,3];case 3:return[2]}var r,i}))})),IU.apply(this,arguments)}function TU(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function xU(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){TU(o,r,i,a,s,"next",e)}function s(e){TU(o,r,i,a,s,"throw",e)}a(void 0)}))}}function NU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){NU(e,t,n[t])}))}return e}function CU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function BU(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var LU=function(){var e=xU((function(e){return BU(this,(function(t){return"string"!=typeof e.args.message?[2,{error:"Message missing."}]:[2,UU(e)]}))}));return function(t){return e.apply(this,arguments)}}();function UU(e){return jU.apply(this,arguments)}function jU(){return jU=xU((function(e){var t;return BU(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_.openPrompt(CU(RU({},e),{action:"confirmSignMessage"}))];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error("SignMessage cancelled",t),r=t,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?[2,{error:t.message}]:[3,3];case 3:return[2]}var r,i}))})),jU.apply(this,arguments)}var DU={addAllowance:RI,getAllowance:KI,getAllowanceById:ZI,listAllowances:nT,deleteAllowance:UI,updateAllowance:aT,addPermission:GC,deletePermission:XC,deletePermissionsById:tB,listPermissions:cB,lock:QP,unlock:vI,getInfo:Px,getTransactions:Cx,sendPayment:eN,sendPaymentAsync:function(e){return iN.apply(this,arguments)},keysend:jx,checkPayment:wx,signMessage:cN,makeInvoice:Vx,connectPeer:Sx,getPayments:MC,getPaymentsByAccount:KC,accountInfo:YP,accountDecryptedDetails:FP,addAccount:CP,editAccount:dP,getAccounts:jP,getAccount:VP,removeAccount:uI,selectAccount:pI,setPassword:xB,reset:OB,status:BB,validateAccount:DB,setIcon:l_,changePassword:dB,setSetting:EB,getSettings:bB,addBlocklist:lT,deleteBlocklist:pT,getBlocklist:mT,listBlocklist:ET,lnurl:oR,lnurlAuth:ON,getCurrencyRate:mb,setMnemonic:OP,getMnemonic:EP,generateMnemonic:mP,getSwapInfo:WB,createSwap:zB,liquid:{signPset:cx,getPsetPreview:ex,fetchAssetRegistry:xT},nostr:{generatePrivateKey:BR,getPrivateKey:DR,getPublicKey:uR,removePrivateKey:bC,setPrivateKey:_C},webbtc:{getPsbtPreview:yL,signPsbt:SL,getAddress:eL},public:{webbtc:{isEnabled:wL,enable:ZB,getInfo:fL,signPsbtWithPrompt:xL,getAddressOrPrompt:sL},alby:{isEnabled:II,enable:kI,addAccount:function(e){return oI.apply(this,arguments)}},webln:{enable:BL,isEnabled:zL,getInfo:Px,sendPaymentOrPrompt:ZL,sendPaymentAsyncWithPrompt:function(e){return IU.apply(this,arguments)},keysendOrPrompt:yU,signMessageOrPrompt:LU,lnurl:gU,makeInvoice:EU,getBalanceOrPrompt:DL,request:Yx},liquid:{isEnabled:ix,enable:OT,getAddressOrPrompt:ZT,signPsetWithPrompt:yx},nostr:{isEnabled:QR,enable:_R,getPublicKeyOrPrompt:VR,signEventOrPrompt:IC,signSchnorrOrPrompt:LC,getRelays:YR,encryptOrPrompt:xR,decryptOrPrompt:gR,nip44EncryptOrPrompt:dC,nip44DecryptOrPrompt:aC}}};function MU(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function HU(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){MU(o,r,i,a,s,"next",e)}function s(e){MU(o,r,i,a,s,"throw",e)}a(void 0)}))}}function FU(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var zU=!1,KU=!1,qU=_.deferredPromise(),VU=qU.promise,WU=qU.resolve,GU=qU.reject,$U=function(){var e=HU((function(e,t,n){var r,i,o;return FU(this,(function(a){switch(a.label){case 0:return"complete"===t.status&&(null===(r=n.url)||void 0===r?void 0:r.startsWith("http"))?(i=new URL(n.url),[4,FO.allowances.where("host").equalsIgnoreCase(i.host).first()]):[2];case 1:return o=a.sent(),[4,f_(o?c_.Active:c_.Default,e)];case 2:return a.sent(),[2]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),YU=function(){var e=HU((function(e,t){var n,r;return FU(this,(function(i){switch(i.label){case 0:return"LBE"===e.application&&e.prompt?(e.type&&console.error("Invalid message, using type: ",e),[4,VU]):[2];case 1:return i.sent(),n=e.action||e.type,console.info("Routing call: ".concat(n)),r=function(e){if(!e)throw new Error("No action path provided to router");var t=e.split("/").reduce((function(e,t){return e[t]}),DU);return t||(console.warn("Route not found: ".concat(e)),function(){return Promise.reject({error:"".concat(e," not found")})})}(n)(e,t),[4,r];case 2:return[2,i.sent()]}}))}));return function(t,n){return e.apply(this,arguments)}}();function ZU(){return(ZU=HU((function(){return FU(this,(function(e){switch(e.label){case 0:return console.info("Loading background script"),E&&A(),[4,i_.getState().init()];case 1:return e.sent(),console.info("State loaded"),[4,"indexedDB"in globalThis?new Promise((function(e){var t=globalThis.indexedDB.open("LBE-AVAILABILITY-CHECK",1);t.onsuccess=function(){e(!0)},t.onerror=function(){e(!1)}})):Promise.resolve(!1)];case 2:return e.sent()?(console.info("Using indexedDB"),[4,FO.open()]):[3,4];case 3:return e.sent(),[3,6];case 4:return console.info("Using in memory DB"),[4,FO.openWithInMemoryDB()];case 5:e.sent(),e.label=6;case 6:return console.info("DB opened"),oP(),console.info("Events subscribed"),KU?(console.info("Running any pending migrations"),[4,uP()]):[3,8];case 7:e.sent(),e.label=8;case 8:return console.info("Loading completed"),[2]}}))}))).apply(this,arguments)}o().runtime.onMessage.addListener((function(e,t){false})),o().runtime.onMessage.addListener(YU),o().tabs.onUpdated.addListener($U),o().tabs.onUpdated.addListener((function(e,t,n){var r;"complete"===t.status&&(null===(r=n.url)||void 0===r?void 0:r.startsWith("http"))&&setTimeout((function(){o().tabs.sendMessage(e,{action:"extractLightningData"})}),150)})),o().runtime.onInstalled.addListener((function(e){console.info("Handle installed: ".concat(e.reason)),"install"===e.reason&&(zU=!0),"update"===e.reason&&(console.info("Alby was recently updated"),KU=!0)})),console.info("Welcome to Alby"),function(){return ZU.apply(this,arguments)}().then((function(){WU&&WU(),zU&&!i_.getState().getAccount()&&_.openUrl("welcome.html")})).catch((function(e){console.error(e),GU&&GU()})),o().runtime.setUninstallURL("https://getalby.com/goodbye")})()})();