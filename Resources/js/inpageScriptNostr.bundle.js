(()=>{"use strict";class e{nip04=new t(this);constructor(){this.enabled=!1}async enable(){return this.enabled?{enabled:!0}:await this.execute("enable")}async getPublicKey(){return await this.enable(),await this.execute("getPublicKeyOrPrompt")}async signEvent(e){return await this.enable(),this.execute("signEventOrPrompt",{event:e})}async getRelays(){return await this.enable(),this.execute("getRelays")}execute(e,t){return new Promise(((a,r)=>{window.postMessage({application:"LBE",prompt:!0,action:`nostr/${e}`,scope:"nostr",args:t},"*"),window.addEventListener("message",(function e(t){t.data&&t.data.response&&"LBE"===t.data.application&&"nostr"===t.data.scope&&(t.data.data.error?r(new Error(t.data.data.error)):a(t.data.data.data),window.removeEventListener("message",e))}))}))}}class t{constructor(e){this.provider=e}async encrypt(e,t){return await this.provider.enable(),this.provider.execute("encryptOrPrompt",{peer:e,plaintext:t})}async decrypt(e,t){return await this.provider.enable(),this.provider.execute("decryptOrPrompt",{peer:e,ciphertext:t})}}document&&(window.nostr=new e)})();